<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>mathjax2mobiï¼šMathJax HTMLã‚’é›»å­æ›¸ç±ã«å¤‰æ›</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>mathjax2mobiï¼šMathJax HTMLã‚’é›»å­æ›¸ç±ã«å¤‰æ› | Zhiwei Li</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="mathjax2mobiï¼šMathJax HTMLã‚’é›»å­æ›¸ç±ã«å¤‰æ›" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ja" />
<meta name="description" content="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦" />
<meta property="og:description" content="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦" />
<link rel="canonical" href="https://lzwjava.github.io/feynman-ja" />
<meta property="og:url" content="https://lzwjava.github.io/feynman-ja" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-15T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="mathjax2mobiï¼šMathJax HTMLã‚’é›»å­æ›¸ç±ã«å¤‰æ›" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2021-03-15T00:00:00+08:00","datePublished":"2021-03-15T00:00:00+08:00","description":"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦","headline":"mathjax2mobiï¼šMathJax HTMLã‚’é›»å­æ›¸ç±ã«å¤‰æ›","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/feynman-ja"},"url":"https://lzwjava.github.io/feynman-ja"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og2.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og2.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       mathjax2mobiï¼šMathJax HTMLã‚’é›»å­æ›¸ç±ã«å¤‰æ› | ã‚ªãƒªã‚¸ãƒŠãƒ«ã€AIç¿»è¨³
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ja/2021-03-15-feynman-ja.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsja2021-03-15-feynman-ja.md</span> -->
      

      <!-- <span>2021-03-15-feynman-ja.md</span> -->

      
        

        
          
          <a href="#" class="button">2021.03</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/feynman-en" >English</option>
        <option value="/feynman-zh" >ä¸­æ–‡</option>
        <option value="/feynman-ja" selected>æ—¥æœ¬èª</option>
        <option value="/feynman-es" >EspaÃ±ol</option>
        <option value="/feynman-hi" >à¤¹à¤¿à¤‚à¤¦à¥€</option>
        <option value="/feynman-fr" >FranÃ§ais</option>
        <option value="/feynman-de" >Deutsch</option>
        <option value="/feynman-ar" >Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="/feynman-hant" >ç¹é«”ä¸­æ–‡</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</h3>

<p>ã¾ãšã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¦‚è¦ã«ã¤ã„ã¦ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚</p>

<p><img src="assets/images/feynman/feynman_online.jpg" alt="feynman_online" /></p>

<p><img src="/assets/images/feynman/change.JPG" alt="å¤‰åŒ–" style="zoom:50%;" /></p>

<p><img src="assets/images/feynman/latex.JPG" alt="latex" /></p>

<p><img src="assets/images/feynman/epub_black.JPG" alt="epub_black" /></p>

<p><img src="assets/images/feynman/epub_beautiful.JPG" alt="epub_beautiful" /></p>

<p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’çµ‚ãˆã¦ã€å°‘ã—å¬‰ã—ã„æ°—æŒã¡ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚“ãªè¨€è‘‰ã‚’æ›¸ãç•™ã‚ã¾ã—ãŸã€‚</p>

<p>ä¸€æ—¥ä¸­ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã€ã¤ã„ã«ç¾ã—ã„ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ³ç‰©ç†å­¦è¬›ç¾©ã®é›»å­æ›¸ç±ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ãŸï¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ³ç‰©ç†å­¦è¬›ç¾©ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€<code class="language-plaintext highlighter-rouge">latex</code>ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">latex</code>ã¯è«–æ–‡ã‚’æ›¸ãã®ã«ã‚ˆãä½¿ã‚ã‚Œã€æ•°å­¦ã®æ•°å¼ã‚’ç¾ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å…¬é–‹ã™ã‚‹éš›ã«ã¯ã€<code class="language-plaintext highlighter-rouge">mathjax</code>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯<code class="language-plaintext highlighter-rouge">latex</code>ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’<code class="language-plaintext highlighter-rouge">html</code>ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã—ã€å¤šãã®<code class="language-plaintext highlighter-rouge">div</code>ã‚„<code class="language-plaintext highlighter-rouge">span</code>ã‚¿ã‚°ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã—ã‹ã—ã€é›»å­æ›¸ç±ã§ã¯ã“ã®æ–¹æ³•ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãã“ã§ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã€<code class="language-plaintext highlighter-rouge">mathjax</code>ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é€†ã«ã—ã¦ã€ãã‚Œã‚’<code class="language-plaintext highlighter-rouge">svg</code>ç”»åƒã«ç½®ãæ›ãˆã‚‹ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ€ã„ã¤ãã¾ã—ãŸã€‚ã„ãã¤ã‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ä¸€ã¤ã¯ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«å¤šãã®<code class="language-plaintext highlighter-rouge">latex</code>ã‚«ã‚¹ã‚¿ãƒ ãƒã‚¯ãƒ­ãŒã‚ã‚Šã€ãã‚Œã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã“ã¨ã§ã™ã€‚ã‚‚ã†ä¸€ã¤ã¯ã€å¤šãã®<code class="language-plaintext highlighter-rouge">svg</code>ã‚’åŸ‹ã‚è¾¼ã‚€ã¨å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã§ã™ã€‚å˜ä¸€ã®<code class="language-plaintext highlighter-rouge">svg</code>ã§ã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€å¤šæ•°ã®å ´åˆã«ã¯å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚ã“ã‚Œã¯ãŠãã‚‰ããƒ–ãƒ©ã‚¦ã‚¶ã¨<code class="language-plaintext highlighter-rouge">svg</code>ã®å¥‡å¦™ãªãƒã‚°ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã®å ´åˆã€<code class="language-plaintext highlighter-rouge">svg</code>ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã€<code class="language-plaintext highlighter-rouge">img</code>ã‚¿ã‚°ã§èª­ã¿è¾¼ã‚€ã“ã¨ã§è§£æ±ºã§ãã¾ã™ã€‚æ•°å¼ã«ã¯2ç¨®é¡ã‚ã‚Šã€ä¸€ã¤ã¯ãƒ†ã‚­ã‚¹ãƒˆä¸­ã®æ•°å¼ã€ã‚‚ã†ä¸€ã¤ã¯å˜ç‹¬ã®è¡Œã®æ•°å¼ã§ã™ã€‚ã“ã†ã—ã¦ã€æœ€çµ‚çš„ã«ç¾ã—ã„é›»å­æ›¸ç±ãŒå®Œæˆã—ã¾ã—ãŸï¼</p>

<h3 id="èª¿æŸ»ã—ãŸè³‡æ–™">èª¿æŸ»ã—ãŸè³‡æ–™</h3>

<p>ã“ã“ã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®éç¨‹ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸè³‡æ–™ã‚’è¨˜éŒ²ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã‚ã‚‹ãŸã‚ã€å­¦ç”Ÿã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€²ã‚ã‚‹éš›ã®ä½“é¨“ã‚’å¤§ã¾ã‹ã«ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>

<p><img src="assets/images/feynman/s1.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s2.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s3.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s4.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s5.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s6.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s7.PNG" alt="" /></p>

<p><img src="assets/images/feynman/s8.PNG" alt="" /></p>

<h3 id="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹å§‹">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹å§‹</h3>

<p>ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ³ç‰©ç†å­¦è¬›ç¾©ã¯ã€ã™ã§ã«ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€èª°ã§ã‚‚èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚ç§ã¯ãã‚Œã‚’<code class="language-plaintext highlighter-rouge">Kindle</code>ã§èª­ã¿ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€å¤šãã®æ•°å­¦å¼ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€å…ƒã®åŸç¨¿ã¯ãŠãã‚‰ã<code class="language-plaintext highlighter-rouge">latex</code>ã§ä½œæˆã•ã‚ŒãŸã‚‚ã®ã§ã—ã‚‡ã†ã€‚ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ä¸Šã§<code class="language-plaintext highlighter-rouge">latex</code>å½¢å¼ã®å†…å®¹ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€<code class="language-plaintext highlighter-rouge">mathjax</code>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p>ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªä¾‹ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax_Preview"</span> <span class="na">style=</span><span class="s">"color: inherit; display: none;"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"MathJax_Display"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax MathJax_FullWidth"</span> <span class="na">id=</span><span class="s">"MathJax-Element-10-Frame"</span> <span class="na">tabindex=</span><span class="s">"0"</span> <span class="na">style=</span><span class="s">""</span><span class="nt">&gt;</span>
              <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"mi"</span> <span class="na">id=</span><span class="s">"MathJax-Span-159"</span> <span class="na">style=</span><span class="s">"font-family: MathJax_Math-italic;"</span><span class="nt">&gt;</span>d<span class="nt">&lt;span</span> <span class="na">style=</span><span class="s">"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;/span&gt;</span>  
    <span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"math/tex; mode=display"</span> <span class="na">id=</span><span class="s">"MathJax-Element-10"</span><span class="nt">&gt;</span><span class="err">\</span><span class="nx">begin</span><span class="p">{</span><span class="nx">equation</span><span class="p">}</span>
<span class="err">\</span><span class="nx">label</span><span class="p">{</span><span class="nl">Eq</span><span class="p">:</span><span class="nl">I</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="nx">dT</span><span class="o">/</span><span class="nx">dt</span> <span class="o">=</span> <span class="nx">Fv</span><span class="p">.</span>
<span class="err">\</span><span class="nx">end</span><span class="p">{</span><span class="nx">equation</span><span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€MathJaxã‚’ä½¿ç”¨ã—ã¦æ•°å¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®HTMLã¨LaTeXã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚æ•°å¼ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š</p>

<p>[
\begin{equation}
\label{Eq:I:13:3}
\frac{dT}{dt} = Fv.
\end{equation}
]</p>

<p>ã“ã®æ•°å¼ã¯ã€æ™‚é–“ã«å¯¾ã™ã‚‹æ¸©åº¦ã®å¤‰åŒ–ç‡ï¼ˆ( \frac{dT}{dt} )ï¼‰ãŒåŠ›ï¼ˆ( F )ï¼‰ã¨é€Ÿåº¦ï¼ˆ( v )ï¼‰ã®ç©ã«ç­‰ã—ã„ã“ã¨ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚</p>

<p>ä»¥ä¸‹ã¯æŠœç²‹ã—ãŸ<code class="language-plaintext highlighter-rouge">html</code>ã‚³ãƒ¼ãƒ‰ã®ä¸€éƒ¨ã§ã™ã€‚ã“ã®<code class="language-plaintext highlighter-rouge">html</code>ã‚³ãƒ¼ãƒ‰ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ã€<code class="language-plaintext highlighter-rouge">script</code>ã‚¿ã‚°ã®ä¸‹ã«<code class="language-plaintext highlighter-rouge">latex</code>ã®ãƒ†ã‚­ã‚¹ãƒˆãŒãã®ã¾ã¾è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">mathjax</code>ã¯ã“ã‚Œã‚’å¤šãã®<code class="language-plaintext highlighter-rouge">span</code>ã«å¤‰æ›ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>

<p>ç¾åœ¨ã€ç§ãŸã¡ã«ã¯ä¸€ã¤ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€<code class="language-plaintext highlighter-rouge">mathjax</code>ã®è¡¨ç¤ºæ–¹æ³•ã‚’<code class="language-plaintext highlighter-rouge">svg</code>ç”»åƒã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã™ã€‚</p>

<p>GitHub ã§ <code class="language-plaintext highlighter-rouge">tuxu/latex2svg</code> ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">latex2svg</span> <span class="kn">import</span> <span class="n">latex2svg</span>
<span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">\( e^{i \pi} + 1 = 0 \)</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">depth</span><span class="sh">'</span><span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<p>å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸãŒã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    raise RuntimeError<span class="o">(</span><span class="s1">'latexãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'</span><span class="o">)</span>
RuntimeError: latexãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
</code></pre></div></div>

<p>ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># LaTeXã‚’å®Ÿè¡Œã—ã¦DVIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">shlex</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">latex_cmd</span><span class="sh">'</span><span class="p">]</span><span class="o">+</span><span class="sh">'</span><span class="s"> code.tex</span><span class="sh">'</span><span class="p">),</span>
                             <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span>
                             <span class="n">cwd</span><span class="o">=</span><span class="n">working_directory</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">.</span><span class="nf">check_returncode</span><span class="p">()</span>
    <span class="k">except</span> <span class="nb">FileNotFoundError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">RuntimeError</span><span class="p">(</span><span class="sh">'</span><span class="s">latexãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>ã“ã‚Œã‚‚<code class="language-plaintext highlighter-rouge">latex</code>ã‚³ãƒãƒ³ãƒ‰ã«ä¾å­˜ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> mactex
<span class="o">==&gt;</span> æ³¨æ„äº‹é …
MacTex CLIãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã¯ã€BashãŠã‚ˆã³Zshãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™:
  <span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>/usr/libexec/path_helper<span class="si">)</span><span class="s2">"</span>
<span class="o">==&gt;</span> http://mirror.ctan.org/systems/mac/mactex/mactex-20200407.pkg ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­
<span class="o">==&gt;</span> https://mirrors.aliyun.com/CTAN/systems/mac/mactex/mactex-20200407.pkg ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­
<span class="c">######################################################################## 100.0%</span>
ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ãŒæº€ãŸã•ã‚Œã¦ã„ã¾ã™ã€‚
<span class="o">==&gt;</span> Cask mactex ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­
<span class="o">==&gt;</span> mactex ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿè¡Œä¸­<span class="p">;</span> ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚
installer: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¯ MacTeX ã§ã™
installer: é¸æŠå¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ« <span class="s1">'/private/tmp/choices20210315-4643-5884ro.xml'</span> ãŒé©ç”¨ã•ã‚Œã¾ã—ãŸ
installer: ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ / ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­
installer: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æˆåŠŸã—ã¾ã—ãŸã€‚
ğŸº  mactex ã¯æ­£å¸¸ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã—ãŸï¼
</code></pre></div></div>

<p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒæˆåŠŸã—ã¾ã—ãŸã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% latex
This is pdfTeX, Version 3.14159265-2.6-1.40.21 <span class="o">(</span>TeX Live 2020<span class="o">)</span> <span class="o">(</span>preloaded <span class="nv">format</span><span class="o">=</span>latex<span class="o">)</span>
 restricted <span class="se">\w</span>rite18 enabled.
<span class="k">**</span>
</code></pre></div></div>

<p>ã“ã®å‡ºåŠ›ã¯ã€LaTeXãŒä½¿ç”¨ã—ã¦ã„ã‚‹pdfTeXã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€TeX Live 2020ã«å«ã¾ã‚Œã‚‹pdfTeXã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³3.14159265-2.6-1.40.21ãŒä½¿ç”¨ã•ã‚Œã¦ãŠã‚Šã€<code class="language-plaintext highlighter-rouge">\write18</code>ãŒåˆ¶é™ä»˜ãã§æœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">\( e^{i \pi} + 1 = 0 \)</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">depth</span><span class="sh">'</span><span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€LaTeXå½¢å¼ã®æ•°å¼ <code class="language-plaintext highlighter-rouge">\( e^{i \pi} + 1 = 0 \)</code> ã‚’SVGç”»åƒã«å¤‰æ›ã—ã€ãã®çµæœã®æ·±ã•ï¼ˆ<code class="language-plaintext highlighter-rouge">depth</code>ï¼‰ã¨SVGãƒ‡ãƒ¼ã‚¿ï¼ˆ<code class="language-plaintext highlighter-rouge">svg</code>ï¼‰ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">svg</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">1.svg</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span>
<span class="n">svg</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
<span class="n">svg</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">svg</code>ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<p>ãã“ã§ã€<code class="language-plaintext highlighter-rouge">mathjax</code>ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹<code class="language-plaintext highlighter-rouge">latex</code>ãƒ†ã‚­ã‚¹ãƒˆã‚’ã™ã¹ã¦ç”Ÿæˆã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">from</span> <span class="n">latex2svg</span> <span class="kn">import</span> <span class="n">latex2svg</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html</span><span class="sh">'</span><span class="p">)</span>
<span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">soup</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mathjaxs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">math/tex</span><span class="sh">'</span><span class="p">})</span>
<span class="k">for</span> <span class="n">mathjax</span> <span class="ow">in</span> <span class="n">mathjaxs</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<p>æ®‹å¿µãªãŒã‚‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">raise</span> <span class="n">CalledProcessError</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">args</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span><span class="p">:</span> <span class="n">ã‚³ãƒãƒ³ãƒ‰</span> <span class="sh">'</span><span class="s">[</span><span class="sh">'</span><span class="n">latex</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="o">-</span><span class="n">interaction</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="n">nonstopmode</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="o">-</span><span class="n">halt</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">error</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="n">code</span><span class="p">.</span><span class="n">tex</span><span class="sh">'</span><span class="s">]</span><span class="sh">'</span> <span class="n">ãŒã‚¼ãƒ­ä»¥å¤–ã®çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</span> <span class="mi">1</span> <span class="n">ã‚’è¿”ã—ã¾ã—ãŸ</span><span class="err">ã€‚</span>
</code></pre></div></div>

<p>å…·ä½“çš„ã«ã©ã®å¼ãŒé–“é•ã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\tfrac</span><span class="p">{</span>1<span class="p">}{</span>2<span class="p">}</span>mv<span class="p">^</span>2
</code></pre></div></div>

<p>ã“ã®LaTeXã‚³ãƒ¼ãƒ‰ã¯ã€é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¡¨ã™å¼ã‚’åˆ†æ•°å½¢å¼ã§è¡¨ç¤ºã™ã‚‹ã‚‚ã®ã§ã™ã€‚<code class="language-plaintext highlighter-rouge">\tfrac</code>ã¯ã€åˆ†æ•°ã‚’å°ã•ãªã‚µã‚¤ã‚ºã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚ã“ã®å¼ã¯ã€è³ªé‡(m)ã¨é€Ÿåº¦(v)ã®2ä¹—ã«æ¯”ä¾‹ã™ã‚‹é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚</p>

<h2 id="latex">LaTeX</h2>

<p>LaTeXï¼ˆãƒ©ãƒ†ãƒƒã‚¯ã€ãƒ¬ã‚¤ãƒ†ãƒƒã‚¯ã€ãƒ©ãƒ†ãƒ•ï¼‰ã¯ã€æ–‡æ›¸ä½œæˆã‚·ã‚¹ãƒ†ãƒ ã®ä¸€ã¤ã§ã€ç‰¹ã«æ•°å¼ã‚„å­¦è¡“è«–æ–‡ã®ä½œæˆã«é©ã—ã¦ã„ã¾ã™ã€‚LaTeXã¯ã€ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã§æ–‡æ›¸ã‚’ä½œæˆã—ã€ãã‚Œã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã“ã¨ã§é«˜å“è³ªã®PDFã‚„ãã®ä»–ã®å½¢å¼ã®æ–‡æ›¸ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€LaTeXã®åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹ã§ã™ã€‚</p>

<h3 id="åŸºæœ¬çš„ãªlatexæ–‡æ›¸ã®ä¾‹">åŸºæœ¬çš„ãªLaTeXæ–‡æ›¸ã®ä¾‹</h3>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="p">{</span>article<span class="p">}</span>
<span class="k">\usepackage</span><span class="na">[utf8]</span><span class="p">{</span>inputenc<span class="p">}</span>

<span class="k">\title</span><span class="p">{</span>LaTeXã®åŸºæœ¬<span class="p">}</span>
<span class="k">\author</span><span class="p">{</span>è‘—è€…å<span class="p">}</span>
<span class="k">\date</span><span class="p">{</span><span class="k">\today</span><span class="p">}</span>

<span class="nt">\begin{document}</span>

<span class="k">\maketitle</span>

<span class="k">\section</span><span class="p">{</span>ã¯ã˜ã‚ã«<span class="p">}</span>
ã“ã‚Œã¯LaTeXã®åŸºæœ¬çš„ãªæ–‡æ›¸ã§ã™ã€‚LaTeXã‚’ä½¿ã†ã¨ã€æ•°å¼ã‚„è¡¨ã€å›³ã‚’ç°¡å˜ã«æŒ¿å…¥ã§ãã¾ã™ã€‚

<span class="k">\section</span><span class="p">{</span>æ•°å¼ã®ä¾‹<span class="p">}</span>
LaTeXã§ã¯ã€æ•°å¼ã‚’ç¾ã—ãè¡¨ç¤ºã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€äºŒæ¬¡æ–¹ç¨‹å¼ã®è§£ã¯æ¬¡ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã¾ã™ã€‚

<span class="p">\[</span><span class="nb">
x </span><span class="o">=</span><span class="nb"> </span><span class="nv">\frac</span><span class="p">{</span><span class="o">-</span><span class="nb">b </span><span class="nv">\pm</span><span class="nb"> </span><span class="nv">\sqrt</span><span class="p">{</span><span class="nb">b</span><span class="p">^</span><span class="m">2</span><span class="nb"> </span><span class="o">-</span><span class="nb"> </span><span class="m">4</span><span class="nb">ac</span><span class="p">}}{</span><span class="m">2</span><span class="nb">a</span><span class="p">}</span><span class="nb">
</span><span class="p">\]</span>

<span class="k">\section</span><span class="p">{</span>ãŠã‚ã‚Šã«<span class="p">}</span>
LaTeXã¯ã€å­¦è¡“æ–‡æ›¸ã‚„æŠ€è¡“æ–‡æ›¸ã®ä½œæˆã«éå¸¸ã«å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãœã²æ´»ç”¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

<span class="nt">\end{document}</span>
</code></pre></div></div>

<h3 id="ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹æ³•">ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹æ³•</h3>

<p>ä¸Šè¨˜ã®LaTeXæ–‡æ›¸ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<ol>
  <li>ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§<code class="language-plaintext highlighter-rouge">.tex</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ã¾ã™ã€‚</li>
  <li>
    <p>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¾ãŸã¯ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pdflatex example.tex
</code></pre></div>    </div>
  </li>
  <li>ã“ã‚Œã«ã‚ˆã‚Šã€<code class="language-plaintext highlighter-rouge">example.pdf</code>ã¨ã„ã†åå‰ã®PDFãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</li>
</ol>

<h3 id="å‚è€ƒè³‡æ–™">å‚è€ƒè³‡æ–™</h3>

<ul>
  <li><a href="https://www.latex-project.org/">LaTeXãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</a></li>
  <li><a href="https://www.overleaf.com/">Overleaf</a> - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³LaTeXã‚¨ãƒ‡ã‚£ã‚¿</li>
</ul>

<p>LaTeXã¯ã€åˆã‚ã¦ä½¿ã†äººã«ã¯å°‘ã—é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸€åº¦æ…£ã‚Œã‚‹ã¨ãã®å¼·åŠ›ãªæ©Ÿèƒ½ã‚’æ´»ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãœã²æŒ‘æˆ¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼</p>

<p><code class="language-plaintext highlighter-rouge">latex</code>ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="na">[12pt]</span><span class="p">{</span>article<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>lingmacros<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>tree-dvips<span class="p">}</span>
<span class="nt">\begin{document}</span>
</code></pre></div></div>

<p>\section*{ç§ã®è«–æ–‡ã«é–¢ã™ã‚‹ãƒ¡ãƒ¢}</p>

<p>ãƒˆãƒ”ãƒƒã‚¯åŒ–ã®ä¾‹ã‚’å«ã‚ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š</p>

<p>{\small
\enumsentence{æ–‡ä¸»èªã‹ã‚‰ã®ä¸»é¡ŒåŒ–ï¼š\ 
\shortex{7}{a John$_i$ [a &amp; kltukl &amp; [el &amp; 
  {\bf l-}oltoir &amp; er &amp; ngii$_i$ &amp; a Mary]]}
{ &amp; {\bf R-}clear &amp; {\sc comp} &amp; 
  {\bf IR}.{\sc 3s}-æ„›ã™ã‚‹   &amp; P &amp; å½¼ã‚’ &amp; }
{John, (ãã‚Œã¯) MaryãŒ(å½¼ã‚’)æ„›ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã ã€‚}}
}</p>

<p>\subsection*{ãƒˆãƒ”ãƒƒã‚¯åŒ–ã®æ‰±ã„æ–¹}</p>

<p>ç§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæœ¨æ§‹é€ ï¼ˆ\ex{1}ï¼‰ã‚’ä»®å®šã—ã¾ã™ã€‚</p>

<p>{\small
\enumsentence{A$â€™$ æŠ•å°„ã®æ§‹é€ :\ [2ex]
\begin{tabular}[t]{cccc}
    &amp; \node{i}{CP}\ [2ex]
    \node{ii}{Spec} &amp;   &amp;\node{iii}{C$â€™$}\ [2ex]
        &amp;\node{iv}{C} &amp; &amp; \node{v}{SAgrP}
\end{tabular}
\nodeconnect{i}{ii}
\nodeconnect{i}{iii}
\nodeconnect{iii}{iv}
\nodeconnect{iii}{v}
}
}</p>

<p>\subsection*{ãƒ ãƒ¼ãƒ‰}</p>

<p>è©±é¡ŒãŒã‚ã‚‹å ´åˆã‚„WHç§»å‹•ãŒã‚ã‚‹å ´åˆã«ã€ãƒ ãƒ¼ãƒ‰ãŒå¤‰åŒ–ã—ã¾ã™ã€‚éä¸»èªã®è©±é¡Œã‚„Compå†…ã®WHå¥ãŒã‚ã‚‹ã¨ãã®ãƒ ãƒ¼ãƒ‰ã¯\emph{éç¾å®Ÿå½¢}ï¼ˆIrrealisï¼‰ã§ã™ã€‚ä¸»èªã®è©±é¡Œã‚„WHå¥ãŒã‚ã‚‹ã¨ãã®ãƒ ãƒ¼ãƒ‰ã¯\emph{ç¾å®Ÿå½¢}ï¼ˆRealisï¼‰ã§ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\end{document}</span>
</code></pre></div></div>

<p>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§è¦‹ã¤ã‘ãŸ<code class="language-plaintext highlighter-rouge">latex</code>ã®ã‚µãƒ³ãƒ—ãƒ«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% latex code.tex
This is pdfTeX, Version 3.14159265-2.6-1.40.21 <span class="o">(</span>TeX Live 2020<span class="o">)</span> <span class="o">(</span>preloaded <span class="nv">format</span><span class="o">=</span>latex<span class="o">)</span>
 restricted <span class="se">\w</span>rite18 enabled.
entering extended mode
<span class="o">(</span>./code.tex
LaTeX2e &lt;2020-02-02&gt; patch level 5
L3 programming layer &lt;2020-03-06&gt;
<span class="o">(</span>/usr/local/texlive/2020/texmf-dist/tex/latex/base/article.cls
Document Class: article 2019/12/20 v1.4l Standard LaTeX document class
<span class="o">(</span>/usr/local/texlive/2020/texmf-dist/tex/latex/base/size12.clo<span class="o">))</span>
<span class="o">(</span>/usr/local/texlive/2020/texmf-dist/tex/latex/tree-dvips/lingmacros.sty<span class="o">)</span>
<span class="o">(</span>/usr/local/texlive/2020/texmf-dist/tex/latex/tree-dvips/tree-dvips.sty
tree-dvips version .91 of May 16, 1995
<span class="o">)</span> <span class="o">(</span>/usr/local/texlive/2020/texmf-dist/tex/latex/l3backend/l3backend-dvips.def<span class="o">)</span>
<span class="o">(</span>./code.aux<span class="o">)</span> <span class="o">[</span>1] <span class="o">(</span>./code.aux<span class="o">)</span> <span class="o">)</span>
Output written on code.dvi <span class="o">(</span>1 page, 3416 bytes<span class="o">)</span><span class="nb">.</span>
Transcript written on code.log.
</code></pre></div></div>

<p><img src="assets/images/feynman/latex.png" alt="latex" /></p>

<p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã®çµæœã‚’è¦‹æ¯”ã¹ã¦ã€ä½•ãŒå­¦ã¹ã‚‹ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{document}</span>
<span class="nt">\end{document}</span>
</code></pre></div></div>

<p>ã“ã®ã‚ˆã†ã«ã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\section*</span><span class="p">{</span>ç§ã®è«–æ–‡ã®ãŸã‚ã®ãƒ¡ãƒ¢<span class="p">}</span>
</code></pre></div></div>

<p>ã“ã‚Œã¯<code class="language-plaintext highlighter-rouge">section</code>ã®è¦‹å‡ºã—ã®å§‹ã¾ã‚Šã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\subsection*</span><span class="p">{</span>ãƒˆãƒ”ãƒƒã‚¯åŒ–ã®æ‰±ã„æ–¹<span class="p">}</span>
</code></pre></div></div>

<p>ã“ã‚Œã¯ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¡¨ã—ã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\shortex</span><span class="p">{</span>7<span class="p">}{</span>a John<span class="p">$_</span><span class="nb">i</span><span class="p">$</span> [a <span class="p">&amp;</span> kltukl <span class="p">&amp;</span> [el <span class="p">&amp;</span> 
  <span class="p">{</span><span class="k">\bf</span> l-<span class="p">}</span>oltoir <span class="p">&amp;</span> er <span class="p">&amp;</span> ngii<span class="p">$_</span><span class="nb">i</span><span class="p">$</span> <span class="p">&amp;</span> a Mary]]<span class="p">}</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æ§‹æ–‡è§£æã‚„è¨€èªå­¦ã®ç ”ç©¶ã§ä½¿ç”¨ã•ã‚Œã‚‹ä¾‹æ–‡ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€Johnã¨Maryã®é–¢ä¿‚ã‚’è¡¨ã™æ§‹é€ ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰å†…ã®è¨˜å·ã‚„ãƒ©ãƒ™ãƒ«ã¯ã€ç‰¹å®šã®æ–‡æ³•è¦å‰‡ã‚„é–¢ä¿‚ã‚’ç¤ºã™ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p><img src="assets/images/feynman/shortex.png" alt="shortex" /></p>

<p><code class="language-plaintext highlighter-rouge">$_i$</code> ã¯ä¸‹ä»˜ãæ–‡å­—ã‚’è¡¨ã™ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">{\bf l-}</code> ã¯å¤ªå­—ã‚’è¡¨ã™ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\enumsentence</span><span class="p">{</span>A<span class="p">$</span><span class="nb">'</span><span class="p">$</span> æŠ•å°„ã®æ§‹é€ :<span class="k">\\</span> [2ex]
<span class="nt">\begin{tabular}</span>[t]<span class="p">{</span>cccc<span class="p">}</span>
    <span class="p">&amp;</span> <span class="k">\node</span><span class="p">{</span>i<span class="p">}{</span>CP<span class="p">}</span><span class="k">\\</span> [2ex]
    <span class="k">\node</span><span class="p">{</span>ii<span class="p">}{</span>Spec<span class="p">}</span> <span class="p">&amp;</span>   <span class="p">&amp;</span><span class="k">\node</span><span class="p">{</span>iii<span class="p">}{</span>C<span class="p">$</span><span class="nb">'</span><span class="p">$}</span><span class="k">\\</span> [2ex]
        <span class="p">&amp;</span><span class="k">\node</span><span class="p">{</span>iv<span class="p">}{</span>C<span class="p">}</span> <span class="p">&amp;</span> <span class="p">&amp;</span> <span class="k">\node</span><span class="p">{</span>v<span class="p">}{</span>SAgrP<span class="p">}</span>
<span class="nt">\end{tabular}</span>
<span class="k">\nodeconnect</span><span class="p">{</span>i<span class="p">}{</span>ii<span class="p">}</span>
<span class="k">\nodeconnect</span><span class="p">{</span>i<span class="p">}{</span>iii<span class="p">}</span>
<span class="k">\nodeconnect</span><span class="p">{</span>iii<span class="p">}{</span>iv<span class="p">}</span>
<span class="k">\nodeconnect</span><span class="p">{</span>iii<span class="p">}{</span>v<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/feynman/node.png" alt="node" style="zoom:50%;" /></p>

<p><code class="language-plaintext highlighter-rouge">nodeconnect</code> ãŒæ¥ç¶šã‚’è¡¨ã™ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>

<h3 id="latex-ã‚’-svg-ã«å¤‰æ›ã™ã‚‹">LaTeX ã‚’ SVG ã«å¤‰æ›ã™ã‚‹</h3>

<p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¶šã‘ã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="na">[16pt]</span><span class="p">{</span>article<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsmath<span class="p">}</span>
<span class="nt">\begin{document}</span>
</code></pre></div></div>

<p>[\tfrac{1}{2}mv^2]</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\end{document}</span>
</code></pre></div></div>

<p><img src="/assets/images/feynman/frac.png" alt="frac" style="zoom:50%;" /></p>

<p>ã“ã‚Œã«ã‚ˆã‚Šã€æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰å†…ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„ã®ã¯ã€<code class="language-plaintext highlighter-rouge">\usepackage{amsmath}</code>ãŒè¿½åŠ ã•ã‚Œã¦ã„ãªã„ãŸã‚ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="na">[12pt,preview]</span><span class="p">{</span>standalone<span class="p">}</span>
</code></pre></div></div>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\usepackage</span><span class="na">[utf8x]</span><span class="p">{</span>inputenc<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsmath<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsfonts<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amssymb<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>newtxtext<span class="p">}</span>
<span class="k">\usepackage</span><span class="na">[libertine]</span><span class="p">{</span>newtxmath<span class="p">}</span>
</code></pre></div></div>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{document}</span>
<span class="nt">\begin{preview}</span>
<span class="k">\tfrac</span><span class="p">{</span>1<span class="p">}{</span>2<span class="p">}</span>mv<span class="p">^</span>2
<span class="nt">\end{preview}</span>
<span class="nt">\end{document}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span> <span class="nv">$ </span>ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚
&lt;æŒ¿å…¥ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ&gt;
                <span class="err">$</span>
l.12 <span class="se">\t</span>frac<span class="o">{</span>1<span class="o">}{</span>2<span class="o">}</span>
                 <span class="nb">mv</span>^2
</code></pre></div></div>

<p>ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚Œã°ã†ã¾ãã„ãã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">\[</span><span class="nv">\tfrac</span><span class="p">{</span><span class="m">1</span><span class="p">}{</span><span class="m">2</span><span class="p">}</span><span class="nb">mv</span><span class="p">^</span><span class="m">2</span><span class="p">\]</span>
</code></pre></div></div>

<p>ã“ã®LaTeXã‚³ãƒ¼ãƒ‰ã¯ã€é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¡¨ã™æ•°å¼ã‚’è¡¨ç¤ºã™ã‚‹ã‚‚ã®ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€è³ªé‡ ( m ) ã¨é€Ÿåº¦ ( v ) ã®ç‰©ä½“ã®é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¨ˆç®—ã™ã‚‹å¼ã§ã™ã€‚æ•°å¼ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š</p>

<p>[
\tfrac{1}{2}mv^2
]</p>

<p>ã“ã®å¼ã¯ã€ç‰©ä½“ã®é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒè³ªé‡ã¨é€Ÿåº¦ã®äºŒä¹—ã«æ¯”ä¾‹ã™ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã•ã¾ã–ã¾ãªè©¦è¡ŒéŒ¯èª¤ã‚’è¡Œã„ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">from</span> <span class="n">latex2svg</span> <span class="kn">import</span> <span class="n">latex2svg</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html</span><span class="sh">'</span><span class="p">)</span>
<span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">soup</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mathjaxs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">math/tex</span><span class="sh">'</span><span class="p">})</span>
<span class="k">for</span> <span class="n">mathjax</span> <span class="ow">in</span> <span class="n">mathjaxs</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">)</span>
    <span class="n">wrap</span> <span class="o">=</span> <span class="sh">'</span><span class="s">$</span><span class="sh">'</span> <span class="o">+</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span> <span class="o">+</span> <span class="sh">'</span><span class="s">$</span><span class="sh">'</span>
    <span class="c1"># if 'frac' in mathjax.string:
</span>    <span class="c1">#     wrap = '$' + mathjax.string + '$'
</span>    <span class="k">if</span> <span class="sh">'</span><span class="s">FLP</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="sh">'</span><span class="s">Fig</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">elif</span> <span class="sh">'</span><span class="s">eps</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="n">wrap</span><span class="p">)</span>
    <span class="c1"># print(out)
</span>    <span class="n">node</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">],</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">svg</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">mathjax</span><span class="p">.</span><span class="nf">insert_after</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>
    <span class="c1"># print(out['svg'])
</span>    <span class="c1"># break
</span>    <span class="c1"># mathjax.replaceWith(out['svg'])    
</span>    
    <span class="c1"># print(dir(mathjax))
</span>    <span class="c1"># break
</span>    
    <span class="c1"># out = latex2svg(wrap)    
</span>    <span class="c1"># print(out['svg'])
</span></code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€HTMLå†…ã®MathJaxå½¢å¼ã®æ•°å¼ã‚’SVGã«å¤‰æ›ã—ã¦æŒ¿å…¥ã™ã‚‹å‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã«æ—¥æœ¬èªã§èª¬æ˜ã—ã¾ã™ã€‚</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">soup.findAll('script', {'type': 'math/tex'})</code> ã§ã€HTMLå†…ã®MathJaxå½¢å¼ã®æ•°å¼ã‚’ã™ã¹ã¦å–å¾—ã—ã¾ã™ã€‚</li>
  <li>å„æ•°å¼ã«å¯¾ã—ã¦ã€ä»¥ä¸‹ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™ï¼š
    <ul>
      <li>æ•°å¼ã®æ–‡å­—åˆ—ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</li>
      <li>æ•°å¼ã®å‰å¾Œã« <code class="language-plaintext highlighter-rouge">$</code> ã‚’è¿½åŠ ã—ã¦ã€LaTeXå½¢å¼ã®æ•°å¼ã‚’ä½œæˆã—ã¾ã™ã€‚</li>
      <li>æ•°å¼ã«ç‰¹å®šã®æ–‡å­—åˆ—ï¼ˆâ€™FLPâ€™ã€â€™Figâ€™ã€â€™epsâ€™ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€ãã®æ•°å¼ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚</li>
      <li><code class="language-plaintext highlighter-rouge">latex2svg</code> é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€LaTeXå½¢å¼ã®æ•°å¼ã‚’SVGã«å¤‰æ›ã—ã¾ã™ã€‚</li>
      <li>å¤‰æ›ã•ã‚ŒãŸSVGã‚’BeautifulSoupã§è§£æã—ã€<code class="language-plaintext highlighter-rouge">svg</code> ã‚¿ã‚°ã‚’å–å¾—ã—ã¾ã™ã€‚</li>
      <li>å…ƒã®MathJaxæ•°å¼ã®å¾Œã«ã€å¤‰æ›ã•ã‚ŒãŸSVGã‚’æŒ¿å…¥ã—ã¾ã™ã€‚</li>
    </ul>
  </li>
</ol>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€MathJaxå½¢å¼ã®æ•°å¼ã‚’SVGã«å¤‰æ›ã—ã¦HTMLã«æŒ¿å…¥ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚ŒãŸéƒ¨åˆ†ã¯ã€ãƒ‡ãƒãƒƒã‚°ã‚„è¿½åŠ ã®å‡¦ç†ã‚’è¡Œã†ãŸã‚ã®ã‚‚ã®ã§ã€ç¾åœ¨ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># print(len(soup.contents))
</span>    
<span class="n">output_file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">out.html</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span>
<span class="n">output_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">soup</span><span class="p">.</span><span class="nf">prettify</span><span class="p">())</span>
<span class="n">output_file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
<span class="c1"># print(soup.contents)
</span></code></pre></div></div>

<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€BeautifulSoupã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ<code class="language-plaintext highlighter-rouge">soup</code>ã®å†…å®¹ã‚’æ•´å½¢ã—ã¦HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã™ã‚‹ã‚‚ã®ã§ã™ã€‚å„ã‚¹ãƒ†ãƒƒãƒ—ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">print(len(soup.contents))</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">soup.contents</code>ã¯ã€<code class="language-plaintext highlighter-rouge">soup</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç›´æ¥ã®å­è¦ç´ ã‚’ãƒªã‚¹ãƒˆã¨ã—ã¦è¿”ã—ã¾ã™ã€‚ã“ã®è¡Œã¯ãã®ãƒªã‚¹ãƒˆã®é•·ã•ï¼ˆè¦ç´ æ•°ï¼‰ã‚’å‡ºåŠ›ã—ã¾ã™ãŒã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã„ã‚‹ãŸã‚å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">output_file = open('out.html', 'w')</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">out.html</code>ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã§é–‹ãã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯æ–°è¦ä½œæˆã•ã‚Œã€å­˜åœ¨ã™ã‚‹å ´åˆã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">output_file.write(soup.prettify())</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">soup.prettify()</code>ã¯ã€<code class="language-plaintext highlighter-rouge">soup</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…å®¹ã‚’æ•´å½¢ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãªã©ã§è¦‹ã‚„ã™ãï¼‰ã—ãŸæ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®æ•´å½¢ã•ã‚ŒãŸHTMLã‚’<code class="language-plaintext highlighter-rouge">out.html</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">output_file.close()</code>
    <ul>
      <li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã€å¤‰æ›´ã‚’ä¿å­˜ã—ã¾ã™ã€‚</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">print(soup.contents)</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">soup.contents</code>ã®å†…å®¹ã‚’å‡ºåŠ›ã—ã¾ã™ãŒã€ã“ã¡ã‚‰ã‚‚ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã„ã‚‹ãŸã‚å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚</li>
    </ul>
  </li>
</ol>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€BeautifulSoupã§è§£æã—ãŸHTMLã‚’æ•´å½¢ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹éš›ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">\( e^{i \pi} + 1 = 0 \)</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">depth</span><span class="sh">'</span><span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># svg = open('1.svg', 'w')
# svg.write(out['svg'])
# svg.close()
</span></code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€Pythonã§SVGãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã‚€ãŸã‚ã®åŸºæœ¬çš„ãªæ“ä½œã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã«æ—¥æœ¬èªã§èª¬æ˜ã—ã¾ã™ã€‚</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">open('1.svg', 'w')</code>ï¼š<code class="language-plaintext highlighter-rouge">1.svg</code>ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ï¼ˆ<code class="language-plaintext highlighter-rouge">'w'</code>ï¼‰ã§é–‹ãã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯æ–°ã—ãä½œæˆã•ã‚Œã€å­˜åœ¨ã™ã‚‹å ´åˆã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">svg.write(out['svg'])</code>ï¼š<code class="language-plaintext highlighter-rouge">out['svg']</code>ã«å«ã¾ã‚Œã‚‹SVGãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">svg.close()</code>ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®å¤‰æ›´ãŒä¿å­˜ã•ã‚Œã€ãƒªã‚½ãƒ¼ã‚¹ãŒè§£æ”¾ã•ã‚Œã¾ã™ã€‚</p>
  </li>
</ol>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€SVGãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªæ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ãŒã€é€šå¸¸ã¯<code class="language-plaintext highlighter-rouge">with</code>ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•çš„ã«é–‰ã˜ã‚‰ã‚Œã‚‹ãŸã‚ã€ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">1.svg</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">svg</span><span class="p">:</span>
    <span class="n">svg</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
</code></pre></div></div>

<p>ã“ã®æ–¹æ³•ã‚’ä½¿ã†ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¯ãƒ­ãƒ¼ã‚ºã‚’æ˜ç¤ºçš„ã«è¡Œã†å¿…è¦ãŒãªãã€ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”ã«ãªã‚Šã¾ã™ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
ã“ã‚Œã‚‰ã¯ç§ãŒä½•ã‚’æ¢ã£ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚

```python
    if 'FLP' in mathjax.string:
        continue
    elif 'Fig' in mathjax.string:
        continue
    elif 'eps' in mathjax.string:
        continue
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€<code class="language-plaintext highlighter-rouge">mathjax.string</code>ã«ç‰¹å®šã®æ–‡å­—åˆ—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®æ¡ä»¶åˆ†å²ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€<code class="language-plaintext highlighter-rouge">'FLP'</code>ã€<code class="language-plaintext highlighter-rouge">'Fig'</code>ã€<code class="language-plaintext highlighter-rouge">'eps'</code>ã®ã„ãšã‚Œã‹ãŒ<code class="language-plaintext highlighter-rouge">mathjax.string</code>ã«å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€<code class="language-plaintext highlighter-rouge">continue</code>æ–‡ãŒå®Ÿè¡Œã•ã‚Œã€ãã®å¾Œã®å‡¦ç†ãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚</p>

<p>ã“ã“ã§ã€<code class="language-plaintext highlighter-rouge">latex</code>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«<code class="language-plaintext highlighter-rouge">FLP</code>ã€<code class="language-plaintext highlighter-rouge">Fig</code>ã€<code class="language-plaintext highlighter-rouge">eps</code>ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€å¤‰æ›ãƒ—ãƒ­ã‚»ã‚¹ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</p>

<p>ä¾‹ãˆã°ã€<code class="language-plaintext highlighter-rouge">HTML</code>ã«ã¯æ¬¡ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚Šã¾ã™ï¼š</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"math/tex"</span> <span class="na">id=</span><span class="s">"MathJax-Element-11"</span><span class="nt">&gt;</span><span class="err">\</span><span class="nx">FLPF</span><span class="err">\</span><span class="nx">cdot</span><span class="err">\</span><span class="nx">FLPv</span><span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€MathJaxã‚’ä½¿ç”¨ã—ã¦æ•°å¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®HTMLã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€ãƒ™ã‚¯ãƒˆãƒ« (\FLPF) ã¨ (\FLPv) ã®ãƒ‰ãƒƒãƒˆç©ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®éƒ¨åˆ†ã¯æ•°å¼ã®è¡¨ç¤ºã«é–¢ã‚ã‚‹ã‚‚ã®ã§ã€ç¿»è¨³ã®å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ã¾ã¾ä¿æŒã—ã¾ã™ã€‚</p>

<p>è§£æçµæœã‚’å–å¾—ï¼š</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\FLPF\cdot\FLPv</span>
</code></pre></div></div>

<p>ã“ã®LaTeXã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ™ã‚¯ãƒˆãƒ« (\FLPF) ã¨ãƒ™ã‚¯ãƒˆãƒ« (\FLPv) ã®ãƒ‰ãƒƒãƒˆç©ï¼ˆå†…ç©ï¼‰ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€(\FLPF) ã¨ (\FLPv) ã®å„æˆåˆ†ã‚’æ›ã‘åˆã‚ã›ãŸã‚‚ã®ã‚’è¶³ã—åˆã‚ã›ãŸå€¤ã§ã™ã€‚ã“ã®å¼ã¯ç‰©ç†å­¦ã‚„å·¥å­¦ãªã©ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹è¡¨ç¾ã§ã™ã€‚</p>

<p>ã‚³ãƒ¼ãƒ‰å†…ã§å¤‰æ›ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã¤ã¾ã‚Šã€<code class="language-plaintext highlighter-rouge">latex2svg.py</code>ãŒã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¾ã—ãŸã€‚ã“ã“ã§ã¯<code class="language-plaintext highlighter-rouge">latex</code>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ç”¨ã—ã¦å¤‰æ›ã‚’è¡Œã„ã¾ã™ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">code.tex</code>:</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="na">[12pt,preview]</span><span class="p">{</span>standalone<span class="p">}</span>
</code></pre></div></div>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\usepackage</span><span class="na">[utf8x]</span><span class="p">{</span>inputenc<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsmath<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsfonts<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amssymb<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>newtxtext<span class="p">}</span>
<span class="k">\usepackage</span><span class="na">[libertine]</span><span class="p">{</span>newtxmath<span class="p">}</span>
</code></pre></div></div>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{document}</span>
<span class="nt">\begin{preview}</span>
<span class="nt">\begin{equation}</span>
    <span class="k">\FLPF\cdot\FLPv</span>
<span class="nt">\end{equation}</span>
<span class="nt">\end{preview}</span>
<span class="nt">\end{document}</span>
</code></pre></div></div>

<p>ä¸Šè¨˜ã®LaTeXã‚³ãƒ¼ãƒ‰ã¯ã€æ•°å¼ç’°å¢ƒå†…ã§ãƒ™ã‚¯ãƒˆãƒ« (\FLPF) ã¨ (\FLPv) ã®ãƒ‰ãƒƒãƒˆç©ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ãã®ã¾ã¾æ—¥æœ¬èªã®æ–‡æ›¸ã«æŒ¿å…¥ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚‚ã—æ–‡è„ˆã«å¿œã˜ã¦èª¬æ˜ã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{document}</span>
<span class="nt">\begin{preview}</span>
<span class="nt">\begin{equation}</span>
    <span class="k">\FLPF\cdot\FLPv</span>  <span class="c">% ãƒ™ã‚¯ãƒˆãƒ« \(\FLPF\) ã¨ \(\FLPv\) ã®ãƒ‰ãƒƒãƒˆç©</span>
<span class="nt">\end{equation}</span>
<span class="nt">\end{preview}</span>
<span class="nt">\end{document}</span>
</code></pre></div></div>

<p>ã“ã®ã‚ˆã†ã«ã€æ•°å¼ã®æ„å‘³ã‚’æ—¥æœ¬èªã§ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã€æ–‡æ›¸ã®èª­è€…ãŒç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$latex</span> code.tex
<span class="o">!</span> æœªå®šç¾©ã®åˆ¶å¾¡ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã§ã™ã€‚
l.13     <span class="se">\F</span>LPF
              <span class="se">\c</span>dot<span class="se">\F</span>LPv
?
</code></pre></div></div>

<p>ã“ã‚Œã¯ä¸€ä½“ä½•ã®å•é¡Œãªã®ã‹ã€‚å¾Œã«ãªã£ã¦ã€<code class="language-plaintext highlighter-rouge">html</code>ã®ä¸­ã®ã“ã®ã‚³ãƒ¼ãƒ‰ã«æ°—ã¥ãã¾ã—ãŸã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/x-mathjax-config;executed=true"</span><span class="nt">&gt;</span>
      <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nc">Config</span><span class="p">({</span>
        <span class="na">TeX</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">Macros</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">FLPvec</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">boldsymbol{#1}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> 
            <span class="na">Figvec</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">mathbf{#1}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> 
            <span class="na">FLPC</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{C}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FLPF</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{F}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FLPa</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{a}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FLPb</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{b}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FLPr</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{r}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FLPs</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{s}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FLPv</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">FLPvec{v}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">ddt</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">frac{d#1}{d#2}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> 
            <span class="na">epsO</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">epsilon_0</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> 
            <span class="na">FigC</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="se">\\</span><span class="s2">Figvec{C}</span><span class="dl">"</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>ã“ã‚Œã¯ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨ãã«ã€<code class="language-plaintext highlighter-rouge">MathJax</code>ã«ãƒã‚¯ãƒ­ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ç§ãŸã¡ã®<code class="language-plaintext highlighter-rouge">latex</code>å¤‰æ›ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã‚‚ãã‚Œã‚‰ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="na">[12pt,preview]</span><span class="p">{</span>standalone<span class="p">}</span>
</code></pre></div></div>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\usepackage</span><span class="na">[utf8x]</span><span class="p">{</span>inputenc<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsmath<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amsfonts<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>amssymb<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>newtxtext<span class="p">}</span>
<span class="k">\usepackage</span><span class="na">[libertine]</span><span class="p">{</span>newtxmath<span class="p">}</span>
</code></pre></div></div>

<p>\newcommand{\FLPvec}[1]{\boldsymbol{#1}}
\newcommand{\Figvec}[1]{\mathbf{#1}}
\newcommand{\FLPC}{\FLPvec{C}}
\newcommand{\FLPF}{\FLPvec{F}}
\newcommand{\FLPa}{\FLPvec{a}}
\newcommand{\FLPb}{\FLPvec{a}}
\newcommand{\FLPr}{\FLPvec{r}}
\newcommand{\FLPs}{\FLPvec{s}}
\newcommand{\FLPv}{\FLPvec{v}}
\newcommand{\ddt}[2]{\frac{d#1}{d#2}}
\newcommand{\epsO}{\epsilon_0}
\newcommand{\FigC}{\Figvec{C}}
\begin{document}
\begin{preview}
\begin{equation}
    \FLPF\cdot\FLPv
\end{equation}
\end{preview}
\end{document}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€LaTeXã®æ•°å¼ç’°å¢ƒã§ãƒ™ã‚¯ãƒˆãƒ«è¡¨è¨˜ã‚’è¡Œã†ãŸã‚ã®ãƒã‚¯ãƒ­å®šç¾©ã¨ã€ãã®ãƒã‚¯ãƒ­ã‚’ä½¿ç”¨ã—ãŸæ•°å¼ã®ä¾‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¡¨ã™ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ `\FLPvec` ã¨ `\Figvec` ã‚’å®šç¾©ã—ã€ãã‚Œã‚‰ã‚’ä½¿ç”¨ã—ã¦åŠ›ãƒ™ã‚¯ãƒˆãƒ« `\FLPF` ã¨é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ« `\FLPv` ã®å†…ç©ã‚’è¡¨ã™æ•°å¼ã‚’è¨˜è¿°ã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã§æ­£è§£ã§ã™ã€‚

![fv1](assets/images/feynman/fv1.png)

### ã‚³ãƒ¼ãƒ‰ã®åˆ†æ

æœ€å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```python
import subprocess
from bs4 import BeautifulSoup
from latex2svg import latex2svg
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
    <span class="n">previews</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">class</span><span class="sh">'</span><span class="p">:</span> <span class="n">cls</span><span class="p">})</span>
    <span class="k">for</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">previews</span><span class="p">:</span>
        <span class="n">preview</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>
        
<span class="k">def</span> <span class="nf">clean_script</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
    <span class="n">scripts</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">scripts</span><span class="p">:</span>
        <span class="n">s</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æŒ‡å®šã•ã‚ŒãŸHTMLè¦ç´ ã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">clean_mathjax</code>é–¢æ•°ã¯ã€æŒ‡å®šã•ã‚ŒãŸã‚¯ãƒ©ã‚¹åã‚’æŒã¤ç‰¹å®šã®è¦ç´ ã‚’å‰Šé™¤ã—ã€<code class="language-plaintext highlighter-rouge">clean_script</code>é–¢æ•°ã¯ã€ã™ã¹ã¦ã®<code class="language-plaintext highlighter-rouge">&lt;script&gt;</code>ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">wrap_latex</span><span class="p">(</span><span class="n">mathjax</span><span class="p">,</span> <span class="n">equation</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
    <span class="n">wrap</span> <span class="o">=</span> <span class="sh">''</span>
    <span class="k">if</span> <span class="n">equation</span><span class="p">:</span>
        <span class="n">wrap</span> <span class="o">=</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">wrap</span> <span class="o">=</span> <span class="sh">'</span><span class="s">$</span><span class="sh">'</span> <span class="o">+</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span> <span class="o">+</span> <span class="sh">'</span><span class="s">$</span><span class="sh">'</span>
    <span class="n">wrap</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sh">'</span><span class="s">label</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">tag</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrap</span>
 
<span class="k">def</span> <span class="nf">wrap_svg</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">equation</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">equation</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">&lt;div style=</span><span class="sh">"</span><span class="s">text-align:center;</span><span class="sh">"</span><span class="s">&gt;&lt;/div&gt;</span><span class="sh">'</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">p</span><span class="p">.</span><span class="n">div</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span><span class="p">.</span><span class="n">div</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">svg</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">to_svg</span><span class="p">(</span><span class="n">mathjaxs</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">equation</span><span class="p">:</span>
        <span class="n">svg_prefix</span> <span class="o">=</span> <span class="sh">'</span><span class="s">eq_</span><span class="sh">'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">svg_prefix</span> <span class="o">=</span> <span class="sh">'</span><span class="s">in_</span><span class="sh">'</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">mathjax</span> <span class="ow">in</span> <span class="n">mathjaxs</span><span class="p">:</span>     
        <span class="nf">print</span><span class="p">(</span><span class="n">mathjax</span><span class="p">.</span><span class="n">string</span><span class="p">)</span>
        <span class="n">wrap</span> <span class="o">=</span> <span class="nf">wrap_latex</span><span class="p">(</span><span class="n">mathjax</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="n">equation</span><span class="p">)</span>   
        <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="n">wrap</span><span class="p">)</span>   
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span>      
            
        <span class="n">f</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">svgs/</span><span class="si">{</span><span class="n">svg_prefix</span><span class="si">}{</span><span class="n">i</span><span class="si">}</span><span class="s">.svg</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="sh">'</span><span class="s">svg</span><span class="sh">'</span><span class="p">])</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
        
        <span class="n">node</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="sh">'</span><span class="s">&lt;img&gt;</span><span class="sh">'</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">img</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">img</span><span class="p">.</span><span class="n">attrs</span><span class="p">[</span><span class="sh">'</span><span class="s">src</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">'</span><span class="s">./svgs/</span><span class="si">{</span><span class="n">svg_prefix</span><span class="si">}{</span><span class="n">i</span><span class="si">}</span><span class="s">.svg</span><span class="sh">'</span>
        <span class="n">img</span><span class="p">.</span><span class="n">attrs</span><span class="p">[</span><span class="sh">'</span><span class="s">style</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">vertical-align: middle; margin: 0.5em 0;</span><span class="sh">'</span>
        
        <span class="n">p</span> <span class="o">=</span> <span class="nf">wrap_svg</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">equation</span><span class="p">)</span>
        <span class="n">mathjax</span><span class="p">.</span><span class="nf">insert_after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span><span class="mi">1</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>    
    <span class="nb">file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
    
    <span class="n">soup</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="sh">'</span><span class="s">span</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">MathJax</span><span class="sh">'</span><span class="p">)</span>
    <span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="sh">'</span><span class="s">div</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">MathJax_Display</span><span class="sh">'</span><span class="p">)</span>
    <span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="sh">'</span><span class="s">span</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">MathJax_Preview</span><span class="sh">'</span><span class="p">)</span>
    
    <span class="n">mathjaxs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">math/tex</span><span class="sh">'</span><span class="p">})</span>
    <span class="nf">to_svg</span><span class="p">(</span><span class="n">mathjaxs</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="n">mathjaxs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">math/tex; mode=display</span><span class="sh">'</span><span class="p">})</span>   
    <span class="nf">to_svg</span><span class="p">(</span><span class="n">mathjaxs</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    
    <span class="nf">clean_script</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
    
    <span class="n">output_file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">out.html</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">output_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">soup</span><span class="p">.</span><span class="nf">prettify</span><span class="p">())</span>
    <span class="n">output_file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>    
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€MathJaxã‚’ä½¿ç”¨ã—ã¦æ•°å¼ã‚’SVGã«å¤‰æ›ã—ã€ä¸è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‰Šé™¤ã—ã¦ã€æœ€çµ‚çš„ã«ã‚¯ãƒªãƒ¼ãƒ³ãªHTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚</p>

<p>main()</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
é›»å­æ›¸ç±å…¨ä½“ã‚’å¤‰æ›ã—ãŸã„å ´åˆã€ã¾ãš1ãƒšãƒ¼ã‚¸ã§è©¦ã—ã¦ã¿ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```python
    file = open('The Feynman Lectures on Physics Vol. I Ch. 13_ Work and Potential Energy (A).html')
    content = file.read()
</code></pre></div></div>

<p>ã“ã“ã§ã¯ã€ãƒšãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚</p>

<p><code class="language-plaintext highlighter-rouge">MathJax</code>ã¯å¤šãã®<code class="language-plaintext highlighter-rouge">div</code>ã¨<code class="language-plaintext highlighter-rouge">span</code>ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ä¾‹ãˆã°ã€<code class="language-plaintext highlighter-rouge">T+U=const</code>ã¨ã„ã†å¼ã‚’MathJaxã¯ã“ã®ã‚ˆã†ã«ç”Ÿæˆã—ã¾ã™ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax"</span><span class="nt">&gt;</span>T<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax"</span><span class="nt">&gt;</span>+<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax"</span><span class="nt">&gt;</span>U<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax"</span><span class="nt">&gt;</span>=<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"MathJax"</span><span class="nt">&gt;</span>const<span class="nt">&lt;/span&gt;</span>
</code></pre></div></div>

<p>ã“ã®HTMLã‚³ãƒ¼ãƒ‰ã¯ã€MathJaxã‚’ä½¿ç”¨ã—ã¦æ•°å¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€<code class="language-plaintext highlighter-rouge">T + U = const</code> ã¨ã„ã†æ•°å¼ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚å„æ–‡å­—ã‚„è¨˜å·ã¯<code class="language-plaintext highlighter-rouge">&lt;span&gt;</code>ã‚¿ã‚°ã§å›²ã¾ã‚Œã€<code class="language-plaintext highlighter-rouge">class="MathJax"</code>ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€MathJaxãŒã“ã‚Œã‚‰ã®è¦ç´ ã‚’æ•°å¼ã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚</p>

<p>ã“ã‚Œã‚‰ã¯éå¸¸ã«ç…©ã‚ã—ãã€ç§ãŸã¡ã®ãƒ†ã‚­ã‚¹ãƒˆã«ã‚‚å½±éŸ¿ã‚’ä¸ãˆã¾ã™ã€‚ã™ã§ã«<code class="language-plaintext highlighter-rouge">svg</code>ãŒã‚ã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã¯ä¸è¦ã§ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
    <span class="n">previews</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">class</span><span class="sh">'</span><span class="p">:</span> <span class="n">cls</span><span class="p">})</span>
    <span class="k">for</span> <span class="n">preview</span> <span class="ow">in</span> <span class="n">previews</span><span class="p">:</span>
        <span class="n">preview</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æŒ‡å®šã•ã‚ŒãŸHTMLè¦ç´ ï¼ˆ<code class="language-plaintext highlighter-rouge">name</code>ï¼‰ã¨ã‚¯ãƒ©ã‚¹ï¼ˆ<code class="language-plaintext highlighter-rouge">cls</code>ï¼‰ã‚’æŒã¤ã™ã¹ã¦ã®è¦ç´ ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°ã§ã™ã€‚<code class="language-plaintext highlighter-rouge">soup</code>ã¯BeautifulSoupã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è§£æã—ãŸçµæœã‚’è¡¨ã—ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">findAll</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€æŒ‡å®šã•ã‚ŒãŸæ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã™ã¹ã¦ã®è¦ç´ ã‚’è¦‹ã¤ã‘ã€<code class="language-plaintext highlighter-rouge">decompose</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ãã‚Œã‚‰ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="sh">'</span><span class="s">span</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">MathJax</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="sh">'</span><span class="s">div</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">MathJax_Display</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">clean_mathjax</span><span class="p">(</span><span class="n">soup</span><span class="p">,</span> <span class="sh">'</span><span class="s">span</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">MathJax_Preview</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>ãã‚Œã‚‰ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">mathjaxs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">math/tex</span><span class="sh">'</span><span class="p">})</span>
    <span class="nf">to_svg</span><span class="p">(</span><span class="n">mathjaxs</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="n">mathjaxs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">,</span> <span class="p">{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">math/tex; mode=display</span><span class="sh">'</span><span class="p">})</span>   
    <span class="nf">to_svg</span><span class="p">(</span><span class="n">mathjaxs</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã®MathJaxã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ¤œç´¢ã—ã€ãã‚Œã‚‰ã‚’SVGå½¢å¼ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚æœ€åˆã®éƒ¨åˆ†ã§ã¯ã€<code class="language-plaintext highlighter-rouge">math/tex</code>ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ¤œç´¢ã—ã€<code class="language-plaintext highlighter-rouge">to_svg</code>é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ•°å¼ã¨ã—ã¦SVGã«å¤‰æ›ã—ã¾ã™ã€‚æ¬¡ã®éƒ¨åˆ†ã§ã¯ã€<code class="language-plaintext highlighter-rouge">math/tex; mode=display</code>ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ¤œç´¢ã—ã€ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤æ•°å¼ã¨ã—ã¦SVGã«å¤‰æ›ã—ã¾ã™ã€‚</p>

<p>ã“ã“ã§ã¯2ç¨®é¡ã®<code class="language-plaintext highlighter-rouge">script</code>ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code>m(dv/dt)=F
</code></pre></div></div>

<p>ã“ã®å¼ã¯ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³ã®ç¬¬äºŒæ³•å‰‡ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚è³ªé‡ ( m ) ã®ç‰©ä½“ã«åŠ› ( F ) ãŒä½œç”¨ã™ã‚‹ã¨ã€ãã®ç‰©ä½“ã®é€Ÿåº¦ ( v ) ãŒæ™‚é–“ ( t ) ã«å¯¾ã—ã¦ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã“ã‚Œã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å½¢å¼ã§ã™ã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{equation}</span>
<span class="k">\underset</span><span class="p">{</span><span class="k">\text</span><span class="p">{</span>é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼<span class="p">}}{</span><span class="k">\tfrac</span><span class="p">{</span>1<span class="p">}{</span>2<span class="p">}</span>mv<span class="p">^</span>2<span class="p">}</span>+
<span class="k">\underset</span><span class="p">{</span><span class="k">\text</span><span class="p">{</span>ä½ç½®ã‚¨ãƒãƒ«ã‚®ãƒ¼<span class="p">}}{</span><span class="k">\vphantom</span><span class="p">{</span><span class="k">\tfrac</span><span class="p">{</span>1<span class="p">}{</span>2<span class="p">}}</span>mgh<span class="p">}</span>=<span class="k">\text</span><span class="p">{</span>ä¸€å®š<span class="p">}</span>,<span class="k">\notag</span>
</code></pre></div></div>

<p>ã“ã‚Œã¯æ®µè½å½¢å¼ã§ã™ã€‚</p>

<p>å½“æ™‚ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å½¢å¼ã§ã¯ã€å¤‰æ›ã™ã‚‹éš›ã«å¼ã®å·¦å³ã«<code class="language-plaintext highlighter-rouge">$</code>ã¾ãŸã¯<code class="language-plaintext highlighter-rouge">[]</code>ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚ãã†ã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{document}</span>
<span class="nt">\begin{preview}</span>
<span class="k">\tfrac</span><span class="p">{</span>1<span class="p">}{</span>2<span class="p">}</span>mv<span class="p">^</span>2
<span class="nt">\end{preview}</span>
<span class="nt">\end{document}</span>
</code></pre></div></div>

<p>ã“ã®LaTeXã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã«æ•°å¼ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¡¨ã™æ•°å¼ (\tfrac{1}{2}mv^2) ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">!</span> <span class="nv">$ </span>ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚
&lt;æŒ¿å…¥ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ&gt;
                <span class="err">$</span>
l.26 <span class="se">\t</span>frac<span class="o">{</span>1<span class="o">}{</span>2<span class="o">}</span>
                 <span class="nb">mv</span>^2
</code></pre></div></div>

<p>ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{document}</span>
<span class="nt">\begin{preview}</span>
<span class="p">$</span><span class="nv">\tfrac</span><span class="p">{</span><span class="m">1</span><span class="p">}{</span><span class="m">2</span><span class="p">}</span><span class="nb">mv</span><span class="p">^</span><span class="m">2</span><span class="p">$</span>
<span class="nt">\end{preview}</span>
<span class="nt">\end{document}</span>
</code></pre></div></div>

<p>ã“ã®LaTeXã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã«æ•°å¼ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¡¨ã™æ•°å¼ $\tfrac{1}{2}mv^2$ ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã®æ•°å¼ã¯ã€è³ªé‡ $m$ ã¨é€Ÿåº¦ $v$ ã®äºŒä¹—ã«æ¯”ä¾‹ã™ã‚‹é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>

<p>æ¬¡ã«ã€<code class="language-plaintext highlighter-rouge">latex</code>ã‚’<code class="language-plaintext highlighter-rouge">svg</code>ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="n">equation</span><span class="p">:</span>
        <span class="n">svg_prefix</span> <span class="o">=</span> <span class="sh">'</span><span class="s">eq_</span><span class="sh">'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">svg_prefix</span> <span class="o">=</span> <span class="sh">'</span><span class="s">in_</span><span class="sh">'</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% tree svgs
svgs
â”œâ”€â”€ eq_0.svg
â”œâ”€â”€ eq_1.svg
â”œâ”€â”€ in_0.svg
</code></pre></div></div>

<p>ä¸Šè¨˜ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ã€<code class="language-plaintext highlighter-rouge">svgs</code>ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«3ã¤ã®SVGãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€<code class="language-plaintext highlighter-rouge">eq_0.svg</code>ã€<code class="language-plaintext highlighter-rouge">eq_1.svg</code>ã€<code class="language-plaintext highlighter-rouge">in_0.svg</code>ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p>ã“ã®ã‚ˆã†ã«ã—ã¦<code class="language-plaintext highlighter-rouge">svg</code>ã‚’ä¿å­˜ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">wrap_latex</span><span class="p">(</span><span class="n">mathjax</span><span class="p">,</span> <span class="n">equation</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
    <span class="n">wrap</span> <span class="o">=</span> <span class="sh">''</span>
    <span class="k">if</span> <span class="n">equation</span><span class="p">:</span>
        <span class="n">wrap</span> <span class="o">=</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">wrap</span> <span class="o">=</span> <span class="sh">'</span><span class="s">$</span><span class="sh">'</span> <span class="o">+</span> <span class="n">mathjax</span><span class="p">.</span><span class="n">string</span> <span class="o">+</span> <span class="sh">'</span><span class="s">$</span><span class="sh">'</span>
    <span class="n">wrap</span> <span class="o">=</span> <span class="n">wrap</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sh">'</span><span class="s">label</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">tag</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrap</span>
</code></pre></div></div>

<p>ã“ã®Pythoné–¢æ•° <code class="language-plaintext highlighter-rouge">wrap_latex</code> ã¯ã€MathJaxå½¢å¼ã®æ–‡å­—åˆ—ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚<code class="language-plaintext highlighter-rouge">equation</code> ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ <code class="language-plaintext highlighter-rouge">True</code> ã®å ´åˆã€æ•°å¼ç’°å¢ƒã¨ã—ã¦ãƒ©ãƒƒãƒ—ã•ã‚Œã€<code class="language-plaintext highlighter-rouge">False</code> ã®å ´åˆã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ•°å¼ã¨ã—ã¦ <code class="language-plaintext highlighter-rouge">$</code> ã§å›²ã¾ã‚Œã¾ã™ã€‚ã¾ãŸã€æ–‡å­—åˆ—å†…ã® <code class="language-plaintext highlighter-rouge">label</code> ã‚’ <code class="language-plaintext highlighter-rouge">tag</code> ã«ç½®æ›ã—ã¾ã™ã€‚</p>

<p>ã“ã“ã§<code class="language-plaintext highlighter-rouge">latex</code>ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã„ãã¤ã‹ã®èª¿æ•´ã‚’åŠ ãˆã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">label</code>ãŒ<code class="language-plaintext highlighter-rouge">tag</code>ã«å¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>

<p><img src="assets/images/feynman/tag.png" alt="ã‚¿ã‚°" /></p>

<p>å³å´ã®<code class="language-plaintext highlighter-rouge">(Eq:I:13:14)</code>ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚ã‚‚ã—<code class="language-plaintext highlighter-rouge">label</code>ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€è§£æãŒæˆåŠŸã—ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚ŒãŒ<code class="language-plaintext highlighter-rouge">(1)</code>ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ä¸€æ™‚çš„ã«<code class="language-plaintext highlighter-rouge">tag</code>ã‚’ä½¿ç”¨ã—ã¦è¡¨ç¾ã—ã¦ã„ã¾ã™ãŒã€è©³ç´°ã«ã¤ã„ã¦ã¯ã¾ã æ·±ãèª¿æŸ»ã—ã¦ã„ã¾ã›ã‚“ã€‚</p>

<p>æ¬¡ã«ã€<code class="language-plaintext highlighter-rouge">latex2svg.py</code>ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="nf">latex2svg</span><span class="p">(</span><span class="n">wrap</span><span class="p">)</span>   
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span>    
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€<code class="language-plaintext highlighter-rouge">latex2svg</code>é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦LaTeXå½¢å¼ã®æ•°å¼ã‚’SVGã«å¤‰æ›ã—ã€ãã®çµæœã‚’<code class="language-plaintext highlighter-rouge">out</code>å¤‰æ•°ã«æ ¼ç´ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã—ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ä¸­ã«<code class="language-plaintext highlighter-rouge">subprocess.CalledProcessError</code>ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãã®ã‚¨ãƒ©ãƒ¼ã‚’å†ã³ç™ºç”Ÿã•ã›ã¦å‡¦ç†ã‚’ä¸­æ–­ã—ã¾ã™ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">latex2svg.py</code>ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># LaTeXã‚’å®Ÿè¡Œã—ã¦DVIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">shlex</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">latex_cmd</span><span class="sh">'</span><span class="p">]</span><span class="o">+</span><span class="sh">'</span><span class="s"> code.tex</span><span class="sh">'</span><span class="p">),</span>
                             <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span>
                             <span class="n">cwd</span><span class="o">=</span><span class="n">working_directory</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">.</span><span class="nf">check_returncode</span><span class="p">()</span>
    <span class="k">except</span> <span class="nb">FileNotFoundError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">RuntimeError</span><span class="p">(</span><span class="sh">'</span><span class="s">latexãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>ã“ã“ã§ã¯<code class="language-plaintext highlighter-rouge">latex</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> % latex <span class="nt">--help</span>
ä½¿ç”¨æ³•: pdftex <span class="o">[</span>ã‚ªãƒ—ã‚·ãƒ§ãƒ³]... <span class="o">[</span>TEXNAME[.tex]] <span class="o">[</span>ã‚³ãƒãƒ³ãƒ‰]
   ã¾ãŸã¯: pdftex <span class="o">[</span>ã‚ªãƒ—ã‚·ãƒ§ãƒ³]... <span class="se">\F</span>IRST-LINE
   ã¾ãŸã¯: pdftex <span class="o">[</span>ã‚ªãƒ—ã‚·ãƒ§ãƒ³]... &amp;FMT ARGS
  TEXNAMEã«å¯¾ã—ã¦pdfTeXã‚’å®Ÿè¡Œã—ã€é€šå¸¸ã¯TEXNAME.pdfã‚’ä½œæˆã—ã¾ã™ã€‚
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">try</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">shlex</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">dvisvgm_cmd</span><span class="sh">'</span><span class="p">]</span><span class="o">+</span><span class="sh">'</span><span class="s"> code.dvi</span><span class="sh">'</span><span class="p">),</span>
                             <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span>
                             <span class="n">cwd</span><span class="o">=</span><span class="n">working_directory</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span>
        <span class="n">ret</span><span class="p">.</span><span class="nf">check_returncode</span><span class="p">()</span>
    <span class="k">except</span> <span class="nb">FileNotFoundError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">RuntimeError</span><span class="p">(</span><span class="sh">'</span><span class="s">dvisvgmãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>ã“ã“ã§ã¯<code class="language-plaintext highlighter-rouge">dvisvgm</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% dvisvgm
dvisvgm 2.9.1
</code></pre></div></div>

<p>ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€TeX/LaTeXã§ä½œæˆã•ã‚ŒãŸDVIãƒ•ã‚¡ã‚¤ãƒ«ã€ãŠã‚ˆã³EPSã‚„PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€XMLãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãƒ™ã‚¯ã‚¿ãƒ¼ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹å½¢å¼ã§ã‚ã‚‹SVGã«å¤‰æ›ã—ã¾ã™ã€‚</p>

<p>ä½¿ç”¨æ–¹æ³•: dvisvgm [ã‚ªãƒ—ã‚·ãƒ§ãƒ³] dvifile
       dvisvgm â€“eps [ã‚ªãƒ—ã‚·ãƒ§ãƒ³] epsfile
       dvisvgm â€“pdf [ã‚ªãƒ—ã‚·ãƒ§ãƒ³] pdffile</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
ä¸Šè¨˜ã®`latex`ã‚«ã‚¹ã‚¿ãƒ ãƒã‚¯ãƒ­ã¯ã©ã“ã«æ›¸ã‘ã°ã‚ˆã„ã®ã§ã—ã‚‡ã†ã‹ã€‚ã“ã“ã§`latex2svg.py`ã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚`default_preamble`ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

```python
default_preamble = r"""
\usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{newtxtext}
\usepackage[libertine]{newtxmath}
</code></pre></div></div>

<p>\newcommand{\FLPvec}[1]{\boldsymbol{#1}}
\newcommand{\Figvec}[1]{\mathbf{#1}}
\newcommand{\FLPC}{\FLPvec{C}}
\newcommand{\FLPF}{\FLPvec{F}}
\newcommand{\FLPa}{\FLPvec{a}}
\newcommand{\FLPb}{\FLPvec{a}}
\newcommand{\FLPr}{\FLPvec{r}}
\newcommand{\FLPs}{\FLPvec{s}}
\newcommand{\FLPv}{\FLPvec{v}}
\newcommand{\ddt}[2]{\frac{d#1}{d#2}}
\newcommand{\epsO}{\epsilon_0}
\newcommand{\FigC}{\Figvec{C}}
â€œâ€â€</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
å¤‰æ›ãŒæˆåŠŸã—ãŸã‚‰ã€ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚

```python
        f = open(f'svgs/{svg_prefix}{i}.svg', 'w')
        f.write(out['svg'])
        f.close()
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æŒ‡å®šã•ã‚ŒãŸãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åŸºã¥ã„ã¦SVGãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã€ãã‚Œã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹ã‚‚ã®ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€<code class="language-plaintext highlighter-rouge">svgs</code>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«<code class="language-plaintext highlighter-rouge">svg_prefix</code>ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹<code class="language-plaintext highlighter-rouge">i</code>ã‚’çµ„ã¿åˆã‚ã›ãŸåå‰ã®SVGãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€<code class="language-plaintext highlighter-rouge">out['svg']</code>ã«å«ã¾ã‚Œã‚‹SVGãƒ‡ãƒ¼ã‚¿ã‚’ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚“ã§ã„ã¾ã™ã€‚æœ€å¾Œã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’è§£æ”¾ã—ã¾ã™ã€‚</p>

<p>ç¶šã‘ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">node</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="sh">'</span><span class="s">&lt;img&gt;</span><span class="sh">'</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">img</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">img</span><span class="p">.</span><span class="n">attrs</span><span class="p">[</span><span class="sh">'</span><span class="s">src</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">'</span><span class="s">./svgs/</span><span class="si">{</span><span class="n">svg_prefix</span><span class="si">}{</span><span class="n">i</span><span class="si">}</span><span class="s">.svg</span><span class="sh">'</span>
        <span class="n">img</span><span class="p">.</span><span class="n">attrs</span><span class="p">[</span><span class="sh">'</span><span class="s">style</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">vertical-align: middle; margin: 0.5em 0;</span><span class="sh">'</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€BeautifulSoupã‚’ä½¿ç”¨ã—ã¦HTMLã®<code class="language-plaintext highlighter-rouge">&lt;img&gt;</code>ã‚¿ã‚°ã‚’ä½œæˆã—ã€ãã®å±æ€§ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€<code class="language-plaintext highlighter-rouge">src</code>å±æ€§ã«SVGãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’è¨­å®šã—ã€<code class="language-plaintext highlighter-rouge">style</code>å±æ€§ã«ç”»åƒã®è¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã“ã“ã§<code class="language-plaintext highlighter-rouge">img</code>ã‚¿ã‚°ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">wrap_svg</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">equation</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">equation</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">&lt;div style=</span><span class="sh">"</span><span class="s">text-align:center;</span><span class="sh">"</span><span class="s">&gt;&lt;/div&gt;</span><span class="sh">'</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="sh">"</span><span class="s">lxml</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">p</span><span class="p">.</span><span class="n">div</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span><span class="p">.</span><span class="n">div</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">svg</span>
      
<span class="n">p</span> <span class="o">=</span> <span class="nf">wrap_svg</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">equation</span><span class="p">)</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€SVGç”»åƒã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®é–¢æ•° <code class="language-plaintext highlighter-rouge">wrap_svg</code> ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">equation</code> ãŒ <code class="language-plaintext highlighter-rouge">True</code> ã®å ´åˆã€SVGç”»åƒã‚’ä¸­å¤®æƒãˆã® <code class="language-plaintext highlighter-rouge">div</code> ã‚¿ã‚°ã§å›²ã¿ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">equation</code> ãŒ <code class="language-plaintext highlighter-rouge">False</code> ã®å ´åˆã€SVGç”»åƒã‚’ãã®ã¾ã¾è¿”ã—ã¾ã™ã€‚æœ€å¾Œã«ã€<code class="language-plaintext highlighter-rouge">wrap_svg</code> é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã€<code class="language-plaintext highlighter-rouge">img</code> ã¨ <code class="language-plaintext highlighter-rouge">equation</code> ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã€çµæœã‚’ <code class="language-plaintext highlighter-rouge">p</code> ã«ä»£å…¥ã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã‚‚ã—å˜ä¸€ã®æ®µè½ã®<code class="language-plaintext highlighter-rouge">latex</code>ã§ã‚ã‚Œã°ã€<code class="language-plaintext highlighter-rouge">div</code>ã§å›²ã‚“ã§ä¸­å¤®æƒãˆã«ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mathjax</span><span class="p">.</span><span class="nf">insert_after</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€<code class="language-plaintext highlighter-rouge">p</code>è¦ç´ ã®å¾Œã«MathJaxã‚’æŒ¿å…¥ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€<code class="language-plaintext highlighter-rouge">p</code>è¦ç´ ã®ç›´å¾Œã«MathJaxã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„è¨­å®šã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>

<p>ã“ã“ã§ã¯ã€å…ƒã®<code class="language-plaintext highlighter-rouge">script</code>ã‚¿ã‚°ã®å¾Œã‚ã«<code class="language-plaintext highlighter-rouge">div</code>ã‚¿ã‚°ã‚„<code class="language-plaintext highlighter-rouge">img</code>ã‚¿ã‚°ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">clean_script</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
    <span class="n">scripts</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="nf">findAll</span><span class="p">(</span><span class="sh">'</span><span class="s">script</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">scripts</span><span class="p">:</span>
        <span class="n">s</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>    
        
<span class="nf">clean_script</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æŒ‡å®šã•ã‚ŒãŸBeautifulSoupã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ<code class="language-plaintext highlighter-rouge">soup</code>ã‹ã‚‰ã™ã¹ã¦ã®<code class="language-plaintext highlighter-rouge">&lt;script&gt;</code>ã‚¿ã‚°ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°<code class="language-plaintext highlighter-rouge">clean_script</code>ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">findAll('script')</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã™ã¹ã¦ã®<code class="language-plaintext highlighter-rouge">&lt;script&gt;</code>ã‚¿ã‚°ã‚’å–å¾—ã—ã€<code class="language-plaintext highlighter-rouge">decompose()</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§ãã‚Œãã‚Œã®ã‚¿ã‚°ã‚’åˆ†è§£ï¼ˆå‰Šé™¤ï¼‰ã—ã¦ã„ã¾ã™ã€‚æœ€å¾Œã«ã€ã“ã®é–¢æ•°ã‚’<code class="language-plaintext highlighter-rouge">soup</code>ã«å¯¾ã—ã¦å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã™ã¹ã¦ã®<code class="language-plaintext highlighter-rouge">latex</code>ã‚’<code class="language-plaintext highlighter-rouge">svg</code>ã«ç½®ãæ›ãˆãŸå¾Œã¯ã€<code class="language-plaintext highlighter-rouge">script</code>ã¯ä¸è¦ã«ãªã‚Šã¾ã™ã€‚ãã‚Œã‚‰ã‚’å‰Šé™¤ã—ã¦ã€å°‘ã—ã‚¹ãƒƒã‚­ãƒªã•ã›ã¾ã—ã‚‡ã†ã€‚</p>

<p>æœ€å¾Œã«ã€å¤‰æ›´ã‚’åŠ ãˆãŸ<code class="language-plaintext highlighter-rouge">html</code>å…¨ä½“ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">output_file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">out.html</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">output_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">soup</span><span class="p">.</span><span class="nf">prettify</span><span class="p">())</span>
    <span class="n">output_file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>    
</code></pre></div></div>

<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€<code class="language-plaintext highlighter-rouge">soup.prettify()</code>ã§æ•´å½¢ã•ã‚ŒãŸHTMLã‚’<code class="language-plaintext highlighter-rouge">out.html</code>ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€ã‚‚ã®ã§ã™ã€‚<code class="language-plaintext highlighter-rouge">open</code>é–¢æ•°ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã§é–‹ãã€<code class="language-plaintext highlighter-rouge">write</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§å†…å®¹ã‚’æ›¸ãè¾¼ã¿ã€æœ€å¾Œã«<code class="language-plaintext highlighter-rouge">close</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã¦ã„ã¾ã™ã€‚</p>

<p>æ¬¡ã«ã€<code class="language-plaintext highlighter-rouge">pandoc</code>ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€<code class="language-plaintext highlighter-rouge">epub</code>ã«å¤‰æ›ã—ã¾ã™ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pandoc <span class="nt">-s</span> <span class="nt">-r</span> html out.html <span class="nt">-o</span> feynman.epub
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€HTMLãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ<code class="language-plaintext highlighter-rouge">out.html</code>ï¼‰ã‚’EPUBå½¢å¼ï¼ˆ<code class="language-plaintext highlighter-rouge">feynman.epub</code>ï¼‰ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚<code class="language-plaintext highlighter-rouge">-s</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã€<code class="language-plaintext highlighter-rouge">-r html</code>ã¯å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãŒHTMLå½¢å¼ã§ã‚ã‚‹ã“ã¨ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>

<p>ã“ã‚Œã§é–‹ãã¨ã€ç¾ã—ã„é›»å­æ›¸ç±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p>ãªãœç›´æ¥<code class="language-plaintext highlighter-rouge">svg</code>ã‚¿ã‚°ã‚’åŸ‹ã‚è¾¼ã¾ãšã«ã€<code class="language-plaintext highlighter-rouge">img</code>ã‚’ä½¿ã£ã¦SVGã‚’èª­ã¿è¾¼ã‚€ã®ã§ã—ã‚‡ã†ã‹ã€‚ã¤ã¾ã‚Šã€ã“ã®ã‚ˆã†ã«æ›¸ãä»£ã‚ã‚Šã«ï¼š</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;&lt;/p&gt;</span>
<span class="nt">&lt;svg&gt;&lt;/svg&gt;</span>
<span class="nt">&lt;p&gt;&lt;/p&gt;</span>
</code></pre></div></div>

<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€HTMLæ–‡æ›¸å†…ã«ç©ºã®æ®µè½è¦ç´  (<code class="language-plaintext highlighter-rouge">&lt;p&gt;&lt;/p&gt;</code>) ã¨ç©ºã®SVGè¦ç´  (<code class="language-plaintext highlighter-rouge">&lt;svg&gt;&lt;/svg&gt;</code>) ã‚’é…ç½®ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€æœ€åˆã®æ®µè½è¦ç´ ã€ãã®å¾Œã«SVGè¦ç´ ã€ãã—ã¦æœ€å¾Œã«å†ã³æ®µè½è¦ç´ ãŒç¶šã„ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®è¦ç´ ã¯ç¾åœ¨ä½•ã‚‚å†…å®¹ã‚’æŒã£ã¦ã„ã¾ã›ã‚“ãŒã€ãã‚Œãã‚Œã®è¦ç´ ã«ãƒ†ã‚­ã‚¹ãƒˆã‚„ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<p>ã‚ã‚‹å¥‡å¦™ãª<code class="language-plaintext highlighter-rouge">ãƒã‚°</code>ãŒã‚ã‚Šã¾ã™ã€‚å¤šãã®<code class="language-plaintext highlighter-rouge">svg</code>ãŒã‚ã‚‹å ´åˆã€ã“ã®ã‚ˆã†ãªçŠ¶æ³ãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>

<p><img src="/assets/images/feynman/svg_p1.png" alt="svg_p1" style="zoom:40%;" /></p>

<p>å¾Œã§ã€<code class="language-plaintext highlighter-rouge">img</code>ã‚¿ã‚°ã‚’ä½¿ã£ã¦SVGã‚’èª­ã¿è¾¼ã‚€æ–¹æ³•ã§ã†ã¾ãã„ãã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ãªãœã“ã®ã‚ˆã†ãªç¾è±¡ãŒèµ·ã“ã‚‹ã®ã‹ã¯ç†è§£ã§ãã¾ã›ã‚“ã§ã—ãŸãŒã€å˜ä¸€ã®<code class="language-plaintext highlighter-rouge">svg</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–ã‚Šå‡ºã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã•ã›ã‚‹ã¨å•é¡Œãªãè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã©ã†ã‚„ã‚‰ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒå¤§é‡ã®<code class="language-plaintext highlighter-rouge">svg</code>ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<h3 id="æœ€å¾Œã«">æœ€å¾Œã«</h3>

<p><code class="language-plaintext highlighter-rouge">epub</code>ã‚’<code class="language-plaintext highlighter-rouge">mobi</code>ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€<code class="language-plaintext highlighter-rouge">Kindle</code>ã®å…¬å¼ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹<code class="language-plaintext highlighter-rouge">Kindle Previewer 3</code>ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ãŸã ã—ã€ã“ã“ã§æ‰±ã£ã¦ã„ã‚‹ã®ã¯1ç« ã®ã¿ã§ã™ã€‚</p>

<p>ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ã¯<a href="https://github.com/lzwjava/feynman-lectures-mobi">feynman-lectures-mobi@lzwjava</a>ã«ã‚ã‚Šã¾ã™ã€‚</p>

<p>ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦é›»å­æ›¸ç±ã«ã¾ã¨ã‚ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€å¾Œã»ã©èª¬æ˜ã—ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ³ç‰©ç†å­¦è¬›ç¾©ã®ä¸€ç« ã ã‘ã§ã‚‚ååˆ†ã«èª­ã¿å¿œãˆãŒã‚ã‚Šã¾ã™ã€‚ã•ã‚ã€Kindleã‚’æ‰‹ã«å–ã£ã¦èª­ã¿å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ja" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>