<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>العناوين العائمة وإدارة واجهة الشبكة</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>العناوين العائمة وإدارة واجهة الشبكة | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="العناوين العائمة وإدارة واجهة الشبكة" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ar" />
<meta name="description" content="جدول المحتويات" />
<meta property="og:description" content="جدول المحتويات" />
<link rel="canonical" href="https://lzwjava.github.io/network-ar" />
<meta property="og:url" content="https://lzwjava.github.io/network-ar" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-02-08T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="العناوين العائمة وإدارة واجهة الشبكة" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-02-08T00:00:00+08:00","datePublished":"2025-02-08T00:00:00+08:00","description":"جدول المحتويات","headline":"العناوين العائمة وإدارة واجهة الشبكة","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/network-ar"},"url":"https://lzwjava.github.io/network-ar"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=72c73ad611023e57f59e0e3c2097a768f4c41ae7">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=72c73ad611023e57f59e0e3c2097a768f4c41ae7" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       العناوين العائمة وإدارة واجهة الشبكة | أصلي، ترجم بواسطة AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ar/2025-02-08-network-ar.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsar2025-02-08-network-ar.md</span> -->
      

      <!-- <span>2025-02-08-network-ar.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.02</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/network-en" >English</option>
        <option value="/network-zh" >中文</option>
        <option value="/network-ja" >日本語</option>
        <option value="/network-es" >Español</option>
        <option value="/network-hi" >हिंदी</option>
        <option value="/network-fr" >Français</option>
        <option value="/network-de" >Deutsch</option>
        <option value="/network-ar" selected>العربية</option>
        <option value="/network-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="جدول-المحتويات">جدول المحتويات</h3>

<ol>
  <li><a href="#عناوين-ip-العائمة-في-hetzner-cloud">عناوين IP العائمة في Hetzner Cloud</a>
    <ul>
      <li>أوامر تكوين IP</li>
      <li>إعداد تكوين Netplan</li>
      <li>ملفات تكوين الشبكة</li>
    </ul>
  </li>
  <li><a href="#إدارة-واجهة-الشبكة">إدارة واجهة الشبكة</a>
    <ul>
      <li>حذف واجهات TUN</li>
      <li>مراقبة حالة الواجهة</li>
      <li>استكشاف أخطاء الشبكة وإصلاحها</li>
    </ul>
  </li>
  <li><a href="#ماسح-عناوين-ip-في-الشبكة-المحلية">ماسح عناوين IP في الشبكة المحلية</a>
    <ul>
      <li>نص برمجي لمسح الشبكة بلغة Python</li>
      <li>اكتشاف المضيفات باستخدام خيوط متعددة</li>
      <li>قدرات مسح المنافذ</li>
      <li>تحديد أجهزة الشبكة المحلية</li>
    </ul>
  </li>
  <li><a href="#تجاوز-العناوين-المحلية">تجاوز العناوين المحلية</a>
    <ul>
      <li>تكوين الوكيل للشبكات المحلية</li>
      <li>حسابات قناع الشبكة الفرعية</li>
      <li>تخطيط نطاق الشبكة</li>
    </ul>
  </li>
  <li><a href="#اتصال-ssh-باستخدام-عنوان-ipv6">اتصال SSH باستخدام عنوان IPv6</a>
    <ul>
      <li>تكوين SSH لـ IPv6</li>
      <li>إدارة ملف تكوين SSH</li>
      <li>إعداد أوامر الوكيل لأنواع العناوين المختلفة</li>
      <li>تحسين الأداء</li>
    </ul>
  </li>
  <li><a href="#تحسين-سرعة-الواي-فاي">تحسين سرعة الواي فاي</a>
    <ul>
      <li>أداء المودم القديم مقابل الجديد</li>
      <li>تكوينات إعداد الشبكة</li>
      <li>وضع الجسر السلكي مقابل اللاسلكي</li>
      <li>استكشاف الاختناقات في الشبكة</li>
    </ul>
  </li>
  <li><a href="#إعادة-تعيين-openwrt">إعادة تعيين OpenWrt</a>
    <ul>
      <li>طرق إعادة التعيين عبر واجهة الويب</li>
      <li>إجراءات إعادة التعيين عبر سطر الأوامر</li>
      <li>استعادة الإعدادات الافتراضية للمصنع</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="عناوين-ip-العائمة-في-hetzner-cloud">عناوين IP العائمة في Hetzner Cloud</h2>

<h3 id="ip">IP</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ip addr add 78.47.144.0 dev eth0
</code></pre></div></div>

<h3 id="netplan">Netplan</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> /etc/netplan/60-floating-ip.yaml
nano /etc/netplan/60-floating-ip.yaml
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">network</span><span class="pi">:</span>
   <span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
   <span class="na">renderer</span><span class="pi">:</span> <span class="s">networkd</span>
   <span class="na">ethernets</span><span class="pi">:</span>
     <span class="na">eth0</span><span class="pi">:</span>
       <span class="na">addresses</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">78.47.144.0/32</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>netplan apply
</code></pre></div></div>

<hr />

<h2 id="إدارة-واجهة-الشبكة">إدارة واجهة الشبكة</h2>

<p>حذف واجهة <code class="language-plaintext highlighter-rouge">tun</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ipconfig

outline-tun0: <span class="nv">flags</span><span class="o">=</span>4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500
        inet 10.0.85.1  netmask 255.255.255.255  destination 10.0.85.1
        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  <span class="o">(</span>UNSPEC<span class="o">)</span>
        RX packets 208  bytes 8712 <span class="o">(</span>8.7 KB<span class="o">)</span>
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 385  bytes 23322 <span class="o">(</span>23.3 KB<span class="o">)</span>
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link </span>delete outline-tun0
</code></pre></div></div>

<hr />

<h2 id="ماسح-عناوين-ip-في-الشبكة-المحلية">ماسح عناوين IP في الشبكة المحلية</h2>

<p>يقوم هذا النص البرمجي بلغة Python بمسح الشبكة المحلية بحثًا عن عناوين IP النشطة. يستخدم الأمر <code class="language-plaintext highlighter-rouge">ping</code> للتحقق مما إذا كان المضيف متاحًا ويستخدم الخيوط المتعددة لتسريع عملية المسح. يستخدم السيمافور لتحديد عدد الخيوط المتزامنة لمنع إرباك النظام. يستقبل النص البرمجي عنوان شبكة (مثل “192.168.1.0/24”) كمدخل ويطبع ما إذا كان كل عنوان IP في الشبكة نشطًا أو غير نشط.</p>

<p>يساعد هذا النص البرمجي في تحديد الأجهزة الموجودة على الشبكة، مثل جهاز التوجيه TP-LINK الذي يعمل في وضع الجسر السلكي، عن طريق مسح عناوين IP النشطة.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">ipaddress</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">MAX_THREADS</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># الحد الأقصى لعدد الخيوط المستخدمة
</span>
<span class="k">def</span> <span class="nf">is_host_up</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    يتحقق مما إذا كان المضيف نشطًا باستخدام ping أو telnet.
    إذا تم تحديد المنفذ، يستخدم telnet للتحقق مما إذا كان المنفذ مفتوحًا.
    وإلا، يستخدم ping.
    يعيد True إذا كان المضيف نشطًا، False خلاف ذلك.
    """</span>
    <span class="k">if</span> <span class="n">port</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="p">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
            <span class="n">sock</span><span class="p">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">sock</span><span class="p">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="n">socket</span><span class="p">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sock</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># -c 1: إرسال حزمة واحدة فقط
</span>            <span class="c1"># -W 1: الانتظار ثانية واحدة للاستجابة
</span>            <span class="n">subprocess</span><span class="p">.</span><span class="n">check_output</span><span class="p">([</span><span class="s">"ping"</span><span class="p">,</span> <span class="s">"-c"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"-W"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="n">host</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">scan_ip</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">up_ips</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    يقوم بمسح عنوان IP واحد ويطبع حالته.
    """</span>
    <span class="k">if</span> <span class="n">is_host_up</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">ip_str</span><span class="si">}</span><span class="s"> نشط"</span><span class="p">)</span>
        <span class="n">up_ips</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip_str</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">ip_str</span><span class="si">}</span><span class="s"> غير نشط"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">scan_network</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    يقوم بمسح الشبكة بحثًا عن المضيفات النشطة باستخدام الخيوط، مع تحديد الحد الأقصى لعدد الخيوط المتزامنة.
    """</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"جاري مسح الشبكة: </span><span class="si">{</span><span class="n">network</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">semaphore</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="n">MAX_THREADS</span><span class="p">)</span>  <span class="c1"># تحديد عدد الخيوط المتزامنة
</span>    <span class="n">up_ips</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">scan_ip_with_semaphore</span><span class="p">(</span><span class="n">ip_str</span><span class="p">):</span>
        <span class="n">semaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">scan_ip</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">up_ips</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">semaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">ipaddress</span><span class="p">.</span><span class="n">IPv4Network</span><span class="p">(</span><span class="n">network</span><span class="p">):</span>
        <span class="n">ip_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">scan_ip_with_semaphore</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,))</span>
        <span class="n">threads</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">thread</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">up_ips</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">"مسح الشبكة بحثًا عن المضيفات النشطة."</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"network"</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">'?'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">"192.168.1.0/24"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"الشبكة المراد مسحها (على سبيل المثال، 192.168.1.0/24)"</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"-p"</span><span class="p">,</span> <span class="s">"--port"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"المنفذ المراد التحقق منه (اختياري)"</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">network_to_scan</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">network</span>
    <span class="n">port_to_scan</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">port</span>

    <span class="n">up_ips</span> <span class="o">=</span> <span class="n">scan_network</span><span class="p">(</span><span class="n">network_to_scan</span><span class="p">,</span> <span class="n">port_to_scan</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">عناوين IP النشطة:"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">up_ips</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="تجاوز-العناوين-المحلية">تجاوز العناوين المحلية</h2>

<p>يحدد النص البرمجي عناوين IP النشطة. للتأكد من الاتصال الصحيح بالشبكة، تأكد من تكوين إعدادات الوكيل لتجاوز هذه العناوين المحلية.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.1,localhost,<span class="k">*</span>.local,timestamp.apple.com,sequoia.apple.com,seed-sequoia.siri.apple.com, 192.168.1.0/16
</code></pre></div></div>

<hr />

<h2 id="أقنعة-الشبكة-الفرعية">أقنعة الشبكة الفرعية</h2>

<p>عادةً ما يكون جهازي الثاني على العنوان 192.168.1.16.</p>

<p>لذلك يعمل باستخدام الأمر التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python scripts/ip_scan.py 192.168.1.0/27 <span class="nt">-p</span> 22
</code></pre></div></div>

<p>لأن 32 - 27 = 5، 2^5 = 32، لذا سيحاول من <code class="language-plaintext highlighter-rouge">192.168.1.0</code> إلى <code class="language-plaintext highlighter-rouge">192.168.1.31</code>.</p>

<p>لكنه لا يعمل عند استخدام <code class="language-plaintext highlighter-rouge">192.168.1.0/28</code>، لأن 2^4 = 16، لذا سيحاول من <code class="language-plaintext highlighter-rouge">192.168.1.0</code> إلى <code class="language-plaintext highlighter-rouge">192.168.1.15</code>، مما لا يشمل <code class="language-plaintext highlighter-rouge">192.168.1.16</code>.</p>

<hr />

<h2 id="اتصال-ssh-باستخدام-عنوان-ipv6">اتصال SSH باستخدام عنوان IPv6</h2>

<p>أحاول الاتصال بجهاز في Hetzner Cloud باستخدام IPv6. الأمر <code class="language-plaintext highlighter-rouge">ssh 2a01:4f8:c17:2000::/64</code> لا يعمل، لكن <code class="language-plaintext highlighter-rouge">ssh root@2a01:4f8:c17:2000::1</code> يعمل.</p>

<p>تم نسخ عنوان IPv6 من وحدة تحكم Hetzner Cloud.</p>

<p>يمكن تكوين ملف <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> لتطبيق قواعد وكيل مختلفة لعناوين IPv4 و IPv6. يسمح هذا الإعداد بتحديد أمر وكيل لعناوين IPv4 مع التعامل مع عناوين IPv6 بشكل مختلف.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
</code></pre></div></div>

<p>عند تشغيل <code class="language-plaintext highlighter-rouge">ssh root@192.168.1.3</code>، يظهرخرج التالي الذي يبين تطبيق عميل SSH لخيارات التكوين من ملف <code class="language-plaintext highlighter-rouge">~/.ssh/config</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debug1: قراءة بيانات التكوين /Users/lzwjava/.ssh/config
debug1: /Users/lzwjava/.ssh/config السطر 1: تطبيق الخيارات لـ 192.168.1.<span class="k">*</span>
debug1: /Users/lzwjava/.ssh/config السطر 5: تطبيق الخيارات لـ <span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
debug2: add_identity_file: تجاهل المفتاح المكرر ~/.ssh/id_rsa
debug1: /Users/lzwjava/.ssh/config السطر 10: تطبيق الخيارات لـ <span class="k">*</span>
debug2: add_identity_file: تجاهل المفتاح المكرر ~/.ssh/id_rsa
debug1: قراءة بيانات التكوين /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config السطر 21: include /etc/ssh/ssh_config.d/<span class="k">*</span> لم يطابق أي ملفات
debug1: /etc/ssh/ssh_config السطر 54: تطبيق الخيارات لـ <span class="k">*</span>
debug2: resolve_canonicalize: اسم المضيف 192.168.1.3 هو عنوان
debug3: توسيع UserKnownHostsFile <span class="s1">'~/.ssh/known_hosts'</span> -&gt; <span class="s1">'/Users/lzwjava/.ssh/known_hosts'</span>
debug3: توسيع UserKnownHostsFile <span class="s1">'~/.ssh/known_hosts2'</span> -&gt; <span class="s1">'/Users/lzwjava/.ssh/known_hosts2'</span>
debug1: لم يتم حل مزود المصادقة <span class="nv">$SSH_SK_PROVIDER</span>؛ تعطيل
debug3: channel_clear_timeouts: مسح الوقت المحدد
debug1: تنفيذ أمر الوكيل: <span class="nb">exec </span>corkscrew localhost 7890 192.168.1.3 22
</code></pre></div></div>

<p>كانت سرعة اتصال SSH بطيئة بشكل ملحوظ، لذلك عدت إلى التكوين البسيط التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
</code></pre></div></div>

<p>تنشأ المشكلة عند استخدام عناوين IPv6 مع التوجيه <code class="language-plaintext highlighter-rouge">ProxyCommand corkscrew localhost 7890 %h %p</code>، حيث قد لا يتعامل أمر الوكيل هذا مع عناوين IPv6 بشكل صحيح.</p>

<p>التكوين أعلاه لا يزال لا يعمل. ومع ذلك، يعمل التكوين التالي بشكل جيد:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="o">!</span>192.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
</code></pre></div></div>

<hr />

<h2 id="تحسين-سرعة-الواي-فاي">تحسين سرعة الواي فاي</h2>

<h3 id="مشاكل-المودم-القديم">مشاكل المودم القديم</h3>

<p>في منزل والدي، المودم قديم جدًا، ربما يبلغ عمره حوالي 10 سنوات. كان إعداد الشبكة الأولي كما يلي:</p>

<p>مودم -&gt; 3م لاسلكي -&gt; TP-Link AX3000 (وضع الجسر اللاسلكي) -&gt; 2م، جدار، لاسلكي -&gt; لابتوب</p>

<p>نتج عن ذلك سرعة تحميل منخفضة، حيث كانت نتيجة اختبار السرعة 10 ميجابت في الثانية فقط.</p>

<p>تم تحسين الإعداد باستخدام اتصال سلكي:</p>

<p>مودم -&gt; كابل 2م -&gt; TP-Link AX3000 (وضع الجسر السلكي) -&gt; 4م لاسلكي، جدار -&gt; لابتوب</p>

<p>تحسنت سرعة التحميل إلى 90 ميجابت في الثانية.</p>

<h3 id="أداء-المودم-الجديد">أداء المودم الجديد</h3>

<p>في منزلي، المودم جديد، وأداء جهاز التوجيه TP-Link جيد في وضع الجسر اللاسلكي. إعداد الشبكة كما يلي:</p>

<p>مودم -&gt; 4م لاسلكي -&gt; TP-Link AX3000 (وضع الجسر اللاسلكي) -&gt; 2م لاسلكي -&gt; لابتوب</p>

<p>جودة الشبكة جيدة.</p>

<h3 id="نصائح-استكشاف-الأخطاء">نصائح استكشاف الأخطاء</h3>

<p>لا يوجد حل واحد لتحسين سرعة الواي فاي. من الجيد استخدام كابل لاختبار كل جزء من الشبكة لتحديد الاختناقات. قارن بين السرعات عند استخدام اتصال سلكي مقابل لاسلكي. كما يمكنك تجربة توصيل الأجهزة مباشرة بكابل لمعرفة ما إذا كان ذلك يحسن الأداء.</p>

<hr />

<h2 id="إعادة-تعيين-openwrt">إعادة تعيين OpenWrt</h2>

<h3 id="إعادة-التعيين-عبر-واجهة-الويب">إعادة التعيين عبر واجهة الويب</h3>

<p>من المستحسن الاتصال بالموجه عبر كابل إيثرنت. بعد إعادة التعيين، سيعود اسم SSID للواي فاي إلى الإعدادات الافتراضية، والتي قد لا تكون كما تتوقع.</p>

<h3 id="إعادة-التعيين-عبر-سطر-الأوامر-ssh">إعادة التعيين عبر سطر الأوامر (SSH)</h3>

<p>يمكنك إعادة تعيين OpenWrt إلى الإعدادات الافتراضية باستخدام واجهة سطر الأوامر (SSH). إليك الطريقة:</p>

<ol>
  <li>اتصل بموجه OpenWrt عبر SSH.</li>
  <li>
    <p>قم بتشغيل الأمر التالي:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> root@OpenWrt:~# firstboot
 This will erase all settings and remove any installed packages. Are you sure? <span class="o">[</span>N/y]
 y
 /dev/ubi0_1 is mounted as /overlay, only erasing files
 root@OpenWrt:~# reboot
</code></pre></div>    </div>
  </li>
  <li>سيقوم الموجه بإعادة التشغيل بالإعدادات الافتراضية.</li>
</ol>

<p><strong>شرح الأوامر:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">firstboot</code>: هذا الأمر يبدأ عملية إعادة التعيين، حيث يمسح جميع التكوينات والحزم المثبتة.</li>
  <li><code class="language-plaintext highlighter-rouge">reboot</code>: هذا الأمر يعيد تشغيل الموجه، مطبقًا إعادة التعيين.</li>
</ul>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ar" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
