<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>全面指南：Spring 框架</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>全面指南：Spring 框架 | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="全面指南：Spring 框架" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="zh" />
<meta name="description" content="本博客文章由 ChatGPT-4o 协助编写。" />
<meta property="og:description" content="本博客文章由 ChatGPT-4o 协助编写。" />
<link rel="canonical" href="https://lzwjava.github.io/spring-zh" />
<meta property="og:url" content="https://lzwjava.github.io/spring-zh" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-02-07T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="全面指南：Spring 框架" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2023-02-07T00:00:00+08:00","datePublished":"2023-02-07T00:00:00+08:00","description":"本博客文章由 ChatGPT-4o 协助编写。","headline":"全面指南：Spring 框架","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/spring-zh"},"url":"https://lzwjava.github.io/spring-zh"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=bbfca15333302886a30d75fc44c688d2c162b51b">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=bbfca15333302886a30d75fc44c688d2c162b51b" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       全面指南：Spring 框架 | 原创，AI翻译
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/zh/2023-02-07-spring-zh.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postszh2023-02-07-spring-zh.md</span> -->
      

      <!-- <span>2023-02-07-spring-zh.md</span> -->

      
        

        
          
          <a href="#" class="button">2023.02</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/spring-en" >English</option>
        <option value="/spring-zh" selected>中文</option>
        <option value="/spring-ja" >日本語</option>
        <option value="/spring-es" >Español</option>
        <option value="/spring-hi" >हिंदी</option>
        <option value="/spring-fr" >Français</option>
        <option value="/spring-de" >Deutsch</option>
        <option value="/spring-ar" >العربية</option>
        <option value="/spring-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p><em>本博客文章由 ChatGPT-4o 协助编写。</em></p>

<hr />

<h3 id="目录">目录</h3>
<ul>
  <li><a href="#简介">简介</a></li>
  <li><a href="#spring-boot-框架">Spring Boot 框架</a>
    <ul>
      <li><a href="#spring-boot-入门">Spring Boot 入门</a></li>
      <li><a href="#依赖注入">依赖注入</a></li>
      <li><a href="#spring-中的事件">Spring 中的事件</a></li>
    </ul>
  </li>
  <li><a href="#spring-数据管理">Spring 数据管理</a>
    <ul>
      <li><a href="#spring-data-jdbc">Spring Data JDBC</a></li>
      <li><a href="#spring-data-jpa">Spring Data JPA</a></li>
      <li><a href="#spring-data-redis">Spring Data Redis</a></li>
      <li><a href="#事务和-dao-支持">事务和 DAO 支持</a></li>
      <li><a href="#jdbc-和-orm">JDBC 和 ORM</a></li>
    </ul>
  </li>
  <li><a href="#构建-restful-服务">构建 RESTful 服务</a>
    <ul>
      <li><a href="#spring-rest-客户端">Spring REST 客户端</a></li>
      <li><a href="#feignclient">FeignClient</a></li>
    </ul>
  </li>
  <li><a href="#邮件任务和调度">邮件、任务和调度</a>
    <ul>
      <li><a href="#邮件支持">邮件支持</a></li>
      <li><a href="#任务执行和调度">任务执行和调度</a></li>
    </ul>
  </li>
  <li><a href="#spring-测试">Spring 测试</a>
    <ul>
      <li><a href="#使用-mockito-进行测试">使用 Mockito 进行测试</a></li>
      <li><a href="#使用-mockmvc-进行测试">使用 MockMvc 进行测试</a></li>
    </ul>
  </li>
  <li><a href="#监控和管理">监控和管理</a>
    <ul>
      <li><a href="#spring-boot-actuator">Spring Boot Actuator</a></li>
    </ul>
  </li>
  <li><a href="#高级主题">高级主题</a>
    <ul>
      <li><a href="#spring-advice-api">Spring Advice API</a></li>
    </ul>
  </li>
  <li><a href="#结论">结论</a></li>
</ul>

<hr />

<h3 id="简介">简介</h3>

<p>Spring 是构建企业级 Java 应用程序的最受欢迎的框架之一。它为开发 Java 应用程序提供了全面的基础设施支持。在本博客中，我们将介绍 Spring 生态系统的各个方面，包括 Spring Boot、数据管理、构建 RESTful 服务、调度、测试以及高级功能如 Spring Advice API。</p>

<hr />

<h3 id="spring-boot-框架">Spring Boot 框架</h3>

<h4 id="spring-boot-入门">Spring Boot 入门</h4>

<p>Spring Boot 使创建独立的、生产级的 Spring 应用程序变得简单。它对 Spring 平台和第三方库采取了一种固执己见的看法，让你在最少配置的情况下快速上手。</p>

<ul>
  <li>初始设置：通过 Spring Initializr 创建一个新的 Spring Boot 项目。你可以选择所需的依赖项，如 Spring Web、Spring Data JPA 和 Spring Boot Actuator。</li>
  <li>注解：了解关键注解，如 <code class="language-plaintext highlighter-rouge">@SpringBootApplication</code>，它是 <code class="language-plaintext highlighter-rouge">@Configuration</code>、<code class="language-plaintext highlighter-rouge">@EnableAutoConfiguration</code> 和 <code class="language-plaintext highlighter-rouge">@ComponentScan</code> 的组合。</li>
  <li>嵌入式服务器：Spring Boot 使用嵌入式服务器（如 Tomcat、Jetty 或 Undertow）来运行应用程序，因此你不需要将 WAR 文件部署到外部服务器。</li>
</ul>

<h4 id="依赖注入">依赖注入</h4>

<p>依赖注入（DI）是 Spring 的核心原则之一。它允许创建松耦合的组件，使代码更具模块化且更易于测试。</p>

<ul>
  <li>
    <p>@Autowired：此注解用于自动注入依赖项。它可以应用于构造函数、字段和方法。Spring 的依赖注入功能会自动解析并注入协作的 bean。</p>

    <p>字段注入示例：</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
      
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>
      
    <span class="c1">// 业务方法</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <p>构造函数注入示例：</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
      
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">UserService</span><span class="o">(</span><span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userRepository</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">;</span>
    <span class="o">}</span>
      
    <span class="c1">// 业务方法</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <p>方法注入示例：</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
      
    <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserRepository</span><span class="o">(</span><span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userRepository</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">;</span>
    <span class="o">}</span>
      
    <span class="c1">// 业务方法</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>@Component, @Service, @Repository：这些是 <code class="language-plaintext highlighter-rouge">@Component</code> 注解的特化版本，用于指示一个类是 Spring bean。它们也作为注解类所扮演角色的提示。</p>

    <ul>
      <li>
        <p>@Component：这是任何 Spring 管理的组件的通用构造型。可以用来标记任何类为 Spring bean。</p>

        <p>示例：</p>
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmailValidator</span> <span class="o">{</span>
        
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 验证逻辑</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>@Service：这是 <code class="language-plaintext highlighter-rouge">@Component</code> 的特化版本，用于标记一个类为服务。通常用于服务层，在那里实现业务逻辑。</p>

        <p>示例：</p>
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
        
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">findUserById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">).</span><span class="na">orElse</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>@Repository：这也是 <code class="language-plaintext highlighter-rouge">@Component</code> 的特化版本。用于指示该类提供对象的存储、检索、搜索、更新和删除操作的机制。它还将持久性异常转换为 Spring 的 DataAccessException 层次结构。</p>

        <p>示例：</p>
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">// 自定义查询方法</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<p>这些注解使你的 Spring 配置更加简洁易读，并帮助 Spring 框架管理和连接不同 bean 之间的依赖关系。</p>

<h4 id="spring-中的事件">Spring 中的事件</h4>

<p>Spring 的事件机制允许你创建和监听应用程序事件。</p>

<ul>
  <li>自定义事件：通过扩展 <code class="language-plaintext highlighter-rouge">ApplicationEvent</code> 创建自定义事件。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyCustomEvent</span> <span class="kd">extends</span> <span class="nc">ApplicationEvent</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MyCustomEvent</span><span class="o">(</span><span class="nc">Object</span> <span class="n">source</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>事件监听器：使用 <code class="language-plaintext highlighter-rouge">@EventListener</code> 或实现 <code class="language-plaintext highlighter-rouge">ApplicationListener</code> 来处理事件。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyEventListener</span> <span class="o">{</span>

    <span class="nd">@EventListener</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMyCustomEvent</span><span class="o">(</span><span class="nc">MyCustomEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"接收到 Spring 自定义事件 - "</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>发布事件：使用 <code class="language-plaintext highlighter-rouge">ApplicationEventPublisher</code> 发布事件。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyEventPublisher</span> <span class="o">{</span>
      
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">ApplicationEventPublisher</span> <span class="n">applicationEventPublisher</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">publishCustomEvent</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"发布自定义事件。 "</span><span class="o">);</span>
        <span class="nc">MyCustomEvent</span> <span class="n">customEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyCustomEvent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
        <span class="n">applicationEventPublisher</span><span class="o">.</span><span class="na">publishEvent</span><span class="o">(</span><span class="n">customEvent</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="spring-数据管理">Spring 数据管理</h3>

<h4 id="spring-data-jdbc">Spring Data JDBC</h4>

<p>Spring Data JDBC 提供简单有效的 JDBC 访问。</p>

<ul>
  <li>Repositories：定义仓库以执行 CRUD 操作。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>查询：使用 <code class="language-plaintext highlighter-rouge">@Query</code> 注解定义自定义查询。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT * FROM users WHERE username = :username"</span><span class="o">)</span>
<span class="nc">User</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="spring-data-jpa">Spring Data JPA</h4>

<p>Spring Data JPA 使实现基于 JPA 的仓库变得容易。</p>

<ul>
  <li>实体映射：使用 <code class="language-plaintext highlighter-rouge">@Entity</code> 定义实体并将它们映射到数据库表。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>
    <span class="c1">// getters 和 setters</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>Repositories：通过扩展 <code class="language-plaintext highlighter-rouge">JpaRepository</code> 创建仓库接口。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>查询方法：使用查询方法执行数据库操作。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="spring-data-redis">Spring Data Redis</h4>

<p>Spring Data Redis 提供了 Redis 数据访问的基础设施。</p>

<ul>
  <li>RedisTemplate：使用 <code class="language-plaintext highlighter-rouge">RedisTemplate</code> 与 Redis 交互。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">().</span><span class="na">set</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">find</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>Repositories：使用 <code class="language-plaintext highlighter-rouge">@Repository</code> 创建 Redis 仓库。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">RedisRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">RedisEntity</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="事务和-dao-支持">事务和 DAO 支持</h4>

<p>Spring 简化了事务和 DAO（数据访问对象）支持的管理。</p>

<ul>
  <li>事务管理：使用 <code class="language-plaintext highlighter-rouge">@Transactional</code> 管理事务。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>DAO 模式：实现 DAO 模式以分离持久性逻辑。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDao</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">findById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">queryForObject</span><span class="o">(</span><span class="s">"SELECT * FROM users WHERE id = ?"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="n">id</span><span class="o">},</span> <span class="k">new</span> <span class="nc">UserRowMapper</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="jdbc-和-orm">JDBC 和 ORM</h4>

<p>Spring 提供了全面的 JDBC 和 ORM（对象关系映射）支持。</p>

<ul>
  <li>JdbcTemplate：使用 <code class="language-plaintext highlighter-rouge">JdbcTemplate</code> 简化 JDBC 操作。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="s">"SELECT * FROM users"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">UserRowMapper</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>Hibernate：将 Hibernate 与 Spring 集成以提供 ORM 支持。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>
    <span class="c1">// getters 和 setters</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="构建-restful-服务">构建 RESTful 服务</h3>

<h4 id="spring-rest-客户端">Spring REST 客户端</h4>

<p>Spring 使构建 RESTful 客户端变得简单。</p>

<ul>
  <li>RestTemplate：使用 <code class="language-plaintext highlighter-rouge">RestTemplate</code> 发起 HTTP 请求。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">RestTemplate</span> <span class="n">restTemplate</span><span class="o">;</span>

<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUserInfo</span><span class="o">(</span><span class="nc">String</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="s">"https://api.example.com/users/"</span> <span class="o">+</span> <span class="n">userId</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>WebClient：使用反应式 <code class="language-plaintext highlighter-rouge">WebClient</code> 进行非阻塞请求。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">WebClient</span><span class="o">.</span><span class="na">Builder</span> <span class="n">webClientBuilder</span><span class="o">;</span>

<span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getUserInfo</span><span class="o">(</span><span class="nc">String</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">webClientBuilder</span><span class="o">.</span><span class="na">build</span><span class="o">()</span>
            <span class="o">.</span><span class="na">get</span><span class="o">()</span>
            <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"https://api.example.com/users/"</span> <span class="o">+</span> <span class="n">userId</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="feignclient">FeignClient</h4>

<p>Feign 是一个声明式的 Web 服务客户端。</p>

<ul>
  <li>设置：将 Feign 添加到项目中，并创建带有 <code class="language-plaintext highlighter-rouge">@FeignClient</code> 注解的接口。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@FeignClient</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user-service"</span><span class="o">,</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.example.com"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserServiceClient</span> <span class="o">{</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/users/{id}"</span><span class="o">)</span>
    <span class="nc">String</span> <span class="nf">getUserInfo</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">userId</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>配置：使用拦截器和错误解码器自定义 Feign 客户端。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">RequestInterceptor</span> <span class="nf">requestInterceptor</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">requestTemplate</span> <span class="o">-&gt;</span> <span class="n">requestTemplate</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer token"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="邮件任务和调度">邮件、任务和调度</h3>

<h4 id="邮件支持">邮件支持</h4>

<p>Spring 提供发送邮件的支持。</p>

<ul>
  <li>JavaMailSender：使用 <code class="language-plaintext highlighter-rouge">JavaMailSender</code> 发送邮件。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">JavaMailSender</span> <span class="n">mailSender</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">to</span><span class="o">,</span> <span class="nc">String</span> <span class="n">subject</span><span class="o">,</span> <span class="nc">String</span> <span class="n">body</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">SimpleMailMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleMailMessage</span><span class="o">();</span>
    <span class="n">message</span><span class="o">.</span><span class="na">setTo</span><span class="o">(</span><span class="n">to</span><span class="o">);</span>
    <span class="n">message</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">subject</span><span class="o">);</span>
    <span class="n">message</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
    <span class="n">mailSender</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>MimeMessage：创建带有附件和 HTML 内容的富邮件。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">JavaMailSender</span> <span class="n">mailSender</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendRichEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">to</span><span class="o">,</span> <span class="nc">String</span> <span class="n">subject</span><span class="o">,</span> <span class="nc">String</span> <span class="n">body</span><span class="o">,</span> <span class="nc">File</span> <span class="n">attachment</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">MessagingException</span> <span class="o">{</span>
    <span class="nc">MimeMessage</span> <span class="n">message</span> <span class="o">=</span> <span class="n">mailSender</span><span class="o">.</span><span class="na">createMimeMessage</span><span class="o">();</span>
    <span class="nc">MimeMessageHelper</span> <span class="n">helper</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MimeMessageHelper</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="n">helper</span><span class="o">.</span><span class="na">setTo</span><span class="o">(</span><span class="n">to</span><span class="o">);</span>
    <span class="n">helper</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">subject</span><span class="o">);</span>
    <span class="n">helper</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="n">helper</span><span class="o">.</span><span class="na">addAttachment</span><span class="o">(</span><span class="n">attachment</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">attachment</span><span class="o">);</span>
    <span class="n">mailSender</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="任务执行和调度">任务执行和调度</h4>

<p>Spring 的任务执行和调度支持使得运行任务变得简单。</p>

<ul>
  <li>@Scheduled：使用 <code class="language-plaintext highlighter-rouge">@Scheduled</code> 调度任务。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Scheduled</span><span class="o">(</span><span class="n">fixedRate</span> <span class="o">=</span> <span class="mi">5000</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">performTask</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"每 5 秒运行一次的调度任务"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>异步任务：使用 <code class="language-plaintext highlighter-rouge">@Async</code> 异步运行任务。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Async</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">performAsyncTask</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"后台运行的异步任务"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="spring-测试">Spring 测试</h3>

<h4 id="使用-mockito-进行测试">使用 Mockito 进行测试</h4>

<p>Mockito 是一个强大的模拟库，用于测试。</p>

<ul>
  <li>模拟依赖项：使用 <code class="language-plaintext highlighter-rouge">@Mock</code> 和 <code class="language-plaintext highlighter-rouge">@InjectMocks</code> 创建模拟对象。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">MockitoJUnitRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceTest</span> <span class="o">{</span>
    <span class="nd">@Mock</span>
    <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="nd">@InjectMocks</span>
    <span class="kd">private</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testFindUserById</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
        <span class="nc">Mockito</span><span class="o">.</span><span class="na">when</span><span class="o">(</span><span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">)).</span><span class="na">thenReturn</span><span class="o">(</span><span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>

        <span class="nc">User</span> <span class="n">result</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">findUserById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
        <span class="n">assertNotNull</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">getId</span><span class="o">().</span><span class="na">longValue</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>行为验证：验证与模拟对象的交互。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Mockito</span><span class="o">.</span><span class="na">verify</span><span class="o">(</span><span class="n">userRepository</span><span class="o">,</span> <span class="n">times</span><span class="o">(</span><span class="mi">1</span><span class="o">)).</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="使用-mockmvc-进行测试">使用 MockMvc 进行测试</h4>

<p>MockMvc 允许你测试 Spring MVC 控制器。</p>

<ul>
  <li>设置：在测试类中配置 MockMvc。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@WebMvcTest</span><span class="o">(</span><span class="nc">UserController</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserControllerTest</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetUser</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/users/1"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
            <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">content</span><span class="o">().</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">))</span>
            <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.id"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>请求构建器：使用请求构建器模拟 HTTP 请求。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="s">"{\"username\":\"john\",\"password\":\"secret\"}"</span><span class="o">))</span>
    <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isCreated</span><span class="o">());</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="监控和管理">监控和管理</h3>

<h4 id="spring-boot-actuator">Spring Boot Actuator</h4>

<p>Spring Boot Actuator 提供了用于监控和管理应用程序的生产级功能。</p>

<ul>
  <li>端点：使用 <code class="language-plaintext highlighter-rouge">/actuator/health</code> 和 <code class="language-plaintext highlighter-rouge">/actuator/metrics</code> 等端点监控应用程序的健康状况和指标。例如：
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8080/actuator/health
</code></pre></div>    </div>
  </li>
  <li>自定义端点：创建自定义的 Actuator 端点。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/actuator"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomEndpoint</span> <span class="o">{</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/custom"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="nf">customEndpoint</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">response</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"自定义 Actuator 端点"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="高级主题">高级主题</h3>

<h4 id="spring-advice-api">Spring Advice API</h4>

<p>Spring 的 Advice API 提供了高级的 AOP（面向切面编程）功能。</p>

<ul>
  <li>@Aspect：使用 <code class="language-plaintext highlighter-rouge">@Aspect</code> 定义切面。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Aspect</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoggingAspect</span> <span class="o">{</span>
    <span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logBefore</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"方法之前："</span> <span class="o">+</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@After</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logAfter</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"方法之后："</span> <span class="o">+</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>连接点：使用连接点定义应应用切面的地方。例如：
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">serviceMethods</span><span class="o">()</span> <span class="o">{}</span>

<span class="nd">@Around</span><span class="o">(</span><span class="s">"serviceMethods()"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">logAround</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"方法之前："</span> <span class="o">+</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
    <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"方法之后："</span> <span class="o">+</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="结论">结论</h3>

<p>Spring 是一个功能强大且多功能的框架，可以简化企业级应用程序的开发。通过利用 Spring Boot、Spring Data、Spring REST 和其他 Spring 项目的功能，开发人员可以高效地构建健壮、可扩展和易维护的应用程序。借助 Spring Boot Actuator 和测试框架等工具，你可以确保你的应用程序已准备好投入生产并经过充分测试。</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-zh" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
