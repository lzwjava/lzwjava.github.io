<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>LeanChat iOS

Chat en Línea iOS</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>LeanChat iOS Chat en Línea iOS | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="LeanChat iOS Chat en Línea iOS" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="es" />
<meta name="description" content="Este es el archivo README.md del proyecto de GitHub https://github.com/lzwjava/leanchat-ios." />
<meta property="og:description" content="Este es el archivo README.md del proyecto de GitHub https://github.com/lzwjava/leanchat-ios." />
<link rel="canonical" href="https://lzwjava.github.io/leanchat-ios-es" />
<meta property="og:url" content="https://lzwjava.github.io/leanchat-ios-es" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-11-20T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="LeanChat iOS Chat en Línea iOS" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2014-11-20T00:00:00+08:00","datePublished":"2014-11-20T00:00:00+08:00","description":"Este es el archivo README.md del proyecto de GitHub https://github.com/lzwjava/leanchat-ios.","headline":"LeanChat iOS Chat en Línea iOS","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/leanchat-ios-es"},"url":"https://lzwjava.github.io/leanchat-ios-es"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=d4bae6384272f26fcd4430cf9f39c7a233495869">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=d4bae6384272f26fcd4430cf9f39c7a233495869" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       LeanChat iOS

Chat en Línea iOS | Original, traducido por IA
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/es/2014-11-20-leanchat-ios-es.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postses2014-11-20-leanchat-ios-es.md</span> -->
      

      <!-- <span>2014-11-20-leanchat-ios-es.md</span> -->

      
        

        
          
          <a href="#" class="button">2014.11</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/leanchat-ios-en" >English</option>
        <option value="/leanchat-ios-zh" >中文</option>
        <option value="/leanchat-ios-ja" >日本語</option>
        <option value="/leanchat-ios-es" selected>Español</option>
        <option value="/leanchat-ios-hi" >हिंदी</option>
        <option value="/leanchat-ios-fr" >Français</option>
        <option value="/leanchat-ios-de" >Deutsch</option>
        <option value="/leanchat-ios-ar" >العربية</option>
        <option value="/leanchat-ios-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Este es el archivo README.md del proyecto de GitHub <a href="https://github.com/lzwjava/leanchat-ios">https://github.com/lzwjava/leanchat-ios</a>.</p>

<hr />

<p><img src="https://img.shields.io/badge/license-MIT-green.svg?style=flat" alt="License MIT" /> 
<a href="http://cocoapods.org/?q=LeanChatLib"><img src="http://img.shields.io/cocoapods/v/LeanChatLib.svg?style=flat" alt="CocoaPods" /></a> 
<a href="http://cocoapods.org/?q=LeanChatLib"><img src="http://img.shields.io/cocoapods/p/LeanChatLib.svg?style=flat" alt="CocoaPods" /></a> 
<a href="https://www.apple.com/nl/ios/"><img src="https://img.shields.io/badge/support-iOS%207%2B%20-blue.svg?style=flat" alt="Support" /></a></p>

<p><img src="https://cloud.githubusercontent.com/assets/5022872/8431636/4eff0aca-1f6d-11e5-8728-f8f450dac380.gif" alt="leanchat" /></p>

<h2 id="app-store">App Store</h2>
<p>LeanChat está disponible en la App Store. Puedes visitar <a href="https://itunes.apple.com/gb/app/leanchat/id943324553">https://itunes.apple.com/gb/app/leanchat/id943324553</a> o buscar LeanChat en la App Store.</p>

<h2 id="introducción">Introducción</h2>
<p>Este proyecto de ejemplo demuestra de manera exhaustiva la aplicación de la característica de comunicación en tiempo real de LeanCloud. Sin embargo, contiene mucha lógica de la interfaz de usuario y otras funcionalidades, lo que lo hace no adecuado para aprender rápidamente. Si eres nuevo en LeanMessage, te recomendamos el proyecto <a href="https://github.com/leancloud/LeanMessage-Demo">LeanMessage-Demo</a>. Una vez que te familiarices, puedes ir a <a href="https://github.com/leancloud/leancloud-demos">LeanCloud-Demos</a> para seleccionar tu piel de IM favorita para la integración. Durante la integración, si encuentras problemas difíciles, puedes volver a referirte al proyecto LeanChat.</p>

<h2 id="estructura-del-proyecto-leanchat">Estructura del Proyecto LeanChat</h2>

<ul>
  <li><a href="https://github.com/leancloud/leanchat-android">leanchat-android</a>: Cliente de Android</li>
  <li><a href="https://github.com/leancloud/leanchat-ios">leanchat-ios</a>: Cliente de iOS</li>
  <li><a href="https://github.com/leancloud/leanchat-webapp">leanchat-webapp</a>: Cliente web</li>
  <li><a href="https://github.com/leancloud/leanchat-cloudcode">leanchat-cloud-code</a>: Servidor</li>
</ul>

<h2 id="retroalimentación-valiosa">Retroalimentación Valiosa</h2>

<p>Si tienes alguna pregunta, no dudes en abrir un <a href="https://github.com/leancloud/leanchat-ios/issues">issue</a>, mencionando lo que no entiendes, y te proporcionaremos asistencia lo antes posible.</p>

<h2 id="descarga">Descarga</h2>
<p>Haz clic directamente en <code class="language-plaintext highlighter-rouge">Descargar ZIP</code> en GitHub, como se muestra en la imagen a continuación, para descargar solo la última versión. Si usas <code class="language-plaintext highlighter-rouge">git clone</code>, puede ser muy lento porque incluye un gran historial de commits. En una prueba, la diferencia fue de 1.5M:40M.</p>

<p><img src="https://cloud.githubusercontent.com/assets/5022872/8223520/4c25415a-15ab-11e5-912d-b5dab916ce86.png" alt="qq20150618-2 2x" /></p>

<h2 id="ejecución">Ejecución</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  // LeanChat <span class="o">(</span>Ejemplo Complejo<span class="o">)</span>
  <span class="nb">cd </span>LeanChat
  pod <span class="nb">install</span> <span class="nt">--verbose</span>  // Si tienes una biblioteca de dependencias de AVOSCloud localmente, puedes agregar la opción <span class="nt">--no-repo-update</span> para acelerar el proceso
  open LeanChat.workspace

  // LeanChatExample <span class="o">(</span>Ejemplo Simple<span class="o">)</span>
  <span class="nb">cd </span>LeanChatExample
  pod <span class="nb">install</span> <span class="nt">--verbose</span> <span class="nt">--no-repo-update</span>
  open LeanChatExample.xcworkspace

  // LeanChatSwift <span class="o">(</span>Ejemplo en Swift<span class="o">)</span>
  <span class="nb">cd </span>LeanChatSwift
  pod <span class="nb">install</span> <span class="nt">--verbose</span> <span class="nt">--no-repo-update</span>
  open LeanChatSwift.xcworkspace

  // LeanChatLib <span class="o">(</span>Librería que encapsula los componentes de comunicación y la interfaz de usuario de LeanCloud<span class="o">)</span>
  <span class="nb">cd </span>LeanChatLib
  pod <span class="nb">install</span> <span class="nt">--verbose</span> <span class="nt">--no-repo-update</span>
  open LeanChatLib.xcworkspace
</code></pre></div></div>

<p>Si encuentras problemas como <code class="language-plaintext highlighter-rouge">la definición de 'AVUser' debe importarse del módulo 'LeanChatLib.CDChatListVC' antes de que se requiera</code>, puedes mantener presionada la tecla Option en el menú Product y hacer clic en <a href="http://stackoverflow.com/questions/8087065/xcode-4-clean-vs-clean-build-folder">Clean Build Folder</a> para limpiar todos los archivos de compilación, luego recompilar. Este problema parece ser un error cuando Cocoapods realiza la compilación compleja. Puedes ver este <a href="https://cloud.githubusercontent.com/assets/5022872/9230256/cf822fe4-4153-11e5-876d-ed819babad89.gif">Gif</a> para más detalles.</p>

<p>Ten en cuenta que, debido a que se utilizan certificados de producción por defecto, no se reciben notificaciones push para mensajes fuera de línea durante el desarrollo. Sin embargo, las notificaciones push están disponibles en la versión en línea, que se puede descargar desde la <a href="https://itunes.apple.com/gb/app/leanchat/id943324553">App Store</a>. Para más detalles, también puedes referirte a este <a href="https://github.com/leancloud/leanchat-ios/issues/40">issue</a>.</p>

<p>Aquí puedes ver tres proyectos, como se describe a continuación.</p>

<h2 id="introducción-del-subproyecto">Introducción del Subproyecto</h2>
<ul>
  <li>LeanChatLib: La lógica principal y la biblioteca de interfaz de usuario para el chat. Con ella, puedes integrar rápidamente la funcionalidad de chat, que soporta mensajes de texto, audio, imágenes y emojis, así como notificaciones de mensajes. También hay una versión correspondiente <a href="https://github.com/leancloud/leanchat-android">para Android</a>.</li>
  <li>LeanChatExample: El ejemplo de uso más sencillo de LeanChatLib. Muestra cómo usar la cantidad mínima de código para llamar a LeanChatLib para unirse a un chat, independientemente de si usas el sistema de usuarios de LeanCloud o el tuyo propio.</li>
  <li>LeanChat-ios: La aplicación LeanChat completa. Incluye características como la gestión de amigos, la gestión de grupos, el envío de mensajes basados en la ubicación, usuarios cercanos, páginas personales, inicio de sesión y registro, todas basadas en las capacidades de almacenamiento y comunicación de LeanCloud. Es una aplicación más compleja de LeanChatLib.</li>
</ul>

<h2 id="introducción-a-leanchatlib">Introducción a LeanChatLib</h2>

<p>Encapsula la página de conversación reciente y la página de chat. Tanto el proyecto LeanChat como LeanChatExample dependen de él. Puedes instalarlo de la siguiente manera,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    pod 'LeanChatLib'
</code></pre></div></div>

<p>La mayoría de las veces, integrarás LeanChatLib arrastrando el código fuente a tu proyecto. En este caso, necesitarás instalar <code class="language-plaintext highlighter-rouge">AVOSCloud.framework</code> y <code class="language-plaintext highlighter-rouge">AVOSCloudIM.framework</code> primero. Si no usaste <code class="language-plaintext highlighter-rouge">pod install 'AVOSCloud'</code>, <code class="language-plaintext highlighter-rouge">pod install 'AVOSCloudIM'</code> para instalar, puedes configurar los marcos necesarios según la <a href="https://leancloud.cn/docs/start.html">Guía de Inicio Rápido</a> de LeanCloud. También instala dos otras bibliotecas dependientes, <code class="language-plaintext highlighter-rouge">JSBadgeView</code> y <code class="language-plaintext highlighter-rouge">DateTools</code>. Al ejecutar <code class="language-plaintext highlighter-rouge">pod install</code> para este Demo, se generará un directorio Pods, del cual puedes encontrar estos dos Pods. Alternativamente, puedes buscarlos en línea. También puedes configurarlo a través del <a href="https://github.com/leancloud/leanchat-ios/blob/master/LeanChatLib.podspec#L9">.podspec file</a>, que describe qué archivos fuente deben integrarse y qué marcos del sistema deben introducirse, etc. O, por favor, refiérrete a este <a href="https://ticket.leancloud.cn/tickets/7666">ticket</a>.</p>

<h2 id="cómo-agregar-im-en-tres-pasos">Cómo agregar IM en tres pasos</h2>
<ol>
  <li>Crea una aplicación en LeanCloud.</li>
  <li>Agrega la dependencia del pod LeanChatLib, o arrastra los archivos de código de LeanChatLib a tu proyecto para una personalización de interfaz de usuario más fácil y un ajuste de funcionalidad.</li>
  <li>Agrega el siguiente código en los lugares apropiados,</li>
</ol>

<p>Al iniciar la aplicación, inicializa y configura IM User,</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">[</span><span class="n">AVOSCloud</span> <span class="nf">setApplicationId</span><span class="p">:</span><span class="s">@"YourAppId"</span> <span class="nf">clientKey</span><span class="p">:</span><span class="s">@"YourAppKey"</span><span class="p">];</span>
    <span class="p">[</span><span class="n">CDChatManager</span> <span class="nf">manager</span><span class="p">].</span><span class="n">userDelegate</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CDUserFactory</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
</code></pre></div></div>

<p>Configura una UserFactory, que cumple con el protocolo CDUserDelegate.</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#import "CDUserFactory.h"
</span>
<span class="cp">#import &lt;LeanChatLib/LeanChatLib.h&gt;
</span>
<span class="k">@interface</span> <span class="nc">CDUserFactory</span> <span class="p">()</span><span class="o">&lt;</span><span class="n">CDUserDelegate</span><span class="o">&gt;</span>

<span class="k">@end</span>


<span class="k">@implementation</span> <span class="nc">CDUserFactory</span>

<span class="cp">#pragma mark - CDUserDelegate
</span><span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">cacheUserByIds</span><span class="p">:(</span><span class="n">NSSet</span> <span class="o">*</span><span class="p">)</span><span class="nv">userIds</span> <span class="nf">block</span><span class="p">:(</span><span class="n">AVIMArrayResultBlock</span><span class="p">)</span><span class="nv">block</span><span class="p">{</span>
    <span class="n">block</span><span class="p">(</span><span class="nb">nil</span><span class="p">,</span><span class="nb">nil</span><span class="p">);</span> <span class="c1">// no lo olvides</span>
<span class="p">}</span>

<span class="k">-</span><span class="p">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">CDUserModel</span><span class="o">&gt;</span><span class="p">)</span><span class="nf">getUserById</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">userId</span><span class="p">{</span>
    <span class="n">CDUser</span><span class="o">*</span> <span class="n">user</span><span class="o">=</span><span class="p">[[</span><span class="n">CDUser</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
    <span class="n">user</span><span class="p">.</span><span class="n">userId</span><span class="o">=</span><span class="n">userId</span><span class="p">;</span>
    <span class="n">user</span><span class="p">.</span><span class="n">username</span><span class="o">=</span><span class="n">userId</span><span class="p">;</span>
    <span class="n">user</span><span class="p">.</span><span class="n">avatarUrl</span><span class="o">=</span><span class="s">@"http://ac-x3o016bx.clouddn.com/86O7RAPx2BtTW5zgZTPGNwH9RZD5vNDtPm1YbIcu"</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">user</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>

</code></pre></div></div>

<p>Aquí, CDUser es el objeto de usuario dentro de la aplicación, y puedes implementar el protocolo CDUserModel en tu objeto de usuario.</p>

<p>CDUserModel,</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@protocol</span> <span class="nc">CDUserModel</span> <span class="o">&lt;</span><span class="n">NSObject</span><span class="o">&gt;</span>

<span class="err">@required</span>

<span class="k">-</span><span class="p">(</span><span class="n">NSString</span><span class="o">*</span><span class="p">)</span><span class="n">userId</span><span class="p">;</span>

<span class="k">-</span><span class="p">(</span><span class="n">NSString</span><span class="o">*</span><span class="p">)</span><span class="n">avatarUrl</span><span class="p">;</span>

<span class="k">-</span><span class="p">(</span><span class="n">NSString</span><span class="o">*</span><span class="p">)</span><span class="n">username</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre></div></div>

<p>Llama al iniciar sesión,</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[[</span><span class="n">CDChatManager</span> <span class="nf">manager</span><span class="p">]</span> <span class="nf">openWithClientId</span><span class="p">:</span><span class="n">selfId</span> <span class="nf">callback</span><span class="p">:</span> <span class="o">^</span><span class="p">(</span><span class="n">BOOL</span> <span class="n">succeeded</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">DLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
               <span class="c1">// Ir al Controlador Principal</span>
            <span class="p">}</span>
        <span class="p">}];</span>
</code></pre></div></div>

<p>Para chatear con alguien,</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[[</span><span class="n">CDChatManager</span> <span class="nf">manager</span><span class="p">]</span> <span class="nf">fetchConvWithOtherId</span> <span class="p">:</span> <span class="n">otherId</span> <span class="nf">callback</span> <span class="p">:</span> <span class="o">^</span><span class="p">(</span><span class="n">AVIMConversation</span> <span class="o">*</span><span class="n">conversation</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">DLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="n">LCEChatRoomVC</span> <span class="o">*</span><span class="n">chatRoomVC</span> <span class="o">=</span> <span class="p">[[</span><span class="n">LCEChatRoomVC</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithConv</span><span class="p">:</span><span class="n">conversation</span><span class="p">];</span>
                <span class="p">[</span><span class="n">weakSelf</span><span class="p">.</span><span class="n">navigationController</span> <span class="nf">pushViewController</span><span class="p">:</span><span class="n">chatRoomVC</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}];</span>
</code></pre></div></div>

<p>Para chatear en grupo,</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">memberIds</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="nf">array</span><span class="p">];</span>
        <span class="p">[</span><span class="n">memberIds</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">groupId1</span><span class="p">];</span>
        <span class="p">[</span><span class="n">memberIds</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">groupId2</span><span class="p">];</span>
        <span class="p">[</span><span class="n">memberIds</span> <span class="nf">addObject</span><span class="p">:[</span><span class="n">CDChatManager</span> <span class="nf">manager</span><span class="p">].</span><span class="n">selfId</span><span class="p">];</span>
        <span class="p">[[</span><span class="n">CDChatManager</span> <span class="nf">manager</span><span class="p">]</span> <span class="nf">fetchConvWithMembers</span><span class="p">:</span><span class="n">memberIds</span> <span class="nf">callback</span><span class="p">:</span> <span class="o">^</span><span class="p">(</span><span class="n">AVIMConversation</span> <span class="o">*</span><span class="n">conversation</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">DLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="n">LCEChatRoomVC</span> <span class="o">*</span><span class="n">chatRoomVC</span> <span class="o">=</span> <span class="p">[[</span><span class="n">LCEChatRoomVC</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithConv</span><span class="p">:</span><span class="n">conversation</span><span class="p">];</span>
                <span class="p">[</span><span class="n">weakSelf</span><span class="p">.</span><span class="n">navigationController</span> <span class="nf">pushViewController</span><span class="p">:</span><span class="n">chatRoomVC</span> <span class="nf">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}];</span>
</code></pre></div></div>

<p>Al cerrar la sesión,</p>
<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">[[</span><span class="n">CDChatManager</span> <span class="nf">manager</span><span class="p">]</span> <span class="nf">closeWithCallback</span><span class="p">:</span> <span class="o">^</span><span class="p">(</span><span class="n">BOOL</span> <span class="n">succeeded</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">}];</span>
</code></pre></div></div>

<p>Luego, puedes chatear como se muestra en la captura de pantalla anterior. Ten en cuenta que actualmente no recomendamos usar el método pod para importar LeanChatLib directamente porque algunas interfaces y funcionalidades necesitan ser personalizadas por ti. Por lo tanto, recomendamos copiar el código de LeanChatLib en el proyecto para una personalización más fácil.</p>

<h2 id="registro-de-cambios-de-leanchatlib">Registro de cambios de LeanChatLib</h2>

<p>0.2.6</p>

<p>Actualiza el SDK a 3.1.4 para adaptarse a iOS 9</p>

<p>0.2.5</p>

<p>Usa cachePolicy en AVIMConversationQuery para ahorrar tráfico y soportar mejor el modo fuera de línea
Corregido un error donde llamar a fetchConvWithConvid cuando la conversación no existe podría causar un bloqueo</p>

<p>0.2.4</p>

<p>Añadido emoji de Tuzki</p>

<p>0.2.3</p>

<p>Añadida verificación de parámetros para la interfaz fetchConvWithMembers, corregido un posible bloqueo en la lista de conversaciones cuando es una conversación de uno a uno pero solo tiene un miembro</p>

<p>0.2.2</p>

<p>Actualizada la biblioteca AVOSCloud a 3.1.2.8</p>

<p>0.2.1</p>

<p>ChatListDelegate añade las interfaces configureCell: y prepareConversaion: para una personalización de conversación más compleja.</p>

<p>Para mensajes de imágenes, usa AVFile para almacenar en caché imágenes, de modo que tus propias fotos enviadas no necesiten volver a descargarse.</p>

<p>0.2.0</p>

<p>Añade comentarios, soporta reenvío de mensajes, muestra mensajes fallidos, añade efectos de sonido y vibración</p>

<p>0.1.3</p>

<p>Corregido un error donde la aplicación podría bloquearse al cargar rápidamente mensajes históricos tirando hacia abajo</p>

<p>0.1.2</p>

<p>Usa la caché de chat del SDK, eliminada la dependencia de FMDB. Puedes ver mensajes históricos en el servidor y registros de chat históricos incluso después de la reinstalación. Eliminada la clase CDNotify.</p>

<p>0.1.1</p>

<p>Refactorización</p>

<p>0.1.0</p>

<p>Versión inicial</p>

<h2 id="notas-de-despliegue-para-leanchat">Notas de Despliegue para LeanChat</h2>

<p>Si deseas desplegar LeanChat completo, ya que la aplicación tiene una función de adición de amigos, ve a Configuración-&gt;Opciones de la Aplicación y marca la opción Seguidores Mutuos para que, cuando ambas partes acepten, puedan añadirse como amigos.</p>

<p><img src="https://cloud.githubusercontent.com/assets/5022872/7016645/53f91bb8-dd1b-11e4-8ce0-72312c655094.png" alt="qq20150407-5" /></p>

<h2 id="guía-de-desarrollo">Guía de Desarrollo</h2>

<p><a href="https://leancloud.cn/docs/realtime_v2.html">Guía de Desarrollo de Servicio de Mensajería en Tiempo Real</a></p>

<p><a href="https://github.com/leancloud/leanchat-android">Más Información</a></p>

<h2 id="agradecimientos">Agradecimientos</h2>

<p>Gracias a la excelente biblioteca de código abierto <a href="https://github.com/xhzengAIB/MessageDisplayKit">MessageDisplayKit</a> de Xian-Hua Han.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-es" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
