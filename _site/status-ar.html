<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>صفحة الحالة الشخصية</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>صفحة الحالة الشخصية | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="صفحة الحالة الشخصية" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ar" />
<meta name="description" content="يبدو أن إصدار vnstat الذي قمت بتثبيته لا يدعم المعلمة -u. دعنا نتابع مع الخطوات الصحيحة لتكوين vnstat وإعداد واجهة برمجة التطبيقات (API) لمراقبة عرض النطاق الترددي." />
<meta property="og:description" content="يبدو أن إصدار vnstat الذي قمت بتثبيته لا يدعم المعلمة -u. دعنا نتابع مع الخطوات الصحيحة لتكوين vnstat وإعداد واجهة برمجة التطبيقات (API) لمراقبة عرض النطاق الترددي." />
<link rel="canonical" href="https://lzwjava.github.io/status-ar" />
<meta property="og:url" content="https://lzwjava.github.io/status-ar" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-03T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="صفحة الحالة الشخصية" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-01-03T00:00:00+08:00","datePublished":"2025-01-03T00:00:00+08:00","description":"يبدو أن إصدار vnstat الذي قمت بتثبيته لا يدعم المعلمة -u. دعنا نتابع مع الخطوات الصحيحة لتكوين vnstat وإعداد واجهة برمجة التطبيقات (API) لمراقبة عرض النطاق الترددي.","headline":"صفحة الحالة الشخصية","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/status-ar"},"url":"https://lzwjava.github.io/status-ar"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=f33d12f4787137731a3802bcfcfaf1c496080e06">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=f33d12f4787137731a3802bcfcfaf1c496080e06" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       صفحة الحالة الشخصية | أصلي، ترجم بواسطة AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ar/2025-01-03-status-ar.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsar2025-01-03-status-ar.md</span> -->
      

      <!-- <span>2025-01-03-status-ar.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.01</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/status-en" >English</option>
        <option value="/status-zh" >中文</option>
        <option value="/status-ja" >日本語</option>
        <option value="/status-es" >Español</option>
        <option value="/status-hi" >हिंदी</option>
        <option value="/status-fr" >Français</option>
        <option value="/status-de" >Deutsch</option>
        <option value="/status-ar" selected>العربية</option>
        <option value="/status-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>يبدو أن إصدار <code class="language-plaintext highlighter-rouge">vnstat</code> الذي قمت بتثبيته لا يدعم المعلمة <code class="language-plaintext highlighter-rouge">-u</code>. دعنا نتابع مع الخطوات الصحيحة لتكوين <code class="language-plaintext highlighter-rouge">vnstat</code> وإعداد واجهة برمجة التطبيقات (API) لمراقبة عرض النطاق الترددي.</p>

<h3 id="الخطوة-1-تهيئة-vnstat">الخطوة 1: تهيئة <code class="language-plaintext highlighter-rouge">vnstat</code></h3>

<p>في هذه الخطوة، سنقوم بتهيئة أداة <code class="language-plaintext highlighter-rouge">vnstat</code> لجمع وإدارة إحصائيات استخدام الشبكة.</p>

<p>تهيئة <code class="language-plaintext highlighter-rouge">vnstat</code> لواجهة الشبكة الخاصة بك:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vnstat <span class="nt">-i</span> eth0
</code></pre></div></div>

<h3 id="الخطوة-2-انتظر-جمع-البيانات">الخطوة 2: انتظر جمع البيانات</h3>

<p><code class="language-plaintext highlighter-rouge">vnstat</code> يحتاج إلى وقت لجمع البيانات. تحقق من الحالة بشكل دوري:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vnstat <span class="nt">-l</span>
</code></pre></div></div>

<p>بعد مرور بعض الوقت، تحقق من جمع البيانات:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vnstat <span class="nt">-d</span>
</code></pre></div></div>

<h3 id="الخطوة-3-إنشاء-واجهة-برمجة-تطبيقات-api-لعرض-بيانات-النطاق-الترددي">الخطوة 3: إنشاء واجهة برمجة تطبيقات (API) لعرض بيانات النطاق الترددي</h3>

<p>في هذه الخطوة، سنقوم بإنشاء واجهة برمجة تطبيقات (API) تسمح لنا بعرض بيانات النطاق الترددي التي تم جمعها في الخطوات السابقة. ستمكن هذه الواجهة التطبيقات الأخرى من الوصول إلى البيانات واستخدامها بسهولة.</p>

<h4 id="1-إنشاء-ملف-api">1. إنشاء ملف API</h4>
<p>أولاً، سنقوم بإنشاء ملف جديد لاستضافة واجهة برمجة التطبيقات. يمكنك تسمية الملف <code class="language-plaintext highlighter-rouge">api.py</code> أو أي اسم آخر مناسب.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_bandwidth_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'bandwidth.db'</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM bandwidth_usage"</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">conn</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/api/bandwidth'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">bandwidth</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">get_bandwidth_data</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="2-شرح-الكود">2. شرح الكود</h4>
<ul>
  <li><strong>Flask</strong>: إطار عمل بسيط وسهل الاستخدام لبناء تطبيقات الويب في Python.</li>
  <li><strong>sqlite3</strong>: مكتبة تسمح بالتفاعل مع قاعدة البيانات SQLite.</li>
  <li><strong>get_bandwidth_data()</strong>: دالة تقوم بالاتصال بقاعدة البيانات واسترداد بيانات النطاق الترددي.</li>
  <li><strong>@app.route(‘/api/bandwidth’, methods=[‘GET’])</strong>: تعريف نقطة نهاية API التي ستستجيب لطلبات GET.</li>
  <li><strong>jsonify(data)</strong>: تحويل البيانات إلى تنسيق JSON لإرسالها كاستجابة.</li>
</ul>

<h4 id="3-تشغيل-api">3. تشغيل API</h4>
<p>بعد إنشاء الملف، يمكنك تشغيل API باستخدام الأمر التالي في سطر الأوامر:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python api.py
</code></pre></div></div>

<p>سيبدأ الخادم في الاستماع على المنفذ الافتراضي (عادةً 5000). يمكنك الوصول إلى البيانات عن طريق زيارة الرابط التالي في المتصفح أو باستخدام أدوات مثل <code class="language-plaintext highlighter-rouge">curl</code> أو <code class="language-plaintext highlighter-rouge">Postman</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://127.0.0.1:5000/api/bandwidth
</code></pre></div></div>

<p>ستحصل على استجابة تحتوي على بيانات النطاق الترددي بتنسيق JSON.</p>

<h4 id="4-اختبار-api">4. اختبار API</h4>
<p>للتأكد من أن API يعمل بشكل صحيح، يمكنك استخدام أدوات مثل <code class="language-plaintext highlighter-rouge">Postman</code> لإرسال طلب GET إلى نقطة النهاية والتحقق من الاستجابة.</p>

<p>بهذا تكون قد أنشأت واجهة برمجة تطبيقات (API) لعرض بيانات النطاق الترددي. يمكنك الآن استخدام هذه الواجهة في تطبيقاتك الأخرى أو مشاركتها مع المطورين الآخرين.</p>

<p>تثبيت Flask:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>Flask
</code></pre></div></div>

<p>إنشاء نص برمجي بلغة Python (<code class="language-plaintext highlighter-rouge">bandwidth_api.py</code>):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">flask_cors</span> <span class="kn">import</span> <span class="n">CORS</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>  <span class="c1"># تمكين CORS لجميع المسارات
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/bandwidth'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">get_bandwidth</span><span class="p">():</span>
    <span class="c1"># تشغيل أمر vnstat للحصول على إحصائيات حركة المرور لفترة 5 دقائق لـ eth0
</span>    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">run</span><span class="p">([</span><span class="s">'vnstat'</span><span class="p">,</span> <span class="s">'-i'</span><span class="p">,</span> <span class="s">'eth0'</span><span class="p">,</span> <span class="s">'-5'</span><span class="p">,</span> <span class="s">'--json'</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">stdout</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># إرجاع البيانات الملتقطة كاستجابة JSON
return jsonify(data)
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'0.0.0.0'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
قم بتشغيل البرنامج النصي:

```sh
python bandwidth_api.py
</code></pre></div></div>

<h3 id="الخطوة-4-التكامل-مع-مدونتك">الخطوة 4: التكامل مع مدونتك</h3>

<p>استخدم HTML و JavaScript التاليين لجلب وعرض بيانات النطاق الترددي:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"ar"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>عرض بيانات النطاق الترددي<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>بيانات النطاق الترددي<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"bandwidth-data"</span><span class="nt">&gt;&lt;/div&gt;</span>

    <span class="nt">&lt;script&gt;</span>
        <span class="c1">// دالة لجلب البيانات من الخادم</span>
        <span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchBandwidthData</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/bandwidth</span><span class="dl">'</span><span class="p">);</span>
                <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
                <span class="nx">displayBandwidthData</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">حدث خطأ أثناء جلب البيانات:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// دالة لعرض البيانات في الصفحة</span>
        <span class="kd">function</span> <span class="nx">displayBandwidthData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">bandwidthDataElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">bandwidth-data</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">bandwidthDataElement</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
                &lt;p&gt;النطاق الترددي المستخدم: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">usedBandwidth</span><span class="p">}</span><span class="s2"> MB&lt;/p&gt;
                &lt;p&gt;النطاق الترددي المتبقي: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">remainingBandwidth</span><span class="p">}</span><span class="s2"> MB&lt;/p&gt;
                &lt;p&gt;إجمالي النطاق الترددي: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">totalBandwidth</span><span class="p">}</span><span class="s2"> MB&lt;/p&gt;
            `</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// جلب البيانات عند تحميل الصفحة</span>
        <span class="nx">fetchBandwidthData</span><span class="p">();</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>في هذا المثال، يتم استخدام JavaScript لجلب بيانات النطاق الترددي من خادم API وعرضها في صفحة الويب. يتم استدعاء الدالة <code class="language-plaintext highlighter-rouge">fetchBandwidthData</code> عند تحميل الصفحة لجلب البيانات من الخادم، ثم يتم عرضها باستخدام الدالة <code class="language-plaintext highlighter-rouge">displayBandwidthData</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://www.lzwjava.xyz/bandwidth</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">bandwidthData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        // إنشاء حاوية للأوقات
        var timesContainer = document.createElement('div');
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">currentUtcTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">currentLocalTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">currentUtcTime</span><span class="p">.</span><span class="nx">getTime</span><span class="p">());</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        var pUtcTime = document.createElement('p');
        pUtcTime.textContent = `التوقيت العالمي المنسق (UTC): ${currentUtcTime.toUTCString()}`;
        timesContainer.appendChild(pUtcTime);

        var pLocalTime = document.createElement('p');
        pLocalTime.textContent = `وقتي المحلي: ${currentLocalTime.toString()}`;
        timesContainer.appendChild(pLocalTime);
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// إضافة حاوية الأوقات إلى عنصر الحالة</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">status</span><span class="dl">'</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">timesContainer</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        // إنشاء جدول
        var table = document.createElement('table');
        table.border = '1';
        table.style.borderCollapse = 'collapse';
        table.style.width = '100%';
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="c1">// إنشاء رأس الجدول</span>
            <span class="kd">var</span> <span class="nx">thead</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">thead</span><span class="dl">'</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">tr</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">tr</span><span class="dl">'</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">الوقت</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">حركة المرور (كيلوبايت/ثانية)</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">الحالة</span><span class="dl">'</span><span class="p">];</span>
            <span class="nx">headers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">headerText</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">th</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">th</span><span class="dl">'</span><span class="p">);</span>
                <span class="nx">th</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">headerText</span><span class="p">;</span>
                <span class="nx">tr</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">th</span><span class="p">);</span>
            <span class="p">});</span>
            <span class="nx">thead</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tr</span><span class="p">);</span>
            <span class="nx">table</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">thead</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        // إنشاء جسم الجدول
        var tbody = document.createElement('tbody');

        // معالجة بيانات حركة المرور
        var fiveMinuteData = bandwidthData.interfaces[0].traffic.fiveminute.reverse();
        fiveMinuteData.forEach(interval =&gt; {
            var tr = document.createElement('tr');
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">dataTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">UTC</span><span class="p">(</span><span class="nx">interval</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">year</span><span class="p">,</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">hour</span><span class="p">,</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">minute</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">timeDifference</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">currentUtcTime</span> <span class="o">-</span> <span class="nx">dataTime</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">));</span> <span class="c1">// الفرق الزمني بالدقائق</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">tdTimeDifference</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">td</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">tdTimeDifference</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">timeDifference</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> دقيقة مضت</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">tr</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tdTimeDifference</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">averageTraffic</span> <span class="o">=</span> <span class="p">(</span><span class="nx">interval</span><span class="p">.</span><span class="nx">rx</span> <span class="o">+</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">tx</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// حساب المتوسط بين RX و TX</span>
<span class="kd">var</span> <span class="nx">tdTrafficKBs</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">td</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">trafficKBs</span> <span class="o">=</span> <span class="p">(</span><span class="nx">averageTraffic</span> <span class="o">/</span> <span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// التحويل إلى كيلوبايت/ثانية</span>
<span class="nx">tdTrafficKBs</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">trafficKBs</span><span class="p">;</span>
<span class="nx">tr</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tdTrafficKBs</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">tdStatus</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">td</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">tdStatus</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">trafficKBs</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">متصل</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">غير متصل</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">tdStatus</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">trafficKBs</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">status-online</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">status-offline</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">tr</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tdStatus</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">tbody</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tr</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">table</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tbody</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// إلحاق الجدول بجزء الحالة (status div)</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">status</span><span class="dl">'</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">table</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">حدث خطأ أثناء جلب بيانات النطاق الترددي:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>```</p>

<p>استبدل <code class="language-plaintext highlighter-rouge">http://your-droplet-ip:5000/bandwidth</code> بعنوان IP الخاص بـ droplet الخاص بك.</p>

<h3 id="اعتبارات-إضافية">اعتبارات إضافية</h3>

<ul>
  <li><strong>الأمان</strong>: تأكد من أن واجهة برمجة التطبيقات (API) الخاصة بك آمنة. فكر في إضافة آلية مصادقة.</li>
  <li><strong>الأداء</strong>: مراقبة عرض النطاق الترددي يمكن أن تكون مكلفة من حيث الموارد. تأكد من أن الخادم الافتراضي (droplet) الخاص بك يحتوي على موارد كافية.</li>
  <li><strong>الموثوقية</strong>: أضف معالجة للأخطاء ومنطق إعادة المحاولة للتعامل مع حالات عدم توفر واجهة برمجة التطبيقات.</li>
</ul>

<p>باتباع هذه الخطوات، يمكنك إنشاء صفحة حالة على مدونتك تشير إلى ما إذا كنت متصلاً بالإنترنت أم لا بناءً على استخدام النطاق الترددي لـ Droplet الخاص بك على DigitalOcean.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ar" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
