<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Simple Realtime Server (SRS) For RTMP Streaming</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Simple Realtime Server (SRS) For RTMP Streaming | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Simple Realtime Server (SRS) For RTMP Streaming" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="Let’s dive into using Simple Realtime Server (SRS) to deploy an edge server for RTMP streaming, with a focus on understanding and configuring it effectively, including the rtmp.conf file. SRS is a powerful, high-performance media server designed for real-time streaming protocols like RTMP, HLS, and HTTP-FLV. It’s particularly well-suited for scenarios requiring scalability, such as content delivery networks (CDNs), where an edge server can efficiently distribute streams to many clients while fetching content from an origin server. I’ll walk you through the process step-by-step, explain the edge deployment concept, and clarify how to work with configurations like rtmp.conf." />
<meta property="og:description" content="Let’s dive into using Simple Realtime Server (SRS) to deploy an edge server for RTMP streaming, with a focus on understanding and configuring it effectively, including the rtmp.conf file. SRS is a powerful, high-performance media server designed for real-time streaming protocols like RTMP, HLS, and HTTP-FLV. It’s particularly well-suited for scenarios requiring scalability, such as content delivery networks (CDNs), where an edge server can efficiently distribute streams to many clients while fetching content from an origin server. I’ll walk you through the process step-by-step, explain the edge deployment concept, and clarify how to work with configurations like rtmp.conf." />
<link rel="canonical" href="https://lzwjava.github.io/srs-streaming-en" />
<meta property="og:url" content="https://lzwjava.github.io/srs-streaming-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-01-06T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Simple Realtime Server (SRS) For RTMP Streaming" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2017-01-06T00:00:00+08:00","datePublished":"2017-01-06T00:00:00+08:00","description":"Let’s dive into using Simple Realtime Server (SRS) to deploy an edge server for RTMP streaming, with a focus on understanding and configuring it effectively, including the rtmp.conf file. SRS is a powerful, high-performance media server designed for real-time streaming protocols like RTMP, HLS, and HTTP-FLV. It’s particularly well-suited for scenarios requiring scalability, such as content delivery networks (CDNs), where an edge server can efficiently distribute streams to many clients while fetching content from an origin server. I’ll walk you through the process step-by-step, explain the edge deployment concept, and clarify how to work with configurations like rtmp.conf.","headline":"Simple Realtime Server (SRS) For RTMP Streaming","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/srs-streaming-en"},"url":"https://lzwjava.github.io/srs-streaming-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=2329cb9a950a5877a29022d2b626df39ca664503">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=2329cb9a950a5877a29022d2b626df39ca664503" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Simple Realtime Server (SRS) For RTMP Streaming | Original
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/en/2017-01-06-srs-streaming-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsen2017-01-06-srs-streaming-en.md</span> -->
      

      <!-- <span>2017-01-06-srs-streaming-en.md</span> -->

      
        

        
          
          <a href="#" class="button">2017.01</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/srs-streaming-en" selected>English</option>
        <option value="/srs-streaming-zh" >中文</option>
        <option value="/srs-streaming-ja" >日本語</option>
        <option value="/srs-streaming-es" >Español</option>
        <option value="/srs-streaming-hi" >हिंदी</option>
        <option value="/srs-streaming-fr" >Français</option>
        <option value="/srs-streaming-de" >Deutsch</option>
        <option value="/srs-streaming-ar" >العربية</option>
        <option value="/srs-streaming-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Let’s dive into using Simple Realtime Server (SRS) to deploy an edge server for RTMP streaming, with a focus on understanding and configuring it effectively, including the <code class="language-plaintext highlighter-rouge">rtmp.conf</code> file. SRS is a powerful, high-performance media server designed for real-time streaming protocols like RTMP, HLS, and HTTP-FLV. It’s particularly well-suited for scenarios requiring scalability, such as content delivery networks (CDNs), where an edge server can efficiently distribute streams to many clients while fetching content from an origin server. I’ll walk you through the process step-by-step, explain the edge deployment concept, and clarify how to work with configurations like <code class="language-plaintext highlighter-rouge">rtmp.conf</code>.</p>

<h3 id="what-is-srs-and-edge-deployment">What is SRS and Edge Deployment?</h3>
<p>SRS is an open-source server built to handle real-time media streaming with a focus on simplicity and efficiency. It supports RTMP (Real-Time Messaging Protocol) for low-latency live streaming, alongside other protocols like HLS and WebRTC. In SRS, an “edge” server acts as an intermediary between clients (viewers or publishers) and an “origin” server (where the stream originates). The edge fetches streams from the origin only when requested by clients, reducing the load on the origin and enabling scalable distribution—think of it like a CDN’s caching layer tailored for live streams.</p>

<p>Deploying an edge server with SRS is ideal when you need to:</p>
<ul>
  <li>Serve a large number of viewers without overwhelming the origin.</li>
  <li>Allow publishers to push streams to the edge, which then forwards them to the origin.</li>
  <li>Minimize bandwidth usage on costly origin servers by leveraging cheaper edge nodes.</li>
</ul>

<h3 id="step-by-step-deploying-an-edge-server-with-srs-for-rtmp">Step-by-Step: Deploying an Edge Server with SRS for RTMP</h3>
<p>Here’s how to set up SRS as an edge server for RTMP streaming. I’ll assume you’re working on a Linux system (e.g., Ubuntu), as SRS is optimized for such environments.</p>

<h4 id="1-install-srs">1. Install SRS</h4>
<p>First, you’ll need to get SRS running on your machine:</p>
<ul>
  <li><strong>Download SRS</strong>: Grab the latest stable version from the official GitHub repository (github.com/ossrs/srs). As of today, February 26, 2025, you’d typically clone the repo:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/ossrs/srs.git
cd srs
</code></pre></div>    </div>
  </li>
  <li><strong>Build SRS</strong>: SRS uses a straightforward build process with <code class="language-plaintext highlighter-rouge">./configure</code> and <code class="language-plaintext highlighter-rouge">make</code>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./configure
make
</code></pre></div>    </div>
    <p>This compiles the server into the <code class="language-plaintext highlighter-rouge">objs</code> directory (e.g., <code class="language-plaintext highlighter-rouge">objs/srs</code>).</p>
  </li>
  <li><strong>Test the Binary</strong>: Run it with the default config to ensure it works:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./objs/srs -c conf/srs.conf
</code></pre></div>    </div>
    <p>By default, it listens on port 1935 for RTMP. Check the console output for confirmation.</p>
  </li>
</ul>

<h4 id="2-understand-the-edge-concept">2. Understand the Edge Concept</h4>
<p>In SRS, an edge server operates in “remote” mode, meaning it doesn’t generate streams itself but pulls them from an origin server when a client requests them (for playback) or pushes streams to the origin (for publishing). This on-demand fetching is what makes edge servers efficient for scaling RTMP delivery.</p>

<ul>
  <li><strong>Origin Server</strong>: The source of the stream (e.g., where an encoder like OBS pushes an RTMP stream).</li>
  <li><strong>Edge Server</strong>: A relay that clients connect to, fetching from the origin only when needed.</li>
</ul>

<p>For this example, let’s assume you have an origin server already running SRS at <code class="language-plaintext highlighter-rouge">192.168.1.100:1935</code> (replace this with your actual origin IP).</p>

<h4 id="3-configure-the-edge-server">3. Configure the Edge Server</h4>
<p>SRS uses configuration files to define its behavior. The default <code class="language-plaintext highlighter-rouge">srs.conf</code> is a good starting point, but for edge deployment, you’ll create a specific config—let’s call it <code class="language-plaintext highlighter-rouge">edge.conf</code>. Here’s how to set it up:</p>

<ul>
  <li><strong>Create <code class="language-plaintext highlighter-rouge">edge.conf</code></strong>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd conf
nano edge.conf
</code></pre></div>    </div>
  </li>
  <li><strong>Add Edge Configuration</strong>:
Here’s a minimal <code class="language-plaintext highlighter-rouge">edge.conf</code> for RTMP edge deployment:
    <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">listen</span>              <span class="m">1935</span>;
<span class="n">max_connections</span>     <span class="m">1000</span>;
<span class="n">srs_log_tank</span>        <span class="n">file</span>;
<span class="n">srs_log_file</span>        ./<span class="n">objs</span>/<span class="n">edge</span>.<span class="n">log</span>;
<span class="n">vhost</span> <span class="err">__</span><span class="n">defaultVhost__</span> {
    <span class="n">cluster</span> {
        <span class="n">mode</span>        <span class="n">remote</span>;
        <span class="n">origin</span>      <span class="m">192</span>.<span class="m">168</span>.<span class="m">1</span>.<span class="m">100</span>:<span class="m">1935</span>;
    }
}
</code></pre></div>    </div>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">listen 1935</code>: The edge listens for RTMP connections on port 1935.</li>
      <li><code class="language-plaintext highlighter-rouge">max_connections 1000</code>: Limits concurrent connections (adjust based on your server capacity).</li>
      <li><code class="language-plaintext highlighter-rouge">srs_log_file</code>: Logs to a file for debugging.</li>
      <li><code class="language-plaintext highlighter-rouge">vhost __defaultVhost__</code>: The default virtual host config.</li>
      <li><code class="language-plaintext highlighter-rouge">cluster { mode remote; origin 192.168.1.100:1935; }</code>: Sets this server as an edge (<code class="language-plaintext highlighter-rouge">mode remote</code>) and points it to the origin server.</li>
    </ul>
  </li>
  <li><strong>Save and Exit</strong>: Ctrl+O, Enter, Ctrl+X in nano.</li>
</ul>

<h4 id="4-start-the-edge-server">4. Start the Edge Server</h4>
<p>Run SRS with your edge config:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./objs/srs -c conf/edge.conf
</code></pre></div></div>
<p>Check the logs (<code class="language-plaintext highlighter-rouge">./objs/edge.log</code>) to confirm it’s running and connected to the origin.</p>

<h4 id="5-test-the-setup">5. Test the Setup</h4>
<ul>
  <li><strong>Publish a Stream</strong>: Use a tool like OBS or FFmpeg to push an RTMP stream to the origin server:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg -re -i input.mp4 -c copy -f flv rtmp://192.168.1.100/live/livestream
</code></pre></div>    </div>
    <p>Here, <code class="language-plaintext highlighter-rouge">live</code> is the app name, and <code class="language-plaintext highlighter-rouge">livestream</code> is the stream key.</p>
  </li>
  <li><strong>Play from Edge</strong>: Use VLC or another RTMP client to play the stream from the edge:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rtmp://&lt;edge-server-ip&gt;/live/livestream
</code></pre></div>    </div>
    <p>Replace <code class="language-plaintext highlighter-rouge">&lt;edge-server-ip&gt;</code> with your edge server’s IP (e.g., <code class="language-plaintext highlighter-rouge">192.168.1.101</code>). The edge will fetch the stream from the origin and serve it to you.</p>
  </li>
</ul>

<h4 id="6-exploring-rtmpconf">6. Exploring <code class="language-plaintext highlighter-rouge">rtmp.conf</code></h4>
<p>SRS doesn’t ship with an <code class="language-plaintext highlighter-rouge">rtmp.conf</code> file by default, but you might encounter references to it in tutorials or custom setups. It’s essentially a naming convention for an RTMP-specific config file. For example, the SRS documentation (ossrs.net) provides a sample <code class="language-plaintext highlighter-rouge">rtmp.conf</code> for real-time RTMP streaming:</p>
<div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">listen</span>              <span class="m">1935</span>;
<span class="n">max_connections</span>     <span class="m">1000</span>;
<span class="n">vhost</span> <span class="err">__</span><span class="n">defaultVhost__</span> {
    <span class="n">tcp_nodelay</span>     <span class="n">on</span>;
    <span class="n">min_latency</span>     <span class="n">on</span>;
    <span class="n">play</span> {
        <span class="n">gop_cache</span>   <span class="n">off</span>;
        <span class="n">queue_length</span> <span class="m">10</span>;
    }
    <span class="n">publish</span> {
        <span class="n">mr</span>          <span class="n">off</span>;
    }
}
</code></pre></div></div>
<ul>
  <li><strong>Purpose</strong>: This config optimizes for low-latency RTMP streaming on an origin server, not an edge. For edge deployment, you’d adapt it by adding the <code class="language-plaintext highlighter-rouge">cluster</code> block from step 3.</li>
  <li><strong>Key Settings</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">tcp_nodelay on</code>: Reduces latency by disabling Nagle’s algorithm.</li>
      <li><code class="language-plaintext highlighter-rouge">min_latency on</code>: Prioritizes low latency over buffering.</li>
      <li><code class="language-plaintext highlighter-rouge">gop_cache off</code>: Disables caching of Group of Pictures for real-time playback.</li>
      <li><code class="language-plaintext highlighter-rouge">mr off</code>: Disables “merge read” to avoid delays in publishing.</li>
    </ul>
  </li>
</ul>

<p>For an edge, you’d combine this with the <code class="language-plaintext highlighter-rouge">cluster</code> settings rather than using it standalone.</p>

<h3 id="explaining-more-edge-mechanics-and-rtmp">Explaining More: Edge Mechanics and RTMP</h3>
<ul>
  <li><strong>How Edge Works</strong>: When a client requests <code class="language-plaintext highlighter-rouge">rtmp://&lt;edge-ip&gt;/live/livestream</code>, the edge checks if it has the stream. If not, it pulls it from the origin (<code class="language-plaintext highlighter-rouge">192.168.1.100:1935</code>) and caches it locally to serve other clients. If a publisher pushes to the edge, it forwards the stream to the origin.</li>
  <li><strong>RTMP Specifics</strong>: RTMP is a low-latency protocol ideal for live streaming. SRS handles RTMP efficiently, supporting features like absolute time coding (ATC) for synchronization across servers, though it’s off by default in edge mode unless specified.</li>
  <li><strong>Scalability</strong>: Add multiple edges pointing to the same origin to handle thousands of clients. SRS supports failover by listing multiple origins (e.g., <code class="language-plaintext highlighter-rouge">origin 192.168.1.100:1935 192.168.1.200:1935;</code>).</li>
</ul>

<h3 id="tips-and-troubleshooting">Tips and Troubleshooting</h3>
<ul>
  <li><strong>Firewall</strong>: Ensure port 1935 is open on both origin and edge servers.</li>
  <li><strong>Logs</strong>: Check <code class="language-plaintext highlighter-rouge">edge.log</code> for errors like connection failures to the origin.</li>
  <li><strong>Latency</strong>: Edge adds minimal latency (typically &lt;1s) if the origin is low-latency too.</li>
  <li><strong>Multiple Edges</strong>: Deploy additional edges with the same config, adjusting <code class="language-plaintext highlighter-rouge">listen</code> ports or IPs as needed.</li>
</ul>

<h3 id="wrapping-up">Wrapping Up</h3>
<p>Deploying an SRS edge server for RTMP is straightforward once you grasp the origin-edge relationship. The <code class="language-plaintext highlighter-rouge">edge.conf</code> sets up the edge to fetch or push streams dynamically, while an <code class="language-plaintext highlighter-rouge">rtmp.conf</code>-style config could fine-tune RTMP performance if needed. With this setup, you’re ready to scale live streaming efficiently—whether for a handful of viewers or a global audience. Want to tweak it further or integrate HLS alongside RTMP? Just let me know!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
