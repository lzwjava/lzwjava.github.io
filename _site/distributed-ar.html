<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>## مقدمة إلى الحوسبة السحابية والبيانات الضخمة</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>مقدمة إلى الحوسبة السحابية والبيانات الضخمة | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="مقدمة إلى الحوسبة السحابية والبيانات الضخمة" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ar" />
<meta name="description" content="تحتوي هذه الدورة على المواضيع التالية:" />
<meta property="og:description" content="تحتوي هذه الدورة على المواضيع التالية:" />
<link rel="canonical" href="https://lzwjava.github.io/distributed-ar" />
<meta property="og:url" content="https://lzwjava.github.io/distributed-ar" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-10T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="مقدمة إلى الحوسبة السحابية والبيانات الضخمة" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2021-03-10T00:00:00+08:00","datePublished":"2021-03-10T00:00:00+08:00","description":"تحتوي هذه الدورة على المواضيع التالية:","headline":"مقدمة إلى الحوسبة السحابية والبيانات الضخمة","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/distributed-ar"},"url":"https://lzwjava.github.io/distributed-ar"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=e3f8a3b2822a869ea18d55684a5843a037662ef9">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=e3f8a3b2822a869ea18d55684a5843a037662ef9" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       ## مقدمة إلى الحوسبة السحابية والبيانات الضخمة | أصلي، ترجم بواسطة AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ar/2021-03-10-distributed-ar.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsar2021-03-10-distributed-ar.md</span> -->
      

      <!-- <span>2021-03-10-distributed-ar.md</span> -->

      
        

        
          
          <a href="#" class="button">2021.03</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/distributed-en" >English</option>
        <option value="/distributed-zh" >中文</option>
        <option value="/distributed-ja" >日本語</option>
        <option value="/distributed-es" >Español</option>
        <option value="/distributed-hi" >हिंदी</option>
        <option value="/distributed-fr" >Français</option>
        <option value="/distributed-de" >Deutsch</option>
        <option value="/distributed-ar" selected>العربية</option>
        <option value="/distributed-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>تحتوي هذه الدورة على المواضيع التالية:</p>

<ul>
  <li>Spark</li>
  <li>Hadoop</li>
  <li>Kubernetes</li>
  <li>Docker</li>
  <li>Flink</li>
  <li>MongoDB</li>
</ul>

<p>(ملاحظة: الأسماء التقنية مثل Spark وHadoop وKubernetes وDocker وFlink وMongoDB لا تُترجم عادةً في السياقات التقنية، لذا تم تركها كما هي.)</p>

<p>عند الحديث عن الحوسبة السحابية، يبدو أنه لا يمكن الاستغناء عن العديد من الأدوات مثل Hadoop وHive وHbase وZooKeeper وDocker وKubernetes وSpark وKafka وMongoDB وFlink وDruid وPresto وKylin وElastic Search. هل سمعت بها جميعًا؟ بعض هذه الأدوات وجدتها في وصف وظائف مثل <code class="language-plaintext highlighter-rouge">مهندس البيانات الضخمة</code> و<code class="language-plaintext highlighter-rouge">مهندس الخلفية الموزعة</code>. هذه الوظائف تتمتع برواتب عالية. دعونا نحاول تثبيتها جميعًا والتلاعب بها قليلاً.</p>

<h2 id="استكشاف-spark-الأولي">استكشاف Spark الأولي</h2>

<p>الموقع الرسمي يقول إن <code class="language-plaintext highlighter-rouge">Spark</code> هو محرك تحليل يستخدم لمعالجة البيانات الضخمة. <code class="language-plaintext highlighter-rouge">Spark</code> هو في الأساس مجموعة من المكتبات. يبدو أنه لا يتم تقسيمه إلى خادم و عميل مثل <code class="language-plaintext highlighter-rouge">Redis</code>. <code class="language-plaintext highlighter-rouge">Spark</code> يُستخدم فقط على جانب العميل. قمت بتحميل أحدث إصدار من الموقع الرسمي، وهو <code class="language-plaintext highlighter-rouge">spark-3.1.1-bin-hadoop3.2.tar</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree <span class="nb">.</span> <span class="nt">-L</span> 1
<span class="nb">.</span>
├── LICENSE
├── NOTICE
├── R
├── README.md
├── RELEASE
├── bin
├── conf
├── data
├── examples
├── jars
├── kubernetes
├── licenses
├── python
├── sbin
└── yarn
</code></pre></div></div>

<p>11 مجلدًا، 4 ملفات</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
يبدو أنها عبارة عن بعض مكتبات التحليل المكتوبة بلغات مختلفة.

كما ذكر الموقع الرسمي أنه يمكن تثبيت مكتبات التبعية مباشرة في Python باستخدام الأمر التالي:  
`pip install pyspark`

```shell
$ pip install pyspark
جمع pyspark
  تنزيل pyspark-3.1.1.tar.gz (212.3 MB)
     |████████████████████████████████| 212.3 MB 14 kB/s
جمع py4j==0.10.9
  تنزيل py4j-0.10.9-py2.py3-none-any.whl (198 kB)
     |████████████████████████████████| 198 kB 145 kB/s
بناء عجلات للحزم المجمعة: pyspark
  بناء عجلة لـ pyspark (setup.py) ... تم
  تم إنشاء عجلة لـ pyspark: اسم الملف=pyspark-3.1.1-py2.py3-none-any.whl حجم=212767604 sha256=0b8079e82f3a5bcadad99179902d8c8ff9f8eccad928a469c11b97abdc960b72
  تم تخزينها في الدليل: /Users/lzw/Library/Caches/pip/wheels/23/bf/e9/9f3500437422e2ab82246f25a51ee480a44d4efc6c27e50d33
تم بناء pyspark بنجاح
تثبيت الحزم المجمعة: py4j, pyspark
تم تثبيت py4j-0.10.9 و pyspark-3.1.1 بنجاح
</code></pre></div></div>

<p>تم التثبيت بنجاح.</p>

<p>هذا سيظهر على الموقع الرسمي، وهناك بعض الأمثلة.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/run-example SparkPi 10
</code></pre></div></div>

<p>أوه، يبدو أنه يمكن تشغيل البرنامج الموجود في حزمة التثبيت التي تم تنزيلها للتو. لكن حدث خطأ.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./bin/run-example SparkPi 10
21/03/11 00:06:15 WARN NativeCodeLoader: غير قادر على تحميل مكتبة native-hadoop لمنصتك... يتم استخدام الفئات المدمجة في جافا حيثما كان ذلك مناسبًا
21/03/11 00:06:16 INFO ResourceUtils: لم يتم تكوين موارد مخصصة لـ spark.driver.
21/03/11 00:06:16 WARN Utils: الخدمة <span class="s1">'sparkDriver'</span> لم تتمكن من الربط على منفذ عشوائي مجاني. قد ترغب في التحقق مما إذا كان يتم تكوين عنوان ربط مناسب.
</code></pre></div></div>

<blockquote>
  <p>Spark هو محرك معالجة سريع وعام متوافق مع بيانات Hadoop. يمكنه العمل في مجموعات Hadoop من خلال YARN أو الوضع المستقل لـ Spark، ويمكنه معالجة البيانات في HDFS، HBase، Cassandra، Hive، وأي تنسيق إدخال من Hadoop. تم تصميمه لأداء كل من المعالجة الدفعية (مشابهة لـ MapReduce) وأحمال العمل الجديدة مثل البث المباشر، الاستعلامات التفاعلية، وتعلم الآلة.</p>
</blockquote>

<p>ظهرت كلمة <code class="language-plaintext highlighter-rouge">hadoop</code> عدة مرات. بعد البحث على Google عن <code class="language-plaintext highlighter-rouge">spark depends hadoop</code>، وجدت هذا النص. يبدو أن هذا يعتمد على بيانات بتنسيق <code class="language-plaintext highlighter-rouge">Hadoop</code>. دعونا ندرس <code class="language-plaintext highlighter-rouge">Hadoop</code> أولاً.</p>

<h2 id="hadoop">Hadoop</h2>

<p>بعد الاطلاع السريع على الموقع الرسمي، دعنا نبدأ بالتثبيت.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>hadoop
</code></pre></div></div>

<p>أثناء عملية التثبيت، دعونا نتعرف على الأمر.</p>

<blockquote>
  <p>مكتبة برمجيات Apache Hadoop هي إطار عمل يسمح بمعالجة مجموعات البيانات الكبيرة بشكل موزع عبر مجموعات من أجهزة الكمبيوتر باستخدام نماذج برمجية بسيطة. تم تصميمها لتتوسع من خوادم فردية إلى آلاف الأجهزة، حيث يوفر كل جهاز حسابًا محليًا وتخزينًا. بدلًا من الاعتماد على الأجهزة لتوفير التوفر العالي، تم تصميم المكتبة نفسها لاكتشاف والتعامل مع الأعطال على مستوى طبقة التطبيق، مما يوفر خدمة عالية التوفر على مجموعة من أجهزة الكمبيوتر، حيث قد يكون كل جهاز عرضة للأعطال.</p>
</blockquote>

<p>بمعنى آخر، Hadoop هو إطار عمل مصمم لمعالجة مجموعات البيانات الموزعة. قد تكون هذه البيانات موزعة على العديد من أجهزة الكمبيوتر. يتم التعامل معها باستخدام نموذج برمجة بسيط. تم تصميمه للتمدد من خادم واحد إلى آلاف الأجهزة. بدلاً من الاعتماد على توفر الأجهزة العالية، تم تصميم هذه المكتبة للكشف عن الأخطاء ومعالجتها على مستوى التطبيق. وبالتالي، يمكن نشر خدمات عالية التوفر في عنقود (cluster)، على الرغم من أن كل جهاز في العنقود قد يكون عرضة للفشل.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>hadoop
خطأ:
  homebrew-core هو استنساخ ضحل.
  homebrew-cask هو استنساخ ضحل.
لتنفيذ <span class="sb">`</span>brew update<span class="sb">`</span>، قم أولاً بتشغيل:
  git <span class="nt">-C</span> /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core fetch <span class="nt">--unshallow</span>
  git <span class="nt">-C</span> /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask fetch <span class="nt">--unshallow</span>
قد تستغرق هذه الأوامر بضع دقائق للتنفيذ بسبب الحجم الكبير للمستودعات.
تم فرض هذا القيد بناءً على طلب GitHub لأن تحديث الاستنساخات الضحلة
هو عملية مكلفة للغاية بسبب تخطيط الشجرة وحركة المرور في
Homebrew/homebrew-core و Homebrew/homebrew-cask. نحن لا نقوم بذلك تلقائيًا
لتجنب تنفيذ عملية إلغاء الاستنساخ الضحلة بشكل متكرر في
أنظمة CI <span class="o">(</span>والتي يجب إصلاحها بدلاً من ذلك لعدم استخدام استنساخات ضحلة<span class="o">)</span><span class="nb">.</span> نأسف للإزعاج!
<span class="o">==&gt;</span> تنزيل https://homebrew.bintray.com/bottles/openjdk-15.0.1.big_sur.bottle.tar.gz
تم التنزيل مسبقًا: /Users/lzw/Library/Caches/Homebrew/downloads/d1e3ece4af1d225bc2607eaa4ce85a873d2c6d43757ae4415d195751bc431962--openjdk-15.0.1.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> تنزيل https://www.apache.org/dyn/closer.lua?path<span class="o">=</span>hadoop/common/hadoop-3.3.0/hadoop-3.3.0.tar.gz
تم التنزيل مسبقًا: /Users/lzw/Library/Caches/Homebrew/downloads/764c6a0ea7352bb8bb505989feee1b36dc628c2dcd6b93fef1ca829d191b4e1e--hadoop-3.3.0.tar.gz
<span class="o">==&gt;</span> تثبيت التبعيات لـ hadoop: openjdk
<span class="o">==&gt;</span> تثبيت تبعية hadoop: openjdk
<span class="o">==&gt;</span> صب openjdk-15.0.1.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> ملاحظات
لكي تجد أغلفة Java النظامية هذا JDK، قم بإنشاء رابط رمزي باستخدام
  <span class="nb">sudo ln</span> <span class="nt">-sfn</span> /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">openjdk</code> هو keg-only، مما يعني أنه لم يتم إنشاء رابط رمزي له في <code class="language-plaintext highlighter-rouge">/usr/local</code>،<br />
لأنه يتعارض مع غلاف <code class="language-plaintext highlighter-rouge">java</code> الخاص بـ macOS.</p>

<p>إذا كنت بحاجة إلى أن يكون <code class="language-plaintext highlighter-rouge">openjdk</code> أولًا في مسار <code class="language-plaintext highlighter-rouge">PATH</code> الخاص بك، قم بتنفيذ الأمر التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'export PATH="/usr/local/opt/openjdk/bin:$PATH"'</span> <span class="o">&gt;&gt;</span> /Users/lzw/.bash_profile
</code></pre></div></div>

<p>لتمكين المترجمات من العثور على <code class="language-plaintext highlighter-rouge">openjdk</code>، قد تحتاج إلى تعيين:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CPPFLAGS</span><span class="o">=</span><span class="s2">"-I/usr/local/opt/openjdk/include"</span>
</code></pre></div></div>

<p>==&gt; الملخص
🍺  /usr/local/Cellar/openjdk/15.0.1: 614 ملفًا، 324.9 ميجابايت
==&gt; تثبيت Hadoop
🍺  /usr/local/Cellar/hadoop/3.3.0: 21,819 ملفًا، 954.7 ميجابايت، تم البناء في دقيقتين و15 ثانية
==&gt; ترقية تبعية واحدة:
Maven 3.3.3 -&gt; 3.6.3_1
==&gt; ترقية Maven 3.3.3 -&gt; 3.6.3_1
==&gt; تنزيل https://www.apache.org/dyn/closer.lua?path=maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
==&gt; التنزيل من https://mirror.olnevhost.net/pub/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
######################################################################## 100.0%
خطأ: خطوة <code class="language-plaintext highlighter-rouge">brew link</code> لم تكتمل بنجاح
تم بناء الصيغة، ولكن لم يتم إنشاء رابط رمزي في /usr/local
تعذر إنشاء رابط رمزي لـ bin/mvn
الهدف /usr/local/bin/mvn
هو رابط رمزي يتبع لـ Maven. يمكنك إلغاء الربط:
  brew unlink maven</p>

<p>لإجبار الربط واستبدال جميع الملفات المتضاربة:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  brew <span class="nb">link</span> <span class="nt">--overwrite</span> maven
</code></pre></div></div>

<p>لإدراج جميع الملفات التي سيتم حذفها:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  brew <span class="nb">link</span> <span class="nt">--overwrite</span> <span class="nt">--dry-run</span> maven
</code></pre></div></div>

<p>الملفات التي قد تكون متضاربة هي:
/usr/local/bin/mvn -&gt; /usr/local/Cellar/maven/3.3.3/bin/mvn
/usr/local/bin/mvnDebug -&gt; /usr/local/Cellar/maven/3.3.3/bin/mvnDebug
/usr/local/bin/mvnyjp -&gt; /usr/local/Cellar/maven/3.3.3/bin/mvnyjp
==&gt; الملخص
🍺  /usr/local/Cellar/maven/3.6.3_1: 87 ملفًا، 10.7 ميجابايت، تم بناؤها في 7 ثوانٍ
إزالة: /usr/local/Cellar/maven/3.3.3… (92 ملفًا، 9 ميجابايت)
==&gt; التحقق من التبعيات المعتمدة على الصيغ المحدثة…
==&gt; لم يتم العثور على تبعيات معطلة!
==&gt; تحذيرات
==&gt; openjdk
لكي تتمكن أغلفة Java النظامية من العثور على هذا JDK، قم بإنشاء رابط رمزي باستخدام
  sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk</p>

<p><code class="language-plaintext highlighter-rouge">openjdk</code> هو keg-only، مما يعني أنه لم يتم إنشاء رابط رمزي له في <code class="language-plaintext highlighter-rouge">/usr/local</code>،
لأنه يتعارض مع الغلاف <code class="language-plaintext highlighter-rouge">java</code> الخاص بـ macOS.</p>

<p>إذا كنت بحاجة إلى أن يكون <code class="language-plaintext highlighter-rouge">openjdk</code> أولًا في مسار <code class="language-plaintext highlighter-rouge">PATH</code> الخاص بك، قم بتنفيذ الأمر التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'export PATH="/usr/local/opt/openjdk/bin:$PATH"'</span> <span class="o">&gt;&gt;</span> /Users/lzw/.bash_profile
</code></pre></div></div>

<p>هذا الأمر سيضيف مسار <code class="language-plaintext highlighter-rouge">openjdk</code> إلى ملف <code class="language-plaintext highlighter-rouge">.bash_profile</code> الخاص بك، مما يضمن أن يتم تحميله أولًا عند فتح أي طرفية جديدة.</p>

<p>لتمكين المترجمات من العثور على <code class="language-plaintext highlighter-rouge">openjdk</code>، قد تحتاج إلى تعيين:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CPPFLAGS</span><span class="o">=</span><span class="s2">"-I/usr/local/opt/openjdk/include"</span>
</code></pre></div></div>

<p>لاحظت في سجل إخراج <code class="language-plaintext highlighter-rouge">brew</code> أن <code class="language-plaintext highlighter-rouge">maven</code> لم يتم ربطه بشكل جيد. بعد ذلك، قمت بإجراء ربط إجباري للإصدار <code class="language-plaintext highlighter-rouge">3.6.3_1</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  brew <span class="nb">link</span> <span class="nt">--overwrite</span> maven
</code></pre></div></div>

<p>تم تثبيت <code class="language-plaintext highlighter-rouge">Hadoop</code> بنجاح.</p>

<blockquote>
  <h2 id="الوحدات">الوحدات</h2>

  <p>يتضمن المشروع هذه الوحدات:</p>

  <ul>
    <li><strong>Hadoop Common</strong>: الأدوات المشتركة التي تدعم وحدات Hadoop الأخرى.</li>
    <li><strong>نظام الملفات الموزع Hadoop (HDFS™)</strong>: نظام ملفات موزع يوفر وصولًا عالي الإنتاجية لبيانات التطبيقات.</li>
    <li><strong>Hadoop YARN</strong>: إطار عمل لجدولة المهام وإدارة موارد العنقودية.</li>
    <li><strong>Hadoop MapReduce</strong>: نظام يعتمد على YARN لمعالجة مجموعات البيانات الكبيرة بشكل متوازي.</li>
    <li><strong>Hadoop Ozone</strong>: مخزن كائنات لـ Hadoop.</li>
  </ul>
</blockquote>

<p>يبدو أن هناك وحدات متاحة. عند كتابة <code class="language-plaintext highlighter-rouge">hadoop</code>، سيظهر التالي:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>hadoop
الاستخدام: hadoop <span class="o">[</span>خيارات] أمر_فرعي <span class="o">[</span>خيارات الأمر الفرعي]
 أو    hadoop <span class="o">[</span>خيارات] اسم_الصف <span class="o">[</span>خيارات اسم الصف]
  حيث اسم_الصف هو صف Java مقدم من المستخدم
</code></pre></div></div>

<p>الخيارات إما لا شيء أو أي من:</p>

<p>–config dir                     دليل تهيئة Hadoop
–debug                          تفعيل وضع تصحيح الأخطاء في سكريبت الشل
–help                           معلومات الاستخدام
buildpaths                       محاولة إضافة ملفات الفئات من شجرة البناء
hostnames list[,of,host,names]   الأسماء المضيفة للاستخدام في وضع العبد (slave mode)
hosts filename                   قائمة الأسماء المضيفة للاستخدام في وضع العبد (slave mode)
loglevel level                   تعيين مستوى log4j لهذا الأمر
workers                          تفعيل وضع العامل (worker mode)</p>

<p>SUBCOMMAND هو أحد الأوامر التالية:
    أوامر الإدارة:</p>

<p>daemonlog     الحصول على/تعيين مستوى السجل لكل خادم (daemon)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>أوامر العميل:
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>archive       إنشاء أرشيف Hadoop
checknative   التحقق من توفر مكتبات Hadoop الأصلية وضغطها
classpath     طباعة مسار الفئة المطلوب للحصول على ملف Hadoop jar والمكتبات المطلوبة
conftest      التحقق من صحة ملفات التكوين XML
credential    التفاعل مع مزودي الاعتمادات
distch        أداة تغيير البيانات الوصفية الموزعة
distcp        نسخ ملف أو أدلة بشكل متكرر
dtutil        عمليات متعلقة برموز التفويض
envvars       عرض متغيرات بيئة Hadoop المحسوبة
fs            تشغيل عميل نظام ملفات عام
gridmix       إرسال مزيج من الوظائف الاصطناعية، نمذجة حمل من إنتاج مسبق
jar &lt;jar&gt;     تشغيل ملف jar. ملاحظة: يرجى استخدام "yarn jar" لبدء تطبيقات YARN، وليس هذا الأمر.
jnipath       طباعة java.library.path
kdiag         تشخيص مشاكل Kerberos
kerbname      عرض تحويل المبدأ auth_to_local
key           إدارة المفاتيح عبر KeyProvider
rumenfolder   تحجيم أثر إدخال rumen
rumentrace    تحويل السجلات إلى أثر rumen
s3guard       إدارة البيانات الوصفية على S3
trace         عرض وتعديل إعدادات تتبع Hadoop
version       طباعة الإصدار
</code></pre></div></div>

<p>الأوامر الخفية (Daemon Commands):</p>

<p>kms           تشغيل KMS، خادم إدارة المفاتيح
registrydns   تشغيل خادم DNS للسجل</p>

<p>قد يطبع SUBCOMMAND المساعدة عند استدعائه بدون معاملات أو باستخدام -h.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
الموقع الرسمي قدم بعض الأمثلة.

```shell
  $ mkdir input
  $ cp etc/hadoop/*.xml input
  $ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.2.jar grep input output 'dfs[a-z.]+'
  $ cat output/*
</code></pre></div></div>

<p>لاحظت وجود ملف <code class="language-plaintext highlighter-rouge">share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.2.jar</code>. هذا يعني أنه ربما تكون هناك بعض ملفات الأمثلة التي لم نحصل عليها. أتوقع أن تثبيت <code class="language-plaintext highlighter-rouge">Homebrew</code> قد لا يشمل هذه الملفات. لذلك قمنا بتنزيل حزمة التثبيت من الموقع الرسمي.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree <span class="nb">.</span> <span class="nt">-L</span> 1
<span class="nb">.</span>
├── LICENSE-binary
├── LICENSE.txt
├── NOTICE-binary
├── NOTICE.txt
├── README.txt
├── bin
├── etc
├── include
├── lib
├── libexec
├── licenses-binary
├── sbin
└── share
</code></pre></div></div>

<p>ظهر دليل <code class="language-plaintext highlighter-rouge">share</code>. ولكن هل حقًا <code class="language-plaintext highlighter-rouge">Homebrew</code> لا يحتوي على هذه الملفات الإضافية؟ ابحث عن دليل تثبيت <code class="language-plaintext highlighter-rouge">Homebrew</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">type </span>hadoop
hadoop هو /usr/local/bin/hadoop
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-alrt</span> /usr/local/bin/hadoop
lrwxr-xr-x  1 lzw  admin  33 Mar 11 00:48 /usr/local/bin/hadoop -&gt; ../Cellar/hadoop/3.3.0/bin/hadoop
<span class="nv">$ </span><span class="nb">cd</span> /usr/local/Cellar/hadoop/3.3.0
</code></pre></div></div>

<p>هذا هو شجرة الدليل المطبوع في <code class="language-plaintext highlighter-rouge">/usr/local/Cellar/hadoop/3.3.0/libexec/share/hadoop</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree <span class="nb">.</span> <span class="nt">-L</span> 2
<span class="nb">.</span>
├── client
│   ├── hadoop-client-api-3.3.0.jar
│   ├── hadoop-client-minicluster-3.3.0.jar
│   └── hadoop-client-runtime-3.3.0.jar
├── common
│   ├── hadoop-common-3.3.0-tests.jar
│   ├── hadoop-common-3.3.0.jar
│   ├── hadoop-kms-3.3.0.jar
│   ├── hadoop-nfs-3.3.0.jar
│   ├── hadoop-registry-3.3.0.jar
│   ├── jdiff
│   ├── lib
│   ├── sources
│   └── webapps
├── hdfs
│   ├── hadoop-hdfs-3.3.0-tests.jar
│   ├── hadoop-hdfs-3.3.0.jar
│   ├── hadoop-hdfs-client-3.3.0-tests.jar
│   ├── hadoop-hdfs-client-3.3.0.jar
│   ├── hadoop-hdfs-httpfs-3.3.0.jar
│   ├── hadoop-hdfs-native-client-3.3.0-tests.jar
│   ├── hadoop-hdfs-native-client-3.3.0.jar
│   ├── hadoop-hdfs-nfs-3.3.0.jar
│   ├── hadoop-hdfs-rbf-3.3.0-tests.jar
│   ├── hadoop-hdfs-rbf-3.3.0.jar
│   ├── jdiff
│   ├── lib
│   ├── sources
│   └── webapps
├── mapreduce
│   ├── hadoop-mapreduce-client-app-3.3.0.jar
│   ├── hadoop-mapreduce-client-common-3.3.0.jar
│   ├── hadoop-mapreduce-client-core-3.3.0.jar
│   ├── hadoop-mapreduce-client-hs-3.3.0.jar
│   ├── hadoop-mapreduce-client-hs-plugins-3.3.0.jar
│   ├── hadoop-mapreduce-client-jobclient-3.3.0-tests.jar
│   ├── hadoop-mapreduce-client-jobclient-3.3.0.jar
│   ├── hadoop-mapreduce-client-nativetask-3.3.0.jar
│   ├── hadoop-mapreduce-client-shuffle-3.3.0.jar
│   ├── hadoop-mapreduce-client-uploader-3.3.0.jar
│   ├── hadoop-mapreduce-examples-3.3.0.jar
│   ├── jdiff
│   ├── lib-examples
│   └── sources
├── tools
│   ├── dynamometer
│   ├── lib
│   ├── resourceestimator
│   ├── sls
│   └── sources
└── yarn
    ├── csi
    ├── hadoop-yarn-api-3.3.0.jar
    ├── hadoop-yarn-applications-catalog-webapp-3.3.0.war
    ├── hadoop-yarn-applications-distributedshell-3.3.0.jar
    ├── hadoop-yarn-applications-mawo-core-3.3.0.jar
    ├── hadoop-yarn-applications-unmanaged-am-launcher-3.3.0.jar
    ├── hadoop-yarn-client-3.3.0.jar
    ├── hadoop-yarn-common-3.3.0.jar
    ├── hadoop-yarn-registry-3.3.0.jar
    ├── hadoop-yarn-server-applicationhistoryservice-3.3.0.jar
    ├── hadoop-yarn-server-common-3.3.0.jar
    ├── hadoop-yarn-server-nodemanager-3.3.0.jar
    ├── hadoop-yarn-server-resourcemanager-3.3.0.jar
    ├── hadoop-yarn-server-router-3.3.0.jar
    ├── hadoop-yarn-server-sharedcachemanager-3.3.0.jar
    ├── hadoop-yarn-server-tests-3.3.0.jar
    ├── hadoop-yarn-server-timeline-pluginstorage-3.3.0.jar
    ├── hadoop-yarn-server-web-proxy-3.3.0.jar
    ├── hadoop-yarn-services-api-3.3.0.jar
    ├── hadoop-yarn-services-core-3.3.0.jar
    ├── lib
    ├── sources
    ├── <span class="nb">test</span>
    ├── timelineservice
    ├── webapps
    └── yarn-service-examples
</code></pre></div></div>

<p>يمكنك أن ترى العديد من حزم <code class="language-plaintext highlighter-rouge">jar</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>input
<span class="nv">$ </span><span class="nb">ls
</span>bin			hadoop-config.sh	hdfs-config.sh		libexec			sbin			yarn-config.sh
etc			hadoop-functions.sh	input			mapred-config.sh	share
<span class="nv">$ </span><span class="nb">cp </span>etc/hadoop/<span class="k">*</span>.xml input
<span class="nv">$ </span><span class="nb">cd </span>input/
<span class="nv">$ </span><span class="nb">ls
</span>capacity-scheduler.xml	hadoop-policy.xml	hdfs-site.xml		kms-acls.xml		mapred-site.xml
core-site.xml		hdfs-rbf-site.xml	httpfs-site.xml		kms-site.xml		yarn-site.xml
<span class="nv">$ </span><span class="nb">cd</span> ..
<span class="nv">$ </span>bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.2.jar <span class="nb">grep </span>input output <span class="s1">'dfs[a-z.]+'</span>
JAR غير موجود أو ليس ملفًا عاديًا: /usr/local/Cellar/hadoop/3.3.0/libexec/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.2.jar
<span class="err">$</span>
<span class="nv">$ </span>bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.0.jar <span class="nb">grep </span>input output <span class="s1">'dfs[a-z.]+'</span>
2021-03-11 01:54:30,791 WARN util.NativeCodeLoader: غير قادر على تحميل مكتبة native-hadoop لمنصتك... يتم استخدام فئات Java المدمجة حيثما كان ذلك ممكنًا
2021-03-11 01:54:31,115 INFO impl.MetricsConfig: تم تحميل الخصائص من hadoop-metrics2.properties
2021-03-11 01:54:31,232 INFO impl.MetricsSystemImpl: تم جدولة فترة لقطة المقاييس كل 10 ثانية.
...
</code></pre></div></div>

<p>بعد اتباع المثال الموجود على الموقع الرسمي، لاحظت أن الأمر <code class="language-plaintext highlighter-rouge">bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.2.jar grep input</code> يحتوي على رقم إصدار قبل حزمة <code class="language-plaintext highlighter-rouge">jar</code>. لذلك، يجب تغيير هذا الرقم إلى الإصدار الخاص بنا وهو <code class="language-plaintext highlighter-rouge">3.3.0</code>.</p>

<p>نهاية السجل:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2021-03-11 01:54:35,374 INFO mapreduce.Job:  تم تنفيذ الخريطة بنسبة 100% والاختزال بنسبة 100%
2021-03-11 01:54:35,374 INFO mapreduce.Job: تم إكمال المهمة job_local2087514596_0002 بنجاح
2021-03-11 01:54:35,377 INFO mapreduce.Job: العدادات: 30
	عدادات نظام الملفات
		FILE: عدد البايتات المقروءة<span class="o">=</span>1204316
		FILE: عدد البايتات المكتوبة<span class="o">=</span>3565480
		FILE: عدد عمليات القراءة<span class="o">=</span>0
		FILE: عدد عمليات القراءة الكبيرة<span class="o">=</span>0
		FILE: عدد عمليات الكتابة<span class="o">=</span>0
	إطار عمل Map-Reduce
		سجلات الإدخال للخريطة<span class="o">=</span>1
		سجلات الإخراج للخريطة<span class="o">=</span>1
		بايتات الإخراج للخريطة<span class="o">=</span>17
		بايتات الإخراج المادية للخريطة<span class="o">=</span>25
		بايتات تقسيم الإدخال<span class="o">=</span>141
		سجلات الإدخال للجمع<span class="o">=</span>0
		سجلات الإخراج للجمع<span class="o">=</span>0
		مجموعات الإدخال للاختزال<span class="o">=</span>1
		بايتات الاختلاط للاختزال<span class="o">=</span>25
		سجلات الإدخال للاختزال<span class="o">=</span>1
		سجلات الإخراج للاختزال<span class="o">=</span>1
		السجلات المنسكبة<span class="o">=</span>2
		الخرائط المختلطة<span class="o">=</span>1
		عمليات الاختلاط الفاشلة<span class="o">=</span>0
		مخرجات الخرائط المدمجة<span class="o">=</span>1
		الوقت المستغرق في جمع القمامة <span class="o">(</span>مللي ثانية<span class="o">)=</span>57
		إجمالي استخدام الذاكرة المخصصة <span class="o">(</span>بايت<span class="o">)=</span>772800512
	أخطاء الاختلاط
		<span class="nv">BAD_ID</span><span class="o">=</span>0
		<span class="nv">CONNECTION</span><span class="o">=</span>0
		<span class="nv">IO_ERROR</span><span class="o">=</span>0
		<span class="nv">WRONG_LENGTH</span><span class="o">=</span>0
		<span class="nv">WRONG_MAP</span><span class="o">=</span>0
		<span class="nv">WRONG_REDUCE</span><span class="o">=</span>0
	عدادات تنسيق إدخال الملف
		البايتات المقروءة<span class="o">=</span>123
	عدادات تنسيق إخراج الملف
		البايتات المكتوبة<span class="o">=</span>23
</code></pre></div></div>

<p>تابع القراءة.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>output/<span class="k">*</span>
1	dfsadmin
</code></pre></div></div>

<p><strong>ملاحظة:</strong> النص أعلاه هو أمر في سطر الأوامر (shell command) يقوم بعرض محتويات جميع الملفات في مجلد <code class="language-plaintext highlighter-rouge">output/</code>. النتيجة المعروضة هي <code class="language-plaintext highlighter-rouge">1	dfsadmin</code>. لا يوجد حاجة لترجمة الأوامر أو المخرجات البرمجية.</p>

<p>ماذا يعني هذا بالضبط؟ لا بأس، على أي حال، لقد قمنا بتشغيل <code class="language-plaintext highlighter-rouge">Hadoop</code> بنجاح. وقمنا بتشغيل أول مثال حسابي على نسخة مستقلة.</p>

<h2 id="spark">Spark</h2>

<p>بالعودة إلى Spark. لنلقِ نظرة على مثال.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">text_file</span> <span class="o">=</span> <span class="n">sc</span><span class="p">.</span><span class="n">textFile</span><span class="p">(</span><span class="s">"hdfs://..."</span><span class="p">)</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">text_file</span><span class="p">.</span><span class="n">flatMap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">" "</span><span class="p">))</span> \
             <span class="p">.</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">word</span><span class="p">:</span> <span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> \
             <span class="p">.</span><span class="n">reduceByKey</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="n">counts</span><span class="p">.</span><span class="n">saveAsTextFile</span><span class="p">(</span><span class="s">"hdfs://..."</span><span class="p">)</span>
</code></pre></div></div>

<p>ظهر هنا ملف <code class="language-plaintext highlighter-rouge">hdfs</code>. بعد البحث، اكتشفت أنه يمكن إنشاء ملف <code class="language-plaintext highlighter-rouge">hdfs</code> بهذه الطريقة:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs dfs <span class="nt">-mkdir</span> /test
</code></pre></div></div>

<p>تم ترجمة الأمر إلى:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs dfs <span class="nt">-mkdir</span> /test
</code></pre></div></div>

<p>ملاحظة: الأمر نفسه بقي كما هو لأنه أمر برمجي ولا يتم ترجمته.</p>

<p>لنلقِ نظرة على أمر <code class="language-plaintext highlighter-rouge">hdfs</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>hdfs
الاستخدام: hdfs <span class="o">[</span>خيارات] الأمر_الفرعي <span class="o">[</span>خيارات الأمر_الفرعي]
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">OPTIONS</code> إما لا شيء أو أي من:</p>

<p>–buildpaths                       محاولة إضافة ملفات الفئات من شجرة البناء
–config dir                       دليل تهيئة Hadoop
–daemon (start|status|stop)       تشغيل أو التحقق من حالة أو إيقاف الخدمة الخلفية
–debug                            تفعيل وضع تصحيح الأخطاء في البرنامج النصي للقشرة
–help                             معلومات الاستخدام
–hostnames list[,of,host,names]   الأسماء المضيفة التي سيتم استخدامها في وضع العامل
–hosts filename                   قائمة الأسماء المضيفة التي سيتم استخدامها في وضع العامل
–loglevel level                   تعيين مستوى log4j لهذا الأمر
–workers                          تفعيل وضع العامل</p>

<p>SUBCOMMAND هو واحد من:
    أوامر الإدارة:</p>

<p>cacheadmin           تكوين ذاكرة التخزين المؤقت لـ HDFS
crypto               تكوين مناطق التشفير في HDFS
debug                تشغيل Debug Admin لتنفيذ أوامر تصحيح HDFS
dfsadmin             تشغيل عميل إدارة DFS
dfsrouteradmin       إدارة الاتحاد القائم على Router
ec                   تشغيل واجهة سطر أوامر الترميز الإضافي لـ HDFS
fsck                 تشغيل أداة فحص نظام ملفات DFS
haadmin              تشغيل عميل إدارة HA لـ DFS
jmxget               الحصول على القيم المصدرة من JMX من NameNode أو DataNode
oev                  تطبيق عارض التعديلات غير المتصل على ملف التعديلات
oiv                  تطبيق عارض صورة نظام الملفات غير المتصل على صورة نظام الملفات
oiv_legacy           تطبيق عارض صورة نظام الملفات غير المتصل على صورة نظام ملفات قديمة
storagepolicies      إدراج/الحصول/تعيين/تحقيق سياسات تخزين الكتل</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>أوامر العميل:
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>classpath            يطبع مسار الفئة المطلوب للحصول على ملف hadoop.jar والمكتبات المطلوبة
dfs                  تشغيل أمر نظام الملفات على نظام الملفات
envvars              عرض متغيرات بيئة Hadoop المحسوبة
fetchdt              جلب رمز تفويض من NameNode
getconf              الحصول على قيم التكوين من الإعدادات
groups               الحصول على المجموعات التي ينتمي إليها المستخدمون
lsSnapshottableDir   سرد جميع الدلائل القابلة لالتقاط اللقطات والمملوكة للمستخدم الحالي
snapshotDiff         مقارنة لقطتين لدليل أو مقارنة محتويات الدليل الحالي مع لقطة
version              طباعة الإصدار
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>أوامر Daemon:
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>balancer             تشغيل أداة موازنة الكتلة
datanode             تشغيل عقدة بيانات DFS
dfsrouter            تشغيل موجه DFS
diskbalancer         توزيع البيانات بالتساوي بين الأقراص على عقدة معينة
httpfs               تشغيل خادم HttpFS، بوابة HTTP لـ HDFS
journalnode          تشغيل عقدة دفتر اليومية لـ DFS
mover                تشغيل أداة لنقل نسخ الكتل عبر أنواع التخزين
namenode             تشغيل عقدة الاسم لـ DFS
nfs3                 تشغيل بوابة إصدار 3 من NFS
portmap              تشغيل خدمة portmap
secondarynamenode    تشغيل عقدة الاسم الثانوية لـ DFS
sps                  تشغيل محقق سياسة التخزين الخارجي
zkfc                 تشغيل وحدة تحكم فشل ZK
</code></pre></div></div>

<p>قد يطبع SUBCOMMAND المساعدة عند استدعائه بدون معاملات أو باستخدام -h.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
استمر في تعديل الكود.

```python
from pyspark.sql import SparkSession
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="p">.</span><span class="n">builder</span><span class="p">.</span><span class="n">master</span><span class="p">(</span><span class="s">"local[*]"</span><span class="p">)</span>\
           <span class="p">.</span><span class="n">config</span><span class="p">(</span><span class="s">'spark.driver.bindAddress'</span><span class="p">,</span> <span class="s">'127.0.0.1'</span><span class="p">)</span>\
           <span class="p">.</span><span class="n">getOrCreate</span><span class="p">()</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">spark</span><span class="p">.</span><span class="n">sparkContext</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">text_file</span> <span class="o">=</span> <span class="n">sc</span><span class="p">.</span><span class="n">textFile</span><span class="p">(</span><span class="s">"a.txt"</span><span class="p">)</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">text_file</span><span class="p">.</span><span class="n">flatMap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">line</span><span class="p">:</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">" "</span><span class="p">))</span> \
             <span class="p">.</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">word</span><span class="p">:</span> <span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> \
             <span class="p">.</span><span class="n">reduceByKey</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="n">counts</span><span class="p">.</span><span class="n">saveAsTextFile</span><span class="p">(</span><span class="s">"b.txt"</span><span class="p">)</span>
</code></pre></div></div>

<p>من المهم ملاحظة <code class="language-plaintext highlighter-rouge">.config('spark.driver.bindAddress', '127.0.0.1')</code>. وإلا، سيتم إرجاع خطأ <code class="language-plaintext highlighter-rouge">Service 'sparkDriver' could not bind on a random free port. You may check whether configuring an appropriate binding address</code>.</p>

<p>ومع ذلك، حدث خطأ مرة أخرى.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Caused by: org.apache.spark.api.python.PythonException: Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"/usr/local/lib/python3.9/site-packages/pyspark/python/lib/pyspark.zip/pyspark/worker.py"</span>, line 473, <span class="k">in </span>main
    raise Exception<span class="o">((</span><span class="s2">"Python in worker has different version %s than that in "</span> +
Exception: Python في العامل لديه إصدار مختلف 3.8 عن الإصدار في السائق 3.9، PySpark لا يمكن أن يعمل مع إصدارات ثانوية مختلفة. يرجى التحقق من أن متغيرات البيئة PYSPARK_PYTHON و PYSPARK_DRIVER_PYTHON مضبوطة بشكل صحيح.
</code></pre></div></div>

<p>يعني تشغيل إصدارات مختلفة من <code class="language-plaintext highlighter-rouge">Python</code>.</p>

<p>تعديل ملف <code class="language-plaintext highlighter-rouge">.bash_profile</code>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PYSPARK_PYTHON</span><span class="o">=</span>/usr/local/Cellar/python@3.9/3.9.1_6/bin/python3
<span class="nv">PYSPARK_DRIVER_PYTHON</span><span class="o">=</span>/usr/local/Cellar/python@3.9/3.9.1_6/bin/python3
</code></pre></div></div>

<p>ومع ذلك، لا يزال الخطأ نفسه يظهر. بعد البحث، تبين أن السبب قد يكون أن <code class="language-plaintext highlighter-rouge">spark</code> لا يقوم بتحميل متغير البيئة هذا عند التشغيل، ولا يستخدم متغيرات البيئة الافتراضية للمحطة الطرفية.</p>

<p>يجب تعيين الإعدادات التالية في الكود:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
</code></pre></div></div>

<h1 id="تعيين-بيئات-spark">تعيين بيئات Spark</h1>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'PYSPARK_PYTHON'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'/usr/local/Cellar/python@3.9/3.9.1_6/bin/python3'</span>
<span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'PYSPARK_DRIVER_PYTHON'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'/usr/local/Cellar/python@3.9/3.9.1_6/bin/python3'</span>
</code></pre></div></div>

<p>هذا سيعمل.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python sc.py
21/03/11 02:54:52 WARN NativeCodeLoader: غير قادر على تحميل مكتبة native-hadoop لمنصتك... يتم استخدام الفئات المدمجة في جافا حيثما ينطبق ذلك
يتم استخدام ملف تعريف log4j الافتراضي لـ Spark: org/apache/spark/log4j-defaults.properties
تم تعيين مستوى تسجيل الدخول الافتراضي إلى <span class="s2">"WARN"</span><span class="nb">.</span>
لضبط مستوى تسجيل الدخول، استخدم sc.setLogLevel<span class="o">(</span>newLevel<span class="o">)</span><span class="nb">.</span> بالنسبة لـ SparkR، استخدم setLogLevel<span class="o">(</span>newLevel<span class="o">)</span><span class="nb">.</span>
PythonRDD[6] at RDD at PythonRDD.scala:53
</code></pre></div></div>

<p>تم إنشاء الملف <code class="language-plaintext highlighter-rouge">b.txt</code> في هذه المرحلة.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── b.txt
│   ├── _SUCCESS
│   ├── part-00000
│   └── part-00001
</code></pre></div></div>

<p>افتحها.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>b.txt/part-00000
<span class="o">(</span><span class="s1">'college'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'two'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'things'</span>, 2<span class="o">)</span>
<span class="o">(</span><span class="s1">'worked'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'on,'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'of'</span>, 8<span class="o">)</span>
<span class="o">(</span><span class="s1">'school,'</span>, 2<span class="o">)</span>
<span class="o">(</span><span class="s1">'writing'</span>, 2<span class="o">)</span>
<span class="o">(</span><span class="s1">'programming.'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s2">"didn't"</span>, 4<span class="o">)</span>
<span class="o">(</span><span class="s1">'then,'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'probably'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'are:'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'short'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'awful.'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'They'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'plot,'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'just'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'characters'</span>, 1<span class="o">)</span>
<span class="o">(</span><span class="s1">'them'</span>, 2<span class="o">)</span>
...
</code></pre></div></div>

<p>لقد نجحت! أليس هذا مألوفًا؟ إنه يشبه تمامًا المثال في <code class="language-plaintext highlighter-rouge">Hadoop</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>output/<span class="k">*</span>
1	dfsadmin
</code></pre></div></div>

<p>هذه الملفات تُسمى <code class="language-plaintext highlighter-rouge">HDFS</code>. يمكننا هنا استخدام <code class="language-plaintext highlighter-rouge">Spark</code> لحساب عدد الكلمات. ببضع جمل بسيطة، يبدو الأمر مريحًا للغاية.</p>

<h2 id="kubernetes">Kubernetes</h2>

<p>بعد ذلك، سنتعامل مع <code class="language-plaintext highlighter-rouge">Kubernetes</code>، المعروف أيضًا باسم <code class="language-plaintext highlighter-rouge">k8s</code>، حيث يتم اختصار الحروف الثمانية في المنتصف إلى الرقم 8. إنه نظام مفتوح المصدر يستخدم لأتمتة نشر وتوسيع وإدارة تطبيقات الحاويات.</p>

<p>أداة سطر الأوامر <code class="language-plaintext highlighter-rouge">kubectl</code> تُستخدم لتشغيل بعض الأوامر على عنقود (cluster) Kubernetes. يمكن استخدامها لنشر التطبيقات، وعرض وإدارة موارد العنقود، وكذلك لعرض السجلات (logs).</p>

<p>يمكن أيضًا تثبيته باستخدام Homebrew.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>kubectl
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>إخراج السجل:
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==&gt;</span> تنزيل https://homebrew.bintray.com/bottles/kubernetes-cli-1.20.1.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> التنزيل من https://d29vzk4ow07wi7.cloudfront.net/0b4f08bd1d47cb913d7cd4571e3394c6747dfbad7ff114c5589c8396c1085ecf?response-content-disposition<span class="o">=</span>a
<span class="c">######################################################################## 100.0%</span>
<span class="o">==&gt;</span> صب kubernetes-cli-1.20.1.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> ملاحظات
تم تثبيت إكمال Bash في:
  /usr/local/etc/bash_completion.d
<span class="o">==&gt;</span> ملخص
🍺  /usr/local/Cellar/kubernetes-cli/1.20.1: 246 ملفًا، 46.1 ميجابايت
</code></pre></div></div>

<p>تم التثبيت بنجاح.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl version <span class="nt">--client</span>
Client Version: version.Info<span class="o">{</span>Major:<span class="s2">"1"</span>, Minor:<span class="s2">"20"</span>, GitVersion:<span class="s2">"v1.20.1"</span>, GitCommit:<span class="s2">"c4d752765b3bbac2237bf87cf0b1c2e307844666"</span>, GitTreeState:<span class="s2">"clean"</span>, BuildDate:<span class="s2">"2020-12-19T08:38:20Z"</span>, GoVersion:<span class="s2">"go1.15.5"</span>, Compiler:<span class="s2">"gc"</span>, Platform:<span class="s2">"darwin/amd64"</span><span class="o">}</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl
kubectl تتحكم في مدير مجموعة Kubernetes.
</code></pre></div></div>

<p>يمكنك العثور على مزيد من المعلومات في الرابط التالي:<br />
https://kubernetes.io/docs/reference/kubectl/overview/</p>

<p>الأوامر الأساسية (للمبتدئين):
  إنشاء        إنشاء مورد من ملف أو من stdin.
  كشف          أخذ وحدة تحكم تكرار (replication controller)، خدمة (service)، نشر (deployment) أو وعاء (pod) وكشفها كخدمة جديدة في Kubernetes
  تشغيل        تشغيل صورة معينة على الكتلة (cluster)
  تعيين        تعيين ميزات محددة على الكائنات</p>

<p>الأوامر الأساسية (متوسطة المستوى):
  explain       توثيق الموارد
  get           عرض واحد أو العديد من الموارد
  edit          تعديل مورد على الخادم
  delete        حذف الموارد عن طريق أسماء الملفات، stdin، الموارد والأسماء، أو عن طريق الموارد ومحدد التسمية</p>

<p>أوامر النشر:
  rollout       إدارة عملية النشر لمورد
  scale         تعيين حجم جديد لنشر (Deployment)، مجموعة نسخ (ReplicaSet)، أو وحدة تحكم النسخ المتماثل (Replication Controller)
  autoscale     التحكم التلقائي في الحجم لنشر (Deployment)، مجموعة نسخ (ReplicaSet)، أو وحدة تحكم النسخ المتماثل (ReplicationController)</p>

<p>أوامر إدارة الكتلة (Cluster):
  certificate   تعديل موارد الشهادات.
  cluster-info  عرض معلومات الكتلة.
  top           عرض استخدام الموارد (وحدة المعالجة المركزية/الذاكرة/التخزين).
  cordon        تعيين العقدة على أنها غير قابلة للجدولة.
  uncordon      تعيين العقدة على أنها قابلة للجدولة.
  drain         إفراغ العقدة استعدادًا للصيانة.
  taint         تحديث العيوب (Taints) على عقدة واحدة أو أكثر.</p>

<p>أوامر استكشاف الأخطاء وإصلاحها:
  describe      عرض تفاصيل مورد محدد أو مجموعة من الموارد
  logs          طباعة سجلات (logs) لحاوية في pod
  attach        الاتصال بحاوية قيد التشغيل
  exec          تنفيذ أمر في حاوية
  port-forward  توجيه منفذ أو أكثر من المنافذ المحلية إلى pod
  proxy         تشغيل وكيل (proxy) لخادم Kubernetes API
  cp            نسخ الملفات والمجلدات من وإلى الحاويات
  auth          فحص التفويضات (authorization)
  debug         إنشاء جلسات تصحيح (debugging) لاستكشاف أخطاء الأعباء العملية (workloads) والعقد (nodes)</p>

<p>الأوامر المتقدمة:
  diff          مقارنة النسخة الحية مع النسخة التي سيتم تطبيقها
  apply         تطبيق التكوين على مورد من خلال اسم الملف أو المدخلات القياسية
  patch         تحديث حقل أو أكثر من مورد
  replace       استبدال مورد من خلال اسم الملف أو المدخلات القياسية
  wait          تجريبي: انتظار حالة محددة على مورد واحد أو عدة موارد.
  kustomize     بناء هدف kustomization من دليل أو عنوان URL بعيد.</p>

<p>أوامر الإعدادات:
  label         تحديث التسميات على مورد
  annotate      تحديث التعليقات التوضيحية على مورد
  completion    إخراج كود إكمال shell لـ shell محدد (bash أو zsh)</p>

<p>الأوامر الأخرى:
  api-resources طباعة موارد API المدعومة على الخادم
  api-versions  طباعة إصدارات API المدعومة على الخادم، في شكل “group/version”
  config        تعديل ملفات kubeconfig
  plugin        يوفر أدوات للتفاعل مع الإضافات.
  version       طباعة معلومات إصدار العميل والخادم</p>

<p>الاستخدام:
  kubectl [flags] [options]</p>

<p>استخدم “kubectl <command /> –help” للحصول على مزيد من المعلومات حول أمر معين.<br />
استخدم “kubectl options” للحصول على قائمة بخيارات سطر الأوامر العامة (تنطبق على جميع الأوامر).</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
لنقم بإنشاء ملف تكوين.

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  selector:
    matchLabels:
      app: nginx
  minReadySeconds: 5
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
```shell
$ kubectl apply -f simple_deployment.yaml
تم رفض الاتصال بالخادم localhost:8080 - هل حددت المضيف أو المنفذ الصحيح؟
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl cluster-info
</code></pre></div></div>

<p>لتصحيح أخطاء الكتلة وتشخيص المشكلات بشكل أكبر، استخدم الأمر <code class="language-plaintext highlighter-rouge">kubectl cluster-info dump</code>.
تم رفض الاتصال بالخادم localhost:8080 - هل حددت المضيف أو المنفذ الصحيح؟</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
عندما أجرب تشغيله في الطرفية على الموقع الرسمي.

```shell
$ start.sh
بدء تشغيل Kubernetes...إصدار minikube: v1.8.1
commit: cbda04cf6bbe65e987ae52bb393c10099ab62014
* minikube v1.8.1 على Ubuntu 18.04
* استخدام برنامج التشغيل none بناءً على تكوين المستخدم
* التشغيل على localhost (CPUs=2, Memory=2460MB, Disk=145651MB) ...
* إصدار النظام هو Ubuntu 18.04.4 LTS
</code></pre></div></div>

<ul>
  <li>تجهيز Kubernetes الإصدار v1.17.3 على Docker الإصدار 19.03.6 …
    <ul>
      <li>kubelet.resolv-conf=/run/systemd/resolve/resolv.conf</li>
    </ul>
  </li>
  <li>بدء تشغيل Kubernetes …</li>
  <li>تمكين الإضافات: default-storageclass, storage-provisioner</li>
  <li>تهيئة بيئة المضيف المحلي …</li>
  <li>تم الانتهاء! تم تكوين kubectl لاستخدام “minikube”</li>
  <li>تم تمكين إضافة ‘dashboard’
تم بدء تشغيل Kubernetes
```</li>
</ul>

<p>لنعد إلى طرفيتنا (Terminal).</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl version <span class="nt">--client</span>
Client Version: version.Info<span class="o">{</span>Major:<span class="s2">"1"</span>, Minor:<span class="s2">"20"</span>, GitVersion:<span class="s2">"v1.20.1"</span>, GitCommit:<span class="s2">"c4d752765b3bbac2237bf87cf0b1c2e307844666"</span>, GitTreeState:<span class="s2">"clean"</span>, BuildDate:<span class="s2">"2020-12-19T08:38:20Z"</span>, GoVersion:<span class="s2">"go1.15.5"</span>, Compiler:<span class="s2">"gc"</span>, Platform:<span class="s2">"darwin/amd64"</span><span class="o">}</span>
<span class="nv">$ </span>kubectl version
Client Version: version.Info<span class="o">{</span>Major:<span class="s2">"1"</span>, Minor:<span class="s2">"20"</span>, GitVersion:<span class="s2">"v1.20.1"</span>, GitCommit:<span class="s2">"c4d752765b3bbac2237bf87cf0b1c2e307844666"</span>, GitTreeState:<span class="s2">"clean"</span>, BuildDate:<span class="s2">"2020-12-19T08:38:20Z"</span>, GoVersion:<span class="s2">"go1.15.5"</span>, Compiler:<span class="s2">"gc"</span>, Platform:<span class="s2">"darwin/amd64"</span><span class="o">}</span>
تم رفض الاتصال بالخادم localhost:8080 - هل حددت المضيف أو المنفذ الصحيح؟
</code></pre></div></div>

<p>من المثير للاهتمام أن إضافة الخيار <code class="language-plaintext highlighter-rouge">--client</code> لم يتسبب في حدوث خطأ.</p>

<p>توضح الوثائق أنه يجب تثبيت <code class="language-plaintext highlighter-rouge">Minikube</code> أولاً.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>minikube
<span class="o">==&gt;</span> تنزيل https://homebrew.bintray.com/bottles/minikube-1.16.0.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> التنزيل من https://d29vzk4ow07wi7.cloudfront.net/1b6d7d1b97b11b6b07e4fa531c2dc21770da290da9b2816f360fd923e00c85fc?response-content-disposition<span class="o">=</span>a
<span class="c">######################################################################## 100.0%</span>
<span class="o">==&gt;</span> صب minikube-1.16.0.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> ملاحظات
تم تثبيت إكمال Bash في:
  /usr/local/etc/bash_completion.d
<span class="o">==&gt;</span> ملخص
🍺  /usr/local/Cellar/minikube/1.16.0: 8 ملفات، 64.6MB
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube start
😄  minikube الإصدار v1.16.0 على نظام Darwin 11.2.2
🎉  الإصدار 1.18.1 من minikube متاح الآن! قم بتنزيله من: https://github.com/kubernetes/minikube/releases/tag/v1.18.1
💡  لتعطيل هذه الإشعارات، قم بتنفيذ الأمر: <span class="s1">'minikube config set WantUpdateNotification false'</span>
</code></pre></div></div>

<p>✨ تم اختيار برنامج virtualbox كسائق تلقائيًا
💿 يتم تنزيل صورة تمهيد الجهاز الظاهري …
    &gt; minikube-v1.16.0.iso.sha256: 65 بايت / 65 بايت [————-] 100.00% ? ب/ث 0 ثانية
    &gt; minikube-v1.16.0.iso: 212.62 ميجابايت / 212.62 ميجابايت [] 100.00% 5.32 ميجابايت/ثانية 40 ثانية
👍 بدء تشغيل عقدة التحكم الرئيسية minikube في الكتلة minikube
💾 يتم تنزيل Kubernetes v1.20.0 مسبقًا …
    &gt; preloaded-images-k8s-v8-v1….: 491.00 ميجابايت / 491.00 ميجابايت  100.00% 7.52 ميجابايت
🔥 يتم إنشاء الجهاز الظاهري virtualbox (المعالجات=2، الذاكرة=4000 ميجابايت، القرص=20000 ميجابايت) …
❗ يواجه هذا الجهاز الظاهري مشكلة في الوصول إلى https://k8s.gcr.io
💡 لسحب صور خارجية جديدة، قد تحتاج إلى تكوين خادم وكيل: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/
🐳 يتم تجهيز Kubernetes v1.20.0 على Docker 20.10.0 …
    ▪ إنشاء الشهادات والمفاتيح …
    ▪ تشغيل عقدة التحكم الرئيسية …
    ▪ تكوين قواعد RBAC …
🔎 يتم التحقق من مكونات Kubernetes…
🌟 تم تمكين الإضافات: storage-provisioner, default-storageclass
🏄 تم الانتهاء! تم تكوين kubectl لاستخدام الكتلة “minikube” ومساحة الاسم “default” بشكل افتراضي</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
لنقم الآن بالوصول إلى هذا الكتلة (Cluster).

```shell
$ kubectl get po -A
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-74ff55c5b-ndbcr            1/1     Running   0          60s
kube-system   etcd-minikube                      0/1     Running   0          74s
kube-system   kube-apiserver-minikube            1/1     Running   0          74s
kube-system   kube-controller-manager-minikube   1/1     Running   0          74s
kube-system   kube-proxy-g2296                   1/1     Running   0          60s
kube-system   kube-scheduler-minikube            0/1     Running   0          74s
kube-system   storage-provisioner                1/1     Running   1          74s
</code></pre></div></div>

<p>لنفتح لوحة تحكم <code class="language-plaintext highlighter-rouge">minikube</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube dashboard
🔌  تمكين لوحة التحكم ...
🤔  التحقق من صحة لوحة التحكم ...
🚀  تشغيل الوكيل ...
🤔  التحقق من صحة الوكيل ...
🎉  فتح http://127.0.0.1:50030/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ في المتصفح الافتراضي الخاص بك...
</code></pre></div></div>

<p><img src="assets/images/distributed/k8s.png" alt="k8s" /></p>

<p>كيف يمكن إيقافها؟</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube
minikube يقوم بتوفير وإدارة مجموعات Kubernetes المحلية المُحسّنة لسير عمل التطوير.
</code></pre></div></div>

<p>الأوامر الأساسية:
  start          بدء مجموعة Kubernetes محلية
  status         الحصول على حالة مجموعة Kubernetes محلية
  stop           إيقاف مجموعة Kubernetes محلية قيد التشغيل
  delete         حذف مجموعة Kubernetes محلية
  dashboard      الوصول إلى لوحة تحكم Kubernetes التي تعمل داخل مجموعة minikube
  pause          إيقاف Kubernetes مؤقتًا
  unpause        استئناف Kubernetes بعد الإيقاف المؤقت</p>

<p>أوامر الصور:
  docker-env     تهيئة البيئة لاستخدام خادم Docker الخاص بـ minikube
  podman-env     تهيئة البيئة لاستخدام خدمة Podman الخاصة بـ minikube
  cache          إضافة، حذف، أو دفع صورة محلية إلى minikube</p>

<p>أوامر التكوين والإدارة:
  addons         تمكين أو تعطيل إضافة minikube
  config         تعديل قيم التكوين الدائمة
  profile        الحصول على أو عرض الملفات الشخصية الحالية (التجمعات)
  update-context تحديث kubeconfig في حالة تغيير عنوان IP أو المنفذ</p>

<p>أوامر الشبكات والاتصال:
  service        يُرجع عنوان URL للاتصال بخدمة
  tunnel         الاتصال بخدمات LoadBalancer</p>

<p>الأوامر المتقدمة:
  mount          يقوم بتثبيت الدليل المحدد في minikube
  ssh            تسجيل الدخول إلى بيئة minikube (لأغراض التصحيح)
  kubectl        تشغيل إصدار kubectl الذي يتطابق مع إصدار الكتلة
  node           إضافة أو إزالة أو عرض العقد الإضافية</p>

<p>أوامر استكشاف الأخطاء وإصلاحها:
  ssh-key        استرجاع مسار مفتاح هوية SSH للعقدة المحددة
  ssh-host       استرجاع مفتاح مضيف SSH للعقدة المحددة
  ip             استرجاع عنوان IP للعقدة المحددة
  logs           إرجاع السجلات لتصحيح مجموعة Kubernetes المحلية
  update-check   طباعة رقم الإصدار الحالي والأحدث
  version        طباعة إصدار minikube</p>

<p>الأوامر الأخرى:
  completion     إنشاء إكمال الأوامر لـ shell</p>

<p>استخدم “minikube <command /> –help” للحصول على مزيد من المعلومات حول أمر معين.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
يبدو أنه `minikube stop`.

بالعودة إلى `kubernetes`، الآن يعمل بشكل صحيح.

```shell
$ kubectl cluster-info
لوحة تحكم Kubernetes تعمل على https://192.168.99.100:8443
KubeDNS تعمل على https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
</code></pre></div></div>

<p>لمزيد من تصحيح الأخطاء وتشخيص مشاكل الكتلة (cluster)، استخدم الأمر التالي:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl cluster-info dump
</code></pre></div></div>

<p>عندما نفتح الرابط <code class="language-plaintext highlighter-rouge">https://192.168.99.100:8443</code>، يعرض المتصفح:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Status"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Failure"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ممنوع: المستخدم </span><span class="se">\"</span><span class="s2">system:anonymous</span><span class="se">\"</span><span class="s2"> لا يمكنه الوصول إلى المسار </span><span class="se">\"</span><span class="s2">/</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Forbidden"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">403</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>قم بزيارة الرابط التالي: <code class="language-plaintext highlighter-rouge">https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</code></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Status"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Failure"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"الخدمات </span><span class="se">\"</span><span class="s2">kube-dns:dns</span><span class="se">\"</span><span class="s2"> ممنوعة: المستخدم </span><span class="se">\"</span><span class="s2">system:anonymous</span><span class="se">\"</span><span class="s2"> لا يمكنه الحصول على المورد </span><span class="se">\"</span><span class="s2">services/proxy</span><span class="se">\"</span><span class="s2"> في مجموعة API </span><span class="se">\"\"</span><span class="s2"> في مساحة الاسم </span><span class="se">\"</span><span class="s2">kube-system</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ممنوع"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kube-dns:dns"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"services"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">403</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>جرب الإعدادات التي قمنا بها للتو.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> simple_deployment.yaml
deployment.apps/nginx-deployment created
</code></pre></div></div>

<p>هناك بعض المشاكل. ومع ذلك، حتى الآن، قمنا بتشغيل <code class="language-plaintext highlighter-rouge">kubernetes</code>. دعونا ننهيها هنا ونلعب بها لاحقًا.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube stop
✋  إيقاف العقدة <span class="s2">"minikube"</span>  ...
🛑  تم إيقاف عقدة واحدة.
</code></pre></div></div>

<p>تحقق مما إذا انتهى.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>w<span class="nv">$ </span>minikube dashboard
🤷  يجب أن تكون عقدة لوحة التحكم قيد التشغيل لهذا الأمر
👉  لبدء الكتلة، قم بتشغيل: <span class="s2">"minikube start"</span>
</code></pre></div></div>

<h2 id="docker">Docker</h2>

<p><code class="language-plaintext highlighter-rouge">Docker</code> هو أيضًا منصة حاويات تساعد في تسريع إنشاء ومشاركة وتشغيل التطبيقات الحديثة. يمكنك تنزيل التطبيق من الموقع الرسمي.</p>

<p><img src="assets/images/distributed/docker.png" alt="docker" /></p>

<p>استخدام العميل كان بطيئًا بعض الشيء. دعنا نستخدم سطر الأوامر.</p>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker
</code></pre></div></div>

<p>الاستخدام:  docker [OPTIONS] COMMAND</p>

<p>بيئة تشغيل ذاتية الاكتفاء للحاويات</p>

<p>الخيارات:
      –config string      موقع ملفات تكوين العميل (الافتراضي “/Users/lzw/.docker”)
  -c, –context string     اسم السياق الذي سيتم استخدامه للاتصال بالخادم (يتجاوز متغير البيئة DOCKER_HOST والسياق الافتراضي المحدد باستخدام “docker context use”)
  -D, –debug              تمكين وضع التصحيح
  -H, –host list          مقبس (مقابس) الخادم للاتصال به
  -l, –log-level string   تعيين مستوى التسجيل (“debug”|”info”|”warn”|”error”|”fatal”) (الافتراضي “info”)
      –tls                استخدام TLS; يتم تضمينه تلقائيًا مع –tlsverify
      –tlscacert string   الثقة في الشهادات الموقعة فقط من قبل هذا المركز (الافتراضي “/Users/lzw/.docker/ca.pem”)
      –tlscert string     مسار ملف شهادة TLS (الافتراضي “/Users/lzw/.docker/cert.pem”)
      –tlskey string      مسار ملف مفتاح TLS (الافتراضي “/Users/lzw/.docker/key.pem”)
      –tlsverify          استخدام TLS والتحقق من الطرف البعيد
  -v, –version            طباعة معلومات الإصدار والخروج</p>

<p>أوامر الإدارة:
  app*        Docker App (Docker Inc., v0.9.1-beta3)
  builder     إدارة عمليات البناء
  buildx*     البناء باستخدام BuildKit (Docker Inc., v0.5.1-docker)
  config      إدارة إعدادات Docker
  container   إدارة الحاويات
  context     إدارة السياقات
  image       إدارة الصور
  manifest    إدارة قوائم وصور Docker
  network     إدارة الشبكات
  node        إدارة عقد Swarm
  plugin      إدارة الإضافات
  scan*       Docker Scan (Docker Inc., v0.5.0)
  secret      إدارة الأسرار في Docker
  service     إدارة الخدمات
  stack       إدارة مجموعات Docker
  swarm       إدارة Swarm
  system      إدارة Docker
  trust       إدارة الثقة في صور Docker
  volume      إدارة الأحجام</p>

<p>الأوامر:
  attach      ربط المدخلات والمخرجات وتيارات الأخطاء المحلية بجريان حاوية قيد التشغيل
  build       بناء صورة من Dockerfile
  commit      إنشاء صورة جديدة من تغييرات الحاوية
  cp          نسخ الملفات/المجلدات بين الحاوية ونظام الملفات المحلي
  create      إنشاء حاوية جديدة
  diff        فحص التغييرات على الملفات أو الدلائل في نظام ملفات الحاوية
  events      الحصول على الأحداث في الوقت الفعلي من الخادم
  exec        تنفيذ أمر في حاوية قيد التشغيل
  export      تصدير نظام ملفات الحاوية كأرشيف tar
  history     عرض تاريخ الصورة
  images      عرض قائمة الصور
  import      استيراد محتويات من أرشيف tarball لإنشاء صورة نظام ملفات
  info        عرض معلومات النظام على نطاق واسع
  inspect     إرجاع معلومات منخفضة المستوى عن كائنات Docker
  kill        إنهاء تشغيل واحدة أو أكثر من الحاويات الجارية
  load        تحميل صورة من أرشيف tar أو STDIN
  login       تسجيل الدخول إلى سجل Docker
  logout      تسجيل الخروج من سجل Docker
  logs        جلب سجلات الحاوية
  pause       إيقاف جميع العمليات داخل واحدة أو أكثر من الحاويات مؤقتًا
  port        عرض تعيينات المنافذ أو تعيين محدد للحاوية
  ps          عرض قائمة الحاويات
  pull        سحب صورة أو مستودع من السجل
  push        دفع صورة أو مستودع إلى السجل
  rename      إعادة تسمية حاوية
  restart     إعادة تشغيل واحدة أو أكثر من الحاويات
  rm          إزالة واحدة أو أكثر من الحاويات
  rmi         إزالة واحدة أو أكثر من الصور
  run         تنفيذ أمر في حاوية جديدة
  save        حفظ واحدة أو أكثر من الصور في أرشيف tar (يتم إرسالها إلى STDOUT افتراضيًا)
  search      البحث في Docker Hub عن الصور
  start       بدء تشغيل واحدة أو أكثر من الحاويات المتوقفة
  stats       عرض بث مباشر لإحصائيات استخدام موارد الحاوية (الحاويات)
  stop        إيقاف تشغيل واحدة أو أكثر من الحاويات الجارية
  tag         إنشاء علامة TARGET_IMAGE تشير إلى SOURCE_IMAGE
  top         عرض العمليات الجارية في الحاوية
  unpause     استئناف جميع العمليات داخل واحدة أو أكثر من الحاويات
  update      تحديث تكوين واحدة أو أكثر من الحاويات
  version     عرض معلومات إصدار Docker
  wait        الانتظار حتى تتوقف واحدة أو أكثر من الحاويات، ثم طباعة أكواد الخروج الخاصة بها</p>

<p>قم بتشغيل الأمر ‘docker COMMAND –help’ للحصول على مزيد من المعلومات حول أمر معين.</p>

<p>للحصول على المزيد من المساعدة حول Docker، يمكنك الاطلاع على أدلتنا على الرابط التالي: https://docs.docker.com/go/guides/</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
جرب اتباع البرنامج التعليمي.

```shell
$ docker run -d -p 80:80 docker/getting-started
Unable to find image 'docker/getting-started:latest' locally
latest: Pulling from docker/getting-started
aad63a933944: تم سحبها بالكامل
b14da7a62044: تم سحبها بالكامل
343784d40d66: تم سحبها بالكامل
6f617e610986: تم سحبها بالكامل
Digest: sha256:d2c4fb0641519ea208f20ab03dc40ec2a5a53fdfbccca90bef14f870158ed577
Status: تم تنزيل صورة أحدث لـ docker/getting-started:latest
815f13fc8f99f6185257980f74c349e182842ca572fe60ff62cbb15641199eaf
docker: استجابة خطأ من daemon: المنافذ غير متاحة: الاستماع إلى tcp 0.0.0.0:80: bind: العنوان قيد الاستخدام بالفعل.
</code></pre></div></div>

<p>غيّر المنفذ.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:80 docker/getting-started
45bb95fa1ae80adc05cc498a1f4f339c45c51f7a8ae1be17f5b704853a5513a5
</code></pre></div></div>

<p><img src="assets/images/distributed/docker_run.png" alt="docker_run" /></p>

<p>فتح المتصفح يدل على أننا نجحنا في تشغيل <code class="language-plaintext highlighter-rouge">docker</code>.</p>

<p><img src="assets/images/distributed/browser.png" alt="متصفح" /></p>

<p>أوقف الحاوية. استخدم <code class="language-plaintext highlighter-rouge">ID</code> الذي تم إرجاعه مسبقًا.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker stop 45bb95fa1ae80adc05cc498a1f4f339c45c51f7a8ae1be17f5b704853a5513a5
45bb95fa1ae80adc05cc498a1f4f339c45c51f7a8ae1be17f5b704853a5513a5
</code></pre></div></div>

<p>في هذه اللحظة لم يعد بالإمكان فتح الموقع.</p>

<p>هذا يشير إلى أن <code class="language-plaintext highlighter-rouge">docker</code> يشبه الآلة الافتراضية.</p>

<h2 id="flink">Flink</h2>

<p>افتح الموقع الرسمي.</p>

<p><img src="assets/images/distributed/flink-home-graphic.png" alt="رسم-بياني-لـ-flink" /></p>

<p><code class="language-plaintext highlighter-rouge">Flink</code> يتحدث عن الحوسبة ذات الحالة (<code class="language-plaintext highlighter-rouge">Stateful</code>) لتدفقات البيانات. ماذا تعني <code class="language-plaintext highlighter-rouge">Stateful</code>؟ لا أفهمها بعد. الصورة أعلاه مثيرة للاهتمام. دعونا نجربها.</p>

<p>يقال أنه يحتاج إلى بيئة Java.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-version</span>
java version <span class="s2">"1.8.0_151"</span>
Java<span class="o">(</span>TM<span class="o">)</span> SE Runtime Environment <span class="o">(</span>build 1.8.0_151-b12<span class="o">)</span>
Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM <span class="o">(</span>build 25.151-b12, mixed mode<span class="o">)</span>
</code></pre></div></div>

<p>قم بتنزيل أحدث إصدار من الموقع الرسمي <code class="language-plaintext highlighter-rouge">flink-1.12.2-bin-scala_2.11.tar</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./bin/start-cluster.sh
بدء تشغيل الكتلة.
بدء تشغيل daemon standalonesession على المضيف lzwjava.
بدء تشغيل daemon taskexecutor على المضيف lzwjava.
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./bin/flink run examples/streaming/WordCount.jar
تنفيذ مثال WordCount مع مجموعة بيانات الإدخال الافتراضية.
استخدم <span class="nt">--input</span> لتحديد ملف الإدخال.
يتم طباعة النتيجة إلى stdout. استخدم <span class="nt">--output</span> لتحديد مسار الإخراج.
تم تقديم المهمة مع JobID 60f37647c20c2a6654359bd34edab807
انتهى تنفيذ البرنامج
المهمة ذات JobID 60f37647c20c2a6654359bd34edab807 قد انتهت.
وقت تشغيل المهمة: 757 مللي ثانية
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tail </span>log/flink-<span class="k">*</span><span class="nt">-taskexecutor-</span><span class="k">*</span>.out
<span class="o">(</span>nymph,1<span class="o">)</span>
<span class="o">(</span><span class="k">in</span>,3<span class="o">)</span>
<span class="o">(</span>thy,1<span class="o">)</span>
<span class="o">(</span>orisons,1<span class="o">)</span>
<span class="o">(</span>be,4<span class="o">)</span>
<span class="o">(</span>all,2<span class="o">)</span>
<span class="o">(</span>my,1<span class="o">)</span>
<span class="o">(</span>sins,1<span class="o">)</span>
<span class="o">(</span>remember,1<span class="o">)</span>
<span class="o">(</span>d,4<span class="o">)</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./bin/stop-cluster.sh
إيقاف برنامج taskexecutor الخفي <span class="o">(</span>معرف العملية: 41812<span class="o">)</span> على المضيف lzwjava.
</code></pre></div></div>

<p>نعم، لقد نجحت في البدء. يمكن ملاحظة أن هذا يشبه إلى حد كبير <code class="language-plaintext highlighter-rouge">Spark</code>.</p>

<h2 id="كايلين">كايلين</h2>

<p>انتقل إلى الموقع الرسمي.</p>

<blockquote>
  <p>Apache Kylin™ هو مستودع بيانات تحليلي موزع مفتوح المصدر مخصص للبيانات الضخمة؛ تم تصميمه لتوفير قدرة OLAP (معالجة تحليلية عبر الإنترنت) في عصر البيانات الضخمة. من خلال إعادة ابتكار تقنية المكعب متعدد الأبعاد والحساب المسبق على Hadoop وSpark، يتمكن Kylin من تحقيق سرعة استعلام شبه ثابتة بغض النظر عن حجم البيانات المتزايد باستمرار. بتقليل زمن الاستجابة من دقائق إلى أجزاء من الثانية، يعيد Kylin التحليلات عبر الإنترنت إلى عالم البيانات الضخمة.</p>
</blockquote>

<blockquote>
  <p>Apache Kylin™ يتيح لك استعلام مليارات الصفوف بزمن استجابة أقل من ثانية في 3 خطوات.</p>

  <ol>
    <li>تحديد مخطط نجمي أو ثلجي (Star/Snowflake Schema) على Hadoop.</li>
    <li>بناء مكعب (Cube) من الجداول المحددة.</li>
    <li>الاستعلام باستخدام ANSI-SQL والحصول على النتائج في أقل من ثانية، عبر ODBC، JDBC أو واجهة برمجة التطبيقات RESTful.</li>
  </ol>
</blockquote>

<p><img src="assets/images/distributed/kylin_diagram.png" alt="kylin_diagram" /></p>

<p>بشكل عام، هو طبقة لتحليل البيانات الضخمة. يمكن استخدامه للبحث بسرعة كبيرة. يعمل كجسر.</p>

<p>للأسف، يمكن حاليًا استخدامه فقط في بيئة <code class="language-plaintext highlighter-rouge">Linux</code>. سأعود لاحقًا للتعامل معه.</p>

<h2 id="mongodb">MongoDB</h2>

<p>هذه أيضًا قاعدة بيانات. جرب تثبيتها.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew tap mongodb/brew
<span class="o">==&gt;</span> تثبيت mongodb/brew
جارٍ الاستنساخ إلى <span class="s1">'/usr/local/Homebrew/Library/Taps/mongodb/homebrew-brew'</span>...
remote: تعداد الكائنات: 63، تم.
remote: عد الكائنات: 100% <span class="o">(</span>63/63<span class="o">)</span>، تم.
remote: ضغط الكائنات: 100% <span class="o">(</span>62/62<span class="o">)</span>، تم.
remote: إجمالي 566 <span class="o">(</span>دلتا 21<span class="o">)</span>، تم إعادة استخدام 6 <span class="o">(</span>دلتا 1<span class="o">)</span>، تم إعادة استخدام الحزمة 503
جارٍ استقبال الكائنات: 100% <span class="o">(</span>566/566<span class="o">)</span>، 121.78 كيلوبايت | 335.00 كيلوبايت/ثانية، تم.
جارٍ حل الدلتا: 100% <span class="o">(</span>259/259<span class="o">)</span>، تم.
تم تثبيت 11 صيغة <span class="o">(</span>39 ملفًا، 196.2 كيلوبايت<span class="o">)</span><span class="nb">.</span>
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew <span class="nb">install </span>mongodb-community@4.4
<span class="o">==&gt;</span> تثبيت mongodb-community من mongodb/brew
<span class="o">==&gt;</span> تنزيل https://fastdl.mongodb.org/tools/db/mongodb-database-tools-macos-x86_64-100.3.0.zip
<span class="c">######################################################################## 100.0%</span>
<span class="o">==&gt;</span> تنزيل https://fastdl.mongodb.org/osx/mongodb-macos-x86_64-4.4.3.tgz
<span class="c">######################################################################## 100.0%</span>
<span class="o">==&gt;</span> تثبيت التبعيات لـ mongodb/brew/mongodb-community: mongodb-database-tools
<span class="o">==&gt;</span> تثبيت تبعية mongodb/brew/mongodb-community: mongodb-database-tools
خطأ: خطوة <span class="sb">`</span>brew <span class="nb">link</span><span class="sb">`</span> لم تكتمل بنجاح
تم بناء الصيغة، ولكن لم يتم إنشاء رابط رمزي إلى /usr/local
تعذر إنشاء رابط رمزي لـ bin/bsondump
الهدف /usr/local/bin/bsondump
هو رابط رمزي يتبع لـ mongodb. يمكنك إلغاء ربطه:
  brew <span class="nb">unlink </span>mongodb
</code></pre></div></div>

<p>لإجبار الربط واستبدال جميع الملفات المتضاربة:
  brew link –overwrite mongodb-database-tools</p>

<p>لإدراج جميع الملفات التي سيتم حذفها:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  brew <span class="nb">link</span> <span class="nt">--overwrite</span> <span class="nt">--dry-run</span> mongodb-database-tools
</code></pre></div></div>

<p>الملفات التي قد تكون متضاربة هي:
/usr/local/bin/bsondump -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/bsondump
/usr/local/bin/mongodump -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongodump
/usr/local/bin/mongoexport -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongoexport
/usr/local/bin/mongofiles -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongofiles
/usr/local/bin/mongoimport -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongoimport
/usr/local/bin/mongorestore -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongorestore
/usr/local/bin/mongostat -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongostat
/usr/local/bin/mongotop -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongotop
==&gt; الملخص
🍺  /usr/local/Cellar/mongodb-database-tools/100.3.0: 13 ملفًا، 154 ميجابايت، تم بناؤه في 11 ثانية
==&gt; تثبيت mongodb/brew/mongodb-community
خطأ: خطوة <code class="language-plaintext highlighter-rouge">brew link</code> لم تكتمل بنجاح
تم بناء الصيغة، ولكن لم يتم إنشاء رابط رمزي لها في /usr/local
تعذر إنشاء رابط رمزي لـ bin/mongo
الهدف /usr/local/bin/mongo
هو رابط رمزي يتبع لـ mongodb. يمكنك إلغاء الربط:
  brew unlink mongodb</p>

<p>لإجبار الربط واستبدال جميع الملفات المتضاربة:
  brew link –overwrite mongodb-community</p>

<p>لإدراج جميع الملفات التي سيتم حذفها:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  brew <span class="nb">link</span> <span class="nt">--overwrite</span> <span class="nt">--dry-run</span> mongodb-community
</code></pre></div></div>

<p>الملفات التي قد تكون متضاربة هي:
/usr/local/bin/mongo -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongo
/usr/local/bin/mongod -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongod
/usr/local/bin/mongos -&gt; /usr/local/Cellar/mongodb/3.0.7/bin/mongos
==&gt; ملاحظات
لبدء mongodb/brew/mongodb-community الآن وإعادة التشغيل عند تسجيل الدخول باستخدام launchd:
  brew services start mongodb/brew/mongodb-community
أو، إذا كنت لا تريد/تحتاج إلى خدمة خلفية، يمكنك فقط تشغيل:
  mongod –config /usr/local/etc/mongod.conf
==&gt; ملخص
🍺  /usr/local/Cellar/mongodb-community/4.4.3: 11 ملفًا، 156.8 ميجابايت، تم بناؤها في 10 ثوانٍ
==&gt; ملاحظات
==&gt; mongodb-community
لبدء mongodb/brew/mongodb-community الآن وإعادة التشغيل عند تسجيل الدخول باستخدام launchd:
  brew services start mongodb/brew/mongodb-community
أو، إذا كنت لا تريد/تحتاج إلى خدمة خلفية، يمكنك فقط تشغيل:
  mongod –config /usr/local/etc/mongod.conf</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
في السابق قمت بتثبيت إصدار قديم. سأقوم بإزالة الروابط التالية.

```shell
$ brew unlink mongodb
إلغاء الربط /usr/local/Cellar/mongodb/3.0.7... تمت إزالة 11 رابطًا رمزيًا
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mongod <span class="nt">--version</span>
إصدار قاعدة البيانات v4.4.3
معلومات البناء: <span class="o">{</span>
    <span class="s2">"version"</span>: <span class="s2">"4.4.3"</span>,
    <span class="s2">"gitVersion"</span>: <span class="s2">"913d6b62acfbb344dde1b116f4161360acd8fd13"</span>,
    <span class="s2">"modules"</span>: <span class="o">[]</span>,
    <span class="s2">"allocator"</span>: <span class="s2">"system"</span>,
    <span class="s2">"environment"</span>: <span class="o">{</span>
        <span class="s2">"distarch"</span>: <span class="s2">"x86_64"</span>,
        <span class="s2">"target_arch"</span>: <span class="s2">"x86_64"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>بعد ذلك، قم بتشغيل <code class="language-plaintext highlighter-rouge">mongod</code> لبدء خادم قاعدة بيانات mongo. ومع ذلك، عند التشغيل الأول، تم الإبلاغ بأن <code class="language-plaintext highlighter-rouge">/data/db</code> غير موجود. قمنا بإنشاء دليل، <code class="language-plaintext highlighter-rouge">~/mongodb</code>، هنا لحفظ ملفات قاعدة البيانات.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mongod <span class="nt">--dbpath</span> ~/mongodb
</code></pre></div></div>

<p>الإخراج هو:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"t"</span><span class="p">:{</span><span class="nl">"$date"</span><span class="p">:</span><span class="s2">"2021-03-11T18:17:32.838+08:00"</span><span class="p">},</span><span class="nl">"s"</span><span class="p">:</span><span class="s2">"I"</span><span class="p">,</span><span class="w">  </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"CONTROL"</span><span class="p">,</span><span class="w">  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">23285</span><span class="p">,</span><span class="w">   </span><span class="nl">"ctx"</span><span class="p">:</span><span class="s2">"main"</span><span class="p">,</span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"تم تعطيل TLS 1.0 تلقائيًا، لتمكين TLS 1.0 قسرًا حدد --sslDisabledProtocols 'none'"</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="nl">"t"</span><span class="p">:{</span><span class="nl">"$date"</span><span class="p">:</span><span class="s2">"2021-03-11T18:17:32.842+08:00"</span><span class="p">},</span><span class="nl">"s"</span><span class="p">:</span><span class="s2">"W"</span><span class="p">,</span><span class="w">  </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"ASIO"</span><span class="p">,</span><span class="w">     </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">22601</span><span class="p">,</span><span class="w">   </span><span class="nl">"ctx"</span><span class="p">:</span><span class="s2">"main"</span><span class="p">,</span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"لم يتم تكوين TransportLayer أثناء بدء تشغيل NetworkInterface"</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="nl">"t"</span><span class="p">:{</span><span class="nl">"$date"</span><span class="p">:</span><span class="s2">"2021-03-11T18:17:32.842+08:00"</span><span class="p">},</span><span class="nl">"s"</span><span class="p">:</span><span class="s2">"I"</span><span class="p">,</span><span class="w">  </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"NETWORK"</span><span class="p">,</span><span class="w">  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">4648602</span><span class="p">,</span><span class="w"> </span><span class="nl">"ctx"</span><span class="p">:</span><span class="s2">"main"</span><span class="p">,</span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"تم استخدام TCP FastOpen ضمنيًا."</span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="nl">"t"</span><span class="p">:{</span><span class="nl">"$date"</span><span class="p">:</span><span class="s2">"2021-03-11T18:17:32.842+08:00"</span><span class="p">},</span><span class="nl">"s"</span><span class="p">:</span><span class="s2">"I"</span><span class="p">,</span><span class="w">  </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"STORAGE"</span><span class="p">,</span><span class="w">  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">4615611</span><span class="p">,</span><span class="w"> </span><span class="nl">"ctx"</span><span class="p">:</span><span class="s2">"initandlisten"</span><span class="p">,</span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"MongoDB يبدأ التشغيل"</span><span class="p">,</span><span class="nl">"attr"</span><span class="p">:{</span><span class="nl">"pid"</span><span class="p">:</span><span class="mi">46256</span><span class="p">,</span><span class="nl">"port"</span><span class="p">:</span><span class="mi">27017</span><span class="p">,</span><span class="nl">"dbPath"</span><span class="p">:</span><span class="s2">"/Users/lzw/mongodb"</span><span class="p">,</span><span class="nl">"architecture"</span><span class="p">:</span><span class="s2">"64-bit"</span><span class="p">,</span><span class="nl">"host"</span><span class="p">:</span><span class="s2">"lzwjava"</span><span class="p">}}</span><span class="w">
</span><span class="p">{</span><span class="nl">"t"</span><span class="p">:{</span><span class="nl">"$date"</span><span class="p">:</span><span class="s2">"2021-03-11T18:17:32.842+08:00"</span><span class="p">},</span><span class="nl">"s"</span><span class="p">:</span><span class="s2">"I"</span><span class="p">,</span><span class="w">  </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"CONTROL"</span><span class="p">,</span><span class="w">  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">23403</span><span class="p">,</span><span class="w">   </span><span class="nl">"ctx"</span><span class="p">:</span><span class="s2">"initandlisten"</span><span class="p">,</span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"معلومات البناء"</span><span class="p">,</span><span class="nl">"attr"</span><span class="p">:{</span><span class="nl">"buildInfo"</span><span class="p">:{</span><span class="nl">"version"</span><span class="p">:</span><span class="s2">"4.4.3"</span><span class="p">,</span><span class="nl">"gitVersion"</span><span class="p">:</span><span class="s2">"913d6b62acfbb344dde1b116f4161360acd8fd13"</span><span class="p">,</span><span class="nl">"modules"</span><span class="p">:[],</span><span class="nl">"allocator"</span><span class="p">:</span><span class="s2">"system"</span><span class="p">,</span><span class="nl">"environment"</span><span class="p">:{</span><span class="nl">"distarch"</span><span class="p">:</span><span class="s2">"x86_64"</span><span class="p">,</span><span class="nl">"target_arch"</span><span class="p">:</span><span class="s2">"x86_64"</span><span class="p">}}}}</span><span class="w">
</span><span class="p">{</span><span class="nl">"t"</span><span class="p">:{</span><span class="nl">"$date"</span><span class="p">:</span><span class="s2">"2021-03-11T18:17:32.843+08:00"</span><span class="p">},</span><span class="nl">"s"</span><span class="p">:</span><span class="s2">"I"</span><span class="p">,</span><span class="w">  </span><span class="nl">"c"</span><span class="p">:</span><span class="s2">"CONTROL"</span><span class="p">,</span><span class="w">  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">51765</span><span class="p">,</span><span class="w">   </span><span class="nl">"ctx"</span><span class="p">:</span><span class="s2">"initandlisten"</span><span class="p">,</span><span class="nl">"msg"</span><span class="p">:</span><span class="s2">"نظام التشغيل"</span><span class="p">,</span><span class="nl">"attr"</span><span class="p">:{</span><span class="nl">"os"</span><span class="p">:{</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Mac OS X"</span><span class="p">,</span><span class="nl">"version"</span><span class="p">:</span><span class="s2">"20.3.0"</span><span class="p">}}}</span><span class="w">
</span><span class="err">...</span><span class="w">
</span></code></pre></div></div>

<p>يمكن ملاحظة أن جميعها بتنسيق <code class="language-plaintext highlighter-rouge">JSON</code>. MongoDB يحفظ جميع ملفات البيانات بتنسيق <code class="language-plaintext highlighter-rouge">JSON</code>. بعد ذلك، افتح علامة تبويب طرفية أخرى.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mongo
إصدار shell MongoDB: v4.4.3
الاتصال بـ: mongodb://127.0.0.1:27017/?compressors<span class="o">=</span>disabled&amp;gssapiServiceName<span class="o">=</span>mongodb
الجلسة الضمنية: session <span class="o">{</span> <span class="s2">"id"</span> : UUID<span class="o">(</span><span class="s2">"4f55c561-70d3-4289-938d-4b90a284891f"</span><span class="o">)</span> <span class="o">}</span>
إصدار خادم MongoDB: 4.4.3
<span class="nt">---</span>
قام الخادم بإنشاء هذه التحذيرات عند بدء التشغيل:
        2021-03-11T18:17:33.743+08:00: التحكم في الوصول غير مفعل لقاعدة البيانات. الوصول للقراءة والكتابة للبيانات والإعدادات غير مقيد
        2021-03-11T18:17:33.743+08:00: هذا الخادم مرتبط بـ localhost. الأنظمة البعيدة لن تكون قادرة على الاتصال بهذا الخادم. ابدأ الخادم باستخدام <span class="nt">--bind_ip</span> &lt;عنوان&gt; لتحديد عناوين IP التي يجب أن يستجيب منها، أو باستخدام <span class="nt">--bind_ip_all</span> للربط بجميع الواجهات. إذا كان هذا السلوك مرغوبًا، ابدأ الخادم باستخدام <span class="nt">--bind_ip</span> 127.0.0.1 لتعطيل هذا التحذير
        2021-03-11T18:17:33.743+08:00: حدود البرامج الناعمة منخفضة جدًا
        2021-03-11T18:17:33.743+08:00:         القيمة الحالية: 4864
        2021-03-11T18:17:33.743+08:00:         الحد الأدنى الموصى به: 64000
<span class="nt">---</span>
<span class="nt">---</span>
        قم بتمكين خدمة المراقبة السحابية المجانية من MongoDB، والتي ستستقبل وتعرض
        مقاييس حول نشرك <span class="o">(</span>استخدام القرص، CPU، إحصائيات العمليات، إلخ<span class="o">)</span><span class="nb">.</span>

        ستكون بيانات المراقبة متاحة على موقع MongoDB بعنوان URL فريد يمكنك الوصول إليه  
        وأي شخص تشارك معه الرابط. قد تستخدم MongoDB هذه المعلومات لإجراء تحسينات على المنتج  
        ولاقتراح منتجات MongoDB وخيارات النشر المناسبة لك.

لتمكين المراقبة المجانية، قم بتنفيذ الأمر التالي:  
<span class="sb">```</span>javascript
db.enableFreeMonitoring<span class="o">()</span>
</code></pre></div></div>

<p>لتعطيل هذا التذكير بشكل دائم، قم بتنفيذ الأمر التالي:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">db</span><span class="p">.</span><span class="nx">disableFreeMonitoring</span><span class="p">()</span>
</code></pre></div></div>

<p>بعد ذلك، يمكنك محاولة إدخال البيانات والاستعلام عنها.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> db.inventory.insertOne<span class="o">(</span>
...    <span class="o">{</span> item: <span class="s2">"canvas"</span>, qty: 100, tags: <span class="o">[</span><span class="s2">"cotton"</span><span class="o">]</span>, size: <span class="o">{</span> h: 28, w: 35.5, uom: <span class="s2">"cm"</span> <span class="o">}</span> <span class="o">}</span>
... <span class="o">)</span>
<span class="o">{</span>
	<span class="s2">"acknowledged"</span> : <span class="nb">true</span>,
	<span class="s2">"insertedId"</span> : ObjectId<span class="o">(</span><span class="s2">"6049ef91b653541cf355facb"</span><span class="o">)</span>
<span class="o">}</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> db.inventory.find<span class="o">()</span>
<span class="o">{</span> <span class="s2">"_id"</span> : ObjectId<span class="o">(</span><span class="s2">"6049ef91b653541cf355facb"</span><span class="o">)</span>, <span class="s2">"item"</span> : <span class="s2">"canvas"</span>, <span class="s2">"qty"</span> : 100, <span class="s2">"tags"</span> : <span class="o">[</span> <span class="s2">"cotton"</span> <span class="o">]</span>, <span class="s2">"size"</span> : <span class="o">{</span> <span class="s2">"h"</span> : 28, <span class="s2">"w"</span> : 35.5, <span class="s2">"uom"</span> : <span class="s2">"cm"</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></div></div>

<h2 id="الختام">الختام</h2>

<p>لنكتفي بهذا الآن. سنتعامل مع أدوات أخرى لاحقًا. ما الهدف من كل هذا؟ ربما يكون الحصول على فكرة عامة أولاً. البداية دائمًا صعبة، وقد قمنا بتجربة كل هذه الأشياء دفعة واحدة. هذا يعطينا ثقة، وبعد ذلك، سنقوم بتجربة المزيد من هذه البرامج.</p>

<h2 id="التمرين">التمرين</h2>

<ul>
  <li>يجب على الطلاب استكشاف الموضوع بشكل مشابه لما ورد أعلاه.</li>
</ul>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ar" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
