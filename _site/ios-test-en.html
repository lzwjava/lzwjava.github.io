<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Enhancing iOS Development with Automated Testing and Tools</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Enhancing iOS Development with Automated Testing and Tools | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Enhancing iOS Development with Automated Testing and Tools" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="This blog post was organized with the assistance of ChatGPT-4o." />
<meta property="og:description" content="This blog post was organized with the assistance of ChatGPT-4o." />
<link rel="canonical" href="https://lzwjava.github.io/ios-test-en" />
<meta property="og:url" content="https://lzwjava.github.io/ios-test-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-04-23T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Enhancing iOS Development with Automated Testing and Tools" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2016-04-23T00:00:00+08:00","datePublished":"2016-04-23T00:00:00+08:00","description":"This blog post was organized with the assistance of ChatGPT-4o.","headline":"Enhancing iOS Development with Automated Testing and Tools","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/ios-test-en"},"url":"https://lzwjava.github.io/ios-test-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=6bec149fe21cbe552195625c12f7a703cf10a122">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=6bec149fe21cbe552195625c12f7a703cf10a122" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Enhancing iOS Development with Automated Testing and Tools | Original, translated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/en/2016-04-23-ios-test-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsen2016-04-23-ios-test-en.md</span> -->
      

      <!-- <span>2016-04-23-ios-test-en.md</span> -->

      
        

        
          
          <a href="#" class="button">2016.04</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/ios-test-en" selected>English</option>
        <option value="/ios-test-zh" >中文</option>
        <option value="/ios-test-ja" >日本語</option>
        <option value="/ios-test-es" >Español</option>
        <option value="/ios-test-hi" >हिंदी</option>
        <option value="/ios-test-fr" >Français</option>
        <option value="/ios-test-de" >Deutsch</option>
        <option value="/ios-test-ar" >العربية</option>
        <option value="/ios-test-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>This blog post was organized with the assistance of ChatGPT-4o.</p>

<hr />

<h3 id="the-importance-of-unit-testing">The Importance of Unit Testing</h3>

<p>At LeanCloud, we implemented unit testing early in our projects, which proved invaluable. Each pull request (PR) triggers unit tests on Jenkins, and we aim for a coverage rate of around 80%. There are two primary scenarios for writing tests: to validate new interfaces and to reproduce and fix bugs. The more tests we accumulate, the stronger our codebase becomes. Automated testing allows us to confidently release and refactor code without manual verification.</p>

<h3 id="test-flows-and-practical-applications">Test Flows and Practical Applications</h3>
<p>Here are some practical examples of how unit tests help us:</p>

<p><strong>Test Flow 1:</strong> A user reported an error when saving an object with a description key. I wrote a test to reproduce the issue, found and fixed the bug, and retained the test for future validation.</p>

<p><strong>Test Flow 2:</strong> When developing new interfaces, I write tests after implementing the code to ensure it works correctly.</p>

<p><strong>Test Flow 3:</strong> After modifying the <code class="language-plaintext highlighter-rouge">AVObject.m</code> code, I run <code class="language-plaintext highlighter-rouge">AVObjectTest.m</code> to check if the changes cause any tests to fail.</p>

<p><strong>Test Flow 4:</strong> Submitting a PR triggers automated tests on Jenkins.</p>

<h3 id="benefits-of-writing-unit-tests">Benefits of Writing Unit Tests</h3>
<ul>
  <li><strong>Reduced Manual Verification:</strong> Unit tests save time by eliminating the need for manual checks.</li>
  <li><strong>Bug Detection:</strong> Early detection of issues caused by code changes prevents bugs from affecting other parts of the project.</li>
  <li><strong>Collaborative Projects:</strong> In multi-developer projects, unit tests ensure consistency and reliability, even when handed over to others.</li>
  <li><strong>High-Quality Open Source Projects:</strong> Popular open-source projects often have extensive unit tests, which contribute to their reliability and popularity.</li>
</ul>

<h3 id="how-to-write-effective-unit-tests">How to Write Effective Unit Tests</h3>
<ul>
  <li><strong>Modular Code:</strong> Separate data and UI layers to make testing easier.</li>
  <li><strong>Maximize Coverage:</strong> Write minimal test code to achieve maximum coverage.</li>
  <li><strong>Asynchronous Handling:</strong> Ensure tests can handle asynchronous operations.</li>
  <li><strong>Framework Selection:</strong> Choose the right testing framework for your needs.</li>
  <li><strong>Coverage Reports:</strong> Use coverage reports to understand which parts of your code are tested.</li>
</ul>

<h3 id="evaluating-testing-frameworks">Evaluating Testing Frameworks</h3>
<p>We evaluated several frameworks:</p>
<ul>
  <li><strong>Expecta:</strong> <code class="language-plaintext highlighter-rouge">expect(error).not.beNil()</code></li>
  <li><strong>Specta:</strong> <code class="language-plaintext highlighter-rouge">describe("") it("")</code></li>
  <li><strong>Kiwi:</strong> <code class="language-plaintext highlighter-rouge">describe("") it("")</code></li>
  <li>TDD and BDD frameworks have limitations, such as poor integration with Xcode, lack of test buttons, and incomplete unit test listings in the sidebar.</li>
</ul>

<h3 id="handling-asynchronous-tests">Handling Asynchronous Tests</h3>
<p>Asynchronous testing is crucial for operations that do not complete immediately. Ensure your framework supports async tests effectively. For example, using expectations in XCTest to wait for asynchronous operations to complete before proceeding with assertions.</p>

<h3 id="coverage-reports">Coverage Reports</h3>
<p>Xcode 7 introduced built-in coverage reports. To enable them:</p>
<ol>
  <li>Turn on <code class="language-plaintext highlighter-rouge">Gather Coverage Data</code> in your scheme settings.</li>
  <li>Test against the App Target, not the Test Target.</li>
</ol>

<p>This feature allows developers to see exactly which lines of code are being tested, helping to identify untested parts of the codebase. For more details, visit <a href="https://www.bignerdranch.com/blog/weve-got-you-covered/">Big Nerd Ranch’s blog</a>.</p>

<h3 id="remote-automated-testing-with-jenkins">Remote Automated Testing with Jenkins</h3>
<p>Setting up Jenkins for automated testing involves several steps:</p>
<ol>
  <li><strong>Jenkins Installation:</strong> Set up Jenkins on a local machine or a server in a data center.</li>
  <li><strong>GitHub Integration:</strong> Use the GitHub PR build plugin to trigger tests when a pull request is submitted.
    <ul>
      <li>Configure webhooks to send events to Jenkins.</li>
      <li>Ensure Jenkins can access the latest code from the pull request.</li>
    </ul>
  </li>
  <li><strong>Test Scripts:</strong> Set up test scripts in Jenkins to automate the testing process.
    <ul>
      <li>Ensure Jenkins can notify GitHub about test results.</li>
      <li>Configure notifications to Slack or email for test failures.</li>
    </ul>
  </li>
</ol>

<p>Remote automated testing with Jenkins offers the full benefits of automated tests, surpassing local testing by running tests in a clean, controlled environment.</p>

<h3 id="remote-packaging-and-deployment">Remote Packaging and Deployment</h3>
<p>While remote packaging may not be necessary for all projects, it can streamline the deployment process for SDKs and other reusable components. This involves:</p>
<ul>
  <li>Configuring Jenkins to read your code.</li>
  <li>Reading the release version.</li>
  <li>Unlocking the keychain in the command line to access signing certificates.</li>
</ul>

<h3 id="additional-tools-and-tips">Additional Tools and Tips</h3>
<ul>
  <li><strong>Reveal:</strong> Analyzes any app’s UI on a jailbroken iPhone.</li>
  <li><strong>Flex:</strong> Analyzes network requests, UI, local files, NSUserDefaults, and logs on a jailbroken iPhone.</li>
  <li><strong>Pod Management:</strong> Local Pod usage, advanced Podfile configurations, and publishing Pods.</li>
  <li><strong>Framework Creation:</strong> Differences between dynamic and static libraries, and how to package frameworks for both simulators and real devices.</li>
  <li><strong>Xcode Tips:</strong> Useful shortcuts like Shift + Command + J for revealing files in the navigator, and Shift + Command + O for quickly opening files.</li>
</ul>

<h3 id="conclusion">Conclusion</h3>
<p>Automated testing and the right tools significantly enhance the development process. By incorporating unit tests early, leveraging asynchronous handling, and utilizing coverage reports, we can build more reliable and maintainable applications. Tools like Jenkins for CI/CD and Xcode for development, combined with a robust testing strategy, ensure high-quality software delivery.</p>

<h3 id="acknowledgements">Acknowledgements</h3>
<p>Special thanks to the LeanCloud team and everyone who contributed to our testing processes.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
