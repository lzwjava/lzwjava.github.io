<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>एक AI-संचालित कहानी बॉट बनाएं</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>एक AI-संचालित कहानी बॉट बनाएं | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="एक AI-संचालित कहानी बॉट बनाएं" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="hi" />
<meta name="description" content="यह ब्लॉग पोस्ट ChatGPT-4 की सहायता से लिखा गया है।" />
<meta property="og:description" content="यह ब्लॉग पोस्ट ChatGPT-4 की सहायता से लिखा गया है।" />
<link rel="canonical" href="https://lzwjava.github.io/bot-hi" />
<meta property="og:url" content="https://lzwjava.github.io/bot-hi" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-07-07T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="एक AI-संचालित कहानी बॉट बनाएं" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2024-07-07T00:00:00+08:00","datePublished":"2024-07-07T00:00:00+08:00","description":"यह ब्लॉग पोस्ट ChatGPT-4 की सहायता से लिखा गया है।","headline":"एक AI-संचालित कहानी बॉट बनाएं","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/bot-hi"},"url":"https://lzwjava.github.io/bot-hi"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=1f84d5e681784ac288d87139b67cfd129108442b">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=1f84d5e681784ac288d87139b67cfd129108442b" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       एक AI-संचालित कहानी बॉट बनाएं | मूल, AI द्वारा अनुवादित
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/hi/2024-07-07-bot-hi.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postshi2024-07-07-bot-hi.md</span> -->
      

      <!-- <span>2024-07-07-bot-hi.md</span> -->

      
        

        
          
          <a href="#" class="button">2024.07</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/bot-en" >English</option>
        <option value="/bot-zh" >中文</option>
        <option value="/bot-ja" >日本語</option>
        <option value="/bot-es" >Español</option>
        <option value="/bot-hi" selected>हिंदी</option>
        <option value="/bot-fr" >Français</option>
        <option value="/bot-de" >Deutsch</option>
        <option value="/bot-ar" >العربية</option>
        <option value="/bot-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p><em>यह ब्लॉग पोस्ट ChatGPT-4 की सहायता से लिखा गया है।</em></p>

<hr />

<h3 id="विषयसूची">विषयसूची</h3>

<ul>
  <li><a href="#परिचय">परिचय</a></li>
  <li><a href="#प्रोजेक्ट-आर्किटेक्चर">प्रोजेक्ट आर्किटेक्चर</a>
    <ul>
      <li><a href="#बैकएंड">बैकएंड</a>
        <ul>
          <li><a href="#flask-एप्लिकेशन-सेटअप">Flask एप्लिकेशन सेटअप</a></li>
          <li><a href="#लॉगिंग-और-मॉनिटरिंग">लॉगिंग और मॉनिटरिंग</a></li>
          <li><a href="#अनुरोध-प्रबंधन">अनुरोध प्रबंधन</a></li>
        </ul>
      </li>
      <li><a href="#फ्रंटएंड">फ्रंटएंड</a>
        <ul>
          <li><a href="#react-कंपोनेंट्स">React कंपोनेंट्स</a></li>
          <li><a href="#api-इंटीग्रेशन">API इंटीग्रेशन</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#डिप्लॉयमेंट">डिप्लॉयमेंट</a>
    <ul>
      <li><a href="#डिप्लॉयमेंट-स्क्रिप्ट">डिप्लॉयमेंट स्क्रिप्ट</a></li>
      <li><a href="#elasticsearch-कॉन्फ़िगरेशन">ElasticSearch कॉन्फ़िगरेशन</a></li>
      <li><a href="#kibana-कॉन्फ़िगरेशन">Kibana कॉन्फ़िगरेशन</a></li>
      <li><a href="#logstash-कॉन्फ़िगरेशन">Logstash कॉन्फ़िगरेशन</a></li>
    </ul>
  </li>
  <li><a href="#nginx-कॉन्फ़िगरेशन-और-lets-encrypt-ssl-सर्टिफिकेट">Nginx कॉन्फ़िगरेशन और Let’s Encrypt SSL सर्टिफिकेट</a>
    <ul>
      <li><a href="#अनुमत-ओरिजिन्स-को-हैंडल-करने-के-लिए-एक-मैप-परिभाषित-करें">अनुमत ओरिजिन्स को हैंडल करने के लिए एक मैप परिभाषित करें</a></li>
      <li><a href="#http-को-https-पर-रीडायरेक्ट-करें">HTTP को HTTPS पर रीडायरेक्ट करें</a></li>
      <li><a href="#examplecom-के-लिए-मुख्य-साइट-कॉन्फ़िगरेशन"><code class="language-plaintext highlighter-rouge">example.com</code> के लिए मुख्य साइट कॉन्फ़िगरेशन</a></li>
      <li><a href="#apiexamplecom-के-लिए-api-कॉन्फ़िगरेशन"><code class="language-plaintext highlighter-rouge">api.example.com</code> के लिए API कॉन्फ़िगरेशन</a></li>
    </ul>
  </li>
  <li><a href="#निष्कर्ष">निष्कर्ष</a></li>
</ul>

<hr />

<h3 id="परिचय">परिचय</h3>

<p>यह ब्लॉग पोस्ट एक AI-संचालित स्टोरी बॉट एप्लिकेशन की आर्किटेक्चर और कार्यान्वयन के लिए एक व्यापक गाइड प्रदान करती है। इस प्रोजेक्ट में वेब इंटरफेस का उपयोग करके व्यक्तिगत कहानियाँ उत्पन्न करना शामिल है। हम विकास के लिए Python, Flask, और React का उपयोग करते हैं और AWS पर डिप्लॉय करते हैं। इसके अतिरिक्त, हम मॉनिटरिंग के लिए Prometheus और लॉग प्रबंधन के लिए ElasticSearch, Kibana, और Logstash का उपयोग करते हैं। DNS प्रबंधन GoDaddy और Cloudflare के माध्यम से किया जाता है, और SSL प्रमाणपत्र और अनुरोध हेडर प्रबंधन के लिए Nginx को गेटवे के रूप में उपयोग किया जाता है।</p>

<h3 id="प्रोजेक्ट-आर्किटेक्चर">प्रोजेक्ट आर्किटेक्चर</h3>

<h4 id="बैकएंड">बैकएंड</h4>

<p>प्रोजेक्ट का बैकएंड Flask का उपयोग करके बनाया गया है, जो Python में एक हल्का WSGI वेब एप्लिकेशन फ्रेमवर्क है। बैकएंड API अनुरोधों को संभालता है, डेटाबेस का प्रबंधन करता है, एप्लिकेशन गतिविधियों को लॉग करता है, और मॉनिटरिंग के लिए Prometheus के साथ एकीकृत होता है।</p>

<p>यहां बैकएंड घटकों का विवरण दिया गया है:</p>

<ol>
  <li>Flask एप्लिकेशन सेटअप:
    <ul>
      <li>Flask ऐप को प्रारंभ किया गया है और इसे विभिन्न एक्सटेंशन जैसे Flask-CORS (क्रॉस-ओरिजिन रिसोर्स शेयरिंग को संभालने के लिए) और Flask-Migrate (डेटाबेस माइग्रेशन को प्रबंधित करने के लिए) का उपयोग करने के लिए कॉन्फ़िगर किया गया है।</li>
      <li>एप्लिकेशन रूट्स को प्रारंभ किया गया है, और क्रॉस-ओरिजिन अनुरोधों की अनुमति देने के लिए CORS सक्षम किया गया है।</li>
      <li>डेटाबेस को डिफ़ॉल्ट कॉन्फ़िगरेशन के साथ प्रारंभ किया गया है, और Logstash के लिए लॉग एंट्री को फॉर्मेट करने के लिए एक कस्टम लॉगर सेट किया गया है।</li>
    </ul>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
    <span class="kn">from</span> <span class="nn">flask_cors</span> <span class="kn">import</span> <span class="n">CORS</span>
    <span class="kn">from</span> <span class="nn">.routes</span> <span class="kn">import</span> <span class="n">initialize_routes</span>
    <span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">db</span><span class="p">,</span> <span class="n">insert_default_config</span>
    <span class="kn">from</span> <span class="nn">flask_migrate</span> <span class="kn">import</span> <span class="n">Migrate</span>
    <span class="kn">import</span> <span class="nn">logging</span>
    <span class="kn">from</span> <span class="nn">logging.handlers</span> <span class="kn">import</span> <span class="n">RotatingFileHandler</span>
    <span class="kn">from</span> <span class="nn">prometheus_client</span> <span class="kn">import</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">generate_latest</span><span class="p">,</span> <span class="n">Gauge</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">from_object</span><span class="p">(</span><span class="s">'api.config.BaseConfig'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">db</span><span class="p">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">initialize_routes</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">migrate</span> <span class="o">=</span> <span class="n">Migrate</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</code></pre></div></div>

<ol>
  <li>लॉगिंग और मॉनिटरिंग:
    <ul>
      <li>एप्लिकेशन लॉग फ़ाइलों को प्रबंधित करने के लिए RotatingFileHandler का उपयोग करता है और लॉग्स को एक कस्टम फॉर्मेटर का उपयोग करके फॉर्मेट करता है।</li>
      <li>एप्लिकेशन में Prometheus मेट्रिक्स को एकीकृत किया गया है ताकि अनुरोधों की संख्या और विलंबता को ट्रैक किया जा सके।</li>
    </ul>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">REQUEST_COUNT</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s">'flask_app_request_count'</span><span class="p">,</span> <span class="s">'Flask ऐप की कुल अनुरोध संख्या'</span><span class="p">,</span> <span class="p">[</span><span class="s">'method'</span><span class="p">,</span> <span class="s">'endpoint'</span><span class="p">,</span> <span class="s">'http_status'</span><span class="p">])</span>
<span class="n">REQUEST_LATENCY</span> <span class="o">=</span> <span class="n">Gauge</span><span class="p">(</span><span class="s">'flask_app_request_latency_seconds'</span><span class="p">,</span> <span class="s">'अनुरोध विलंबता'</span><span class="p">,</span> <span class="p">[</span><span class="s">'method'</span><span class="p">,</span> <span class="s">'endpoint'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">setup_loggers</span><span class="p">():</span>
    <span class="n">logstash_handler</span> <span class="o">=</span> <span class="n">RotatingFileHandler</span><span class="p">(</span><span class="s">'app.log'</span><span class="p">,</span> <span class="n">maxBytes</span><span class="o">=</span><span class="mi">100000000</span><span class="p">,</span> <span class="n">backupCount</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">logstash_handler</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="n">logstash_formatter</span> <span class="o">=</span> <span class="n">CustomLogstashFormatter</span><span class="p">()</span>
    <span class="n">logstash_handler</span><span class="p">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logstash_formatter</span><span class="p">)</span>
</code></pre></div></div>

<p>यह फ़ंक्शन <code class="language-plaintext highlighter-rouge">setup_loggers</code> लॉगर्स को सेटअप करने के लिए है। इसमें <code class="language-plaintext highlighter-rouge">RotatingFileHandler</code> का उपयोग करके एक लॉग फ़ाइल <code class="language-plaintext highlighter-rouge">app.log</code> बनाई जाती है, जिसका अधिकतम आकार 100,000,000 बाइट्स होता है और केवल 1 बैकअप फ़ाइल रखी जाती है। लॉग लेवल को <code class="language-plaintext highlighter-rouge">DEBUG</code> पर सेट किया जाता है और <code class="language-plaintext highlighter-rouge">CustomLogstashFormatter</code> का उपयोग करके लॉग फ़ॉर्मेटर सेट किया जाता है।</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">root_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">root_logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">root_logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logstash_handler</span><span class="p">)</span>
</code></pre></div></div>

<p>यह कोड Python में logging को configure करने के लिए है। <code class="language-plaintext highlighter-rouge">root_logger</code> नाम का एक logger बनाया गया है, जिसका log level <code class="language-plaintext highlighter-rouge">DEBUG</code> पर सेट किया गया है। इसके बाद, <code class="language-plaintext highlighter-rouge">logstash_handler</code> नाम का एक handler जोड़ा गया है, जो logs को Logstash में भेजने के लिए उपयोग किया जाता है।</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logstash_handler</span><span class="p">)</span>
<span class="n">werkzeug_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">'werkzeug'</span><span class="p">)</span>
<span class="n">werkzeug_logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">werkzeug_logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logstash_handler</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setup_loggers()
```
</code></pre></div></div>

<ol>
  <li>अनुरोध प्रबंधन:
    <ul>
      <li>एप्लिकेशन प्रत्येक अनुरोध से पहले और बाद में मेट्रिक्स को कैप्चर करता है, और अनुरोध प्रवाह को ट्रैक करने के लिए एक ट्रेस ID जनरेट करता है।</li>
    </ul>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">generate_trace_id</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">characters</span> <span class="o">=</span> <span class="n">string</span><span class="p">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="p">.</span><span class="n">digits</span>
        <span class="k">return</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">choice</span><span class="p">(</span><span class="n">characters</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">before_request</span>
<span class="k">def</span> <span class="nf">before_request</span><span class="p">():</span>
    <span class="n">request</span><span class="p">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">trace_id</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'X-Trace-Id'</span><span class="p">,</span> <span class="n">generate_trace_id</span><span class="p">())</span>
    <span class="n">g</span><span class="p">.</span><span class="n">trace_id</span> <span class="o">=</span> <span class="n">trace_id</span>
</code></pre></div></div>

<p>यह कोड Flask एप्लिकेशन में एक <code class="language-plaintext highlighter-rouge">before_request</code> फंक्शन को परिभाषित करता है। यह फंक्शन हर HTTP रिक्वेस्ट से पहले चलता है। इसमें:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">request.start_time</code> को वर्तमान समय (<code class="language-plaintext highlighter-rouge">time.time()</code>) के साथ सेट किया जाता है।</li>
  <li><code class="language-plaintext highlighter-rouge">X-Trace-Id</code> हेडर से ट्रेस आईडी प्राप्त की जाती है। अगर यह हेडर उपलब्ध नहीं है, तो <code class="language-plaintext highlighter-rouge">generate_trace_id()</code> फंक्शन का उपयोग करके एक नई ट्रेस आईडी जेनरेट की जाती है।</li>
  <li>इस ट्रेस आईडी को <code class="language-plaintext highlighter-rouge">g.trace_id</code> में स्टोर किया जाता है, जो Flask के <code class="language-plaintext highlighter-rouge">g</code> ऑब्जेक्ट का उपयोग करता है और यह रिक्वेस्ट के दौरान ग्लोबल रूप से उपलब्ध होता है।</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">after_request</span>
    <span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
        <span class="n">response</span><span class="p">.</span><span class="n">headers</span><span class="p">[</span><span class="s">'X-Trace-Id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">trace_id</span>
        <span class="n">request_latency</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'start_time'</span><span class="p">,</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span>
        <span class="n">REQUEST_COUNT</span><span class="p">.</span><span class="n">labels</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">request</span><span class="p">.</span><span class="n">method</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">request</span><span class="p">.</span><span class="n">path</span><span class="p">,</span> <span class="n">http_status</span><span class="o">=</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">).</span><span class="n">inc</span><span class="p">()</span>
        <span class="n">REQUEST_LATENCY</span><span class="p">.</span><span class="n">labels</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">request</span><span class="p">.</span><span class="n">method</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">request</span><span class="p">.</span><span class="n">path</span><span class="p">).</span><span class="nb">set</span><span class="p">(</span><span class="n">request_latency</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
</code></pre></div></div>

<h4 id="फ्रंटएंड">फ्रंटएंड</h4>

<p>प्रोजेक्ट का फ्रंटएंड React का उपयोग करके बनाया गया है, जो यूजर इंटरफेस बनाने के लिए एक JavaScript लाइब्रेरी है। यह बैकएंड API के साथ इंटरैक्ट करता है ताकि कहानी प्रॉम्प्ट्स को प्रबंधित किया जा सके और यह व्यक्तिगत कहानियों को जनरेट और प्रबंधित करने के लिए एक इंटरैक्टिव यूजर इंटरफेस प्रदान करता है।</p>

<ol>
  <li>React Components:
    <ul>
      <li>मुख्य कंपोनेंट स्टोरी प्रॉम्प्ट्स के लिए यूजर इनपुट को संभालता है और इन कहानियों को प्रबंधित करने के लिए बैकएंड API के साथ इंटरैक्ट करता है।</li>
    </ul>
  </li>
</ol>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">import</span> <span class="p">{</span> <span class="nx">ToastContainer</span><span class="p">,</span> <span class="nx">toast</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-toastify</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">import</span> <span class="dl">'</span><span class="s1">react-toastify/dist/ReactToastify.css</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">import</span> <span class="p">{</span> <span class="nx">apiFetch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./api</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">import</span> <span class="dl">'</span><span class="s1">./App.css</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="p">[</span><span class="nx">prompts</span><span class="p">,</span> <span class="nx">setPrompts</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
      <span class="kd">const</span> <span class="p">[</span><span class="nx">newPrompt</span><span class="p">,</span> <span class="nx">setNewPrompt</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
      <span class="kd">const</span> <span class="p">[</span><span class="nx">isLoading</span><span class="p">,</span> <span class="nx">setIsLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">fetchPrompts</span><span class="p">();</span>
<span class="p">},</span> <span class="p">[]);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetchPrompts</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">apiFetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">prompts</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
      <span class="nx">setPrompts</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">प्रॉम्प्ट्स प्राप्त करने में विफल</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">प्रॉम्प्ट्स प्राप्त करते समय एक त्रुटि हुई</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">addPrompt</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">newPrompt</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">toast</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">'</span><span class="s1">Prompt content cannot be empty</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">apiFetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">prompts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">newPrompt</span> <span class="p">}),</span>
    <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">fetchPrompts</span><span class="p">();</span>
      <span class="nx">setNewPrompt</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
      <span class="nx">toast</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="dl">'</span><span class="s1">Prompt added successfully</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Failed to add prompt</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">An error occurred while adding the prompt</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>हिंदी अनुवाद:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">addPrompt</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">newPrompt</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">toast</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">'</span><span class="s1">प्रॉम्प्ट सामग्री खाली नहीं हो सकती</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">apiFetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">prompts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">content</span><span class="p">:</span> <span class="nx">newPrompt</span> <span class="p">}),</span>
    <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">fetchPrompts</span><span class="p">();</span>
      <span class="nx">setNewPrompt</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
      <span class="nx">toast</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="dl">'</span><span class="s1">प्रॉम्प्ट सफलतापूर्वक जोड़ा गया</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">प्रॉम्प्ट जोड़ने में विफल</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">प्रॉम्प्ट जोड़ते समय एक त्रुटि हुई</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nx">setIsLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  const deletePrompt = async (promptId) =&gt; {
    setIsLoading(true);
    try {
      const response = await apiFetch(`prompts/${promptId}`, {
        method: 'DELETE',
      });
      if (response.ok) {
        fetchPrompts();
        toast.success('प्रॉम्प्ट सफलतापूर्वक हटा दिया गया');
      } else {
        toast.error('प्रॉम्प्ट हटाने में विफल');
      }
    } catch (error) {
      toast.error('प्रॉम्प्ट हटाते समय एक त्रुटि हुई');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    &lt;div className="app"&gt;
      &lt;h1&gt;AI-संचालित कहानी बॉट&lt;/h1&gt;
      &lt;div&gt;
        &lt;input
          type="text"
          value={newPrompt}
          onChange={(e) =&gt; setNewPrompt(e.target.value)}
          placeholder="नया प्रॉम्प्ट"
        /&gt;
        &lt;button onClick={addPrompt} disabled={isLoading}&gt;प्रॉम्प्ट जोड़ें&lt;/button&gt;
      &lt;/div&gt;
      {isLoading ? (
        &lt;p&gt;लोड हो रहा है...&lt;/p&gt;
      ) : (
        &lt;ul&gt;
          {prompts.map((prompt) =&gt; (
            &lt;li key={prompt.id}&gt;
              {prompt.content}
              &lt;button onClick={() =&gt; deletePrompt(prompt.id)}&gt;हटाएं&lt;/button&gt;
            &lt;/li&gt;
          ))}
        &lt;/ul&gt;
      )}
      &lt;ToastContainer /&gt;
    &lt;/div&gt;
  );
}
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
    <span class="s2">```

यह कोड JavaScript में एक React कंपोनेंट को एक्सपोर्ट करता है। `</span><span class="nx">App</span><span class="s2">` नाम का कंपोनेंट डिफ़ॉल्ट रूप से एक्सपोर्ट किया जाता है, जिसका अर्थ है कि इसे अन्य फ़ाइलों में आयात किया जा सकता है।

2. API इंटीग्रेशन:
    - फ्रंटएंड, स्टोरी प्रॉम्प्ट्स को प्रबंधित करने के लिए बैकएंड API के साथ fetch अनुरोधों का उपयोग करके इंटरैक्ट करता है।

```</span><span class="nx">javascript</span>
    <span class="k">export</span> <span class="kd">const</span> <span class="nx">apiFetch</span> <span class="o">=</span> <span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`https://api.yourdomain.com/</span><span class="p">${</span><span class="nx">endpoint</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="s2">```

### डिप्लॉयमेंट

प्रोजेक्ट को AWS पर डिप्लॉय किया गया है, जिसमें DNS प्रबंधन GoDaddy और Cloudflare के माध्यम से किया जाता है। SSL प्रमाणपत्र और अनुरोध हेडर प्रबंधन के लिए Nginx को गेटवे के रूप में उपयोग किया जाता है। हम मॉनिटरिंग के लिए Prometheus और लॉग प्रबंधन के लिए ElasticSearch, Kibana, और Logstash का उपयोग करते हैं।

1. डिप्लॉयमेंट स्क्रिप्ट:
    - हम स्थानीय और दूरस्थ निर्देशिकाओं को तैयार करने, फ़ाइलों को सिंक करने और अनुमतियाँ सेट करने जैसे डिप्लॉयमेंट कार्यों को स्वचालित करने के लिए Fabric का उपयोग करते हैं।

```</span><span class="nx">python</span>
<span class="k">from</span> <span class="nx">fabric</span> <span class="k">import</span> <span class="nx">task</span>
<span class="k">from</span> <span class="nx">fabric</span> <span class="k">import</span> <span class="nx">Connection</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">server_dir</span> <span class="o">=</span> <span class="s">'/home/project/server'</span>
    <span class="n">web_tmp_dir</span> <span class="o">=</span> <span class="s">'/home/project/server/tmp'</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@task
def prepare_remote_dirs(c):
    if not c.run(f'test -d {server_dir}', warn=True).ok:
        c.sudo(f'mkdir -p {server_dir}')
        c.sudo(f'chmod -R 755 {server_dir}')
        c.sudo(f'chmod -R 777 {web_tmp_dir}')
        c.sudo(f'chown -R ec2-user:ec2-user {server_dir}')

@task
def deploy(c, install='false'):
    prepare_remote_dirs(c)
    pem_file = './aws-keypair.pem'
    rsync_command = (f'rsync -avz --exclude="api/db.sqlite3" '
                     f'-e "ssh -i {pem_file}" --rsync-path="sudo rsync" '
                     f'{tmp_dir}/ {c.user}@{c.host}:{server_dir}')
    c.local(rsync_command)
    c.sudo(f'chown -R ec2-user:ec2-user {server_dir}')
```
</code></pre></div></div>

<ol>
  <li>ElasticSearch कॉन्फ़िगरेशन:
    <ul>
      <li>ElasticSearch सेटअप में क्लस्टर, नोड, और नेटवर्क सेटिंग्स के लिए कॉन्फ़िगरेशन शामिल हैं।</li>
    </ul>
  </li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster.name</span><span class="pi">:</span> <span class="s">my-application</span>
<span class="na">node.name</span><span class="pi">:</span> <span class="s">node-1</span>
<span class="na">path.data</span><span class="pi">:</span> <span class="s">/var/lib/elasticsearch</span>
<span class="na">path.logs</span><span class="pi">:</span> <span class="s">/var/log/elasticsearch</span>
<span class="na">network.host</span><span class="pi">:</span> <span class="s">0.0.0.0</span>
<span class="na">http.port</span><span class="pi">:</span> <span class="m">9200</span>
<span class="na">discovery.seed_hosts</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">127.0.0.1"</span><span class="pi">]</span>
<span class="na">cluster.initial_master_nodes</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">node-1"</span><span class="pi">]</span>
</code></pre></div></div>

<ol>
  <li>Kibana कॉन्फ़िगरेशन:
    <ul>
      <li>Kibana सेटअप में सर्वर और ElasticSearch होस्ट्स के लिए कॉन्फ़िगरेशन शामिल हैं।</li>
    </ul>
  </li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">server.port</span><span class="pi">:</span> <span class="m">5601</span>
    <span class="na">server.host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.0.0.0"</span>
    <span class="na">elasticsearch.hosts</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">http://localhost:9200"</span><span class="pi">]</span>
</code></pre></div></div>

<ol>
  <li>Logstash कॉन्फ़िगरेशन:
    <ul>
      <li>Logstash को लॉग फ़ाइलों को पढ़ने, उन्हें पार्स करने और पार्स किए गए लॉग्स को ElasticSearch में आउटपुट करने के लिए कॉन्फ़िगर किया गया है।</li>
    </ul>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    input {
      file {
        path =&gt; "/home/project/server/app.log"
        start_position =&gt; "beginning"
        sincedb_path =&gt; "/dev/null"
      }
    }
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>filter {
  json {
    source =&gt; "message"
  }
}
</code></pre></div></div>

<p>(यह कोड ब्लॉक है, इसे अनुवादित नहीं किया जाना चाहिए।)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>output {
  elasticsearch {
    hosts =&gt; ["http://localhost:9200"]
    index =&gt; "flask-logs-%{+YYYY.MM.dd}"
  }
}
```
</code></pre></div></div>

<h3 id="nginx-कॉन्फ़िगरेशन-और-lets-encrypt-ssl-प्रमाणपत्र">Nginx कॉन्फ़िगरेशन और Let’s Encrypt SSL प्रमाणपत्र</h3>

<p>सुरक्षित संचार सुनिश्चित करने के लिए, हम Nginx को रिवर्स प्रॉक्सी के रूप में और Let’s Encrypt को SSL प्रमाणपत्रों के लिए उपयोग करते हैं। नीचे HTTP से HTTPS रीडायरेक्शन और SSL प्रमाणपत्रों को सेटअप करने के लिए Nginx कॉन्फ़िगरेशन दिया गया है।</p>

<ol>
  <li>अनुमत मूल (allowed origins) को संभालने के लिए एक मैप (map) परिभाषित करें:</li>
</ol>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">map</span> <span class="nv">$http_origin</span> <span class="nv">$cors_origin</span> <span class="p">{</span>
        <span class="kn">default</span> <span class="s">"https://example.com"</span><span class="p">;</span>
        <span class="kn">"http://localhost:3000"</span> <span class="s">"http://localhost:3000"</span><span class="p">;</span>
        <span class="kn">"https://example.com"</span> <span class="s">"https://example.com"</span><span class="p">;</span>
        <span class="kn">"https://www.example.com"</span> <span class="s">"https://www.example.com"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">```</span>

<span class="mi">2</span><span class="s">.</span> <span class="s">HTTP</span> <span class="s">को</span> <span class="s">HTTPS</span> <span class="s">पर</span> <span class="s">रीडायरेक्ट</span> <span class="s">करें:</span>

<span class="s">```nginx</span>
    <span class="s">server</span> <span class="p">{</span>
        <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
        <span class="kn">server_name</span> <span class="s">example.com</span> <span class="s">api.example.com</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    return 301 https://$host$request_uri;
}
```
</code></pre></div></div>

<ol>
  <li><code class="language-plaintext highlighter-rouge">example.com</code> के लिए मुख्य साइट कॉन्फ़िगरेशन:</li>
</ol>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">server</span> <span class="p">{</span>
        <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
        <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">ssl_protocols</span> <span class="s">TLSv1.2</span> <span class="s">TLSv1.3</span><span class="p">;</span>
        <span class="k">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
        <span class="k">ssl_ciphers</span> <span class="s">"EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        root /home/project/web;
        index index.html index.htm index.php default.html default.htm default.php;
</code></pre></div></div>

<p>यह कोड एक वेब सर्वर कॉन्फ़िगरेशन का हिस्सा है। यहां <code class="language-plaintext highlighter-rouge">root</code> डायरेक्टिव वेब सर्वर को बताता है कि वेबसाइट की फाइलें कहां स्थित हैं, और <code class="language-plaintext highlighter-rouge">index</code> डायरेक्टिव यह निर्धारित करता है कि जब कोई डायरेक्टरी अनुरोध की जाती है, तो कौन सी फाइलें डिफ़ॉल्ट रूप से लोड की जाएंगी।</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    location / {
        try_files $uri $uri/ =404;
    }
</code></pre></div></div>

<p>यह कोड Nginx कॉन्फ़िगरेशन का एक हिस्सा है। इसे हिंदी में समझाएं:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">location / { ... }</code>: यह Nginx में एक लोकेशन ब्लॉक है जो रूट URL (<code class="language-plaintext highlighter-rouge">/</code>) के लिए कॉन्फ़िगरेशन को परिभाषित करता है।</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">try_files $uri $uri/ =404;</code>: यह निर्देश Nginx को फ़ाइलों को खोजने का प्रयास करने के लिए कहता है:</p>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">$uri</code>: यह अनुरोधित URL के अनुरूप फ़ाइल को खोजने का प्रयास करता है।</li>
      <li><code class="language-plaintext highlighter-rouge">$uri/</code>: यदि फ़ाइल नहीं मिलती है, तो यह एक डायरेक्टरी के रूप में खोजने का प्रयास करता है।</li>
      <li><code class="language-plaintext highlighter-rouge">=404</code>: यदि दोनों प्रयास विफल होते हैं, तो Nginx एक 404 त्रुटि (पेज नहीं मिला) लौटाता है।</li>
    </ul>
  </li>
</ul>

<p>इसका मतलब है कि यदि अनुरोधित URL के अनुरूप कोई फ़ाइल या डायरेक्टरी नहीं मिलती है, तो Nginx एक 404 त्रुटि पेज दिखाएगा।</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">location</span> <span class="p">~</span> <span class="sr">.*\.(gif|jpg|jpeg|png|bmp|swf)$</span> <span class="p">{</span>
            <span class="kn">expires</span> <span class="s">30d</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>यह Nginx कॉन्फ़िगरेशन ब्लॉक सभी GIF, JPG, JPEG, PNG, BMP, और SWF फ़ाइलों के लिए कैशिंग नियम निर्धारित करता है। इन फ़ाइलों को ब्राउज़र में 30 दिनों तक कैश किया जाएगा।</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    location ~ .*\.(js|css)?$ {
        expires 12h;
    }
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">error_page</span> <span class="mi">404</span> <span class="n">/index.html</span><span class="p">;</span>
    <span class="err">}</span>
    <span class="k">```</span>

<span class="mi">4</span><span class="s">.</span> <span class="s">`api.example.com`</span> <span class="s">के</span> <span class="s">लिए</span> <span class="s">API</span> <span class="s">कॉन्फ़िगरेशन:</span>

<span class="s">```nginx</span>
    <span class="s">server</span> <span class="p">{</span>
        <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
        <span class="kn">server_name</span> <span class="s">api.example.com</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ssl_certificate /etc/letsencrypt/live/example.com-0001/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com-0001/privkey.pem;
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">ssl_protocols</span> <span class="s">TLSv1.2</span> <span class="s">TLSv1.3</span><span class="p">;</span>
        <span class="k">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
        <span class="k">ssl_ciphers</span> <span class="s">"EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">location</span> <span class="n">/</span> <span class="p">{</span>
    <span class="c1"># पहले से मौजूद Access-Control हेडर को साफ़ करें</span>
    <span class="kn">more_clear_headers</span> <span class="s">'Access-Control-Allow-Origin'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># CORS प्रीफ्लाइट अनुरोधों को संभालें</span>
<span class="k">if</span> <span class="s">(</span><span class="nv">$request_method</span> <span class="p">=</span> <span class="s">'OPTIONS')</span> <span class="p">{</span>
    <span class="kn">add_header</span> <span class="s">'Access-Control-Allow-Origin'</span> <span class="nv">$cors_origin</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">'Access-Control-Allow-Methods'</span> <span class="s">'GET,</span> <span class="s">POST,</span> <span class="s">OPTIONS,</span> <span class="s">PUT,</span> <span class="s">DELETE'</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">'Access-Control-Allow-Headers'</span> <span class="s">'Origin,</span> <span class="s">Content-Type,</span> <span class="s">Accept,</span> <span class="s">Authorization,</span> <span class="s">X-Client-Info,</span> <span class="s">X-Trace-Id,</span> <span class="s">X-Requested-With,</span> <span class="s">X-HTTP-Method-Override,</span> <span class="s">DNT,</span> <span class="s">Keep-Alive,</span> <span class="s">User-Agent,</span> <span class="s">If-Modified-Since,</span> <span class="s">Cache-Control,</span> <span class="s">Content-Range,</span> <span class="s">Range'</span><span class="p">;</span>
    <span class="kn">add_header</span> <span class="s">'Access-Control-Max-Age'</span> <span class="mi">3600</span><span class="p">;</span>
    <span class="kn">return</span> <span class="mi">204</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">add_header</span> <span class="s">'Access-Control-Allow-Origin'</span> <span class="nv">$cors_origin</span> <span class="s">always</span><span class="p">;</span>
<span class="k">add_header</span> <span class="s">'Access-Control-Allow-Methods'</span> <span class="s">'GET,</span> <span class="s">POST,</span> <span class="s">OPTIONS,</span> <span class="s">PUT,</span> <span class="s">DELETE'</span> <span class="s">always</span><span class="p">;</span>
<span class="k">add_header</span> <span class="s">'Access-Control-Allow-Headers'</span> <span class="s">'Origin,</span> <span class="s">Content-Type,</span> <span class="s">Accept,</span> <span class="s">Authorization,</span> <span class="s">X-Client-Info,</span> <span class="s">X-Trace-Id,</span> <span class="s">X-Requested-With,</span> <span class="s">X-HTTP-Method-Override,</span> <span class="s">DNT,</span> <span class="s">Keep-Alive,</span> <span class="s">User-Agent,</span> <span class="s">If-Modified-Since,</span> <span class="s">Cache-Control,</span> <span class="s">Content-Range,</span> <span class="s">Range'</span> <span class="s">always</span><span class="p">;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">nginx
            proxy_pass http://127.0.0.1:5000/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_connect_timeout 600s;
            proxy_send_timeout 600s;
            proxy_read_timeout 600s;
            send_timeout 600s;
        }
    }
   </code></p>

<h3 id="निष्कर्ष">निष्कर्ष</h3>

<p>यह प्रोजेक्ट एक AI-संचालित स्टोरी बॉट एप्लिकेशन के लिए एक मजबूत आर्किटेक्चर प्रदर्शित करता है, जो आधुनिक वेब विकास प्रथाओं और उपकरणों का उपयोग करता है। बैकएंड Flask के साथ बनाया गया है, जो लॉगिंग और मॉनिटरिंग के लिए विभिन्न सेवाओं के साथ कुशल अनुरोध प्रबंधन और एकीकरण सुनिश्चित करता है। फ्रंटएंड, React के साथ बनाया गया है, जो स्टोरी प्रॉम्प्ट्स को प्रबंधित करने के लिए एक इंटरैक्टिव यूजर इंटरफेस प्रदान करता है। AWS को डिप्लॉयमेंट के लिए, Nginx को सुरक्षित संचार के लिए, और ELK स्टैक को लॉग प्रबंधन के लिए उपयोग करके, हम स्केलेबिलिटी, विश्वसनीयता और रखरखाव को सुनिश्चित करते हैं। यह व्यापक सेटअप एक सहज यूजर अनुभव प्रदान करने के लिए अत्याधुनिक तकनीकों को जोड़ने की शक्ति को प्रदर्शित करता है।</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-hi" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
