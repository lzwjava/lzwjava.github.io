<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Spring Boot Multithreading</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Spring Boot Multithreading | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Spring Boot Multithreading" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-10-spring-boot-multithreads-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-10-spring-boot-multithreads-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spring Boot Multithreading" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Spring Boot Multithreading","url":"https://lzwjava.github.io/notes/2025-03-10-spring-boot-multithreads-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=ec9acfb11989af9fb9315b3f31631a083409c36e">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=ec9acfb11989af9fb9315b3f31631a083409c36e" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Spring Boot Multithreading | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-10-spring-boot-multithreads-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-10-spring-boot-multithreads-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/spring-boot-multithreads-en" selected>English</option>
        <option value="/spring-boot-multithreads-zh" >中文</option>
        <option value="/spring-boot-multithreads-ja" >日本語</option>
        <option value="/spring-boot-multithreads-es" >Español</option>
        <option value="/spring-boot-multithreads-hi" >हिंदी</option>
        <option value="/spring-boot-multithreads-fr" >Français</option>
        <option value="/spring-boot-multithreads-de" >Deutsch</option>
        <option value="/spring-boot-multithreads-ar" >العربية</option>
        <option value="/spring-boot-multithreads-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>In a Spring Boot project, the concepts of “executors” and “threads” typically relate to how the application handles concurrent tasks and manages its workload, especially in scenarios involving asynchronous processing, task scheduling, or handling multiple requests. Let’s break this down step-by-step:</p>

<hr />

<h3 id="what-are-executors-and-threads-in-spring-boot"><strong>What Are Executors and Threads in Spring Boot?</strong></h3>

<ol>
  <li><strong>Threads</strong>:
    <ul>
      <li>A thread is the smallest unit of execution in a Java program. In a Spring Boot application, threads are used to handle tasks like processing HTTP requests, executing background jobs, or performing I/O operations.</li>
      <li>Spring Boot, by default, runs within an embedded web server (e.g., Tomcat, Jetty, or Undertow), which uses a thread pool to manage incoming requests. Each request is typically assigned to a thread from this pool.</li>
    </ul>
  </li>
  <li><strong>Executors</strong>:
    <ul>
      <li>An <code class="language-plaintext highlighter-rouge">Executor</code> in Java (and Spring Boot) is an abstraction over thread management. It’s part of the <code class="language-plaintext highlighter-rouge">java.util.concurrent</code> package and provides a way to manage and execute tasks asynchronously without manually creating and managing threads.</li>
      <li>In Spring Boot, executors are often used to offload tasks from the main application thread (e.g., the thread handling an HTTP request) to a separate thread pool. This is useful for long-running tasks, parallel processing, or scheduled jobs.</li>
    </ul>
  </li>
  <li><strong>Spring-Specific Context</strong>:
    <ul>
      <li>Spring Boot provides utilities like <code class="language-plaintext highlighter-rouge">ThreadPoolTaskExecutor</code> (for general task execution) and <code class="language-plaintext highlighter-rouge">ThreadPoolTaskScheduler</code> (for scheduled tasks) to simplify working with executors and threads.</li>
      <li>These are built on top of Java’s <code class="language-plaintext highlighter-rouge">ExecutorService</code> and are commonly used for:
        <ul>
          <li>Asynchronous method execution (via <code class="language-plaintext highlighter-rouge">@Async</code>).</li>
          <li>Task scheduling (via <code class="language-plaintext highlighter-rouge">@Scheduled</code>).</li>
          <li>Managing workloads in high-concurrency scenarios.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="how-do-they-work-in-spring-boot"><strong>How Do They Work in Spring Boot?</strong></h3>

<h4 id="1-default-thread-management-in-spring-boot"><strong>1. Default Thread Management in Spring Boot</strong></h4>
<ul>
  <li>When you start a Spring Boot web application, the embedded server (e.g., Tomcat) initializes a thread pool to handle incoming HTTP requests.</li>
  <li>For example, Tomcat’s default configuration might allocate 200 threads (configurable via <code class="language-plaintext highlighter-rouge">server.tomcat.threads.max</code> in <code class="language-plaintext highlighter-rouge">application.properties</code>).</li>
  <li>Each incoming request is assigned a thread from this pool. If all threads are busy and a new request arrives, it may queue up (depending on the server’s configuration) or be rejected.</li>
</ul>

<h4 id="2-executors-in-spring-boot"><strong>2. Executors in Spring Boot</strong></h4>
<ul>
  <li>Spring Boot provides the <code class="language-plaintext highlighter-rouge">TaskExecutor</code> interface (an extension of Java’s <code class="language-plaintext highlighter-rouge">Executor</code>) to manage custom thread pools for specific tasks.</li>
  <li>A common implementation is <code class="language-plaintext highlighter-rouge">ThreadPoolTaskExecutor</code>, which allows you to configure:
    <ul>
      <li><strong>Core Pool Size</strong>: The number of threads always kept alive.</li>
      <li><strong>Max Pool Size</strong>: The maximum number of threads allowed in the pool.</li>
      <li><strong>Queue Capacity</strong>: The number of tasks that can wait in the queue before new threads are spawned (up to the max pool size).</li>
      <li><strong>Thread Naming</strong>: For easier debugging (e.g., “my-executor-thread-1”).</li>
    </ul>

    <p>Example configuration in a Spring Boot app:</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExecutorConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">ThreadPoolTaskExecutor</span> <span class="nf">taskExecutor</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">ThreadPoolTaskExecutor</span> <span class="n">executor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPoolTaskExecutor</span><span class="o">();</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setCorePoolSize</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>      <span class="c1">// Minimum 5 threads</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setMaxPoolSize</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>      <span class="c1">// Maximum 10 threads</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setQueueCapacity</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>   <span class="c1">// Queue up to 100 tasks</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">setThreadNamePrefix</span><span class="o">(</span><span class="s">"MyExecutor-"</span><span class="o">);</span>
        <span class="n">executor</span><span class="o">.</span><span class="na">initialize</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">executor</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="3-using-async-with-executors"><strong>3. Using <code class="language-plaintext highlighter-rouge">@Async</code> with Executors</strong></h4>
<ul>
  <li>Spring Boot supports asynchronous method execution with the <code class="language-plaintext highlighter-rouge">@Async</code> annotation. When you annotate a method with <code class="language-plaintext highlighter-rouge">@Async</code>, it runs on a separate thread managed by an executor.</li>
  <li>By default, Spring uses a <code class="language-plaintext highlighter-rouge">SimpleAsyncTaskExecutor</code>, which creates a new thread for each task (not ideal for high load). To optimize this, you can provide your own <code class="language-plaintext highlighter-rouge">ThreadPoolTaskExecutor</code> (as shown above) and reference it:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyService</span> <span class="o">{</span>

    <span class="nd">@Async</span><span class="o">(</span><span class="s">"taskExecutor"</span><span class="o">)</span> <span class="c1">// Refers to the bean name from the config</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doAsyncTask</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Running on thread: "</span> <span class="o">+</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="4-task-scheduling"><strong>4. Task Scheduling</strong></h4>
<ul>
  <li>For scheduled tasks (e.g., running a job every 5 minutes), Spring Boot uses <code class="language-plaintext highlighter-rouge">ThreadPoolTaskScheduler</code>. It’s similar to <code class="language-plaintext highlighter-rouge">ThreadPoolTaskExecutor</code> but tailored for scheduling.</li>
  <li>Example:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Scheduled</span><span class="o">(</span><span class="n">fixedRate</span> <span class="o">=</span> <span class="mi">5000</span><span class="o">)</span> <span class="c1">// Runs every 5 seconds</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">scheduledTask</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Scheduled task on: "</span> <span class="o">+</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="5-how-threads-and-executors-interact"><strong>5. How Threads and Executors Interact</strong></h4>
<ul>
  <li>When a task is submitted to an executor (e.g., via <code class="language-plaintext highlighter-rouge">@Async</code> or manual submission), the executor decides whether to:
    <ul>
      <li>Use an existing idle thread from the pool.</li>
      <li>Create a new thread (if the core pool size is exceeded but below the max pool size).</li>
      <li>Queue the task (if the max pool size is reached and the queue isn’t full).</li>
      <li>Reject the task (if the queue is full and no more threads can be created).</li>
    </ul>
  </li>
  <li>Threads execute the tasks and return to the pool when done, ready for the next task.</li>
</ul>

<hr />

<h3 id="practical-example"><strong>Practical Example</strong></h3>
<p>Imagine a Spring Boot app handling user registrations:</p>
<ul>
  <li><strong>HTTP Request Thread</strong>: A user submits a registration form, handled by a thread from the Tomcat thread pool.</li>
  <li><strong>Async Task</strong>: Sending a confirmation email is offloaded to a <code class="language-plaintext highlighter-rouge">ThreadPoolTaskExecutor</code> via an <code class="language-plaintext highlighter-rouge">@Async</code> method, so the HTTP thread can respond immediately without waiting for the email to send.</li>
  <li><strong>Scheduled Task</strong>: A cleanup job runs every hour to remove unverified accounts, managed by a <code class="language-plaintext highlighter-rouge">ThreadPoolTaskScheduler</code>.</li>
</ul>

<hr />

<h3 id="key-points"><strong>Key Points</strong></h3>
<ul>
  <li><strong>Executors</strong> abstract thread management, making it easier to scale and tune concurrency.</li>
  <li><strong>Threads</strong> do the actual work, and their lifecycle is managed by executors or the web server.</li>
  <li>Spring Boot’s defaults are sufficient for small apps, but for high-load or complex apps, you’ll configure custom executors to optimize performance.</li>
</ul>

<p>If you have a specific Spring Boot project in mind and want help analyzing its executor/thread setup, feel free to share more details!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
