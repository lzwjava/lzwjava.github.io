<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Stream API in Java</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Stream API in Java | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Stream API in Java" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-05-stream-java-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-05-stream-java-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Stream API in Java" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Stream API in Java","url":"https://lzwjava.github.io/notes/2025-03-05-stream-java-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=9f7e044656587180004efe3cdbfaf1fbeeef6e0d">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=9f7e044656587180004efe3cdbfaf1fbeeef6e0d" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Stream API in Java | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-05-stream-java-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-05-stream-java-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/stream-java-en" selected>English</option>
        <option value="/stream-java-zh" >中文</option>
        <option value="/stream-java-ja" >日本語</option>
        <option value="/stream-java-es" >Español</option>
        <option value="/stream-java-hi" >हिंदी</option>
        <option value="/stream-java-fr" >Français</option>
        <option value="/stream-java-de" >Deutsch</option>
        <option value="/stream-java-ar" >العربية</option>
        <option value="/stream-java-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>To use <code class="language-plaintext highlighter-rouge">java.util.stream</code> in Java, you can leverage the Stream API introduced in Java 8 to process collections of data in a functional and declarative way. Streams allow you to perform operations such as filtering, mapping, and reducing on sequences of elements (like lists or arrays) efficiently and concisely. Below, I’ll explain how to use <code class="language-plaintext highlighter-rouge">java.util.stream</code> by walking through a specific example: finding the average of even numbers greater than 10 from a list of integers. This will demonstrate key stream operations and concepts.</p>

<hr />

<h3 id="overview-of-javautilstream"><strong>Overview of <code class="language-plaintext highlighter-rouge">java.util.stream</code></strong></h3>
<p>The <code class="language-plaintext highlighter-rouge">java.util.stream</code> package provides the <code class="language-plaintext highlighter-rouge">Stream</code> interface and related classes (like <code class="language-plaintext highlighter-rouge">IntStream</code>, <code class="language-plaintext highlighter-rouge">DoubleStream</code>, etc.) to process data. A stream is a sequence of elements that supports operations executed in a pipeline. These operations are:</p>
<ul>
  <li><strong>Intermediate operations</strong>: Transform or filter the stream (e.g., <code class="language-plaintext highlighter-rouge">filter</code>, <code class="language-plaintext highlighter-rouge">map</code>), returning a new stream. These are lazy and only executed when a terminal operation is invoked.</li>
  <li><strong>Terminal operations</strong>: Produce a result or side effect (e.g., <code class="language-plaintext highlighter-rouge">average</code>, <code class="language-plaintext highlighter-rouge">collect</code>), triggering the pipeline to process the data.</li>
</ul>

<p>To use streams, you typically:</p>
<ol>
  <li>Create a stream from a data source (e.g., a list).</li>
  <li>Apply intermediate operations to transform or filter the data.</li>
  <li>Use a terminal operation to produce a result.</li>
</ol>

<hr />

<h3 id="example-problem"><strong>Example Problem</strong></h3>
<p>Let’s solve this problem: Given a <code class="language-plaintext highlighter-rouge">List&lt;Integer&gt;</code>, compute the average of all even numbers greater than 10. If no such numbers exist, return 0.0. Here’s how to do it using <code class="language-plaintext highlighter-rouge">java.util.stream</code>.</p>

<h4 id="step-by-step-solution"><strong>Step-by-Step Solution</strong></h4>
<ol>
  <li><strong>Create a Stream</strong>
    <ul>
      <li>Start with a <code class="language-plaintext highlighter-rouge">List&lt;Integer&gt;</code> (e.g., <code class="language-plaintext highlighter-rouge">List.of(1, 2, 12, 15, 20, 25, 30)</code>).</li>
      <li>Use the <code class="language-plaintext highlighter-rouge">stream()</code> method to create a <code class="language-plaintext highlighter-rouge">Stream&lt;Integer&gt;</code>:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Filter the Stream</strong>
    <ul>
      <li>Use the <code class="language-plaintext highlighter-rouge">filter</code> method to keep only numbers that are even and greater than 10.</li>
      <li>The <code class="language-plaintext highlighter-rouge">filter</code> method takes a <code class="language-plaintext highlighter-rouge">Predicate</code> (a function returning a boolean) as a lambda expression:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">number</span> <span class="o">-&gt;</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">)</span>
</code></pre></div>        </div>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">number % 2 == 0</code> checks if a number is even.</li>
          <li><code class="language-plaintext highlighter-rouge">number &gt; 10</code> ensures the number is greater than 10.</li>
          <li>For the example list <code class="language-plaintext highlighter-rouge">[1, 2, 12, 15, 20, 25, 30]</code>, this keeps <code class="language-plaintext highlighter-rouge">[12, 20, 30]</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Convert to an <code class="language-plaintext highlighter-rouge">IntStream</code></strong>
    <ul>
      <li>Since <code class="language-plaintext highlighter-rouge">average()</code> is available on primitive streams like <code class="language-plaintext highlighter-rouge">IntStream</code> (not <code class="language-plaintext highlighter-rouge">Stream&lt;Integer&gt;</code>), convert the <code class="language-plaintext highlighter-rouge">Stream&lt;Integer&gt;</code> to an <code class="language-plaintext highlighter-rouge">IntStream</code> using <code class="language-plaintext highlighter-rouge">mapToInt</code>:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">i</span><span class="o">)</span>
</code></pre></div>        </div>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">i -&gt; i</code> unboxes each <code class="language-plaintext highlighter-rouge">Integer</code> to an <code class="language-plaintext highlighter-rouge">int</code>. Alternatively, you could use <code class="language-plaintext highlighter-rouge">Integer::intValue</code>.</li>
          <li>This gives an <code class="language-plaintext highlighter-rouge">IntStream</code> of <code class="language-plaintext highlighter-rouge">[12, 20, 30]</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Compute the Average</strong>
    <ul>
      <li>Use the <code class="language-plaintext highlighter-rouge">average()</code> method on <code class="language-plaintext highlighter-rouge">IntStream</code>, which returns an <code class="language-plaintext highlighter-rouge">OptionalDouble</code> (since the stream might be empty):
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="na">average</span><span class="o">()</span>
</code></pre></div>        </div>
        <ul>
          <li>For <code class="language-plaintext highlighter-rouge">[12, 20, 30]</code>, this computes <code class="language-plaintext highlighter-rouge">(12 + 20 + 30) / 3 = 20.666...</code>.</li>
          <li>If the stream is empty, it returns an empty <code class="language-plaintext highlighter-rouge">OptionalDouble</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Handle the Empty Case</strong>
    <ul>
      <li>Use <code class="language-plaintext highlighter-rouge">orElse(0.0)</code> on the <code class="language-plaintext highlighter-rouge">OptionalDouble</code> to return 0.0 if no numbers satisfy the filter:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="mf">0.0</span><span class="o">)</span>
</code></pre></div>        </div>
        <ul>
          <li>For <code class="language-plaintext highlighter-rouge">[12, 20, 30]</code>, this returns <code class="language-plaintext highlighter-rouge">20.666...</code>.</li>
          <li>For a list like <code class="language-plaintext highlighter-rouge">[1, 3, 5]</code> (no even numbers &gt; 10), it returns <code class="language-plaintext highlighter-rouge">0.0</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h4 id="complete-code"><strong>Complete Code</strong></h4>
<p>Here’s the full solution as a method:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                   <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">number</span> <span class="o">-&gt;</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">)</span>
                   <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">i</span><span class="o">)</span>
                   <span class="o">.</span><span class="na">average</span><span class="o">()</span>
                   <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="mf">0.0</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Test cases</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">25</span><span class="o">,</span> <span class="mi">30</span><span class="o">)));</span>  <span class="c1">// ~20.666</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">)));</span>                    <span class="c1">// 0.0</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">12</span><span class="o">)));</span>                         <span class="c1">// 12.0</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">()));</span>                           <span class="c1">// 0.0</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">)));</span>                   <span class="c1">// 0.0</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">averageOfEvenGreaterThanTen</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">16</span><span class="o">)));</span>             <span class="c1">// 15.0</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h3 id="key-features-of-javautilstream-demonstrated"><strong>Key Features of <code class="language-plaintext highlighter-rouge">java.util.stream</code> Demonstrated</strong></h3>
<ul>
  <li><strong>Chaining</strong>: Operations are chained in a fluent style (e.g., <code class="language-plaintext highlighter-rouge">.filter().mapToInt().average()</code>).</li>
  <li><strong>Laziness</strong>: Intermediate operations (like <code class="language-plaintext highlighter-rouge">filter</code> and <code class="language-plaintext highlighter-rouge">mapToInt</code>) are only executed when the terminal operation (<code class="language-plaintext highlighter-rouge">average</code>) is called.</li>
  <li><strong>Primitive Streams</strong>: <code class="language-plaintext highlighter-rouge">IntStream</code> provides methods like <code class="language-plaintext highlighter-rouge">average()</code> tailored for numeric operations, avoiding boxing overhead.</li>
  <li><strong>Optional Handling</strong>: <code class="language-plaintext highlighter-rouge">OptionalDouble</code> handles cases where no result exists, with <code class="language-plaintext highlighter-rouge">orElse</code> providing a default value.</li>
</ul>

<hr />

<h3 id="alternative-approach"><strong>Alternative Approach</strong></h3>
<p>You could also use the <code class="language-plaintext highlighter-rouge">Collectors</code> class:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>

<span class="kt">double</span> <span class="n">average</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                     <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">number</span> <span class="o">-&gt;</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="o">)</span>
                     <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">averagingInt</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">i</span><span class="o">));</span>
</code></pre></div></div>
<ul>
  <li>This returns a <code class="language-plaintext highlighter-rouge">Double</code> directly and returns <code class="language-plaintext highlighter-rouge">0.0</code> for an empty stream. However, <code class="language-plaintext highlighter-rouge">mapToInt().average()</code> is more direct for this simple case and aligns with primitive stream usage.</li>
</ul>

<hr />

<h3 id="when-to-use-streams"><strong>When to Use Streams</strong></h3>
<ul>
  <li>Use <code class="language-plaintext highlighter-rouge">java.util.stream</code> for concise, readable code when processing collections.</li>
  <li>For large datasets, consider <code class="language-plaintext highlighter-rouge">parallelStream()</code> instead of <code class="language-plaintext highlighter-rouge">stream()</code> to leverage parallelism, though this is overkill for small lists due to overhead.</li>
</ul>

<hr />

<p>This example shows how to use <code class="language-plaintext highlighter-rouge">java.util.stream</code> to solve a practical problem. You can adapt these steps—creating a stream, filtering, mapping, and reducing—to other scenarios as needed!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
