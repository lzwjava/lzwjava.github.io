<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Spring HTTP Clients</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Spring HTTP Clients | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Spring HTTP Clients" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-02-26-spring-http-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-02-26-spring-http-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spring HTTP Clients" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Spring HTTP Clients","url":"https://lzwjava.github.io/notes/2025-02-26-spring-http-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=166464ab04ba35a015955677816fdaa07d9e64a7">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=166464ab04ba35a015955677816fdaa07d9e64a7" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Spring HTTP Clients | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-02-26-spring-http-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-02-26-spring-http-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/spring-http-en" selected>English</option>
        <option value="/spring-http-zh" >中文</option>
        <option value="/spring-http-ja" >日本語</option>
        <option value="/spring-http-es" >Español</option>
        <option value="/spring-http-hi" >हिंदी</option>
        <option value="/spring-http-fr" >Français</option>
        <option value="/spring-http-de" >Deutsch</option>
        <option value="/spring-http-ar" >العربية</option>
        <option value="/spring-http-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>To answer the query “how to use FeignClient, or Spring RestClient, or Spring WebClient,” I’ll explain how each of these Spring tools can be used to make HTTP requests, focusing on their setup and basic usage. These are all part of the Spring ecosystem for interacting with RESTful services, but they serve different purposes depending on your application’s needs. Below, I’ll provide a clear, step-by-step guide for each, along with simple examples.</p>

<hr />

<h3 id="1-using-feignclient"><strong>1. Using FeignClient</strong></h3>
<p>FeignClient is a declarative REST client provided by Spring Cloud. It allows you to define HTTP clients as interfaces with annotations, making it particularly useful in microservices architectures where you need to call other services.</p>

<h4 id="steps-to-use-feignclient"><strong>Steps to Use FeignClient</strong></h4>
<ol>
  <li><strong>Add Dependencies</strong>: Include Spring Cloud dependencies in your project. If you’re using Maven, add the Spring Cloud starter for Feign to your <code class="language-plaintext highlighter-rouge">pom.xml</code>:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-openfeign<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>    </div>
    <p>Ensure you also have a dependency management block for Spring Cloud, specifying a compatible version.</p>
  </li>
  <li><strong>Enable Feign Clients</strong>: Annotate your main application class or a configuration class with <code class="language-plaintext highlighter-rouge">@EnableFeignClients</code> to activate Feign support:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.cloud.openfeign.EnableFeignClients</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="nd">@EnableFeignClients</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApplication</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Define the FeignClient Interface</strong>: Create an interface annotated with <code class="language-plaintext highlighter-rouge">@FeignClient</code>, specifying the service name or URL, and define methods corresponding to the REST endpoints:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.cloud.openfeign.FeignClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@FeignClient</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user-service"</span><span class="o">,</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"http://localhost:8080"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserClient</span> <span class="o">{</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getUsers</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <p>Here, <code class="language-plaintext highlighter-rouge">name</code> is a logical name for the client, and <code class="language-plaintext highlighter-rouge">url</code> is the base URL of the target service. The <code class="language-plaintext highlighter-rouge">@GetMapping</code> annotation maps to the <code class="language-plaintext highlighter-rouge">/users</code> endpoint.</p>
  </li>
  <li><strong>Inject and Use the Client</strong>: Autowire the interface in your service or controller and call its methods as if they were local:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">UserClient</span> <span class="n">userClient</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">fetchUsers</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userClient</span><span class="o">.</span><span class="na">getUsers</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="key-points"><strong>Key Points</strong></h4>
<ul>
  <li>FeignClient is synchronous by default.</li>
  <li>It’s ideal for microservices with service discovery (e.g., Eureka) when you omit the <code class="language-plaintext highlighter-rouge">url</code> and let Spring Cloud resolve it.</li>
  <li>Error handling can be added with fallbacks or circuit breakers (e.g., Hystrix or Resilience4j).</li>
</ul>

<hr />

<h3 id="2-using-spring-restclient"><strong>2. Using Spring RestClient</strong></h3>
<p>Spring RestClient is a synchronous HTTP client introduced in Spring Framework 6.1 as a modern alternative to the deprecated <code class="language-plaintext highlighter-rouge">RestTemplate</code>. It provides a fluent API for building and executing requests.</p>

<h4 id="steps-to-use-restclient"><strong>Steps to Use RestClient</strong></h4>
<ol>
  <li><strong>Dependencies</strong>: RestClient is included in <code class="language-plaintext highlighter-rouge">spring-web</code>, which is part of Spring Boot’s <code class="language-plaintext highlighter-rouge">spring-boot-starter-web</code>. No additional dependencies are typically needed:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Create a RestClient Instance</strong>: Instantiate <code class="language-plaintext highlighter-rouge">RestClient</code> using its static <code class="language-plaintext highlighter-rouge">create()</code> method or customize it with a builder:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.web.client.RestClient</span><span class="o">;</span>

<span class="nc">RestClient</span> <span class="n">restClient</span> <span class="o">=</span> <span class="nc">RestClient</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
</code></pre></div>    </div>
    <p>For custom configurations (e.g., timeouts), use <code class="language-plaintext highlighter-rouge">RestClient.builder()</code>.</p>
  </li>
  <li><strong>Build and Execute a Request</strong>: Use the fluent API to specify the HTTP method, URI, headers, and body, then retrieve the response:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.http.MediaType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.client.RestClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RestClient</span> <span class="n">restClient</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UserService</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">restClient</span> <span class="o">=</span> <span class="nc">RestClient</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">fetchUsers</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">restClient</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
            <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"http://localhost:8080/users"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="k">new</span> <span class="nc">ParameterizedTypeReference</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;&gt;()</span> <span class="o">{});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">get()</code> specifies the HTTP method.</li>
      <li><code class="language-plaintext highlighter-rouge">uri()</code> sets the endpoint.</li>
      <li><code class="language-plaintext highlighter-rouge">accept()</code> sets the expected content type.</li>
      <li><code class="language-plaintext highlighter-rouge">retrieve()</code> executes the request, and <code class="language-plaintext highlighter-rouge">body()</code> extracts the response, using <code class="language-plaintext highlighter-rouge">ParameterizedTypeReference</code> for generic types like lists.</li>
    </ul>
  </li>
  <li><strong>Handle the Response</strong>: The response is returned directly since RestClient is synchronous. For more control (e.g., status codes), use <code class="language-plaintext highlighter-rouge">toEntity()</code>:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>

<span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">restClient</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"http://localhost:8080/users"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
    <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
    <span class="o">.</span><span class="na">toEntity</span><span class="o">(</span><span class="k">new</span> <span class="nc">ParameterizedTypeReference</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;&gt;()</span> <span class="o">{});</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getBody</span><span class="o">();</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="key-points-1"><strong>Key Points</strong></h4>
<ul>
  <li>RestClient is synchronous, making it suitable for traditional, blocking applications.</li>
  <li>It throws exceptions (e.g., <code class="language-plaintext highlighter-rouge">RestClientException</code>) on HTTP errors, which you can catch and handle.</li>
  <li>It’s a replacement for <code class="language-plaintext highlighter-rouge">RestTemplate</code> with a more intuitive API.</li>
</ul>

<hr />

<h3 id="3-using-spring-webclient"><strong>3. Using Spring WebClient</strong></h3>
<p>Spring WebClient is a reactive, non-blocking HTTP client introduced in Spring WebFlux. It’s designed for asynchronous operations and integrates with reactive streams (Mono and Flux).</p>

<h4 id="steps-to-use-webclient"><strong>Steps to Use WebClient</strong></h4>
<ol>
  <li><strong>Add Dependencies</strong>: Include the WebFlux dependency in your project:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-webflux<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Create a WebClient Instance</strong>: Instantiate <code class="language-plaintext highlighter-rouge">WebClient</code> with a base URL or default settings:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.web.reactive.function.client.WebClient</span><span class="o">;</span>

<span class="nc">WebClient</span> <span class="n">webClient</span> <span class="o">=</span> <span class="nc">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">"http://localhost:8080"</span><span class="o">);</span>
</code></pre></div>    </div>
    <p>Use <code class="language-plaintext highlighter-rouge">WebClient.builder()</code> for custom configurations (e.g., codecs, filters).</p>
  </li>
  <li><strong>Build and Execute a Request</strong>: Use the fluent API to construct the request and retrieve a reactive response:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.http.MediaType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.reactive.function.client.WebClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">reactor.core.publisher.Mono</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">WebClient</span> <span class="n">webClient</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UserService</span><span class="o">(</span><span class="nc">WebClient</span> <span class="n">webClient</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">webClient</span> <span class="o">=</span> <span class="n">webClient</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;&gt;</span> <span class="nf">fetchUsers</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">webClient</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
            <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bodyToFlux</span><span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collectList</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">bodyToFlux(User.class)</code> handles a stream of <code class="language-plaintext highlighter-rouge">User</code> objects.</li>
      <li><code class="language-plaintext highlighter-rouge">collectList()</code> converts the <code class="language-plaintext highlighter-rouge">Flux&lt;User&gt;</code> to a <code class="language-plaintext highlighter-rouge">Mono&lt;List&lt;User&gt;&gt;</code>.</li>
    </ul>
  </li>
  <li><strong>Subscribe to the Response</strong>: Since WebClient is reactive, you must subscribe to the <code class="language-plaintext highlighter-rouge">Mono</code> or <code class="language-plaintext highlighter-rouge">Flux</code> to trigger the request:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;&gt;</span> <span class="n">usersMono</span> <span class="o">=</span> <span class="n">fetchUsers</span><span class="o">();</span>
<span class="n">usersMono</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">users</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">users</span><span class="o">));</span>
</code></pre></div>    </div>
    <p>Alternatively, chain it in a reactive pipeline or block (not recommended in reactive contexts):</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">fetchUsers</span><span class="o">().</span><span class="na">block</span><span class="o">();</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="key-points-2"><strong>Key Points</strong></h4>
<ul>
  <li>WebClient is non-blocking and ideal for reactive applications built with Spring WebFlux.</li>
  <li>Use <code class="language-plaintext highlighter-rouge">Mono</code> for single-valued responses and <code class="language-plaintext highlighter-rouge">Flux</code> for multi-valued responses.</li>
  <li>Error handling can be done with operators like <code class="language-plaintext highlighter-rouge">onErrorResume()</code> or <code class="language-plaintext highlighter-rouge">retry()</code>.</li>
</ul>

<hr />

<h3 id="comparison-and-when-to-use-each"><strong>Comparison and When to Use Each</strong></h3>
<ul>
  <li><strong>FeignClient</strong>: Use for declarative, interface-based clients in microservices setups. It’s synchronous and simplifies service-to-service calls.</li>
  <li><strong>RestClient</strong>: Use for synchronous HTTP requests in traditional, blocking Spring applications. It’s a modern alternative to <code class="language-plaintext highlighter-rouge">RestTemplate</code>.</li>
  <li><strong>WebClient</strong>: Use for reactive, non-blocking HTTP requests in WebFlux-based applications or when handling high concurrency.</li>
</ul>

<hr />

<h3 id="example-calling-a-post-endpoint"><strong>Example: Calling a POST Endpoint</strong></h3>
<p>Suppose you need to create a user by calling <code class="language-plaintext highlighter-rouge">POST /users</code> with a <code class="language-plaintext highlighter-rouge">User</code> object.</p>

<h4 id="feignclient"><strong>FeignClient</strong></h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@FeignClient</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user-service"</span><span class="o">,</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"http://localhost:8080"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserClient</span> <span class="o">{</span>
    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
    <span class="nc">User</span> <span class="nf">createUser</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">UserClient</span> <span class="n">userClient</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">createUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userClient</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="restclient"><strong>RestClient</strong></h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RestClient</span> <span class="n">restClient</span> <span class="o">=</span> <span class="nc">RestClient</span><span class="o">.</span><span class="na">create</span><span class="o">();</span>

    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">createUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">restClient</span><span class="o">.</span><span class="na">post</span><span class="o">()</span>
            <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"http://localhost:8080/users"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
            <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">user</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="webclient"><strong>WebClient</strong></h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">WebClient</span> <span class="n">webClient</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UserService</span><span class="o">(</span><span class="nc">WebClient</span> <span class="n">webClient</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">webClient</span> <span class="o">=</span> <span class="nc">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">"http://localhost:8080"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">createUser</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">webClient</span><span class="o">.</span><span class="na">post</span><span class="o">()</span>
            <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
            <span class="o">.</span><span class="na">bodyValue</span><span class="o">(</span><span class="n">user</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h3 id="conclusion"><strong>Conclusion</strong></h3>
<ul>
  <li><strong>FeignClient</strong>: Define an interface, enable it, and use it like a local bean.</li>
  <li><strong>RestClient</strong>: Build requests fluently and get responses synchronously.</li>
  <li><strong>WebClient</strong>: Build requests fluently, retrieve reactive streams, and process them asynchronously.</li>
</ul>

<p>Choose based on your application’s architecture: FeignClient for microservices, RestClient for blocking apps, and WebClient for reactive apps. Each follows a straightforward setup and usage pattern as shown above.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
