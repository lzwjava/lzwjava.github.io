<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Jackson Default Typing Explained</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Jackson Default Typing Explained | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Jackson Default Typing Explained" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-04-15-jackson-default-typing-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-04-15-jackson-default-typing-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Jackson Default Typing Explained" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Jackson Default Typing Explained","url":"https://lzwjava.github.io/notes/2025-04-15-jackson-default-typing-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=0e43ffc8e3f9ce168192fc3236853cf8df63eca5">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=0e43ffc8e3f9ce168192fc3236853cf8df63eca5" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Jackson Default Typing Explained | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-04-15-jackson-default-typing-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-04-15-jackson-default-typing-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/jackson-default-typing-en" selected>English</option>
        <option value="/jackson-default-typing-zh" >中文</option>
        <option value="/jackson-default-typing-ja" >日本語</option>
        <option value="/jackson-default-typing-es" >Español</option>
        <option value="/jackson-default-typing-hi" >हिंदी</option>
        <option value="/jackson-default-typing-fr" >Français</option>
        <option value="/jackson-default-typing-de" >Deutsch</option>
        <option value="/jackson-default-typing-ar" >العربية</option>
        <option value="/jackson-default-typing-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="what-is-default-typing-in-jacksons-objectmapper">What is Default Typing in Jackson’s ObjectMapper?</h3>

<p>Jackson’s <code class="language-plaintext highlighter-rouge">ObjectMapper</code> is a core class in the Jackson JSON library for Java, responsible for serializing Java objects to JSON and deserializing JSON back to objects. “Default typing” is a feature that enhances the handling of polymorphic types (e.g., when a field can hold different subclasses). It works by embedding type information in the JSON output during serialization, which the mapper uses during deserialization to instantiate the correct concrete class.</p>

<p>Without default typing, Jackson relies on the declared type (e.g., an abstract base class or interface), and you might need custom configuration like <code class="language-plaintext highlighter-rouge">@JsonTypeInfo</code> annotations to specify subtypes. Enabling default typing provides a global or semi-global fallback for polymorphism, particularly useful for collections or maps with mixed types.</p>

<h3 id="how-does-it-work">How Does It Work?</h3>

<p>Enabling default typing modifies the serialization process:</p>
<ol>
  <li>
    <p><strong>Serialization</strong>: When serializing an object graph, Jackson adds a special <code class="language-plaintext highlighter-rouge">@class</code> field or similar metadata to the JSON to indicate the runtime type of polymorphic objects. This happens only for types where the declared type doesn’t fully specify the concrete class (e.g., <code class="language-plaintext highlighter-rouge">List</code> containing <code class="language-plaintext highlighter-rouge">String</code> and <code class="language-plaintext highlighter-rouge">Integer</code> objects, or abstract class fields).</p>
  </li>
  <li>
    <p><strong>Deserialization</strong>: During deserialization, the mapper uses this embedded type info to look up and instantiate the exact class. It leverages Jackson’s <code class="language-plaintext highlighter-rouge">TypeFactory</code> to resolve types dynamically.</p>
  </li>
</ol>

<p>To enable it, you call one of these methods on an <code class="language-plaintext highlighter-rouge">ObjectMapper</code> instance:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">mapper.enableDefaultTyping()</code>: A deprecated method that enables constant-time polymorphic typing inclusion (susceptible to security issues).</li>
  <li><code class="language-plaintext highlighter-rouge">mapper.activateDefaultTyping(ObjectMapper.DefaultTyping policy)</code>: A safer, recommended alternative introduced in Jackson 2.10. It allows specifying a <code class="language-plaintext highlighter-rouge">DefaultTyping</code> enum value, such as:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">JAVA_LANG_OBJECT</code>: Includes typing for all <code class="language-plaintext highlighter-rouge">Object</code> references.</li>
      <li><code class="language-plaintext highlighter-rouge">NON_CONCRETE_AND_ARRAYS</code>: Includes typing for abstract/non-concrete types and arrays.</li>
      <li><code class="language-plaintext highlighter-rouge">NON_FINAL</code>: Includes typing for non-final classes.</li>
    </ul>
  </li>
</ul>

<p>Example usage:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">com.fasterxml.jackson.databind.ObjectMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">fasterxml</span><span class="o">.</span><span class="na">jackson</span><span class="o">.</span><span class="na">databind</span><span class="o">.</span><span class="na">ObjectMapper</span><span class="o">.</span><span class="na">DefaultTyping</span><span class="o">;</span>

<span class="nc">ObjectMapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectMapper</span><span class="o">();</span>
<span class="n">mapper</span><span class="o">.</span><span class="na">activateDefaultTyping</span><span class="o">(</span><span class="nc">DefaultTyping</span><span class="o">.</span><span class="na">NON_CONCRETE_AND_ARRAYS</span><span class="o">);</span>
</code></pre></div></div>

<p>Without enabling, if you serialize a <code class="language-plaintext highlighter-rouge">List&lt;Object&gt;</code> with mixed types, the JSON might omit type details, leading to deserialization errors. With it enabled, the JSON includes type hints, e.g., <code class="language-plaintext highlighter-rouge">[{"@class": "java.lang.String", "value": "hello"}, {"@class": "java.lang.Integer", "value": 42}]</code>.</p>

<h3 id="security-considerations-and-limitations">Security Considerations and Limitations</h3>

<ul>
  <li><strong>Vulnerabilities</strong>: Blindly enabling default typing (especially the old <code class="language-plaintext highlighter-rouge">enableDefaultTyping()</code>) can expose systems to attacks like data extraction, as it allows deserializing arbitrary classes via crafted JSON. Jackson limits this by default in newer versions, only allowing common types unless customized.</li>
  <li><strong>Use Case Fit</strong>: It’s best for trusted environments with polymorphic data (e.g., internal APIs). For public APIs, prefer explicit type annotations or custom serializers/deserializers for better security.</li>
  <li><strong>Performance</strong>: Adds minor overhead due to embedded type info, increasing JSON size.</li>
</ul>

<p>If this relates to a different “object mapper” (e.g., Elasticsearch’s or another library), provide more context for a tailored explanation. For full details, refer to Jackson’s official documentation.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    
      <p class="model">x-ai/grok-code-fast-1</p>
    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
