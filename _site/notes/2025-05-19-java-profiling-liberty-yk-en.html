<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Profiling Liberty With YourKit Java Profiler</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Profiling Liberty With YourKit Java Profiler | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Profiling Liberty With YourKit Java Profiler" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-05-19-java-profiling-liberty-yk-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-05-19-java-profiling-liberty-yk-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Profiling Liberty With YourKit Java Profiler" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Profiling Liberty With YourKit Java Profiler","url":"https://lzwjava.github.io/notes/2025-05-19-java-profiling-liberty-yk-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=07d41f1bcb63e39e906eb9f806e7273f22d79594">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=07d41f1bcb63e39e906eb9f806e7273f22d79594" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Profiling Liberty With YourKit Java Profiler | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-05-19-java-profiling-liberty-yk-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-05-19-java-profiling-liberty-yk-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/java-profiling-liberty-yk-en" selected>English</option>
        <option value="/java-profiling-liberty-yk-zh" >中文</option>
        <option value="/java-profiling-liberty-yk-ja" >日本語</option>
        <option value="/java-profiling-liberty-yk-es" >Español</option>
        <option value="/java-profiling-liberty-yk-hi" >हिंदी</option>
        <option value="/java-profiling-liberty-yk-fr" >Français</option>
        <option value="/java-profiling-liberty-yk-de" >Deutsch</option>
        <option value="/java-profiling-liberty-yk-ar" >العربية</option>
        <option value="/java-profiling-liberty-yk-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>WebSphere Liberty can be integrated with YourKit Java Profiler quite smoothly, since Liberty is just another JVM-based runtime. Here’s how it typically works:</p>

<hr />

<h3 id="1-how-the-integration-works">1. How the Integration Works</h3>

<p>YourKit Java Profiler doesn’t need Liberty-specific plugins; it works by attaching to the JVM process that Liberty runs in. Once attached, it intercepts method calls, memory allocations, thread activity, and other runtime events.
Liberty runs on the OpenJ9 (or HotSpot) JVM, so you can enable profiling by adding the YourKit agent to Liberty’s startup.</p>

<hr />

<h3 id="2-attaching-the-yourkit-agent">2. Attaching the YourKit Agent</h3>

<p>There are two main ways:</p>

<ul>
  <li>
    <p><strong>Startup attachment (preferred for servers)</strong>
Add the YourKit agent options to Liberty’s <code class="language-plaintext highlighter-rouge">jvm.options</code> file (in <code class="language-plaintext highlighter-rouge">&lt;wlp_home&gt;/usr/servers/&lt;server_name&gt;/</code>).
Example:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-agentpath:/path/to/yourkit/bin/linux-x86-64/libyjpagent.so=port=10001,listen=all
</code></pre></div>    </div>

    <p>This loads the profiler agent as soon as the server starts.</p>
  </li>
  <li>
    <p><strong>On-demand (dynamic) attach</strong>
If Liberty is already running, you can attach YourKit via the GUI. It scans for running JVMs and lets you connect without restarting. Useful for production debugging, but requires permissions (same user / JDK tools.jar).</p>
  </li>
</ul>

<hr />

<h3 id="3-profiling-in-liberty-context">3. Profiling in Liberty Context</h3>

<p>When running on Liberty, you may want to:</p>

<ul>
  <li><strong>Filter by application packages</strong> so you don’t drown in Liberty’s internal code.</li>
  <li><strong>Use call tree / hotspots view</strong> to analyze slow servlets, JAX-RS endpoints, or CDI beans.</li>
  <li><strong>Monitor JDBC and thread pools</strong> since Liberty applications often rely on container-managed resources. YourKit can trace JDBC calls and measure wait times.</li>
  <li><strong>Handle multiple apps</strong> – if Liberty hosts several apps, use YourKit’s thread and class filters to narrow down profiling to the one you care about.</li>
</ul>

<hr />

<h3 id="4-performance-considerations">4. Performance Considerations</h3>

<ul>
  <li>Profiling always adds overhead. For development it’s fine to use full CPU/memory profiling; in production use <em>sampling</em> mode instead of instrumentation.</li>
  <li>Liberty’s modular classloading can sometimes cause duplicate class names; YourKit generally handles this but be mindful when filtering.</li>
  <li>If you use IBM JDK with Liberty, make sure you download the YourKit agent built for IBM J9/OpenJ9, not just HotSpot.</li>
</ul>

<hr />

<h3 id="5-typical-workflow">5. Typical Workflow</h3>

<ol>
  <li>Install YourKit on your dev machine.</li>
  <li>Modify Liberty’s <code class="language-plaintext highlighter-rouge">jvm.options</code> with the agent path.</li>
  <li>Start Liberty.</li>
  <li>Connect from the YourKit GUI to the Liberty JVM (via socket or attach).</li>
  <li>Profile your endpoints, memory usage, or thread locks.</li>
  <li>Save snapshots for offline analysis.</li>
</ol>

<hr />

<p>👉 Do you want me to give you a <strong>step-by-step config example</strong> for Liberty on <strong>OpenJ9</strong> (the default Liberty JVM) with YourKit, including sample <code class="language-plaintext highlighter-rouge">jvm.options</code> settings for CPU vs memory profiling?</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
