<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Cargo Run Redundancy</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cargo Run Redundancy | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Cargo Run Redundancy" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-07-31-makefile-cargo-run-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-07-31-makefile-cargo-run-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cargo Run Redundancy" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Cargo Run Redundancy","url":"https://lzwjava.github.io/notes/2025-07-31-makefile-cargo-run-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=a621c9d4a12f9021a54fc66ee6b839717353f88d">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=a621c9d4a12f9021a54fc66ee6b839717353f88d" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Cargo Run Redundancy | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-07-31-makefile-cargo-run-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-07-31-makefile-cargo-run-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/makefile-cargo-run-en" selected>English</option>
        <option value="/makefile-cargo-run-zh" >中文</option>
        <option value="/makefile-cargo-run-ja" >日本語</option>
        <option value="/makefile-cargo-run-es" >Español</option>
        <option value="/makefile-cargo-run-hi" >हिंदी</option>
        <option value="/makefile-cargo-run-fr" >Français</option>
        <option value="/makefile-cargo-run-de" >Deutsch</option>
        <option value="/makefile-cargo-run-ar" >العربية</option>
        <option value="/makefile-cargo-run-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>You’re absolutely correct! In your <code class="language-plaintext highlighter-rouge">Makefile</code> example:</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">run</span><span class="o">:</span>
	cargo build
	cargo run
</code></pre></div></div>

<p>Including <code class="language-plaintext highlighter-rouge">cargo build</code> before <code class="language-plaintext highlighter-rouge">cargo run</code> is redundant because <code class="language-plaintext highlighter-rouge">cargo run</code> already includes the build step. When you execute <code class="language-plaintext highlighter-rouge">cargo run</code>, Cargo automatically checks if the project needs to be rebuilt (e.g., if source files have changed) and, if necessary, compiles the project before running the resulting binary. This makes the explicit <code class="language-plaintext highlighter-rouge">cargo build</code> step unnecessary in this context.</p>

<h3 id="clarification">Clarification</h3>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">cargo run</code></strong>:
    <ul>
      <li>Combines <code class="language-plaintext highlighter-rouge">cargo build</code> (compiles the project into <code class="language-plaintext highlighter-rouge">target/debug/&lt;project_name&gt;</code>) and then runs the binary.</li>
      <li>Only rebuilds if there are changes in the source code or dependencies.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">cargo build</code></strong>:
    <ul>
      <li>Only compiles the project without running the binary.</li>
      <li>Useful if you want to verify compilation without executing the program.</li>
    </ul>
  </li>
</ul>

<h3 id="fixing-the-makefile">Fixing the <code class="language-plaintext highlighter-rouge">Makefile</code></h3>
<p>To streamline your <code class="language-plaintext highlighter-rouge">Makefile</code>, you can remove the redundant <code class="language-plaintext highlighter-rouge">cargo build</code>:</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">run</span><span class="o">:</span>
	cargo run
</code></pre></div></div>

<p>This achieves the same result: the project is built (if needed) and then executed.</p>

<h3 id="when-to-use-cargo-build-separately">When to Use <code class="language-plaintext highlighter-rouge">cargo build</code> Separately</h3>
<p>You might want to keep <code class="language-plaintext highlighter-rouge">cargo build</code> as a separate target in the <code class="language-plaintext highlighter-rouge">Makefile</code> for cases where you only want to compile without running, such as:</p>
<ul>
  <li>Checking for compilation errors.</li>
  <li>Preparing binaries for deployment or testing without execution.</li>
</ul>

<p>For example:</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">build</span><span class="o">:</span>
	cargo build

<span class="nl">run</span><span class="o">:</span>
	cargo run

<span class="nl">clean</span><span class="o">:</span>
	cargo clean
</code></pre></div></div>

<ul>
  <li>Run <code class="language-plaintext highlighter-rouge">make build</code> to compile only.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">make run</code> to build (if needed) and run.</li>
  <li>Run <code class="language-plaintext highlighter-rouge">make clean</code> to clear build artifacts.</li>
</ul>

<h3 id="addressing-your-previous-context">Addressing Your Previous Context</h3>
<p>Since you’re working with a Rust project where <code class="language-plaintext highlighter-rouge">main.rs</code> calls <code class="language-plaintext highlighter-rouge">run_simple</code> from <code class="language-plaintext highlighter-rouge">simple.rs</code>, ensure the privacy error (<code class="language-plaintext highlighter-rouge">E0603</code>) is resolved by making <code class="language-plaintext highlighter-rouge">run_simple</code> public in <code class="language-plaintext highlighter-rouge">src/simple.rs</code>:</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="nf">run_simple</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Hello from run_simple!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And in <code class="language-plaintext highlighter-rouge">src/main.rs</code>:</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mod</span> <span class="n">simple</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">simple</span><span class="p">::</span><span class="nf">run_simple</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Also, update <code class="language-plaintext highlighter-rouge">Cargo.toml</code> to remove the <code class="language-plaintext highlighter-rouge">edition2024</code> warning, as discussed earlier:</p>

<div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[package]</span>
<span class="py">name</span> <span class="p">=</span> <span class="s">"example"</span>
<span class="py">version</span> <span class="p">=</span> <span class="s">"0.1.0"</span>
<span class="py">edition</span> <span class="p">=</span> <span class="s">"2024"</span>
</code></pre></div></div>

<h3 id="testing-the-setup">Testing the Setup</h3>
<ol>
  <li>Update the <code class="language-plaintext highlighter-rouge">Makefile</code> as shown above.</li>
  <li>Run:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make run
</code></pre></div>    </div>
    <p>This will execute <code class="language-plaintext highlighter-rouge">cargo run</code>, which builds (if needed) and runs the program, printing <code class="language-plaintext highlighter-rouge">Hello from run_simple!</code> (or whatever output <code class="language-plaintext highlighter-rouge">run_simple</code> produces).</p>
  </li>
  <li>If you want to verify compilation separately:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make build
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="additional-notes">Additional Notes</h3>
<ul>
  <li>
    <p>If you’re using <code class="language-plaintext highlighter-rouge">cargo run --bin simple</code> (for a separate binary in <code class="language-plaintext highlighter-rouge">simple.rs</code>), ensure <code class="language-plaintext highlighter-rouge">Cargo.toml</code> includes:</p>

    <div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[[bin]]</span>
<span class="py">name</span> <span class="p">=</span> <span class="s">"simple"</span>
<span class="py">path</span> <span class="p">=</span> <span class="s">"src/simple.rs"</span>
</code></pre></div>    </div>

    <p>And <code class="language-plaintext highlighter-rouge">simple.rs</code> has a <code class="language-plaintext highlighter-rouge">main</code> function:</p>

    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="nf">run_simple</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Hello from run_simple!"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">run_simple</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>If you encounter issues, share the output of <code class="language-plaintext highlighter-rouge">make run</code> or <code class="language-plaintext highlighter-rouge">cargo run</code> for further debugging.</p>
  </li>
</ul>

<h3 id="final-makefile-recommendation">Final <code class="language-plaintext highlighter-rouge">Makefile</code> Recommendation</h3>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">build</span><span class="o">:</span>
	cargo build

<span class="nl">run</span><span class="o">:</span>
	cargo run

<span class="nl">clean</span><span class="o">:</span>
	cargo clean
</code></pre></div></div>

<p>This setup avoids redundancy, supports both building and running, and keeps your workflow clean. Let me know if you have more questions or need help with specific errors!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
