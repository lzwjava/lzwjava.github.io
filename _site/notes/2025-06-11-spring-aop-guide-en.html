<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Guide to Spring AOP</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Guide to Spring AOP | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Guide to Spring AOP" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-06-11-spring-aop-guide-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-06-11-spring-aop-guide-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Guide to Spring AOP" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Guide to Spring AOP","url":"https://lzwjava.github.io/notes/2025-06-11-spring-aop-guide-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=b2489ffdfecc26e5a617591aabda1610ef3dd3c2">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=b2489ffdfecc26e5a617591aabda1610ef3dd3c2" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Guide to Spring AOP | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-06-11-spring-aop-guide-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-06-11-spring-aop-guide-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/spring-aop-guide-en" selected>English</option>
        <option value="/spring-aop-guide-zh" >中文</option>
        <option value="/spring-aop-guide-ja" >日本語</option>
        <option value="/spring-aop-guide-es" >Español</option>
        <option value="/spring-aop-guide-hi" >हिंदी</option>
        <option value="/spring-aop-guide-fr" >Français</option>
        <option value="/spring-aop-guide-de" >Deutsch</option>
        <option value="/spring-aop-guide-ar" >العربية</option>
        <option value="/spring-aop-guide-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h2 id="1-introduction-to-spring-aop">1. Introduction to Spring AOP</h2>

<p>Spring AOP (Aspect-Oriented Programming) is a key component of the Spring Framework that provides a way to implement cross-cutting concerns (like logging, security, transaction management) separately from the business logic.</p>

<h3 id="key-concepts">Key Concepts:</h3>
<ul>
  <li><strong>Cross-cutting concerns</strong>: Functionality that spans multiple layers (logging, security, etc.)</li>
  <li><strong>Aspect</strong>: A modularization of a concern that cuts across multiple classes</li>
  <li><strong>Join point</strong>: A point during program execution (method execution, exception handling, etc.)</li>
  <li><strong>Advice</strong>: Action taken by an aspect at a particular join point</li>
  <li><strong>Pointcut</strong>: Predicate that matches join points</li>
  <li><strong>Weaving</strong>: Linking aspects with other application types to create an advised object</li>
</ul>

<h2 id="2-spring-aop-vs-aspectj">2. Spring AOP vs AspectJ</h2>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Spring AOP</th>
      <th>AspectJ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Implementation</td>
      <td>Runtime proxying</td>
      <td>Compile-time/load-time weaving</td>
    </tr>
    <tr>
      <td>Performance</td>
      <td>Slower</td>
      <td>Faster</td>
    </tr>
    <tr>
      <td>Join points supported</td>
      <td>Method execution only</td>
      <td>All (method, constructor, field access, etc.)</td>
    </tr>
    <tr>
      <td>Complexity</td>
      <td>Simpler</td>
      <td>More complex</td>
    </tr>
    <tr>
      <td>Dependency</td>
      <td>No extra dependencies</td>
      <td>Requires AspectJ compiler/weaver</td>
    </tr>
  </tbody>
</table>

<h2 id="3-core-aop-components">3. Core AOP Components</h2>

<h3 id="31-aspects">3.1 Aspects</h3>
<p>A class annotated with <code class="language-plaintext highlighter-rouge">@Aspect</code> containing advices and pointcuts.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Aspect</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoggingAspect</span> <span class="o">{</span>
    <span class="c1">// advices and pointcuts will go here</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="32-advice-types">3.2 Advice Types</h3>

<ol>
  <li><strong>Before</strong>: Executes before a join point
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeAdvice</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Before method execution"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>AfterReturning</strong>: Executes after a join point completes normally
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">,</span> <span class="n">returning</span> <span class="o">=</span> <span class="s">"result"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterReturningAdvice</span><span class="o">(</span><span class="nc">Object</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Method returned: "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>AfterThrowing</strong>: Executes if a method exits by throwing an exception
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@AfterThrowing</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">,</span> <span class="n">throwing</span> <span class="o">=</span> <span class="s">"ex"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterThrowingAdvice</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Exception thrown: "</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>After (Finally)</strong>: Executes after a join point regardless of outcome
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@After</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterAdvice</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"After method execution (finally)"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Around</strong>: Wraps a join point, most powerful advice
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Around</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">aroundAdvice</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Before proceeding"</span><span class="o">);</span>
    <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"After proceeding"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="33-pointcut-expressions">3.3 Pointcut Expressions</h3>

<p>Pointcuts define where advice should be applied using expressions:</p>

<ul>
  <li><strong>Execution</strong>: Matches method execution
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(public * com.example.service.*.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">serviceMethods</span><span class="o">()</span> <span class="o">{}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Within</strong>: Matches all join points within certain types
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"within(com.example.service..*)"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">inServiceLayer</span><span class="o">()</span> <span class="o">{}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>this</strong>: Matches beans that are instances of given type</li>
  <li><strong>target</strong>: Matches beans that are assignable to given type</li>
  <li><strong>args</strong>: Matches methods with specific argument types</li>
  <li><strong>@annotation</strong>: Matches methods with specific annotations</li>
</ul>

<h3 id="34-combining-pointcuts">3.4 Combining Pointcuts</h3>

<p>Pointcuts can be combined using logical operators:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..)) &amp;&amp; !execution(* com.example.service.UserService.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">serviceMethodsExceptUserService</span><span class="o">()</span> <span class="o">{}</span>
</code></pre></div></div>

<h2 id="4-implementation-steps">4. Implementation Steps</h2>

<h3 id="41-setup">4.1 Setup</h3>

<ol>
  <li>Add Spring AOP dependency (if not using Spring Boot):
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-aop<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.aspectj<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>aspectjweaver<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${aspectj.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>For Spring Boot, just include <code class="language-plaintext highlighter-rouge">spring-boot-starter-aop</code>:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-aop<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>Enable AOP in your configuration:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="nd">@EnableAspectJAutoProxy</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="42-creating-aspects">4.2 Creating Aspects</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Aspect</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoggingAspect</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
    
    <span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logBefore</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Entering: {}.{}() with arguments = {}"</span><span class="o">,</span> 
            <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getDeclaringTypeName</span><span class="o">(),</span>
            <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span>
            <span class="nc">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">joinPoint</span><span class="o">.</span><span class="na">getArgs</span><span class="o">()));</span>
    <span class="o">}</span>
    
    <span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">,</span> 
                   <span class="n">returning</span> <span class="o">=</span> <span class="s">"result"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logAfterReturning</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Exiting: {}.{}() with result = {}"</span><span class="o">,</span> 
            <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getDeclaringTypeName</span><span class="o">(),</span>
            <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span>
            <span class="n">result</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="nd">@Around</span><span class="o">(</span><span class="s">"@annotation(com.example.annotations.LogExecutionTime)"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">logExecutionTime</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
        <span class="nc">Object</span> <span class="n">proceed</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
        <span class="kt">long</span> <span class="n">executionTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">;</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{} executed in {} ms"</span><span class="o">,</span> 
            <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">(),</span> <span class="n">executionTime</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">proceed</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="43-custom-annotations">4.3 Custom Annotations</h3>

<p>Create custom annotations to mark methods for specific AOP behavior:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">LogExecutionTime</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Then use it on methods:audio</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    
    <span class="nd">@LogExecutionTime</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">getUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// implementation</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="5-advanced-topics">5. Advanced Topics</h2>
<p>audio</p>
<h3 id="51-aspect-ordering">5.1 Aspect Ordering</h3>

<p>Control the order of aspect execution with <code class="language-plaintext highlighter-rouge">@Order</code>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Aspect</span>
<span class="nd">@Component</span>
<span class="nd">@Order</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoggingAspect</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>

<span class="nd">@Aspect</span>
<span class="nd">@Component</span>
<span class="nd">@Order</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ValidationAspect</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="52-accessing-method-information">5.2 Accessing Method Information</h3>

<p>In advice methods, you can access:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">JoinPoint</code> (for Before, After, AfterReturning, AfterThrowing)</li>
  <li><code class="language-plaintext highlighter-rouge">ProceedingJoinPoint</code> (for Around)</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeAdvice</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">methodName</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>
    <span class="nc">String</span> <span class="n">className</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getTarget</span><span class="o">().</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">getArgs</span><span class="o">();</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="53-exception-handling">5.3 Exception Handling</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@AfterThrowing</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">,</span> 
               <span class="n">throwing</span> <span class="o">=</span> <span class="s">"ex"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleException</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Log exception, send alert, etc.</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="54-proxying-mechanisms">5.4 Proxying Mechanisms</h3>

<p>Spring AOP uses two types of proxies:</p>
<ul>
  <li><strong>JDK Dynamic Proxy</strong>: Default for interfaces</li>
  <li><strong>CGLIB Proxy</strong>: Used when no interface is available (can be forced with <code class="language-plaintext highlighter-rouge">proxyTargetClass=true</code>)</li>
</ul>

<h2 id="6-best-practices">6. Best Practices</h2>

<ol>
  <li><strong>Keep aspects focused</strong>: Each aspect should handle one specific cross-cutting concern</li>
  <li><strong>Use meaningful pointcut names</strong>: Makes code more readable</li>
  <li><strong>Avoid expensive operations in aspects</strong>: They run for every matched join point</li>
  <li><strong>Be cautious with Around advice</strong>: Always call <code class="language-plaintext highlighter-rouge">proceed()</code> unless intentionally preventing execution</li>
  <li><strong>Test aspects thoroughly</strong>: They affect multiple parts of your application</li>
  <li><strong>Document aspects</strong>: Especially if they modify behavior significantly</li>
  <li><strong>Consider performance</strong>: Complex pointcuts or many aspects can impact performance</li>
</ol>

<h2 id="7-common-use-cases">7. Common Use Cases</h2>

<ol>
  <li><strong>Logging</strong>: Method entry/exit, parameters, return values</li>
  <li><strong>Performance Monitoring</strong>: Measure execution time</li>
  <li><strong>Transaction Management</strong>: (Though typically handled by Spring’s <code class="language-plaintext highlighter-rouge">@Transactional</code>)</li>
  <li><strong>Security</strong>: Authorization checks</li>
  <li><strong>Validation</strong>: Parameter validation</li>
  <li><strong>Error Handling</strong>: Consistent exception handling</li>
  <li><strong>Caching</strong>: Method result caching</li>
  <li><strong>Auditing</strong>: Track who called what and when</li>
</ol>

<h2 id="8-limitations">8. Limitations</h2>

<ol>
  <li>Only works with Spring-managed beans</li>
  <li>Only method execution join points are supported</li>
  <li>Cannot advise final classes or methods</li>
  <li>Self-invocation (method within a class calling another method of the same class) bypasses proxy</li>
  <li>Limited pointcut expressions compared to AspectJ</li>
</ol>

<h2 id="9-troubleshooting">9. Troubleshooting</h2>

<p><strong>Issue</strong>: Advice not executing</p>
<ul>
  <li>Check if the bean is Spring-managed</li>
  <li>Verify pointcut expression matches intended methods</li>
  <li>Ensure <code class="language-plaintext highlighter-rouge">@EnableAspectJAutoProxy</code> is present</li>
</ul>

<p><strong>Issue</strong>: Around advice not proceeding</p>
<ul>
  <li>Make sure to call <code class="language-plaintext highlighter-rouge">proceed()</code> on <code class="language-plaintext highlighter-rouge">ProceedingJoinPoint</code>
audio
<strong>Issue</strong>: Incorrect proxy type</li>
  <li>Use <code class="language-plaintext highlighter-rouge">@EnableAspectJAutoProxy(proxyTargetClass=true)</code> to force CGLIB</li>
</ul>

<h2 id="10-conclusion">10. Conclusion</h2>

<p>Spring AOP provides a powerful yet simple way to implement cross-cutting concerns in your application. While it has some limitations compared to full AspectJ, it integrates seamlessly with Spring and covers most common use cases. By following the patterns and best practices outlined in this guide, you can effectively modularize cross-cutting concerns and keep your business logic clean and focused.</p>

<hr />

<p>Even though Spring AOP doesn’t use AspectJ’s weaving capabilities (it uses proxy-based AOP instead), you still need the <code class="language-plaintext highlighter-rouge">aspectjweaver</code> dependency for several important reasons:</p>

<h3 id="1-aspectj-annotation-support">1. <strong>AspectJ Annotation Support</strong></h3>
<p>Spring AOP uses AspectJ’s <strong>annotations</strong> (like <code class="language-plaintext highlighter-rouge">@Aspect</code>, <code class="language-plaintext highlighter-rouge">@Pointcut</code>, <code class="language-plaintext highlighter-rouge">@Before</code>, <code class="language-plaintext highlighter-rouge">@After</code>, etc.) to define aspects and advices. These annotations come from the <code class="language-plaintext highlighter-rouge">aspectjweaver</code> library.</p>

<ul>
  <li>Without it, you would get compilation errors when using <code class="language-plaintext highlighter-rouge">@Aspect</code> or other AOP annotations.</li>
</ul>

<h3 id="2-pointcut-expression-language">2. <strong>Pointcut Expression Language</strong></h3>
<p>Spring AOP borrows AspectJ’s <strong>pointcut expression language</strong> for defining where advice should be applied (e.g., <code class="language-plaintext highlighter-rouge">execution(* com.example.service.*.*(..))</code>).</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">aspectjweaver</code> provides the parser and matching logic for these expressions.</li>
</ul>

<h3 id="3-support-for-additional-join-points-limited">3. <strong>Support for Additional Join Points (Limited)</strong></h3>
<p>While Spring AOP only supports <strong>method execution</strong> join points (unlike AspectJ, which supports constructors, field access, etc.), it still relies on AspectJ’s underlying pointcut matching mechanism.</p>

<h3 id="4-load-time-weaving-optional">4. <strong>Load-Time Weaving (Optional)</strong></h3>
<p>If you decide to use <strong>Load-Time Weaving (LTW)</strong> with Spring AOP (which is rare but possible), <code class="language-plaintext highlighter-rouge">aspectjweaver</code> is required. LTW allows weaving aspects at class-loading time instead of using proxies.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@EnableLoadTimeWeaving</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AppConfig</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</code></pre></div></div>

<h3 id="5-compatibility-with-enableaspectjautoproxy">5. <strong>Compatibility with @EnableAspectJAutoProxy</strong></h3>
<p>When you use <code class="language-plaintext highlighter-rouge">@EnableAspectJAutoProxy</code>, Spring internally uses AspectJ’s infrastructure to process the AOP annotations, even though it doesn’t do full AspectJ weaving.</p>

<hr />

<h3 id="do-you-always-need-it"><strong>Do You Always Need It?</strong></h3>
<ul>
  <li><strong>If using Spring Boot (<code class="language-plaintext highlighter-rouge">spring-boot-starter-aop</code>)</strong>: No, because it transitively includes <code class="language-plaintext highlighter-rouge">aspectjweaver</code>.</li>
  <li><strong>If using plain Spring AOP</strong>: Yes, you must include it explicitly.</li>
</ul>

<h3 id="alternatives"><strong>Alternatives?</strong></h3>
<ul>
  <li>If you were using <strong>full AspectJ</strong> (compile-time or load-time weaving), you’d need <code class="language-plaintext highlighter-rouge">aspectjrt</code> and <code class="language-plaintext highlighter-rouge">aspectjtools</code> as well.</li>
  <li>But for <strong>Spring AOP</strong>, <code class="language-plaintext highlighter-rouge">aspectjweaver</code> alone is sufficient.</li>
</ul>

<h3 id="conclusion"><strong>Conclusion</strong></h3>
<p>Spring AOP is <strong>proxy-based</strong>, but it <strong>reuses AspectJ’s annotations and pointcut syntax</strong>, which is why <code class="language-plaintext highlighter-rouge">aspectjweaver</code> is required. It bridges the gap between Spring’s proxy approach and AspectJ’s more powerful AOP model.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
