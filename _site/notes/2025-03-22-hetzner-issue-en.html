<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Hetzner API Issue</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Hetzner API Issue | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Hetzner API Issue" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-22-hetzner-issue-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-22-hetzner-issue-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hetzner API Issue" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Hetzner API Issue","url":"https://lzwjava.github.io/notes/2025-03-22-hetzner-issue-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=0e43ffc8e3f9ce168192fc3236853cf8df63eca5">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=0e43ffc8e3f9ce168192fc3236853cf8df63eca5" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Hetzner API Issue | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-22-hetzner-issue-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-22-hetzner-issue-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/hetzner-issue-en" selected>English</option>
        <option value="/hetzner-issue-zh" >中文</option>
        <option value="/hetzner-issue-ja" >日本語</option>
        <option value="/hetzner-issue-es" >Español</option>
        <option value="/hetzner-issue-hi" >हिंदी</option>
        <option value="/hetzner-issue-fr" >Français</option>
        <option value="/hetzner-issue-de" >Deutsch</option>
        <option value="/hetzner-issue-ar" >العربية</option>
        <option value="/hetzner-issue-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Let’s analyze the error you’re encountering and explain what’s happening with your code:</p>

<h3 id="error">Error:</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error creating snapshot for server sg5: cannot perform operation because server is locked (locked, f21b9dc9d1535310)
</code></pre></div></div>

<p>This error comes from the Hetzner Cloud API (via the <code class="language-plaintext highlighter-rouge">hcloud</code> Python SDK) and indicates that the operation to create a snapshot for the server named <code class="language-plaintext highlighter-rouge">sg5</code> failed because the server is <strong>locked</strong>. A locked server means that another operation (e.g., a previous snapshot, reboot, or resize) is currently in progress, and the server is temporarily restricted from accepting new operations until that process completes.</p>

<h3 id="code-breakdown">Code Breakdown:</h3>
<p>Here’s your script with explanations and where the error originates:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">hcloud</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Get the API token from the environment variable
</span><span class="n">api_token</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'HERTZNER_API_KEY'</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">api_token</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Error: HERTZNER_API_KEY environment variable not set."</span><span class="p">)</span>
    <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Create a client instance
</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">api_token</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">create_snapshot</span><span class="p">(</span><span class="n">server</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">servers</span><span class="p">.</span><span class="n">create_image</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">-snapshot"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">"snapshot"</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Snapshot created for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> with ID: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error creating snapshot for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># List all servers
</span><span class="n">servers</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">servers</span><span class="p">.</span><span class="n">get_all</span><span class="p">()</span>

<span class="c1"># Print server details and create snapshots
</span><span class="k">for</span> <span class="n">server</span> <span class="ow">in</span> <span class="n">servers</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server ID: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server Name: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server Status: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">status</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server IPv4: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">public_net</span><span class="p">.</span><span class="n">ipv4</span><span class="p">.</span><span class="n">ip</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server IPv6: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">public_net</span><span class="p">.</span><span class="n">ipv6</span><span class="p">.</span><span class="n">ip</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server Type: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">server_type</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Server Location: </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">datacenter</span><span class="p">.</span><span class="n">location</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"----------------------------------"</span><span class="p">)</span>
    <span class="n">create_snapshot</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
</code></pre></div></div>

<ol>
  <li><strong>API Token Setup</strong>:
    <ul>
      <li>The script retrieves the Hetzner API key from an environment variable (<code class="language-plaintext highlighter-rouge">HERTZNER_API_KEY</code>). If it’s not set, it exits with an error.</li>
    </ul>
  </li>
  <li><strong>Client Initialization</strong>:
    <ul>
      <li>A <code class="language-plaintext highlighter-rouge">Client</code> instance is created using the API token to interact with the Hetzner Cloud API.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">create_snapshot</code> Function</strong>:
    <ul>
      <li>This function attempts to create a snapshot of a given server using <code class="language-plaintext highlighter-rouge">client.servers.create_image()</code>.</li>
      <li>Parameters:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">server</code>: The server object to snapshot.</li>
          <li><code class="language-plaintext highlighter-rouge">description</code>: A name for the snapshot (e.g., <code class="language-plaintext highlighter-rouge">sg5-snapshot</code>).</li>
          <li><code class="language-plaintext highlighter-rouge">type="snapshot"</code>: Specifies that the image type is a snapshot (as opposed to a backup or ISO).</li>
        </ul>
      </li>
      <li>If successful, it prints the snapshot ID; otherwise, it catches and prints any exceptions (like the one you’re seeing).</li>
    </ul>
  </li>
  <li><strong>Server Listing</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">client.servers.get_all()</code> retrieves a list of all servers associated with your Hetzner account.</li>
      <li>The script loops through them, prints their details (ID, name, status, IPs, etc.), and calls <code class="language-plaintext highlighter-rouge">create_snapshot()</code> for each.</li>
    </ul>
  </li>
  <li><strong>Where the Error Occurs</strong>:
    <ul>
      <li>Inside the <code class="language-plaintext highlighter-rouge">create_snapshot()</code> function, the <code class="language-plaintext highlighter-rouge">client.servers.create_image()</code> call fails for server <code class="language-plaintext highlighter-rouge">sg5</code> because it’s locked. The exception message (<code class="language-plaintext highlighter-rouge">cannot perform operation because server is locked</code>) is raised by the <code class="language-plaintext highlighter-rouge">hcloud</code> library based on the API response.</li>
    </ul>
  </li>
</ol>

<h3 id="why-is-the-server-locked">Why Is the Server Locked?</h3>
<p>A server becomes locked when an operation is already in progress. Common reasons include:</p>
<ul>
  <li>Another snapshot is being created.</li>
  <li>The server is being rebooted, resized, or rebuilt.</li>
  <li>A previous operation hasn’t completed yet.</li>
</ul>

<p>The lock ID (<code class="language-plaintext highlighter-rouge">f21b9dc9d1535310</code>) in the error message is a unique identifier for the ongoing action locking the server.</p>

<h3 id="how-to-fix-it">How to Fix It:</h3>
<p>Here are steps to resolve the issue and improve your script:</p>

<h4 id="1-check-for-locked-status-before-proceeding">1. <strong>Check for Locked Status Before Proceeding</strong></h4>
<p>Modify the script to skip snapshot creation if the server is locked. You can check the server’s current actions using <code class="language-plaintext highlighter-rouge">client.actions.get_all()</code> or wait for the lock to clear.</p>

<p>Updated <code class="language-plaintext highlighter-rouge">create_snapshot</code> function:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create_snapshot</span><span class="p">(</span><span class="n">server</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Check if the server is locked by looking at its actions
</span>        <span class="n">actions</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="n">get_all</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">action</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">"running"</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Skipping snapshot for </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">: Server is locked by action </span><span class="si">{</span><span class="n">action</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="c1"># If no running actions, proceed with snapshot
</span>        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">servers</span><span class="p">.</span><span class="n">create_image</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">-snapshot"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">"snapshot"</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Snapshot created for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> with ID: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error creating snapshot for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="2-wait-for-the-lock-to-clear">2. <strong>Wait for the Lock to Clear</strong></h4>
<p>If you want to wait instead of skipping, you can poll the server’s actions until the lock is gone:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">wait_for_unlock</span><span class="p">(</span><span class="n">server</span><span class="p">):</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="n">get_all</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">)</span>
        <span class="n">running</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">action</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s">"running"</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">running</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Waiting for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> to unlock..."</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># Wait 5 seconds before checking again
</span>
<span class="k">def</span> <span class="nf">create_snapshot</span><span class="p">(</span><span class="n">server</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">wait_for_unlock</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">servers</span><span class="p">.</span><span class="n">create_image</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">-snapshot"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">"snapshot"</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Snapshot created for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> with ID: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error creating snapshot for server </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="3-manually-investigate-the-lock">3. <strong>Manually Investigate the Lock</strong></h4>
<ul>
  <li>Use the Hetzner Cloud Console or API to check the status of the action with ID <code class="language-plaintext highlighter-rouge">f21b9dc9d1535310</code>.</li>
  <li>Example API call (via Python):
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">action</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">actions</span><span class="p">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="s">"f21b9dc9d1535310"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Action Status: </span><span class="si">{</span><span class="n">action</span><span class="p">.</span><span class="n">status</span><span class="si">}</span><span class="s">, Command: </span><span class="si">{</span><span class="n">action</span><span class="p">.</span><span class="n">command</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>If it’s stuck, you may need to contact Hetzner support.</li>
</ul>

<h4 id="4-run-the-script-again">4. <strong>Run the Script Again</strong></h4>
<p>Once the server is no longer locked (action completes or you resolve it manually), rerun the script.</p>

<h3 id="additional-notes">Additional Notes:</h3>
<ul>
  <li><strong>Rate Limits</strong>: Creating snapshots for many servers in a loop might hit Hetzner’s API rate limits. Add a delay (e.g., <code class="language-plaintext highlighter-rouge">time.sleep(1)</code>) between requests if needed.</li>
  <li><strong>Error Handling</strong>: The current script stops at the first error. If you want it to continue for other servers, ensure the exception doesn’t halt the loop (it doesn’t in your case, which is good).</li>
</ul>

<p>Let me know if you need help implementing any of these fixes or further debugging!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
