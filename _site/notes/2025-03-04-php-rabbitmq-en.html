<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Using RabbitMQ in PHP</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Using RabbitMQ in PHP | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Using RabbitMQ in PHP" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-04-php-rabbitmq-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-04-php-rabbitmq-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Using RabbitMQ in PHP" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Using RabbitMQ in PHP","url":"https://lzwjava.github.io/notes/2025-03-04-php-rabbitmq-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=4eaca5adfe7fe9a435acea66836e495c82996d7f">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=4eaca5adfe7fe9a435acea66836e495c82996d7f" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Using RabbitMQ in PHP | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-04-php-rabbitmq-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-04-php-rabbitmq-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/php-rabbitmq-en" selected>English</option>
        <option value="/php-rabbitmq-zh" >中文</option>
        <option value="/php-rabbitmq-ja" >日本語</option>
        <option value="/php-rabbitmq-es" >Español</option>
        <option value="/php-rabbitmq-hi" >हिंदी</option>
        <option value="/php-rabbitmq-fr" >Français</option>
        <option value="/php-rabbitmq-de" >Deutsch</option>
        <option value="/php-rabbitmq-ar" >العربية</option>
        <option value="/php-rabbitmq-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="key-points">Key Points</h3>
<ul>
  <li>It seems likely that to use “php-amqplib/php-amqplib” version 2.6.*, you need to install it via Composer and follow basic steps for sending and receiving messages with RabbitMQ.</li>
  <li>The process involves setting up a connection, declaring a queue, and using methods like <code class="language-plaintext highlighter-rouge">basic_publish</code> for sending and <code class="language-plaintext highlighter-rouge">basic_consume</code> with a loop for receiving, which may differ slightly from newer versions.</li>
  <li>Research suggests that for version 2.6.*, the consuming process requires a manual loop with <code class="language-plaintext highlighter-rouge">wait()</code>, unlike newer versions that might use a <code class="language-plaintext highlighter-rouge">consume()</code> method.</li>
</ul>

<hr />

<h3 id="installation-and-setup">Installation and Setup</h3>
<p>To get started with “php-amqplib/php-amqplib” version 2.6.*, first install it using Composer by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require <span class="s2">"php-amqplib/php-amqplib:2.6.*"</span>
</code></pre></div></div>

<p>Ensure RabbitMQ is installed and running on your system, typically accessible at <code class="language-plaintext highlighter-rouge">localhost:5672</code> with default credentials (<code class="language-plaintext highlighter-rouge">guest/guest</code>). Adjust these settings if your setup differs.</p>

<h3 id="sending-messages">Sending Messages</h3>
<p>To send a message, include the necessary PHP files and create a connection:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">require_once</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">PhpAmqpLib\Connection\AMQPStreamConnection</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">PhpAmqpLib\Message\AMQPMessage</span><span class="p">;</span>

<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AMQPStreamConnection</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="mi">5672</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">);</span>
<span class="nv">$channel</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">channel</span><span class="p">();</span>
</code></pre></div></div>

<p>Declare a queue and publish your message:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">queue_declare</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nv">$msg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AMQPMessage</span><span class="p">(</span><span class="s1">'Hello World!'</span><span class="p">);</span>
<span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">basic_publish</span><span class="p">(</span><span class="nv">$msg</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">" [x] Sent 'Hello World!'</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
</code></pre></div></div>

<p>Finally, close the connection:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="receiving-messages">Receiving Messages</h3>
<p>For receiving, set up similarly but define a callback for message handling:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">require_once</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">PhpAmqpLib\Connection\AMQPStreamConnection</span><span class="p">;</span>

<span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AMQPStreamConnection</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="mi">5672</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">);</span>
<span class="nv">$channel</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">channel</span><span class="p">();</span>
<span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">queue_declare</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="nv">$callback</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">' [x] Received '</span><span class="p">,</span> <span class="nv">$msg</span><span class="o">-&gt;</span><span class="n">body</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">};</span>

<span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">basic_consume</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$channel</span><span class="o">-&gt;</span><span class="n">callbacks</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">wait</span><span class="p">();</span>
<span class="p">}</span>

<span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
</code></pre></div></div>

<p>Note that for version 2.6.*, you need the loop with <code class="language-plaintext highlighter-rouge">wait()</code> to keep consuming, which is an unexpected detail compared to newer versions that might use a simpler <code class="language-plaintext highlighter-rouge">consume()</code> method.</p>

<hr />

<h3 id="survey-note-detailed-usage-of-php-amqplibphp-amqplib-version-26">Survey Note: Detailed Usage of “php-amqplib/php-amqplib” Version 2.6.*</h3>

<p>This section provides a comprehensive guide on using the “php-amqplib/php-amqplib” library, specifically version 2.6.*, for interacting with RabbitMQ, a popular message queue system. The information is derived from official documentation, tutorials, and version-specific details, ensuring a thorough understanding for developers.</p>

<h4 id="background-and-context">Background and Context</h4>
<p>“php-amqplib/php-amqplib” is a PHP library for communicating with RabbitMQ, implementing the AMQP 0.9.1 protocol. Version 2.6.* is an older release, and while the library has evolved to version 3.x.x by March 2025, understanding its usage in this specific version is crucial for legacy systems or specific project requirements. The library is maintained by contributors including Ramūnas Dronga and Luke Bakken, with significant involvement from VMware engineers working on RabbitMQ (<a href="https://github.com/php-amqplib/php-amqplib">GitHub - php-amqplib/php-amqplib</a>).</p>

<p>RabbitMQ tutorials, such as those on the official RabbitMQ website, provide examples that are generally applicable but may reflect newer versions. For version 2.6.*, adjustments are necessary, particularly in the consuming process, as detailed below.</p>

<h4 id="installation-process">Installation Process</h4>
<p>To begin, install the library using Composer, the PHP dependency manager. Run the following command in your project directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require <span class="s2">"php-amqplib/php-amqplib:2.6.*"</span>
</code></pre></div></div>

<p>This command ensures the library is downloaded and configured for use, with Composer managing dependencies. Ensure RabbitMQ is installed and running, typically accessible at <code class="language-plaintext highlighter-rouge">localhost:5672</code> with default credentials (<code class="language-plaintext highlighter-rouge">guest/guest</code>). For production, adjust host, port, and credentials as needed, and consult <a href="https://www.cloudamqp.com/docs/php.html">CloudAMQP PHP Documentation</a> for managed broker setups.</p>

<h4 id="sending-messages-step-by-step">Sending Messages: Step-by-Step</h4>
<p>Sending messages involves establishing a connection and publishing to a queue. Here’s the process:</p>

<ol>
  <li>
    <p><strong>Include Required Files:</strong>
Use the Composer autoloader to include the library:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">require_once</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">PhpAmqpLib\Connection\AMQPStreamConnection</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">PhpAmqpLib\Message\AMQPMessage</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Create Connection and Channel:</strong>
Initialize a connection to RabbitMQ and open a channel:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AMQPStreamConnection</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="mi">5672</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">);</span>
<span class="nv">$channel</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">channel</span><span class="p">();</span>
</code></pre></div>    </div>

    <p>The parameters are host, port, username, and password, with defaults as shown. For SSL or other configurations, refer to <a href="https://www.rabbitmq.com/tutorials/tutorial-one-php">RabbitMQ PHP Tutorial</a>.</p>
  </li>
  <li>
    <p><strong>Declare Queue and Publish:</strong>
Declare a queue to ensure it exists, then publish a message:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">queue_declare</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nv">$msg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AMQPMessage</span><span class="p">(</span><span class="s1">'Hello World!'</span><span class="p">);</span>
<span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">basic_publish</span><span class="p">(</span><span class="nv">$msg</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">" [x] Sent 'Hello World!'</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>Here, <code class="language-plaintext highlighter-rouge">queue_declare</code> creates a queue named ‘hello’ with default settings (non-durable, non-exclusive, auto-delete). <code class="language-plaintext highlighter-rouge">basic_publish</code> sends the message to the queue.</p>
  </li>
  <li>
    <p><strong>Close Connection:</strong>
After sending, close the channel and connection to free resources:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>This process is standard across versions, with no significant changes noted in the changelog for version 2.6.* compared to later releases.</p>

<h4 id="receiving-messages-version-specific-details">Receiving Messages: Version-Specific Details</h4>
<p>Receiving messages in version 2.6.* requires careful attention, as the consuming mechanism differs from newer versions. Here’s the detailed process:</p>

<ol>
  <li>
    <p><strong>Include Required Files:</strong>
Similar to sending, include the autoloader and necessary classes:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">require_once</span> <span class="k">__DIR__</span> <span class="mf">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">PhpAmqpLib\Connection\AMQPStreamConnection</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Create Connection and Channel:</strong>
Establish the connection and channel as before:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AMQPStreamConnection</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="mi">5672</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">,</span> <span class="s1">'guest'</span><span class="p">);</span>
<span class="nv">$channel</span> <span class="o">=</span> <span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">channel</span><span class="p">();</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Declare Queue:</strong>
Ensure the queue exists, matching the sender’s declaration:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">queue_declare</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Define Callback:</strong>
Create a callback function to handle received messages:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$callback</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">' [x] Received '</span><span class="p">,</span> <span class="nv">$msg</span><span class="o">-&gt;</span><span class="n">body</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>    </div>

    <p>This function will be called for each message, printing the body in this example.</p>
  </li>
  <li>
    <p><strong>Consume Messages:</strong>
For version 2.6.*, use <code class="language-plaintext highlighter-rouge">basic_consume</code> to register the callback, then enter a loop to keep consuming:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">basic_consume</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nv">$callback</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$channel</span><span class="o">-&gt;</span><span class="n">callbacks</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">wait</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>    </div>

    <p>The <code class="language-plaintext highlighter-rouge">basic_consume</code> method takes parameters for queue name, consumer tag, no-local, no-ack, exclusive, no-wait, and callback. The loop with <code class="language-plaintext highlighter-rouge">wait()</code> keeps the consumer running, checking for messages. This is an important detail, as newer versions (e.g., 3.2) might use a <code class="language-plaintext highlighter-rouge">consume()</code> method, which was not available in 2.6.* based on API documentation review.</p>
  </li>
  <li>
    <p><strong>Close Connection:</strong>
After consuming, close the resources:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$channel</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
<span class="nv">$connection</span><span class="o">-&gt;</span><span class="nf">close</span><span class="p">();</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>An unexpected detail is the need for the manual loop in version 2.6.*, which may require additional error handling for production use, such as catching exceptions for connection issues.</p>

<h4 id="version-specific-considerations">Version-Specific Considerations</h4>
<p>Version 2.6.* is part of the older releases, and while the changelog does not explicitly list it, versions around 2.5 to 2.7 show enhancements like heartbeat support and PHP 5.3 compatibility. For large messages, version 2.6.* supports <code class="language-plaintext highlighter-rouge">setBodySizeLimit</code> on the channel to handle memory limits, truncating messages if needed, with details in <a href="https://github.com/php-amqplib/php-amqplib">GitHub - php-amqplib/php-amqplib</a>.</p>

<p>Comparing to version 3.2, changes include PHP 8 support and new methods like <code class="language-plaintext highlighter-rouge">consume()</code>, but the core functionality for sending and basic consuming remains similar. Users should test for compatibility, especially with PHP versions, as 2.6.* likely supports PHP 5.3 to 7.x, per changelog entries.</p>

<h4 id="troubleshooting-and-best-practices">Troubleshooting and Best Practices</h4>
<ul>
  <li>If sending fails, check RabbitMQ logs for resource alarms, such as disk space below 50 MB, and adjust settings via <a href="https://www.rabbitmq.com/configure.html#config-items">RabbitMQ Configuration Guide</a>.</li>
  <li>For consuming, ensure the consumer runs continuously; use tools like Supervisor for daemonizing in production.</li>
  <li>List queues using <code class="language-plaintext highlighter-rouge">rabbitmqctl list_queues</code> on Linux or <code class="language-plaintext highlighter-rouge">rabbitmqctl.bat list_queues</code> on Windows as a privileged user, per <a href="https://www.rabbitmq.com/cli.html">RabbitMQ Command Line Tools</a>.</li>
</ul>

<h4 id="table-version-comparison-for-key-methods">Table: Version Comparison for Key Methods</h4>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Version 2.6.* Behavior</th>
      <th>Version 3.2 Behavior</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">basic_publish</code></td>
      <td>Standard, publishes to queue</td>
      <td>Unchanged, same usage</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">basic_consume</code></td>
      <td>Requires loop with <code class="language-plaintext highlighter-rouge">wait()</code> for consuming</td>
      <td>Similar, but <code class="language-plaintext highlighter-rouge">consume()</code> method available</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">setBodySizeLimit</code></td>
      <td>Supported for large messages, truncates if set</td>
      <td>Supported, same functionality</td>
    </tr>
    <tr>
      <td>PHP Compatibility</td>
      <td>Likely 5.3 to 7.x</td>
      <td>Supports PHP 7.x and 8.x</td>
    </tr>
  </tbody>
</table>

<p>This table highlights the key difference in consuming, which is critical for version 2.6.* users.</p>

<h4 id="conclusion">Conclusion</h4>
<p>Using “php-amqplib/php-amqplib” version 2.6.* involves standard Composer installation, with sending messages via <code class="language-plaintext highlighter-rouge">basic_publish</code> and receiving via <code class="language-plaintext highlighter-rouge">basic_consume</code> with a manual loop. While similar to newer versions, the consuming process requires additional attention, making it essential for developers to test and adjust for legacy systems. For further details, consult the official RabbitMQ tutorials and GitHub repository.</p>

<hr />

<h3 id="key-citations">Key Citations</h3>
<ul>
  <li><a href="https://github.com/php-amqplib/php-amqplib">GitHub - php-amqplib/php-amqplib The most widely used PHP client for RabbitMQ</a></li>
  <li><a href="https://www.rabbitmq.com/tutorials/tutorial-one-php">RabbitMQ tutorial - “Hello World!” PHP example</a></li>
  <li><a href="https://www.cloudamqp.com/docs/php.html">CloudAMQP PHP Documentation Get started with CloudAMQP and PHP</a></li>
  <li><a href="https://packagist.org/packages/php-amqplib/php-amqplib">php-amqplib/php-amqplib Packagist Formerly videlalvaro/php-amqplib</a></li>
  <li><a href="https://github.com/php-amqplib/php-amqplib/blob/master/CHANGELOG.md">GitHub - php-amqplib/php-amqplib CHANGELOG file</a></li>
  <li><a href="https://www.rabbitmq.com/configure.html#config-items">RabbitMQ Configuration Guide Config items and settings</a></li>
  <li><a href="https://www.rabbitmq.com/cli.html">RabbitMQ Command Line Tools CLI reference and usage</a></li>
</ul>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
