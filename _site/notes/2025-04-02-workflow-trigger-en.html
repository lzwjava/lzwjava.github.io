<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Trigger Your GitHub Workflow</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Trigger Your GitHub Workflow | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Trigger Your GitHub Workflow" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-04-02-workflow-trigger-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-04-02-workflow-trigger-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Trigger Your GitHub Workflow" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Trigger Your GitHub Workflow","url":"https://lzwjava.github.io/notes/2025-04-02-workflow-trigger-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=aaa5a1d86d232ad75c2494b30fddf619d77cee12">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=aaa5a1d86d232ad75c2494b30fddf619d77cee12" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Trigger Your GitHub Workflow | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-04-02-workflow-trigger-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-04-02-workflow-trigger-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/workflow-trigger-en" selected>English</option>
        <option value="/workflow-trigger-zh" >中文</option>
        <option value="/workflow-trigger-ja" >日本語</option>
        <option value="/workflow-trigger-es" >Español</option>
        <option value="/workflow-trigger-hi" >हिंदी</option>
        <option value="/workflow-trigger-fr" >Français</option>
        <option value="/workflow-trigger-de" >Deutsch</option>
        <option value="/workflow-trigger-ar" >العربية</option>
        <option value="/workflow-trigger-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>You’re right, directly embedding a GitHub token in your frontend code is a security risk. Anyone viewing your page’s source code could potentially access and misuse your token.</p>

<p>Here’s a breakdown of secure approaches you can take to trigger your GitHub workflow from a frontend button, along with explanations and code examples:</p>

<p><strong>Core Idea: Introduce a Secure Backend</strong></p>

<p>The most secure way to handle this is to introduce a backend component (an API endpoint) that will:</p>

<ol>
  <li><strong>Receive the trigger request from your frontend.</strong></li>
  <li><strong>Securely store and use your GitHub token.</strong></li>
  <li><strong>Make the authenticated API call to GitHub to dispatch your workflow.</strong></li>
</ol>

<p>This way, your sensitive GitHub token never leaves your server-side environment.</p>

<p>Here are a few options for your backend:</p>

<p><strong>1. Serverless Functions (e.g., AWS Lambda, Google Cloud Functions, Netlify Functions, Vercel Functions)</strong></p>

<p>This is often a lightweight and cost-effective solution for simple API endpoints like this.</p>

<ul>
  <li>
    <p><strong>How it works:</strong> You write a small function that gets deployed to a serverless platform. This function will contain the logic to call the GitHub API using your stored token. Your frontend button will then make an HTTP request to the URL of this serverless function.</p>
  </li>
  <li>
    <p><strong>Example (Conceptual - You’ll need to adapt this to your chosen platform):</strong></p>

    <p><strong>Serverless Function Code (Python - Example for AWS Lambda/API Gateway):</strong></p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">os</span>
  <span class="kn">import</span> <span class="nn">requests</span>
  <span class="kn">import</span> <span class="nn">json</span>

  <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
      <span class="n">github_token</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"GITHUB_TOKEN"</span><span class="p">)</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">github_token</span><span class="p">:</span>
          <span class="k">return</span> <span class="p">{</span>
              <span class="s">'statusCode'</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
              <span class="s">'body'</span><span class="p">:</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">'error'</span><span class="p">:</span> <span class="s">'GitHub token not configured'</span><span class="p">})</span>
          <span class="p">}</span>

      <span class="n">owner</span> <span class="o">=</span> <span class="s">"lzwjava"</span>
      <span class="n">repo</span> <span class="o">=</span> <span class="s">"lzwjava.github.io"</span>
      <span class="n">workflow_id</span> <span class="o">=</span> <span class="s">"nytimes.yml"</span>
      <span class="n">ref</span> <span class="o">=</span> <span class="s">"main"</span>
      <span class="n">api_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"https://api.github.com/repos/</span><span class="si">{</span><span class="n">owner</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">repo</span><span class="si">}</span><span class="s">/actions/workflows/</span><span class="si">{</span><span class="n">workflow_id</span><span class="si">}</span><span class="s">/dispatches"</span>

      <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
          <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/vnd.github+json'</span><span class="p">,</span>
          <span class="s">'Authorization'</span><span class="p">:</span> <span class="sa">f</span><span class="s">'Bearer </span><span class="si">{</span><span class="n">github_token</span><span class="si">}</span><span class="s">'</span><span class="p">,</span>
          <span class="s">'X-GitHub-Api-Version'</span><span class="p">:</span> <span class="s">'2022-11-28'</span><span class="p">,</span>
          <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
      <span class="p">}</span>
      <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">'ref'</span><span class="p">:</span> <span class="n">ref</span><span class="p">}</span>

      <span class="k">try</span><span class="p">:</span>
          <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">api_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
          <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># Raise an exception for bad status codes
</span>          <span class="k">return</span> <span class="p">{</span>
              <span class="s">'statusCode'</span><span class="p">:</span> <span class="mi">204</span><span class="p">,</span>
              <span class="s">'body'</span><span class="p">:</span> <span class="s">''</span>
          <span class="p">}</span>
      <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
          <span class="k">return</span> <span class="p">{</span>
              <span class="s">'statusCode'</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
              <span class="s">'body'</span><span class="p">:</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span><span class="s">'error'</span><span class="p">:</span> <span class="sa">f</span><span class="s">'Failed to trigger workflow: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">'</span><span class="p">})</span>
          <span class="p">}</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>Important:</strong> You would configure an environment variable (e.g., <code class="language-plaintext highlighter-rouge">GITHUB_TOKEN</code>) in your serverless platform to securely store your GitHub Personal Access Token.</li>
    </ul>

    <p><strong>Frontend Code (Modified <code class="language-plaintext highlighter-rouge">nytimes.js</code>):</strong></p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">nytimesDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.nytimes</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">backendApiUrl</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/.netlify/functions/trigger-nytimes-update</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Example for Netlify Functions</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">nytimesDiv</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">updateButton</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">button</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">updateButton</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Update NYTimes Articles</span><span class="dl">'</span><span class="p">;</span>
      <span class="nx">nytimesDiv</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">updateButton</span><span class="p">);</span>

      <span class="nx">updateButton</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">fetch</span><span class="p">(</span><span class="nx">backendApiUrl</span><span class="p">,</span> <span class="p">{</span>
              <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
              <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                  <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
              <span class="p">},</span>
              <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({})</span> <span class="c1">// You might not need a body for a simple trigger</span>
          <span class="p">})</span>
          <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">204</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update triggered successfully! Please wait a few minutes to see the result.</span><span class="dl">'</span><span class="p">);</span>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
                      <span class="nx">alert</span><span class="p">(</span><span class="s2">`Update failed. Status code: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">Unknown error</span><span class="dl">'</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
                      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
                  <span class="p">});</span>
              <span class="p">}</span>
          <span class="p">})</span>
          <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Update failed. Check the console for errors.</span><span class="dl">'</span><span class="p">);</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error triggering update:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
          <span class="p">});</span>
      <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">nytimes div not found!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Deployment:</strong> You’ll need to deploy this serverless function to your chosen platform. The specific deployment process varies depending on the provider.</p>
  </li>
</ul>

<p><strong>2. Your Own Web Server (if you have one)</strong></p>

<p>If you have your own web server (e.g., using Node.js, Python/Flask, etc.), you can create a simple API endpoint on that server.</p>

<ul>
  <li>
    <p><strong>How it works:</strong> Your frontend button sends a request to your server’s endpoint. Your server-side code, which has access to your GitHub token (stored securely as an environment variable or in a configuration file), then makes the API call to GitHub.</p>
  </li>
  <li>
    <p><strong>Example (Conceptual - Node.js with Express):</strong></p>

    <p><strong>Server-side Code (Node.js/Express):</strong></p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">fetch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>

  <span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/trigger-nytimes-update</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">githubToken</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">GITHUB_TOKEN</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">githubToken</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GitHub token not configured</span><span class="dl">'</span> <span class="p">});</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">owner</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">lzwjava</span><span class="dl">"</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">repo</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">lzwjava.github.io</span><span class="dl">"</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">workflow_id</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">nytimes.yml</span><span class="dl">"</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">ref</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">apiUrl</span> <span class="o">=</span> <span class="s2">`https://api.github.com/repos/</span><span class="p">${</span><span class="nx">owner</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">repo</span><span class="p">}</span><span class="s2">/actions/workflows/</span><span class="p">${</span><span class="nx">workflow_id</span><span class="p">}</span><span class="s2">/dispatches`</span><span class="p">;</span>

      <span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
          <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/vnd.github+json</span><span class="dl">'</span><span class="p">,</span>
          <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">githubToken</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
          <span class="dl">'</span><span class="s1">X-GitHub-Api-Version</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2022-11-28</span><span class="dl">'</span><span class="p">,</span>
          <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
      <span class="p">};</span>
      <span class="kd">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ref</span><span class="p">:</span> <span class="nx">ref</span> <span class="p">};</span>

      <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">apiUrl</span><span class="p">,</span> <span class="p">{</span>
              <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
              <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
              <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
          <span class="p">});</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">204</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">204</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
              <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s2">`Failed to trigger workflow: </span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">)}</span><span class="s2">`</span> <span class="p">});</span>
          <span class="p">}</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error triggering workflow:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
          <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s2">`Failed to trigger workflow: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span> <span class="p">});</span>
      <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Server listening at http://localhost:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>Important:</strong> Use a <code class="language-plaintext highlighter-rouge">.env</code> file (and ensure it’s not committed to your repository) to store your <code class="language-plaintext highlighter-rouge">GITHUB_TOKEN</code> and access it using a library like <code class="language-plaintext highlighter-rouge">dotenv</code>.</li>
    </ul>

    <p><strong>Frontend Code (Modified <code class="language-plaintext highlighter-rouge">nytimes.js</code>):</strong></p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">nytimesDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.nytimes</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">backendApiUrl</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/api/trigger-nytimes-update</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Adjust to your server's endpoint</span>

  <span class="c1">// ... (rest of the frontend code is similar to the serverless function example)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Deployment:</strong> You’ll need to deploy your server application to your web server.</p>
  </li>
</ul>

<p><strong>3. GitHub Actions Workflow Triggered by a Different Event (Less Direct)</strong></p>

<p>While not a direct button trigger, you could set up a different event to trigger your workflow, which might be indirectly initiated by a user action. For example:</p>

<ul>
  <li><strong>Scheduled Workflow:</strong> Run the update workflow periodically (e.g., daily).</li>
  <li><strong>Webhook Trigger:</strong> If you have another system or service that users interact with, that system could trigger a webhook that then starts your GitHub Actions workflow.</li>
</ul>

<p>However, these options don’t provide the immediate, on-demand update you likely want from a button click.</p>

<p><strong>Choosing the Right Approach</strong></p>

<ul>
  <li><strong>For simple static sites:</strong> Serverless functions are often the easiest and most cost-effective solution. Platforms like Netlify and Vercel have built-in support for serverless functions.</li>
  <li><strong>If you already have a web server:</strong> Creating an API endpoint on your existing server is a natural choice.</li>
  <li><strong>Security is paramount:</strong> Always prioritize keeping your GitHub token secure on a backend server and never expose it in your frontend code.</li>
</ul>

<p><strong>Steps to Implement (Using Serverless Functions as an Example):</strong></p>

<ol>
  <li><strong>Create a Serverless Function:</strong> Write the code for your serverless function (e.g., in Python or Node.js) that includes the logic to call the GitHub API.</li>
  <li><strong>Securely Store Your GitHub Token:</strong> Configure an environment variable in your serverless platform’s settings to store your GitHub Personal Access Token.</li>
  <li><strong>Deploy Your Serverless Function:</strong> Deploy the function to your chosen platform (e.g., Netlify, Vercel, AWS Lambda with API Gateway). You’ll get a URL for your deployed function.</li>
  <li><strong>Update Your Frontend Code:</strong> Modify your <code class="language-plaintext highlighter-rouge">nytimes.js</code> file to make a <code class="language-plaintext highlighter-rouge">POST</code> request to the URL of your deployed serverless function when the button is clicked.</li>
  <li><strong>Test:</strong> Deploy your updated frontend and test if clicking the button successfully triggers your GitHub Actions workflow.</li>
</ol>

<p>By implementing one of these backend-based solutions, you can provide a button to trigger your GitHub workflow securely without exposing your sensitive API token in your frontend code. Remember to choose the approach that best fits your current infrastructure and technical skills.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
