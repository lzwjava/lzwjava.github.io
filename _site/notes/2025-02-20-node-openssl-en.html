<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Node.js OpenSSL Compatibility</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Node.js OpenSSL Compatibility | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Node.js OpenSSL Compatibility" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-02-20-node-openssl-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-02-20-node-openssl-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Node.js OpenSSL Compatibility" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Node.js OpenSSL Compatibility","url":"https://lzwjava.github.io/notes/2025-02-20-node-openssl-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=5ea464874a2dcf1d60ad0d3ed8930acaa7ccd246">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=5ea464874a2dcf1d60ad0d3ed8930acaa7ccd246" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Node.js OpenSSL Compatibility | Original
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-02-20-node-openssl-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-02-20-node-openssl-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/node-openssl-en" selected>English</option>
        <option value="/node-openssl-zh" >中文</option>
        <option value="/node-openssl-ja" >日本語</option>
        <option value="/node-openssl-es" >Español</option>
        <option value="/node-openssl-hi" >हिंदी</option>
        <option value="/node-openssl-fr" >Français</option>
        <option value="/node-openssl-de" >Deutsch</option>
        <option value="/node-openssl-ar" >العربية</option>
        <option value="/node-openssl-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>When running <code class="language-plaintext highlighter-rouge">ng build</code> with <strong>Node.js 22.9.0</strong> and <strong>npm 10.8.3</strong>, you encounter the error:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>error 0308010C digital envelope routines::unsupported
</code></pre></div></div>

<p>This error typically arises due to a compatibility issue between newer versions of Node.js (like 22.9.0, which uses OpenSSL 3.0 or later) and certain cryptographic algorithms relied upon by tools like Webpack, which Angular uses under the hood. Below is a step-by-step guide to fix this issue.</p>

<hr />

<h3 id="solution">Solution</h3>

<h4 id="step-1-enable-the-openssl-legacy-provider">Step 1: Enable the OpenSSL Legacy Provider</h4>
<p>The simplest and most immediate fix is to enable the OpenSSL legacy provider by setting the <code class="language-plaintext highlighter-rouge">NODE_OPTIONS</code> environment variable. This allows Node.js to use older cryptographic algorithms that may no longer be supported by default in OpenSSL 3.0+.</p>

<ul>
  <li><strong>For macOS/Linux</strong>:
Open your terminal and run:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">NODE_OPTIONS</span><span class="o">=</span><span class="nt">--openssl-legacy-provider</span>
ng build
</code></pre></div>    </div>
  </li>
  <li><strong>For Windows (Command Prompt)</strong>:
Open Command Prompt and run:
    <pre><code class="language-cmd">set NODE_OPTIONS=--openssl-legacy-provider
ng build
</code></pre>
  </li>
  <li><strong>For Windows (PowerShell)</strong>:
Open PowerShell and run:
    <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">NODE_OPTIONS</span><span class="o">=</span><span class="s2">"--openssl-legacy-provider"</span><span class="w">
</span><span class="n">ng</span><span class="w"> </span><span class="nx">build</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<p>After setting the environment variable, run <code class="language-plaintext highlighter-rouge">ng build</code> again. This should resolve the error in most cases by allowing Node.js to process the unsupported routines.</p>

<hr />

<h4 id="step-2-verify-and-update-angular-cli-if-needed">Step 2: Verify and Update Angular CLI (If Needed)</h4>
<p>If the error persists after Step 1, your version of the Angular CLI might not be fully compatible with Node.js 22.9.0. Updating it to the latest version can help.</p>

<ul>
  <li>Check your current Angular CLI version:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng <span class="nt">--version</span>
</code></pre></div>    </div>
  </li>
  <li>Update Angular CLI globally:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> @angular/cli
</code></pre></div>    </div>
  </li>
  <li>Then, try running <code class="language-plaintext highlighter-rouge">ng build</code> again.</li>
</ul>

<hr />

<h4 id="step-3-check-and-update-project-dependencies-optional">Step 3: Check and Update Project Dependencies (Optional)</h4>
<p>If the issue still isn’t resolved, outdated dependencies in your project might be causing the problem. To address this:</p>

<ul>
  <li>Open your <code class="language-plaintext highlighter-rouge">package.json</code> file and review the versions of your dependencies (e.g., <code class="language-plaintext highlighter-rouge">@angular/core</code>, <code class="language-plaintext highlighter-rouge">@angular/cli</code>, etc.).</li>
  <li>Update them carefully to their latest compatible versions:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span>
</code></pre></div>    </div>
    <p>or, if you want to update all dependencies:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm update
</code></pre></div>    </div>
  </li>
  <li>Run <code class="language-plaintext highlighter-rouge">ng build</code> again to test.</li>
</ul>

<p><em>Note</em>: Be cautious with updates, as they might introduce breaking changes. Test your application thoroughly afterward.</p>

<hr />

<h4 id="step-4-downgrade-nodejs-last-resort">Step 4: Downgrade Node.js (Last Resort)</h4>
<p>If none of the above solutions work, Node.js 22.9.0 might not yet be fully supported by your project’s current configuration. Downgrading to a Long-Term Support (LTS) version of Node.js, such as <strong>20.x</strong> or <strong>18.x</strong>, could resolve the issue.</p>

<ul>
  <li>Uninstall your current Node.js version.</li>
  <li>Download and install an LTS version from the <a href="https://nodejs.org/">official Node.js website</a>.</li>
  <li>Verify the installed version:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node <span class="nt">-v</span>
</code></pre></div>    </div>
  </li>
  <li>Reinstall your project dependencies:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
  <li>Run <code class="language-plaintext highlighter-rouge">ng build</code> again.</li>
</ul>

<hr />

<h3 id="recommended-approach">Recommended Approach</h3>
<p>Start with <strong>Step 1</strong> (setting <code class="language-plaintext highlighter-rouge">NODE_OPTIONS</code>), as it’s the quickest fix and allows you to keep using Node.js 22.9.0. If that doesn’t work, proceed to <strong>Step 2</strong> and <strong>Step 3</strong>. Use <strong>Step 4</strong> only if necessary, as downgrading Node.js might limit access to newer features.</p>

<p>This should resolve the “error 0308010C digital envelope routines::unsupported” and get your <code class="language-plaintext highlighter-rouge">ng build</code> command working again!</p>

<hr />

<details type="reasoning" done="true" duration="9">
<summary>Thought for 9 seconds</summary>
&gt; Okay, so the user is encountering an error after running `ng build` in their Angular project. The error message is `error 0308010C digital envelope routines:: unsupported`. I remember that this error is related to the Node.js crypto module, specifically with the OpenSSL library. 
&gt; 
&gt; First, I need to figure out why this error is happening. It might be due to a recent update in Node.js or OpenSSL. I recall that Node.js versions beyond 17.x started using the newer OpenSSL 3.x by default, which might have some breaking changes. The error code 0308010C suggests it's an issue with the digital envelope routines, which are part of the crypto module.
&gt; 
&gt; I should check if the project is using environment variables to specify the OpenSSL provider. If the project is using `NODE_OPTIONS=--openssl-legacy-provider`, that might be causing the issue. I can suggest removing or modifying that environment variable.
&gt; 
&gt; Another thought is whether the project has any dependencies that might be incompatible with the newer OpenSSL version. Maybe some packages were built against an older OpenSSL and are now causing issues. Updating or downgrading those dependencies could help.
&gt; 
&gt; If the user is using a specific version of Node.js, they might need to switch back to a version that uses OpenSSL 1.x. Alternatively, they could try using the legacy OpenSSL provider by setting the environment variable before running `ng build`.
&gt; 
&gt; I should also consider if there are any known issues with Angular and the newer OpenSSL versions. Perhaps Angular has made adjustments, but maybe the user's project hasn't been updated yet.
&gt; 
&gt; Lastly, if none of these solutions work, there might be a need to adjust the project's configuration or even consider building a custom OpenSSL setup, though that's more advanced.
&gt; 
&gt; I should present these solutions in a clear, step-by-step manner, starting with the simplest fixes and moving to more involved options. That way, the user can try each until they find what works for them.
</details>
<p>The error <code class="language-plaintext highlighter-rouge">error 0308010C digital envelope routines:: unsupported</code> typically occurs when there is an issue with the OpenSSL library used by Node.js. This error can happen due to a newer version of OpenSSL being used, which might not be fully compatible with your project’s requirements. Here’s how you can fix it:</p>

<hr />

<h3 id="1-set-the-openssl-provider-to-legacy"><strong>1. Set the OpenSSL Provider to Legacy</strong></h3>
<p>This error often occurs when using Node.js versions 17.x or newer, which switch to using OpenSSL 3.x by default. To resolve this, you can force Node.js to use the legacy OpenSSL provider.</p>

<ul>
  <li>Add the following environment variable to your system or IDE:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">NODE_OPTIONS</span><span class="o">=</span><span class="nt">--openssl-legacy-provider</span>
</code></pre></div>    </div>
  </li>
  <li>You can also add this to your project’s <code class="language-plaintext highlighter-rouge">package.json</code> under the <code class="language-plaintext highlighter-rouge">scripts</code> section:
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"set NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; ng build"</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="2-update-your-nodejs-version"><strong>2. Update Your Node.js Version</strong></h3>
<p>If you are using an older version of Node.js, try updating to a newer version (&gt;=18.x) or downgrading to a version that works better with your project.</p>

<ul>
  <li>Uninstall the current Node.js version and install a different version:
    <ul>
      <li>On <strong>Windows</strong>:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Download and install from https://nodejs.org/</span>
</code></pre></div>        </div>
      </li>
      <li>On <strong>macOS/Linux</strong>:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use a package manager like nvm</span>
nvm <span class="nb">install</span> <span class="nt">--lts</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="3-check-for-project-dependencies"><strong>3. Check for Project Dependencies</strong></h3>
<p>If the error occurs due to a specific dependency, you might need to update or downgrade certain packages.</p>

<ul>
  <li>Look for dependencies in your <code class="language-plaintext highlighter-rouge">package.json</code> that might be causing the issue.</li>
  <li>Try updating or downgrading the <code class="language-plaintext highlighter-rouge">crypto</code> or <code class="language-plaintext highlighter-rouge">tls</code> related packages.</li>
</ul>

<hr />

<h3 id="4-reinstall-nodejs-and-dependencies"><strong>4. Reinstall Node.js and Dependencies</strong></h3>
<p>Sometimes, reinstalling Node.js and your project dependencies can resolve the issue.</p>

<ul>
  <li>Uninstall Node.js and remove the <code class="language-plaintext highlighter-rouge">node_modules</code> folder:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> node_modules package-lock.json
</code></pre></div>    </div>
  </li>
  <li>Reinstall Node.js and run:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install
</span>ng build
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="5-use-a-different-openssl-version"><strong>5. Use a Different OpenSSL Version</strong></h3>
<p>If the above methods don’t work, you might need to explicitly set the OpenSSL provider.</p>

<ul>
  <li>Add the following to your <code class="language-plaintext highlighter-rouge">.env</code> file:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">OPENSSL_PROVIDER</span><span class="o">=</span>legacy
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="6-use-a-custom-build-of-nodejs"><strong>6. Use a Custom Build of Node.js</strong></h3>
<p>If none of the above works, you can try building Node.js with the legacy OpenSSL provider.</p>

<ul>
  <li>Clone the Node.js repository and build it with the legacy provider flag.</li>
</ul>

<hr />

<h3 id="7-verify-the-issue-in-your-project"><strong>7. Verify the Issue in Your Project</strong></h3>
<p>If the error persists, check if there are any specific operations in your project that use the <code class="language-plaintext highlighter-rouge">crypto</code> module. Replace or update any code that might be causing the issue.</p>

<hr />

<p>By trying these steps, you should be able to resolve the <code class="language-plaintext highlighter-rouge">0308010C</code> error and successfully run <code class="language-plaintext highlighter-rouge">ng build</code>. If the issue persists, let me know and we can explore more advanced solutions.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
