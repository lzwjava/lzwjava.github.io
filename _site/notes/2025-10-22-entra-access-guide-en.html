<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Microsoft Entra ID Access Management Guide</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Microsoft Entra ID Access Management Guide | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Microsoft Entra ID Access Management Guide" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-10-22-entra-access-guide-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-10-22-entra-access-guide-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Microsoft Entra ID Access Management Guide" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Microsoft Entra ID Access Management Guide","url":"https://lzwjava.github.io/notes/2025-10-22-entra-access-guide-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=cac74b5bf414527c272724f7f7b6236fc8954e92">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=cac74b5bf414527c272724f7f7b6236fc8954e92" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Microsoft Entra ID Access Management Guide | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-10-22-entra-access-guide-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-10-22-entra-access-guide-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/entra-access-guide-en" selected>English</option>
        <option value="/entra-access-guide-zh" >中文</option>
        <option value="/entra-access-guide-ja" >日本語</option>
        <option value="/entra-access-guide-es" >Español</option>
        <option value="/entra-access-guide-hi" >हिंदी</option>
        <option value="/entra-access-guide-fr" >Français</option>
        <option value="/entra-access-guide-de" >Deutsch</option>
        <option value="/entra-access-guide-ar" >العربية</option>
        <option value="/entra-access-guide-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Microsoft Entra ID is a cloud-based identity and access management service that helps secure access to resources like applications, data, and devices. It supports authentication (e.g., sign-in methods, MFA), authorization (e.g., role-based access), and integration with Azure services. To get started, you’ll need an Azure subscription and appropriate permissions (e.g., Global Administrator role).</p>

<h2 id="getting-started">Getting Started</h2>
<ol>
  <li><strong>Sign in to the Azure Portal</strong>: Go to <a href="https://portal.azure.com">portal.azure.com</a> and sign in with your Microsoft account.</li>
  <li><strong>Navigate to Microsoft Entra ID</strong>: Search for “Microsoft Entra ID” in the top search bar or find it under “Azure services.”</li>
  <li><strong>Explore the Dashboard</strong>: Review your tenant overview, including users, groups, and apps. Set up basics like custom domains if needed.</li>
  <li><strong>Enable Key Features</strong>:
    <ul>
      <li><strong>Authentication</strong>: Configure self-service password reset or multifactor authentication (MFA) under “Authentication methods.”</li>
      <li><strong>Conditional Access</strong>: Create policies under “Security” &gt; “Conditional Access” to enforce rules based on user, device, or location.</li>
    </ul>
  </li>
</ol>

<h2 id="managing-users-and-groups">Managing Users and Groups</h2>
<ul>
  <li><strong>Add Users</strong>: Go to “Users” &gt; “New user.” Enter details like name, username (e.g., user@yourdomain.com), and assign roles or licenses.</li>
  <li><strong>Create Groups</strong>: Under “Groups” &gt; “New group,” choose security or Microsoft 365 type, add members, and use for access assignments.</li>
  <li><strong>Assign Licenses</strong>: In user/group details, go to “Licenses” to assign Entra ID P1/P2 for advanced features like Privileged Identity Management (PIM).</li>
  <li><strong>Best Practice</strong>: Follow the principle of least privilege—assign minimal permissions and use groups for bulk management.</li>
</ul>

<h2 id="managing-applications">Managing Applications</h2>
<ul>
  <li><strong>Register an App</strong>: Under “App registrations” &gt; “New registration,” provide name, redirect URIs, and supported account types (single-tenant, multi-tenant, etc.).</li>
  <li><strong>Add Enterprise Apps</strong>: For third-party apps, go to “Enterprise applications” &gt; “New application” to browse the gallery or create non-gallery apps.</li>
  <li><strong>Configure Access</strong>: Assign users/groups to the app under “Users and groups,” and set up single sign-on (SSO) via SAML or OAuth.</li>
  <li><strong>Provision Identities</strong>: Automate user sync to apps under “Provisioning” for just-in-time access.</li>
</ul>

<p>For hybrid setups (on-premises AD), use Microsoft Entra Connect to sync identities. Monitor usage via logs under “Monitoring” &gt; “Sign-in logs.”</p>

<h1 id="how-to-check-access-to-a-database-kubernetes-aks-or-other-resource">How to Check Access to a Database, Kubernetes (AKS), or Other Resource</h1>

<p>Access in Azure is managed via Role-Based Access Control (RBAC), integrated with Entra ID. Users authenticate with Entra credentials, and roles define permissions. To check access, use the Azure portal’s IAM (Identity and Access Management) tools. This lists direct assignments, inherited from parent scopes (e.g., subscription), and deny assignments.</p>

<h2 id="general-steps-for-any-azure-resource">General Steps for Any Azure Resource</h2>
<ol>
  <li><strong>Open the Resource</strong>: In the Azure portal, navigate to the resource (e.g., resource group, VM, storage account).</li>
  <li><strong>Go to Access Control (IAM)</strong>: Select “Access control (IAM)” from the left menu.</li>
  <li><strong>Check Access</strong>:
    <ul>
      <li>For your own access: Click “Check access” &gt; “View my access” to see assignments at this scope and inherited.</li>
      <li>For a specific user/group/service principal:
        <ul>
          <li>Click “Check access” &gt; “Check access.”</li>
          <li>Select “User, group, or service principal.”</li>
          <li>Search by name or email.</li>
          <li>View the results pane for role assignments (e.g., Owner, Contributor) and effective permissions.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>View Eligible Assignments</strong> (if using PIM): Switch to the “Eligible assignments” tab for just-in-time roles.</li>
  <li><strong>PowerShell/CLI Alternative</strong>: Use <code class="language-plaintext highlighter-rouge">az role assignment list --assignee &lt;user&gt; --scope &lt;resource-id&gt;</code> for scripted checks.</li>
</ol>

<p>Note: This doesn’t include child-scope assignments; drill down if needed.</p>

<h2 id="checking-access-to-azure-sql-database">Checking Access to Azure SQL Database</h2>
<p>Azure SQL uses Entra authentication for contained database users (tied to Entra identities, not SQL logins).</p>
<ol>
  <li><strong>Configure Entra Admin (if not set)</strong>: In the SQL server overview &gt; “Microsoft Entra ID” under Settings &gt; “Set admin.” Search and select a user/group, then save. This enables Entra auth cluster-wide.</li>
  <li><strong>Check Server-Level Access</strong>:
    <ul>
      <li>In the SQL server pane &gt; “Microsoft Entra ID,” view the admin field to see the assigned identity.</li>
      <li>Query the <code class="language-plaintext highlighter-rouge">master</code> database: <code class="language-plaintext highlighter-rouge">SELECT name, type_desc FROM sys.database_principals WHERE type IN ('E', 'X');</code> (E for external users, X for external groups).</li>
    </ul>
  </li>
  <li><strong>Check Database-Level Access</strong>:
    <ul>
      <li>Connect to the database using SSMS with Entra auth (select “Microsoft Entra - Universal with MFA” in connection dialog).</li>
      <li>Run <code class="language-plaintext highlighter-rouge">SELECT * FROM sys.database_principals;</code> or <code class="language-plaintext highlighter-rouge">EXEC sp_helprolemember;</code> to list users and roles.</li>
    </ul>
  </li>
  <li><strong>Troubleshoot</strong>: If login fails (e.g., error 33134), check Entra Conditional Access policies allow Microsoft Graph API access.</li>
</ol>

<p>Users get <code class="language-plaintext highlighter-rouge">CONNECT</code> by default; grant roles like <code class="language-plaintext highlighter-rouge">db_datareader</code> via T-SQL: <code class="language-plaintext highlighter-rouge">ALTER ROLE db_datareader ADD MEMBER [user@domain.com];</code>.</p>

<h2 id="checking-access-to-aks-kubernetes-cluster">Checking Access to AKS (Kubernetes Cluster)</h2>
<p>AKS integrates Entra ID for auth and uses Azure RBAC or Kubernetes RBAC for authorization.</p>
<ol>
  <li><strong>Azure-Level Access (to AKS Resource)</strong>:
    <ul>
      <li>Follow general steps above on the AKS cluster resource.</li>
      <li>Common roles: “Azure Kubernetes Service Cluster Admin” for full kubeconfig access; “Reader” for view-only.</li>
    </ul>
  </li>
  <li><strong>Kubernetes API Access</strong>:
    <ul>
      <li>Authenticate via <code class="language-plaintext highlighter-rouge">az login</code> (uses Entra token).</li>
      <li>Get kubeconfig: <code class="language-plaintext highlighter-rouge">az aks get-credentials --resource-group &lt;rg&gt; --name &lt;cluster&gt;</code>.</li>
      <li>Check bindings: <code class="language-plaintext highlighter-rouge">kubectl auth can-i &lt;verb&gt; &lt;resource&gt; --as &lt;user@domain.com&gt; -n &lt;namespace&gt;</code>.</li>
      <li>List cluster roles: <code class="language-plaintext highlighter-rouge">kubectl get clusterrolebindings | grep &lt;user-or-group&gt;</code>.</li>
    </ul>
  </li>
  <li><strong>Using Entra Groups</strong>: Assign Kubernetes Roles/Bindings to groups for scalability. Example YAML for a namespace role (apply with <code class="language-plaintext highlighter-rouge">kubectl apply -f file.yaml</code>):
```
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: example-binding
  namespace: default
subjects:
    <ul>
      <li>kind: Group
name: finance-group  # Entra group
apiGroup: rbac.authorization.k8s.io
roleRef:
kind: Role
name: example-role
apiGroup: rbac.authorization.k8s.io
```</li>
    </ul>
  </li>
  <li><strong>Best Practices</strong>: Use least-privilege roles, integrate with PIM for just-in-time elevation, and avoid fixed credentials—use workload identities for pods.</li>
</ol>

<p>For pods accessing resources (e.g., SQL from AKS), assign managed identities and check via Azure RBAC on those identities.</p>

<p><a href="https://learn.microsoft.com/en-us/entra/identity/">Microsoft Entra ID Documentation</a><br />
<a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/check-access">Check Access to a Single Azure Resource</a><br />
<a href="https://learn.microsoft.com/en-us/azure/azure-sql/database/authentication-aad-configure?view=azuresql">Configure Entra Authentication for Azure SQL</a><br />
<a href="https://learn.microsoft.com/en-us/azure/aks/operator-best-practices-identity">AKS Identity and Access Best Practices</a></p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    
      <p class="model">x-ai/grok-4-fast</p>
    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
