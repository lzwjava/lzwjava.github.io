<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Using KaTeX in Jekyll</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Using KaTeX in Jekyll | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Using KaTeX in Jekyll" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-05-29-jekyll-katex-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-05-29-jekyll-katex-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Using KaTeX in Jekyll" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Using KaTeX in Jekyll","url":"https://lzwjava.github.io/notes/2025-05-29-jekyll-katex-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=e52425443d4ba02ceb7e84d15ff3c3ce5d8acbc1">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=e52425443d4ba02ceb7e84d15ff3c3ce5d8acbc1" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Using KaTeX in Jekyll | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-05-29-jekyll-katex-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-05-29-jekyll-katex-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/jekyll-katex-en" selected>English</option>
        <option value="/jekyll-katex-zh" >中文</option>
        <option value="/jekyll-katex-ja" >日本語</option>
        <option value="/jekyll-katex-es" >Español</option>
        <option value="/jekyll-katex-hi" >हिंदी</option>
        <option value="/jekyll-katex-fr" >Français</option>
        <option value="/jekyll-katex-de" >Deutsch</option>
        <option value="/jekyll-katex-ar" >العربية</option>
        <option value="/jekyll-katex-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>To use KaTeX instead of MathJax in Jekyll with your current setup, you’ll need to replace the MathJax scripts with KaTeX and adjust your Jekyll configuration. KaTeX is faster and lighter than MathJax, but it requires a different approach since it doesn’t support all of MathJax’s features (e.g., automatic equation numbering is more manual). Below is a step-by-step guide to switch to KaTeX in your Jekyll site:</p>

<h3 id="1-update-your-jekyll-configuration">1. Update Your Jekyll Configuration</h3>
<p>Modify your <code class="language-plaintext highlighter-rouge">_config.yml</code> to use KaTeX as the math engine for Kramdown. Update the <code class="language-plaintext highlighter-rouge">kramdown</code> section as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">kramdown</span><span class="pi">:</span>
  <span class="na">math_engine</span><span class="pi">:</span> <span class="s">katex</span>
  <span class="na">input</span><span class="pi">:</span> <span class="s">GFM</span>
  <span class="na">syntax_highlighter</span><span class="pi">:</span> <span class="s">rouge</span>
</code></pre></div></div>

<p>This tells Kramdown to render LaTeX math expressions using KaTeX instead of MathJax.</p>

<h3 id="2-include-katex-in-your-html">2. Include KaTeX in Your HTML</h3>
<p>Remove the MathJax scripts from your HTML and replace them with KaTeX. You can include KaTeX via a CDN. Add the following to the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> section of your Jekyll layout file (e.g., <code class="language-plaintext highlighter-rouge">_layouts/default.html</code>):</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- KaTeX CSS --&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css"</span> <span class="na">integrity=</span><span class="s">"sha384-nB0miv6/jRmo5SLY8cTjmnkA3wC7o1L0jOey4Cki5N3kdjdPD/mW59G1Qsxa8c3y"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- KaTeX JS --&gt;</span>
<span class="nt">&lt;script </span><span class="na">defer</span> <span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-7zkKLzPD3M4y9W8FWsN4Z0yO5eLu8qUn0QHY6hZ2r3fDzqjk0McYc3vJrmE2h6cZ"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Auto-render extension (optional, for automatic rendering of math) --&gt;</span>
<span class="nt">&lt;script </span><span class="na">defer</span> <span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"</span> <span class="na">integrity=</span><span class="s">"sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTL0xF3iS9Ho94fSc31UyUyIDgWvB4"</span> <span class="na">crossorigin=</span><span class="s">"anonymous"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Auto-render configuration --&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">DOMContentLoaded</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">renderMathInElement</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">delimiters</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="na">left</span><span class="p">:</span> <span class="dl">"</span><span class="s2">$$</span><span class="dl">"</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="dl">"</span><span class="s2">$$</span><span class="dl">"</span><span class="p">,</span> <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span> <span class="c1">// Block math</span>
        <span class="p">{</span><span class="na">left</span><span class="p">:</span> <span class="dl">"</span><span class="se">\\</span><span class="s2">[</span><span class="dl">"</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="dl">"</span><span class="se">\\</span><span class="s2">]</span><span class="dl">"</span><span class="p">,</span> <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span> <span class="c1">// Block math</span>
        <span class="p">{</span><span class="na">left</span><span class="p">:</span> <span class="dl">"</span><span class="se">\\</span><span class="s2">(</span><span class="dl">"</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="dl">"</span><span class="se">\\</span><span class="s2">)</span><span class="dl">"</span><span class="p">,</span> <span class="na">display</span><span class="p">:</span> <span class="kc">false</span><span class="p">},</span> <span class="c1">// Inline math</span>
        <span class="p">{</span><span class="na">left</span><span class="p">:</span> <span class="dl">"</span><span class="s2">$</span><span class="dl">"</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="dl">"</span><span class="s2">$</span><span class="dl">"</span><span class="p">,</span> <span class="na">display</span><span class="p">:</span> <span class="kc">false</span><span class="p">}</span> <span class="c1">// Inline math</span>
      <span class="p">],</span>
      <span class="na">throwOnError</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h3 id="3-remove-mathjax-configuration">3. Remove MathJax Configuration</h3>
<p>Delete the MathJax-related code from your layout file, including the <code class="language-plaintext highlighter-rouge">&lt;script type="text/x-mathjax-config"&gt;</code> block and the MathJax CDN script. KaTeX doesn’t use a configuration like MathJax’s <code class="language-plaintext highlighter-rouge">tex2jax</code>, and the above auto-render script handles similar functionality.</p>

<h3 id="4-write-math-in-your-markdown">4. Write Math in Your Markdown</h3>
<p>With KaTeX and Kramdown configured, you can write LaTeX math in your Markdown files using the same delimiters as before:</p>

<ul>
  <li><strong>Inline math</strong>: Use <code class="language-plaintext highlighter-rouge">$...$</code> or <code class="language-plaintext highlighter-rouge">\(...\)</code> (e.g., <code class="language-plaintext highlighter-rouge">$E=mc^2$</code> or <code class="language-plaintext highlighter-rouge">\(E=mc^2\)</code>).</li>
  <li><strong>Display math</strong>: Use <code class="language-plaintext highlighter-rouge">$$...$$</code> or <code class="language-plaintext highlighter-rouge">\[...\]</code> (e.g., <code class="language-plaintext highlighter-rouge">$$E=mc^2$$</code> or <code class="language-plaintext highlighter-rouge">\[E=mc^2\]</code>).</li>
</ul>

<p>For example:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Inline math: $E=mc^2$ or <span class="se">\(</span>E=mc^2<span class="se">\)</span>.

Display math:
$$E=mc^2$$

or

<span class="se">\[</span>E=mc^2<span class="se">\]</span>
</code></pre></div></div>

<p>Kramdown with the KaTeX math engine will process these into HTML that KaTeX renders.</p>

<h3 id="5-notes-on-katex-vs-mathjax">5. Notes on KaTeX vs. MathJax</h3>
<ul>
  <li><strong>Automatic Equation Numbering</strong>: KaTeX doesn’t support automatic equation numbering like MathJax’s <code class="language-plaintext highlighter-rouge">autoNumber: "AMS"</code>. If you need equation numbers, you must manually add them using <code class="language-plaintext highlighter-rouge">\tag{}</code> in your LaTeX code (e.g., <code class="language-plaintext highlighter-rouge">$$E=mc^2 \tag{1}$$</code>).</li>
  <li><strong>Performance</strong>: KaTeX is significantly faster than MathJax, which is ideal for static sites like Jekyll.</li>
  <li><strong>Feature Set</strong>: KaTeX supports fewer LaTeX commands than MathJax. Check the <a href="https://katex.org/docs/supported.html">KaTeX supported functions</a> to ensure your math expressions are compatible.</li>
  <li><strong>Rendering</strong>: The auto-render script above mimics MathJax’s behavior by automatically rendering math expressions within the specified delimiters. Adjust the <code class="language-plaintext highlighter-rouge">delimiters</code> array in the script if you want to change or limit the delimiters.</li>
</ul>

<h3 id="6-test-your-setup">6. Test Your Setup</h3>
<p>Run your Jekyll site locally (<code class="language-plaintext highlighter-rouge">jekyll serve</code>) and verify that math expressions render correctly. If you encounter issues:</p>
<ul>
  <li>Check the browser console for KaTeX-related errors.</li>
  <li>Ensure the KaTeX CDN URLs are up-to-date (the ones above use version 0.16.11, the latest as of my knowledge).</li>
  <li>Confirm that your Markdown files use valid KaTeX-compatible LaTeX syntax.</li>
</ul>

<h3 id="7-optional-local-katex-files">7. Optional: Local KaTeX Files</h3>
<p>If you prefer to host KaTeX files locally to avoid CDN dependency:</p>
<ol>
  <li>Download <code class="language-plaintext highlighter-rouge">katex.min.css</code>, <code class="language-plaintext highlighter-rouge">katex.min.js</code>, and <code class="language-plaintext highlighter-rouge">auto-render.min.js</code> from the <a href="https://github.com/KaTeX/KaTeX/releases">KaTeX GitHub releases</a>.</li>
  <li>Place them in your Jekyll assets folder (e.g., <code class="language-plaintext highlighter-rouge">assets/katex/</code>).</li>
  <li>Update the <code class="language-plaintext highlighter-rouge">&lt;link&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tags to point to your local files (e.g., <code class="language-plaintext highlighter-rouge">/assets/katex/katex.min.css</code>).</li>
</ol>

<h3 id="8-troubleshooting">8. Troubleshooting</h3>
<ul>
  <li><strong>Math not rendering</strong>: Ensure the KaTeX scripts are loading correctly and the <code class="language-plaintext highlighter-rouge">kramdown.math_engine</code> is set to <code class="language-plaintext highlighter-rouge">katex</code>.</li>
  <li><strong>Delimiter issues</strong>: Verify that your delimiters in the auto-render script match those in your Markdown.</li>
  <li><strong>Unsupported commands</strong>: If a LaTeX command fails, check the KaTeX documentation for supported commands or rewrite the expression.</li>
</ul>

<p>If you need specific help with a particular math expression or configuration, share the details, and I can provide tailored guidance!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
