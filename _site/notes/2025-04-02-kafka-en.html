<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Apache Kafka</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Apache Kafka | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Apache Kafka" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-04-02-kafka-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-04-02-kafka-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Apache Kafka" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Apache Kafka","url":"https://lzwjava.github.io/notes/2025-04-02-kafka-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=1f84d5e681784ac288d87139b67cfd129108442b">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=1f84d5e681784ac288d87139b67cfd129108442b" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Apache Kafka | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-04-02-kafka-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-04-02-kafka-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/kafka-en" selected>English</option>
        <option value="/kafka-zh" >中文</option>
        <option value="/kafka-ja" >日本語</option>
        <option value="/kafka-es" >Español</option>
        <option value="/kafka-hi" >हिंदी</option>
        <option value="/kafka-fr" >Français</option>
        <option value="/kafka-de" >Deutsch</option>
        <option value="/kafka-ar" >العربية</option>
        <option value="/kafka-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>It seems there might be a misunderstanding in your request. Based on your previous question about Redis and the context of this one, I assume you’re asking for a comprehensive guide about <strong>Apache Kafka</strong>, the distributed event streaming platform, rather than Franz Kafka, the author. If I’ve misunderstood and you meant something else, please clarify! For now, here’s a detailed guide on Apache Kafka.</p>

<hr />

<h3 id="what-is-apache-kafka">What is Apache Kafka?</h3>
<p>Apache Kafka is an open-source, distributed event streaming platform designed for high-throughput, fault-tolerant, and scalable real-time data processing. Originally developed by LinkedIn in 2010 and later donated to the Apache Software Foundation in 2011, Kafka is written in Java and Scala. It’s widely used for building real-time data pipelines, streaming applications, and event-driven architectures.</p>

<p>Key characteristics:</p>
<ul>
  <li><strong>Distributed</strong>: Runs as a cluster across multiple servers.</li>
  <li><strong>Event-driven</strong>: Processes streams of events in real time.</li>
  <li><strong>Persistent</strong>: Stores data durably on disk with configurable retention.</li>
  <li><strong>Scalable</strong>: Handles trillions of events per day.</li>
</ul>

<hr />

<h3 id="why-use-kafka">Why Use Kafka?</h3>
<p>Kafka excels in scenarios requiring real-time data processing and high scalability. Common use cases include:</p>
<ol>
  <li><strong>Messaging</strong>: Replaces traditional message brokers (e.g., RabbitMQ) with better throughput and fault tolerance.</li>
  <li><strong>Activity Tracking</strong>: Tracks user actions (e.g., clicks, logins) in real time.</li>
  <li><strong>Log Aggregation</strong>: Collects logs from multiple sources for centralized processing.</li>
  <li><strong>Stream Processing</strong>: Powers real-time analytics or transformations.</li>
  <li><strong>Event Sourcing</strong>: Logs state changes for applications.</li>
  <li><strong>Metrics Collection</strong>: Monitors systems or IoT devices.</li>
</ol>

<hr />

<h3 id="key-features">Key Features</h3>
<ol>
  <li><strong>Core Components</strong>:
    <ul>
      <li><strong>Topics</strong>: Categories where messages (events) are published.</li>
      <li><strong>Partitions</strong>: Subdivisions of topics for parallelism and scalability.</li>
      <li><strong>Producers</strong>: Applications that send messages to topics.</li>
      <li><strong>Consumers</strong>: Applications that read messages from topics.</li>
      <li><strong>Brokers</strong>: Servers in a Kafka cluster that store and manage data.</li>
    </ul>
  </li>
  <li><strong>Replication</strong>: Ensures fault tolerance by duplicating data across brokers.</li>
  <li><strong>Retention</strong>: Configurable data retention (time-based or size-based).</li>
  <li><strong>Kafka Connect</strong>: Integrates with external systems (e.g., databases, files).</li>
  <li><strong>Kafka Streams</strong>: A library for real-time stream processing.</li>
  <li><strong>High Throughput</strong>: Processes millions of messages per second with low latency (e.g., 2ms).</li>
</ol>

<hr />

<h3 id="architecture">Architecture</h3>
<p>Kafka’s architecture is built around a distributed commit log:</p>
<ul>
  <li><strong>Cluster</strong>: A group of brokers working together.</li>
  <li><strong>Topics and Partitions</strong>: Messages are written to topics, which are split into partitions for load balancing and scalability. Each partition is an ordered, immutable log.</li>
  <li><strong>Replication</strong>: Each partition has a leader and replicas; if the leader fails, a replica takes over.</li>
  <li><strong>Offsets</strong>: Unique identifiers for messages within a partition, allowing consumers to track their position.</li>
  <li><strong>ZooKeeper (or KRaft)</strong>: Traditionally, ZooKeeper manages cluster metadata and coordination. Since Kafka 3.3, KRaft (Kafka Raft) mode allows self-managed metadata, removing the ZooKeeper dependency.</li>
</ul>

<hr />

<h3 id="installation">Installation</h3>
<p>Here’s how to install Kafka on a Linux system (assumes Java 8+ is installed):</p>

<ol>
  <li><strong>Download Kafka</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://downloads.apache.org/kafka/3.7.0/kafka_2.13-3.7.0.tgz
<span class="nb">tar</span> <span class="nt">-xzf</span> kafka_2.13-3.7.0.tgz
<span class="nb">cd </span>kafka_2.13-3.7.0
</code></pre></div>    </div>
  </li>
  <li><strong>Start ZooKeeper</strong> (if not using KRaft):
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/zookeeper-server-start.sh config/zookeeper.properties
</code></pre></div>    </div>
  </li>
  <li><strong>Start Kafka Server</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/kafka-server-start.sh config/server.properties
</code></pre></div>    </div>
  </li>
  <li><strong>Create a Topic</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/kafka-topics.sh <span class="nt">--create</span> <span class="nt">--topic</span> mytopic <span class="nt">--bootstrap-server</span> localhost:9092 <span class="nt">--partitions</span> 1 <span class="nt">--replication-factor</span> 1
</code></pre></div>    </div>
  </li>
  <li><strong>Verify</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/kafka-topics.sh <span class="nt">--list</span> <span class="nt">--bootstrap-server</span> localhost:9092
</code></pre></div>    </div>
  </li>
</ol>

<p>For KRaft mode (ZooKeeper-free), generate a cluster ID and adjust <code class="language-plaintext highlighter-rouge">config/kraft/server.properties</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/kafka-storage.sh random-uuid
bin/kafka-storage.sh format <span class="nt">-t</span> &lt;UUID&gt; <span class="nt">-c</span> config/kraft/server.properties
bin/kafka-server-start.sh config/kraft/server.properties
</code></pre></div></div>

<hr />

<h3 id="basic-operations">Basic Operations</h3>
<p>Kafka uses a command-line interface or client libraries. Examples via <code class="language-plaintext highlighter-rouge">kafka-console-*</code> tools:</p>

<h4 id="producing-messages">Producing Messages</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/kafka-console-producer.sh <span class="nt">--topic</span> mytopic <span class="nt">--bootstrap-server</span> localhost:9092
<span class="o">&gt;</span> Hello, Kafka!
<span class="o">&gt;</span> Another message
</code></pre></div></div>

<h4 id="consuming-messages">Consuming Messages</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/kafka-console-consumer.sh <span class="nt">--topic</span> mytopic <span class="nt">--from-beginning</span> <span class="nt">--bootstrap-server</span> localhost:9092
</code></pre></div></div>
<p>Output: <code class="language-plaintext highlighter-rouge">Hello, Kafka!</code> <code class="language-plaintext highlighter-rouge">Another message</code></p>

<h4 id="key-commands">Key Commands</h4>
<ul>
  <li>List topics: <code class="language-plaintext highlighter-rouge">bin/kafka-topics.sh --list --bootstrap-server localhost:9092</code></li>
  <li>Describe topic: <code class="language-plaintext highlighter-rouge">bin/kafka-topics.sh --describe --topic mytopic --bootstrap-server localhost:9092</code></li>
</ul>

<hr />

<h3 id="programming-with-kafka">Programming with Kafka</h3>
<p>Kafka supports many languages via client libraries. Here’s a Python example using <code class="language-plaintext highlighter-rouge">kafka-python</code>:</p>

<ol>
  <li><strong>Install Library</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>kafka-python
</code></pre></div>    </div>
  </li>
  <li><strong>Producer Example</strong>:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">kafka</span> <span class="kn">import</span> <span class="n">KafkaProducer</span>

<span class="n">producer</span> <span class="o">=</span> <span class="n">KafkaProducer</span><span class="p">(</span><span class="n">bootstrap_servers</span><span class="o">=</span><span class="s">'localhost:9092'</span><span class="p">)</span>
<span class="n">producer</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="s">'mytopic'</span><span class="p">,</span> <span class="sa">b</span><span class="s">'Hello, Kafka!'</span><span class="p">)</span>
<span class="n">producer</span><span class="p">.</span><span class="n">flush</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Consumer Example</strong>:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">kafka</span> <span class="kn">import</span> <span class="n">KafkaConsumer</span>

<span class="n">consumer</span> <span class="o">=</span> <span class="n">KafkaConsumer</span><span class="p">(</span><span class="s">'mytopic'</span><span class="p">,</span> <span class="n">bootstrap_servers</span><span class="o">=</span><span class="s">'localhost:9092'</span><span class="p">,</span> <span class="n">auto_offset_reset</span><span class="o">=</span><span class="s">'earliest'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">consumer</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">))</span>
</code></pre></div>    </div>
  </li>
</ol>

<hr />

<h3 id="advanced-concepts">Advanced Concepts</h3>
<ol>
  <li><strong>Consumer Groups</strong>:
    <ul>
      <li>Multiple consumers in a group share partitions; each message is processed once per group.</li>
      <li>Example: <code class="language-plaintext highlighter-rouge">group.id=mygroup</code> in consumer config.</li>
    </ul>
  </li>
  <li><strong>Replication and Fault Tolerance</strong>:
    <ul>
      <li>Set <code class="language-plaintext highlighter-rouge">replication-factor</code> &gt; 1 to ensure data survives broker failures.</li>
      <li>Example: <code class="language-plaintext highlighter-rouge">--replication-factor 3</code>.</li>
    </ul>
  </li>
  <li><strong>Kafka Streams</strong>:
    <ul>
      <li>Process data in real time (e.g., aggregations, joins).</li>
      <li>Example in Java:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">StreamsBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StreamsBuilder</span><span class="o">();</span>
<span class="nc">KStream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="s">"mytopic"</span><span class="o">);</span>
<span class="n">stream</span><span class="o">.</span><span class="na">foreach</span><span class="o">((</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Kafka Connect</strong>:
    <ul>
      <li>Import/export data (e.g., from MySQL to Kafka).</li>
      <li>Example: Use a JDBC source connector.</li>
    </ul>
  </li>
  <li><strong>Retention and Compaction</strong>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">log.retention.hours=168</code> (7 days default).</li>
      <li>Log compaction keeps the latest value per key.</li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="performance-tips">Performance Tips</h3>
<ol>
  <li><strong>Partitioning</strong>: Increase partitions for parallelism but avoid over-partitioning (e.g., 10-100 per topic).</li>
  <li><strong>Batching</strong>: Tune <code class="language-plaintext highlighter-rouge">batch.size</code> and <code class="language-plaintext highlighter-rouge">linger.ms</code> for higher throughput.</li>
  <li><strong>Compression</strong>: Enable with <code class="language-plaintext highlighter-rouge">compression.type=gzip</code>.</li>
  <li><strong>Monitoring</strong>: Use tools like Kafka Manager or Prometheus + Grafana.</li>
</ol>

<hr />

<h3 id="security">Security</h3>
<ul>
  <li><strong>Authentication</strong>: Enable SASL (e.g., <code class="language-plaintext highlighter-rouge">sasl.mechanism=PLAIN</code>).</li>
  <li><strong>Authorization</strong>: Use ACLs via <code class="language-plaintext highlighter-rouge">kafka-acls.sh</code>.</li>
  <li><strong>Encryption</strong>: Configure SSL (<code class="language-plaintext highlighter-rouge">security.protocol=SSL</code>).</li>
  <li><strong>Restrict Access</strong>: Bind to specific IPs in <code class="language-plaintext highlighter-rouge">server.properties</code>.</li>
</ul>

<hr />

<h3 id="kafka-vs-others">Kafka vs. Others</h3>
<ul>
  <li><strong>Kafka vs. RabbitMQ</strong>: Kafka offers higher throughput and persistence; RabbitMQ is simpler for traditional messaging.</li>
  <li><strong>Kafka vs. Redis</strong>: Kafka is for event streaming; Redis is for in-memory caching/key-value storage.</li>
  <li><strong>Kafka vs. AWS Kinesis</strong>: Kafka is self-managed and more customizable; Kinesis is fully managed.</li>
</ul>

<hr />

<h3 id="limitations">Limitations</h3>
<ul>
  <li><strong>Complexity</strong>: Steep learning curve for clustering and tuning.</li>
  <li><strong>Resource Intensive</strong>: Requires significant memory and disk space.</li>
  <li><strong>No Native Querying</strong>: Relies on external tools (e.g., Kafka Streams) for processing.</li>
</ul>

<hr />

<h3 id="resources">Resources</h3>
<ul>
  <li><strong>Official Site</strong>: <a href="https://kafka.apache.org">kafka.apache.org</a></li>
  <li><strong>Docs</strong>: <a href="https://kafka.apache.org/documentation">kafka.apache.org/documentation</a></li>
  <li><strong>Confluent</strong>: <a href="https://www.confluent.io">confluent.io</a> (tutorials, managed Kafka)</li>
</ul>

<hr />

<p>This guide covers Kafka’s essentials and beyond. Let me know if you’d like to explore a specific area (e.g., clustering, Streams, or a use case) in more depth!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
