<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Java Language Server and Maven Build</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Java Language Server and Maven Build | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Java Language Server and Maven Build" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-02-24-vscode-java-issue-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-02-24-vscode-java-issue-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Java Language Server and Maven Build" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Java Language Server and Maven Build","url":"https://lzwjava.github.io/notes/2025-02-24-vscode-java-issue-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=900d871e2267e8b06f47bb016b987c981f342aba">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=900d871e2267e8b06f47bb016b987c981f342aba" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Java Language Server and Maven Build | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-02-24-vscode-java-issue-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-02-24-vscode-java-issue-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/vscode-java-issue-en" selected>English</option>
        <option value="/vscode-java-issue-zh" >中文</option>
        <option value="/vscode-java-issue-ja" >日本語</option>
        <option value="/vscode-java-issue-es" >Español</option>
        <option value="/vscode-java-issue-hi" >हिंदी</option>
        <option value="/vscode-java-issue-fr" >Français</option>
        <option value="/vscode-java-issue-de" >Deutsch</option>
        <option value="/vscode-java-issue-ar" >العربية</option>
        <option value="/vscode-java-issue-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>It sounds like you’re facing two related issues in Visual Studio Code (VSCode): a complaint about needing at least Java 21, and problems with VSCode not recognizing some object definitions in your Java code, even though your Maven build compiles successfully. Let’s resolve this step by step.</p>

<p>The issue arises because VSCode’s Java extensions (specifically the Java Language Server) and your Maven build might not be aligned in terms of the Java Development Kit (JDK) version or project configuration. VSCode is flagging that it requires JDK 21 to function properly, and the parsing errors suggest it’s not interpreting your code the same way Maven does. Here’s how to fix it:</p>

<hr />

<h3 id="step-1-install-jdk-21">Step 1: Install JDK 21</h3>
<p>Since VSCode is explicitly asking for Java 21, you’ll need to ensure it’s installed on your system.</p>

<ul>
  <li><strong>Download JDK 21</strong>: Get it from a trusted source like <a href="https://www.oracle.com/java/technologies/javase-jdk21-downloads.html">Oracle’s website</a> or <a href="https://adoptium.net/">Adoptium</a>.</li>
  <li><strong>Install it</strong>: Follow the installation instructions and note the installation path (e.g., <code class="language-plaintext highlighter-rouge">C:\Program Files\Java\jdk-21</code> on Windows or <code class="language-plaintext highlighter-rouge">/usr/lib/jvm/java-21-openjdk</code> on Linux).</li>
  <li><strong>Verify</strong>: Open a terminal and run <code class="language-plaintext highlighter-rouge">java -version</code>. You should see something like:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java version "21.0.1" ...
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="step-2-configure-vscode-to-use-jdk-21">Step 2: Configure VSCode to Use JDK 21</h3>
<p>You need to tell VSCode’s Java extensions to use JDK 21. Here’s how:</p>

<ol>
  <li><strong>Open VSCode Settings</strong>:
    <ul>
      <li>Go to <code class="language-plaintext highlighter-rouge">File &gt; Preferences &gt; Settings</code> (or press <code class="language-plaintext highlighter-rouge">Ctrl + ,</code>).</li>
    </ul>
  </li>
  <li><strong>Set the JDK Path</strong>:
    <ul>
      <li>Search for <code class="language-plaintext highlighter-rouge">java.jdt.ls.java.home</code>.</li>
      <li>Enter the path to your JDK 21 installation (e.g., <code class="language-plaintext highlighter-rouge">C:\Program Files\Java\jdk-21</code>).</li>
      <li>Optionally, search for <code class="language-plaintext highlighter-rouge">java.home</code> and set it to the same path for consistency.</li>
    </ul>
  </li>
  <li><strong>Edit <code class="language-plaintext highlighter-rouge">settings.json</code> (Alternative)</strong>:
    <ul>
      <li>Open the Command Palette (<code class="language-plaintext highlighter-rouge">Ctrl + Shift + P</code>), type “Preferences: Open Settings (JSON)”, and add:
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"java.jdt.ls.java.home"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C:</span><span class="se">\\</span><span class="s2">Program Files</span><span class="se">\\</span><span class="s2">Java</span><span class="se">\\</span><span class="s2">jdk-21"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"java.home"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C:</span><span class="se">\\</span><span class="s2">Program Files</span><span class="se">\\</span><span class="s2">Java</span><span class="se">\\</span><span class="s2">jdk-21"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>        </div>
      </li>
      <li>Adjust the path based on your system (use forward slashes <code class="language-plaintext highlighter-rouge">/</code> for Linux/Mac).</li>
    </ul>
  </li>
</ol>

<p>This ensures the Java Language Server in VSCode uses JDK 21, meeting the minimum requirement.</p>

<hr />

<h3 id="step-3-set-the-projects-jdk-in-vscode">Step 3: Set the Project’s JDK in VSCode</h3>
<p>To fix the parsing issues (e.g., object definitions not being found), ensure your project in VSCode uses JDK 21 as well:</p>

<ul>
  <li>In <code class="language-plaintext highlighter-rouge">settings.json</code>, add the following to specify JDK 21 for your project:
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"java.configuration.runtimes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JavaSE-21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C:</span><span class="se">\\</span><span class="s2">Program Files</span><span class="se">\\</span><span class="s2">Java</span><span class="se">\\</span><span class="s2">jdk-21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>This aligns VSCode’s project runtime with JDK 21, which should help it parse your code correctly.</li>
</ul>

<hr />

<h3 id="step-4-verify-mavens-jdk-configuration">Step 4: Verify Maven’s JDK Configuration</h3>
<p>Since your Maven build (<code class="language-plaintext highlighter-rouge">mvn compile</code>) works fine, it’s likely using a compatible JDK. Let’s confirm and align it with VSCode:</p>

<ol>
  <li><strong>Check Maven’s JDK</strong>:
    <ul>
      <li>Run <code class="language-plaintext highlighter-rouge">mvn -version</code> in your terminal. Look for the “Java version” line (e.g., <code class="language-plaintext highlighter-rouge">Java version: 21.0.1</code>).</li>
      <li>If it’s not using JDK 21, set the <code class="language-plaintext highlighter-rouge">JAVA_HOME</code> environment variable to your JDK 21 path:
        <ul>
          <li><strong>Windows</strong>: <code class="language-plaintext highlighter-rouge">set JAVA_HOME=C:\Program Files\Java\jdk-21</code></li>
          <li><strong>Linux/Mac</strong>: <code class="language-plaintext highlighter-rouge">export JAVA_HOME=/usr/lib/jvm/java-21-openjdk</code></li>
        </ul>
      </li>
      <li>Run <code class="language-plaintext highlighter-rouge">mvn -version</code> again to confirm.</li>
    </ul>
  </li>
  <li><strong>Specify JDK in <code class="language-plaintext highlighter-rouge">pom.xml</code></strong> (optional):
    <ul>
      <li>If you want to enforce JDK 21 in your Maven project, add this to your <code class="language-plaintext highlighter-rouge">pom.xml</code>:
        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;maven.compiler.source&gt;</span>21<span class="nt">&lt;/maven.compiler.source&gt;</span>
    <span class="nt">&lt;maven.compiler.target&gt;</span>21<span class="nt">&lt;/maven.compiler.target&gt;</span>
<span class="nt">&lt;/properties&gt;</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="step-5-refresh-vscode">Step 5: Refresh VSCode</h3>
<p>After making these changes, VSCode needs a refresh to apply them:</p>

<ul>
  <li>Reload VSCode:
    <ul>
      <li>Open the Command Palette (<code class="language-plaintext highlighter-rouge">Ctrl + Shift + P</code>) and select “Developer: Reload Window”.</li>
    </ul>
  </li>
  <li>Alternatively, close and reopen VSCode.</li>
</ul>

<hr />

<h3 id="step-6-ensure-dependencies-are-loaded">Step 6: Ensure Dependencies Are Loaded</h3>
<p>If VSCode still can’t find object definitions, it might not have loaded your Maven dependencies properly:</p>

<ol>
  <li><strong>Clean the Workspace</strong>:
    <ul>
      <li>Open the Command Palette (<code class="language-plaintext highlighter-rouge">Ctrl + Shift + P</code>).</li>
      <li>Run “Java: Clean Java Language Server Workspace”.</li>
    </ul>
  </li>
  <li><strong>Force Compilation</strong>:
    <ul>
      <li>Run “Java: Force Java Compilation” from the Command Palette.</li>
    </ul>
  </li>
  <li><strong>Check Imports</strong>:
    <ul>
      <li>Ensure your project’s Maven dependencies are imported by right-clicking your <code class="language-plaintext highlighter-rouge">pom.xml</code> in VSCode and selecting “Update Project Configuration”.</li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="troubleshooting">Troubleshooting</h3>
<p>If the problem persists:</p>
<ul>
  <li><strong>Check Logs</strong>:
    <ul>
      <li>Add <code class="language-plaintext highlighter-rouge">"java.trace.server": "verbose"</code> to <code class="language-plaintext highlighter-rouge">settings.json</code>.</li>
      <li>Open the Output panel (<code class="language-plaintext highlighter-rouge">Ctrl + Shift + U</code>) and select “Java Language Server” to view detailed logs.</li>
    </ul>
  </li>
  <li><strong>Verify Code</strong>:
    <ul>
      <li>Double-check that the missing object definitions are from your code or dependencies listed in <code class="language-plaintext highlighter-rouge">pom.xml</code>, not external issues.</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="summary">Summary</h3>
<p>By installing JDK 21, configuring VSCode to use it, aligning your project and Maven settings, and refreshing the environment, VSCode should stop complaining about Java 21 and correctly parse your code, matching Maven’s successful compilation. Let me know if you hit any snags!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
