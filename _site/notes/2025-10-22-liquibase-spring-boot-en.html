<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Integrating Liquibase with Spring Boot</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Integrating Liquibase with Spring Boot | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Integrating Liquibase with Spring Boot" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-10-22-liquibase-spring-boot-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-10-22-liquibase-spring-boot-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Integrating Liquibase with Spring Boot" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Integrating Liquibase with Spring Boot","url":"https://lzwjava.github.io/notes/2025-10-22-liquibase-spring-boot-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=5592bdc6a776674fac55c39688916d90707b2273">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=5592bdc6a776674fac55c39688916d90707b2273" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Integrating Liquibase with Spring Boot | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-10-22-liquibase-spring-boot-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-10-22-liquibase-spring-boot-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/liquibase-spring-boot-en" selected>English</option>
        <option value="/liquibase-spring-boot-zh" >中文</option>
        <option value="/liquibase-spring-boot-ja" >日本語</option>
        <option value="/liquibase-spring-boot-es" >Español</option>
        <option value="/liquibase-spring-boot-hi" >हिंदी</option>
        <option value="/liquibase-spring-boot-fr" >Français</option>
        <option value="/liquibase-spring-boot-de" >Deutsch</option>
        <option value="/liquibase-spring-boot-ar" >العربية</option>
        <option value="/liquibase-spring-boot-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h2 id="integrating-liquibase-with-spring-boot">Integrating Liquibase with Spring Boot</h2>

<p>Liquibase is a popular open-source tool for managing database schema changes (migrations) in a version-controlled way. Spring Boot provides excellent auto-configuration support for Liquibase, making it easy to integrate. This guide assumes you’re using Spring Boot 3.x (the latest as of 2025) with Maven, but the concepts apply to Gradle too. We’ll cover the basics step by step.</p>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
  <li>A Spring Boot project set up (e.g., via Spring Initializr).</li>
  <li>A database (e.g., H2 for testing, PostgreSQL/MySQL for production) configured in <code class="language-plaintext highlighter-rouge">application.properties</code>.</li>
</ul>

<h3 id="step-1-add-liquibase-dependency">Step 1: Add Liquibase Dependency</h3>
<p>Include the Liquibase Spring Boot starter in your <code class="language-plaintext highlighter-rouge">pom.xml</code>. This pulls in Liquibase and integrates it seamlessly.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.liquibase<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>liquibase-core<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-jdbc<span class="nt">&lt;/artifactId&gt;</span> <span class="c">&lt;!-- For database connectivity --&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>For Gradle, add to <code class="language-plaintext highlighter-rouge">build.gradle</code>:</p>
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span> <span class="s1">'org.liquibase:liquibase-core'</span>
<span class="n">implementation</span> <span class="s1">'org.springframework.boot:spring-boot-starter-jdbc'</span>
</code></pre></div></div>

<p>Run <code class="language-plaintext highlighter-rouge">mvn clean install</code> (or <code class="language-plaintext highlighter-rouge">./gradlew build</code>) to fetch dependencies.</p>

<h3 id="step-2-configure-liquibase">Step 2: Configure Liquibase</h3>
<p>Spring Boot auto-detects Liquibase if you place changelog files in the default location. Customize via <code class="language-plaintext highlighter-rouge">application.properties</code> (or <code class="language-plaintext highlighter-rouge">.yml</code> equivalent).</p>

<p>Example <code class="language-plaintext highlighter-rouge">application.properties</code>:</p>
<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Database setup (adjust for your DB)
</span><span class="py">spring.datasource.url</span><span class="p">=</span><span class="s">jdbc:h2:mem:testdb</span>
<span class="py">spring.datasource.driver-class-name</span><span class="p">=</span><span class="s">org.h2.Driver</span>
<span class="py">spring.datasource.username</span><span class="p">=</span><span class="s">sa</span>
<span class="py">spring.datasource.password</span><span class="p">=</span>

<span class="c"># Liquibase configuration
</span><span class="py">spring.liquibase.change-log</span><span class="p">=</span><span class="s">classpath:db/changelog/db.changelog-master.xml</span>
<span class="py">spring.liquibase.enabled</span><span class="p">=</span><span class="s">true  # Default is true</span>
<span class="py">spring.liquibase.drop-first</span><span class="p">=</span><span class="s">false  # Set to true for dev to drop schema on startup</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">change-log</code>: Path to your master changelog file (default: <code class="language-plaintext highlighter-rouge">db/changelog/db.changelog-master.xml</code>).</li>
  <li>Enable/disable with <code class="language-plaintext highlighter-rouge">spring.liquibase.enabled</code>.</li>
  <li>For contexts/profiles, use <code class="language-plaintext highlighter-rouge">spring.liquibase.contexts=dev</code> to run specific changes.</li>
</ul>

<h3 id="step-3-create-changelog-files">Step 3: Create Changelog Files</h3>
<p>Liquibase uses “changelogs” to define schema changes. Create a directory structure under <code class="language-plaintext highlighter-rouge">src/main/resources</code>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src/main/resources/
└── db/
    └── changelog/
        ├── db.changelog-master.xml  # Master file including others
        └── changes/
            ├── 001-create-users-table.xml  # Individual changes
            └── 002-add-email-column.xml
</code></pre></div></div>

<h4 id="master-changelog-dbchangelog-masterxml">Master Changelog (<code class="language-plaintext highlighter-rouge">db.changelog-master.xml</code>)</h4>
<p>This includes other changelogs:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;databaseChangeLog</span>
    <span class="na">xmlns=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">"changes/001-create-users-table.xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">"changes/002-add-email-column.xml"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/databaseChangeLog&gt;</span>
</code></pre></div></div>

<h4 id="sample-change-001-create-users-tablexml">Sample Change (<code class="language-plaintext highlighter-rouge">001-create-users-table.xml</code>)</h4>
<p>Define a table creation:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;databaseChangeLog</span> <span class="na">xmlns=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog"</span>
                   <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
                   <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;changeSet</span> <span class="na">id=</span><span class="s">"001"</span> <span class="na">author=</span><span class="s">"yourname"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;createTable</span> <span class="na">tableName=</span><span class="s">"users"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">type=</span><span class="s">"bigint"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;constraints</span> <span class="na">primaryKey=</span><span class="s">"true"</span> <span class="na">nullable=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/column&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">type=</span><span class="s">"varchar(255)"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;constraints</span> <span class="na">nullable=</span><span class="s">"false"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/column&gt;</span>
        <span class="nt">&lt;/createTable&gt;</span>
    <span class="nt">&lt;/changeSet&gt;</span>
<span class="nt">&lt;/databaseChangeLog&gt;</span>
</code></pre></div></div>

<ul>
  <li>Use XML, YAML, JSON, or SQL formats for changelogs.</li>
  <li>Each <code class="language-plaintext highlighter-rouge">&lt;changeSet&gt;</code> is a migration with an ID (for tracking).</li>
  <li>Run <code class="language-plaintext highlighter-rouge">java -jar target/your-app.jar</code> to start the app—Liquibase applies changes automatically on bootstrap.</li>
</ul>

<h3 id="step-4-running-and-testing">Step 4: Running and Testing</h3>
<ul>
  <li><strong>On Startup</strong>: Spring Boot runs Liquibase before your app fully starts.</li>
  <li><strong>Rollback</strong>: Use <code class="language-plaintext highlighter-rouge">spring.liquibase.rollback-file</code> or CLI for testing.</li>
  <li><strong>CLI Integration</strong>: For manual runs, add the Liquibase Maven plugin:
    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.liquibase<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>liquibase-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>4.24.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;changeLogFile&gt;</span>src/main/resources/db/changelog/db.changelog-master.xml<span class="nt">&lt;/changeLogFile&gt;</span>
        <span class="nt">&lt;url&gt;</span>jdbc:h2:mem:testdb<span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;username&gt;</span>sa<span class="nt">&lt;/username&gt;</span>
        <span class="nt">&lt;password&gt;&lt;/password&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div>    </div>
    <p>Then run <code class="language-plaintext highlighter-rouge">mvn liquibase:update</code>.</p>
  </li>
  <li><strong>Validation</strong>: Enable <code class="language-plaintext highlighter-rouge">spring.liquibase.validate-on-migrate=true</code> to check changelogs.</li>
</ul>

<h3 id="common-tips">Common Tips</h3>
<ul>
  <li><strong>Profiles</strong>: Use <code class="language-plaintext highlighter-rouge">@Profile("dev")</code> on beans if needed, but Liquibase runs globally unless filtered.</li>
  <li><strong>Preconditions</strong>: Add <code class="language-plaintext highlighter-rouge">&lt;preConditions&gt;</code> in changesets to check DB state.</li>
  <li><strong>SQL Format</strong>: For raw SQL, create <code class="language-plaintext highlighter-rouge">.sql</code> files and include them: <code class="language-plaintext highlighter-rouge">&lt;sqlFile path="changes/create-users.sql" relativeToChangelogFile="true"/&gt;</code>.</li>
  <li><strong>Troubleshooting</strong>: Check logs for errors (e.g., <code class="language-plaintext highlighter-rouge">liquibase</code> prefixed). Ensure DB URL is correct.</li>
  <li><strong>Production</strong>: Use Flyway if you prefer, but Liquibase excels with complex changes and multi-DB support.</li>
</ul>

<p>For advanced features like tagged rollbacks or custom extensions, refer to the docs.</p>

<h3 id="references">References</h3>
<ul>
  <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#io.liquibase">Spring Boot Liquibase Auto-Configuration</a></li>
  <li><a href="https://docs.liquibase.com/start/home.html">Liquibase Official Documentation</a></li>
  <li><a href="https://www.baeldung.com/liquibase-refactor-schema-of-jpa-entity-in-spring-boot">Baeldung Spring Boot + Liquibase Tutorial</a></li>
</ul>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    
      <p class="model">x-ai/grok-4-fast</p>
    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
