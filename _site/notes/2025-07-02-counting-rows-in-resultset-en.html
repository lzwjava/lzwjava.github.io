<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Counting Rows in Scrollable ResultSet</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Counting Rows in Scrollable ResultSet | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Counting Rows in Scrollable ResultSet" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-07-02-counting-rows-in-resultset-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-07-02-counting-rows-in-resultset-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Counting Rows in Scrollable ResultSet" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Counting Rows in Scrollable ResultSet","url":"https://lzwjava.github.io/notes/2025-07-02-counting-rows-in-resultset-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=ecbb0e0ccd2ca867ba6f4e2006434dab05494a0d">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=ecbb0e0ccd2ca867ba6f4e2006434dab05494a0d" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Counting Rows in Scrollable ResultSet | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-07-02-counting-rows-in-resultset-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-07-02-counting-rows-in-resultset-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/counting-rows-in-resultset-en" selected>English</option>
        <option value="/counting-rows-in-resultset-zh" >中文</option>
        <option value="/counting-rows-in-resultset-ja" >日本語</option>
        <option value="/counting-rows-in-resultset-es" >Español</option>
        <option value="/counting-rows-in-resultset-hi" >हिंदी</option>
        <option value="/counting-rows-in-resultset-fr" >Français</option>
        <option value="/counting-rows-in-resultset-de" >Deutsch</option>
        <option value="/counting-rows-in-resultset-ar" >العربية</option>
        <option value="/counting-rows-in-resultset-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>In Java, when you are working with a <code class="language-plaintext highlighter-rouge">ResultSet</code> (e.g., through <code class="language-plaintext highlighter-rouge">Statement.executeQuery()</code>), counting the rows can be tricky if the <code class="language-plaintext highlighter-rouge">fetchSize</code> is set to <code class="language-plaintext highlighter-rouge">0</code> (which means that the JDBC driver will fetch rows as needed). Moreover, using a scrollable result set (using <code class="language-plaintext highlighter-rouge">ResultSet.TYPE_SCROLL_INSENSITIVE</code> or <code class="language-plaintext highlighter-rouge">ResultSet.TYPE_SCROLL_SENSITIVE</code>) allows you to navigate through the result set but requires more memory as the rows are loaded into the memory.</p>

<p>Here’s a strategy you can use to count rows in a <code class="language-plaintext highlighter-rouge">ResultSet</code> without requiring a complete traversal of the result set. It uses the <code class="language-plaintext highlighter-rouge">scrollable</code> feature of the <code class="language-plaintext highlighter-rouge">ResultSet</code> and the ability to “go to the last row” and “get the row number”.</p>

<h3 id="steps-to-count-rows-using-a-scrollable-resultset">Steps to count rows using a scrollable <code class="language-plaintext highlighter-rouge">ResultSet</code>:</h3>

<ol>
  <li><strong>Create a scrollable ResultSet</strong>: Make sure to use a <code class="language-plaintext highlighter-rouge">Statement</code> that can generate scrollable result sets by setting the appropriate cursor type.</li>
  <li><strong>Move to the last row</strong>: The scrollable result set allows you to go to the last row using <code class="language-plaintext highlighter-rouge">last()</code>.</li>
  <li><strong>Get the row number</strong>: After moving to the last row, you can call <code class="language-plaintext highlighter-rouge">getRow()</code> to determine the number of rows.</li>
  <li><strong>Optional</strong>: If you need to iterate through the result set, move back to the first row using <code class="language-plaintext highlighter-rouge">first()</code>.</li>
</ol>

<p>Here is an example implementation in Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RowCountExample</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"jdbc:mysql://localhost:3306/your_database"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"your_username"</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"your_password"</span><span class="o">;</span>
        
        <span class="nc">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">Statement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">conn</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">createStatement</span><span class="o">(</span>
                    <span class="nc">ResultSet</span><span class="o">.</span><span class="na">TYPE_SCROLL_INSENSITIVE</span><span class="o">,</span> 
                    <span class="nc">ResultSet</span><span class="o">.</span><span class="na">CONCUR_READ_ONLY</span><span class="o">);</span>
            <span class="n">rs</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"SELECT * FROM your_table"</span><span class="o">);</span>
            
            <span class="c1">// Move to the last row to count the total number of rows</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">last</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">rowCount</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getRow</span><span class="o">();</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Total rows: "</span> <span class="o">+</span> <span class="n">rowCount</span><span class="o">);</span>
                
                <span class="c1">// Optionally, move back to the first row</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">rs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">stmt</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">stmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">conn</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="key-points">Key Points:</h3>

<ul>
  <li><strong>Scrollable ResultSet</strong>: We create a scrollable <code class="language-plaintext highlighter-rouge">ResultSet</code> using <code class="language-plaintext highlighter-rouge">ResultSet.TYPE_SCROLL_INSENSITIVE</code>. This type of result set allows you to move to the last row and get the row count.</li>
  <li><strong>Row Count</strong>: The <code class="language-plaintext highlighter-rouge">rs.getRow()</code> method returns the current row number when the cursor is positioned at the last row. This value is effectively the total number of rows in the result set.</li>
  <li><strong>Fetch Size</strong>: If the <code class="language-plaintext highlighter-rouge">fetchSize</code> is <code class="language-plaintext highlighter-rouge">0</code>, the driver fetches rows dynamically, but using a scrollable result set allows us to navigate the rows efficiently.</li>
</ul>

<h3 id="best-practice">Best Practice:</h3>

<ul>
  <li><strong>Memory Efficiency</strong>: While scrollable result sets are useful for counting rows, be aware that they may consume more memory, as all rows need to be loaded into the memory. If you’re working with a large dataset, consider using a different approach (like iterating over the result set without <code class="language-plaintext highlighter-rouge">last()</code> to count rows incrementally) if memory usage is a concern.</li>
  <li><strong>Alternative Approach</strong>: If memory is an issue and you only need the row count, you can execute a <code class="language-plaintext highlighter-rouge">SELECT COUNT(*)</code> query instead of retrieving the entire result set. This is often more efficient.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">your_table</span><span class="p">;</span>
</code></pre></div></div>

<p>Let me know if you need further clarification!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
