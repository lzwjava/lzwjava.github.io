<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Log4j Configuration Guide</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Log4j Configuration Guide | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Log4j Configuration Guide" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-09-01-log4j-configuration-guide-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-09-01-log4j-configuration-guide-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Log4j Configuration Guide" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Log4j Configuration Guide","url":"https://lzwjava.github.io/notes/2025-09-01-log4j-configuration-guide-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=cddac233801905333dd7adb8610331fd4011631a">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=cddac233801905333dd7adb8610331fd4011631a" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Log4j Configuration Guide | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-09-01-log4j-configuration-guide-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-09-01-log4j-configuration-guide-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/log4j-configuration-guide-en" selected>English</option>
        <option value="/log4j-configuration-guide-zh" >中文</option>
        <option value="/log4j-configuration-guide-ja" >日本語</option>
        <option value="/log4j-configuration-guide-es" >Español</option>
        <option value="/log4j-configuration-guide-hi" >हिंदी</option>
        <option value="/log4j-configuration-guide-fr" >Français</option>
        <option value="/log4j-configuration-guide-de" >Deutsch</option>
        <option value="/log4j-configuration-guide-ar" >العربية</option>
        <option value="/log4j-configuration-guide-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="overview-of-log4j-configuration">Overview of Log4j Configuration</h3>
<p>Log4j is a popular Java logging framework that allows you to control log output levels and destinations. For version 2.x (recommended), configurations are typically defined in an XML, JSON, YAML, or Properties file (e.g., <code class="language-plaintext highlighter-rouge">log4j2.xml</code>). This setup involves:</p>

<ul>
  <li><strong>Loggers</strong>: Define what levels of messages (e.g., DEBUG, INFO, WARN, ERROR) to log for specific classes or packages.</li>
  <li><strong>Appenders</strong>: Specify where logs are sent, such as the console (standard output) or files (with options like rotation).</li>
  <li><strong>Root Logger</strong>: A default logger that applies to all classes not covered by specific loggers.</li>
</ul>

<p>To configure both console and file logging, you’ll typically add a <code class="language-plaintext highlighter-rouge">ConsoleAppender</code> and a <code class="language-plaintext highlighter-rouge">RollingFileAppender</code> (for file logs with automatic rotation). Place the config file in your classpath (e.g., <code class="language-plaintext highlighter-rouge">src/main/resources</code> in Maven projects).</p>

<p>If you’re using Log4j 1.x, upgrade to 2.x—it’s faster and has better features. Below is a step-by-step guide with a sample XML config.</p>

<h3 id="steps-to-configure-file-and-console-loggers">Steps to Configure File and Console Loggers</h3>
<ol>
  <li><strong>Add Dependencies</strong>: Ensure Log4j 2.x is in your pom.xml (Maven) or build.gradle (Gradle). Example for Maven:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
    &lt;version&gt;2.23.1&lt;/version&gt;  &lt;!-- Use latest version --&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
    &lt;version&gt;2.23.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Create a Configuration File</strong>: Create <code class="language-plaintext highlighter-rouge">log4j2.xml</code> in your resources folder.</p>
  </li>
  <li><strong>Define Appenders</strong>:
    <ul>
      <li>ConsoleAppender: Outputs to the terminal/console.</li>
      <li>RollingFileAppender: Writes to a file and rotates it based on size (e.g., when it reaches 10MB, it creates a new file).</li>
    </ul>
  </li>
  <li>
    <p><strong>Configure Loggers</strong>: Set the logging level (e.g., INFO) and assign appenders. The root logger handles global logging.</p>
  </li>
  <li><strong>Use in Code</strong>: In your Java classes, get a logger like this:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.apache.logging.log4j.LogManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.logging.log4j.Logger</span><span class="o">;</span>
   
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LogManager</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">MyClass</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="c1">// Log messages: logger.debug("Debug message"); logger.info("Info message");</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="sample-configuration-log4j2xml">Sample Configuration (log4j2.xml)</h3>
<p>Here’s a complete XML config for console and rotating file logging. It logs INFO and above to console, and all levels to a file that rotates daily or when 10MB.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;Configuration</span> <span class="na">status=</span><span class="s">"WARN"</span><span class="nt">&gt;</span>  <span class="c">&lt;!-- Internal Log4j logging level --&gt;</span>

    <span class="c">&lt;!-- Appenders section --&gt;</span>
    <span class="nt">&lt;Appenders&gt;</span>

        <span class="c">&lt;!-- Console Appender --&gt;</span>
        <span class="nt">&lt;Console</span> <span class="na">name=</span><span class="s">"Console"</span> <span class="na">target=</span><span class="s">"SYSTEM_OUT"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">"%d{yyyy-MM-dd HH:mm:ss} [%t] %-5level %logger{36} - %msg%n"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Console&gt;</span>

        <span class="c">&lt;!-- Rolling File Appender --&gt;</span>
        <span class="nt">&lt;RollingFile</span> <span class="na">name=</span><span class="s">"File"</span> <span class="na">fileName=</span><span class="s">"logs/app.log"</span> <span class="na">filePattern=</span><span class="s">"logs/app-%d{yyyy-MM-dd}-%i.log.gz"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">"%d{yyyy-MM-dd HH:mm:ss} [%t] %-5level %logger{36} - %msg%n"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;Policies&gt;</span>
                <span class="nt">&lt;TimeBasedTriggeringPolicy</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- Rotate daily --&gt;</span>
                <span class="nt">&lt;SizeBasedTriggeringPolicy</span> <span class="na">size=</span><span class="s">"10MB"</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- Or based on size --&gt;</span>
            <span class="nt">&lt;/Policies&gt;</span>
            <span class="nt">&lt;DefaultRolloverStrategy</span> <span class="na">max=</span><span class="s">"7"</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- Keep up to 7 old files --&gt;</span>
        <span class="nt">&lt;/RollingFile&gt;</span>

    <span class="nt">&lt;/Appenders&gt;</span>

    <span class="c">&lt;!-- Loggers section --&gt;</span>
    <span class="nt">&lt;Loggers&gt;</span>

        <span class="c">&lt;!-- Specific logger for your package (optional) --&gt;</span>
        <span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"com.yourapp"</span> <span class="na">level=</span><span class="s">"DEBUG"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"File"</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- Only to file for this package --&gt;</span>
        <span class="nt">&lt;/Logger&gt;</span>

        <span class="c">&lt;!-- Root logger --&gt;</span>
        <span class="nt">&lt;Root</span> <span class="na">level=</span><span class="s">"INFO"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"Console"</span><span class="nt">/&gt;</span>  <span class="c">&lt;!-- Debug/info to console --&gt;</span>
            <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"File"</span><span class="nt">/&gt;</span>     <span class="c">&lt;!-- All levels to file --&gt;</span>
        <span class="nt">&lt;/Root&gt;</span>

    <span class="nt">&lt;/Loggers&gt;</span>

<span class="nt">&lt;/Configuration&gt;</span>
</code></pre></div></div>

<ul>
  <li><strong>Pattern Layout</strong>: Defines log format (e.g., timestamp, thread, log level, logger name, message).</li>
  <li><strong>Rolling Policies</strong>: Files rotate based on time (e.g., <code class="language-plaintext highlighter-rouge">-d{yyyy-MM-dd}</code>) or size; compressed with <code class="language-plaintext highlighter-rouge">.gz</code>.</li>
  <li><strong>Levels</strong>: Set <code class="language-plaintext highlighter-rouge">DEBUG</code> for detailed dev logs, <code class="language-plaintext highlighter-rouge">INFO</code> for production (adjust as needed).</li>
  <li><strong>Testing</strong>: Run your app and check console output + the <code class="language-plaintext highlighter-rouge">logs/</code> folder for files.</li>
</ul>

<p>For Properties-based config, see the Log4j documentation—it’s simpler but less flexible. If you need JSON/YAML or version-specific tweaks, refer to the <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html">official Log4j 2 Configuration docs</a>. If this doesn’t match your setup (e.g., Log4j 1.x), provide more details!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    
      <p class="model">x-ai/grok-code-fast-1</p>
    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
