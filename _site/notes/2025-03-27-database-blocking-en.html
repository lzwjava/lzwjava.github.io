<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Database Blocking</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Database Blocking | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Database Blocking" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-27-database-blocking-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-27-database-blocking-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Database Blocking" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Database Blocking","url":"https://lzwjava.github.io/notes/2025-03-27-database-blocking-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=aea6e9a0e16df1a838b02dd64ba38e1a607e259d">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=aea6e9a0e16df1a838b02dd64ba38e1a607e259d" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Database Blocking | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-27-database-blocking-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-27-database-blocking-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/database-blocking-en" selected>English</option>
        <option value="/database-blocking-zh" >中文</option>
        <option value="/database-blocking-ja" >日本語</option>
        <option value="/database-blocking-es" >Español</option>
        <option value="/database-blocking-hi" >हिंदी</option>
        <option value="/database-blocking-fr" >Français</option>
        <option value="/database-blocking-de" >Deutsch</option>
        <option value="/database-blocking-ar" >العربية</option>
        <option value="/database-blocking-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>I assume you’re asking for examples of database blocking in the context of database management systems (DBMS). Blocking occurs when one transaction in a database prevents another transaction from proceeding because they are trying to access or modify the same data concurrently. This is typically managed using locks to ensure data consistency and integrity. Below are some examples of database blocking scenarios:</p>

<hr />

<h3 id="example-1-read-write-blocking">Example 1: Read-Write Blocking</h3>
<ul>
  <li><strong>Scenario</strong>: Transaction T1 is updating a row in a table (e.g., changing a customer’s balance), and Transaction T2 tries to read that same row.</li>
  <li><strong>What Happens</strong>: T1 acquires an exclusive lock on the row to prevent other transactions from reading or modifying it until the update is complete. T2 is blocked and must wait until T1 commits or rolls back.</li>
  <li><strong>SQL Example</strong>:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Transaction T1</span>
<span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">Accounts</span> <span class="k">SET</span> <span class="n">Balance</span> <span class="o">=</span> <span class="n">Balance</span> <span class="o">-</span> <span class="mi">100</span> <span class="k">WHERE</span> <span class="n">AccountID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">-- Transaction T2 (blocked)</span>
<span class="k">SELECT</span> <span class="n">Balance</span> <span class="k">FROM</span> <span class="n">Accounts</span> <span class="k">WHERE</span> <span class="n">AccountID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>T2 waits until T1 finishes because of the exclusive lock on the row.</p>
  </li>
</ul>

<hr />

<h3 id="example-2-write-write-blocking">Example 2: Write-Write Blocking</h3>
<ul>
  <li><strong>Scenario</strong>: Transaction T1 is updating a product’s stock quantity, and Transaction T2 tries to update the same product’s stock at the same time.</li>
  <li><strong>What Happens</strong>: T1 holds an exclusive lock on the row, and T2 is blocked until T1 completes. This prevents conflicting updates that could lead to data inconsistency.</li>
  <li><strong>SQL Example</strong>:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Transaction T1</span>
<span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">Products</span> <span class="k">SET</span> <span class="n">Stock</span> <span class="o">=</span> <span class="n">Stock</span> <span class="o">-</span> <span class="mi">5</span> <span class="k">WHERE</span> <span class="n">ProductID</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="c1">-- Transaction T2 (blocked)</span>
<span class="k">UPDATE</span> <span class="n">Products</span> <span class="k">SET</span> <span class="n">Stock</span> <span class="o">=</span> <span class="n">Stock</span> <span class="o">+</span> <span class="mi">10</span> <span class="k">WHERE</span> <span class="n">ProductID</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>T2 is blocked until T1 commits or rolls back.</p>
  </li>
</ul>

<hr />

<h3 id="example-3-deadlock-blocking-leading-to-stalemate">Example 3: Deadlock (Blocking Leading to Stalemate)</h3>
<ul>
  <li><strong>Scenario</strong>: Transaction T1 locks Row A and needs to update Row B, while Transaction T2 locks Row B and needs to update Row A.</li>
  <li><strong>What Happens</strong>: T1 is blocked by T2’s lock on Row B, and T2 is blocked by T1’s lock on Row A. This creates a deadlock, and the DBMS must intervene (e.g., by rolling back one transaction).</li>
  <li><strong>SQL Example</strong>:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Transaction T1</span>
<span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">Table1</span> <span class="k">SET</span> <span class="n">Value</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">WHERE</span> <span class="n">ID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">-- Locks Row A</span>
<span class="k">UPDATE</span> <span class="n">Table2</span> <span class="k">SET</span> <span class="n">Value</span> <span class="o">=</span> <span class="mi">20</span> <span class="k">WHERE</span> <span class="n">ID</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>  <span class="c1">-- Blocked by T2</span>

<span class="c1">-- Transaction T2</span>
<span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">Table2</span> <span class="k">SET</span> <span class="n">Value</span> <span class="o">=</span> <span class="mi">30</span> <span class="k">WHERE</span> <span class="n">ID</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>  <span class="c1">-- Locks Row B</span>
<span class="k">UPDATE</span> <span class="n">Table1</span> <span class="k">SET</span> <span class="n">Value</span> <span class="o">=</span> <span class="mi">40</span> <span class="k">WHERE</span> <span class="n">ID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">-- Blocked by T1</span>
</code></pre></div>    </div>
    <p>Neither transaction can proceed until the DBMS resolves the deadlock.</p>
  </li>
</ul>

<hr />

<h3 id="example-4-table-level-blocking">Example 4: Table-Level Blocking</h3>
<ul>
  <li><strong>Scenario</strong>: Transaction T1 is performing a large update on an entire table without proper indexing, and Transaction T2 tries to read a single row from the same table.</li>
  <li><strong>What Happens</strong>: T1 might escalate its row-level locks to a table-level lock, blocking T2 from even reading unrelated rows until T1 completes.</li>
  <li><strong>SQL Example</strong>:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Transaction T1</span>
<span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">Employees</span> <span class="k">SET</span> <span class="n">Salary</span> <span class="o">=</span> <span class="n">Salary</span> <span class="o">*</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>  <span class="c1">-- Locks the entire table</span>

<span class="c1">-- Transaction T2 (blocked)</span>
<span class="k">SELECT</span> <span class="n">Name</span> <span class="k">FROM</span> <span class="n">Employees</span> <span class="k">WHERE</span> <span class="n">EmployeeID</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>T2 is blocked because T1 has a table-level exclusive lock.</p>
  </li>
</ul>

<hr />

<h3 id="how-blocking-is-managed">How Blocking is Managed</h3>
<ul>
  <li><strong>Locks</strong>: Databases use shared locks (for reading) and exclusive locks (for writing) to control access.</li>
  <li><strong>Isolation Levels</strong>: Higher isolation levels (e.g., Serializable) increase blocking to ensure consistency, while lower levels (e.g., Read Uncommitted) reduce blocking but risk dirty reads.</li>
  <li><strong>Timeouts</strong>: Transactions can time out if blocked for too long, forcing a rollback.</li>
  <li><strong>Deadlock Detection</strong>: DBMS detects and resolves deadlocks by terminating one transaction.</li>
</ul>

<p>Let me know if you’d like more details or examples specific to a particular database system (e.g., MySQL, PostgreSQL, SQL Server)!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
