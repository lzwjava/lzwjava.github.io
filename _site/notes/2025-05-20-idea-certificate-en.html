<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Handling Non-Trusted Certificates in IntelliJ IDEA</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Handling Non-Trusted Certificates in IntelliJ IDEA | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Handling Non-Trusted Certificates in IntelliJ IDEA" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-05-20-idea-certificate-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-05-20-idea-certificate-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Handling Non-Trusted Certificates in IntelliJ IDEA" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Handling Non-Trusted Certificates in IntelliJ IDEA","url":"https://lzwjava.github.io/notes/2025-05-20-idea-certificate-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=fe318419e164ac4369c82db28dff561d33fa6e1a">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=fe318419e164ac4369c82db28dff561d33fa6e1a" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Handling Non-Trusted Certificates in IntelliJ IDEA | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-05-20-idea-certificate-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-05-20-idea-certificate-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/idea-certificate-en" selected>English</option>
        <option value="/idea-certificate-zh" >中文</option>
        <option value="/idea-certificate-ja" >日本語</option>
        <option value="/idea-certificate-es" >Español</option>
        <option value="/idea-certificate-hi" >हिंदी</option>
        <option value="/idea-certificate-fr" >Français</option>
        <option value="/idea-certificate-de" >Deutsch</option>
        <option value="/idea-certificate-ar" >العربية</option>
        <option value="/idea-certificate-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>The “Untrusted Server’s Certificate” dialog in IntelliJ IDEA often appears when the IDE encounters SSL certificates that aren’t trusted by its keystore, such as self-signed or custom corporate certificates. Since you’ve already imported your corporation’s keystore into <code class="language-plaintext highlighter-rouge">/lib/cacerts</code> but still see the prompt, the issue might stem from IntelliJ not using that keystore or additional certificates causing the dialog. Here’s how to address it and potentially stop the prompts:</p>

<h3 id="option-1-configure-intellij-to-accept-non-trusted-certificates-automatically">Option 1: Configure IntelliJ to Accept Non-Trusted Certificates Automatically</h3>
<p>Enabling this option tells IntelliJ to bypass the dialog for untrusted certificates, but be cautious as it reduces security by accepting all certificates, potentially exposing you to man-in-the-middle attacks.</p>

<ul>
  <li><strong>Windows/Linux</strong>:
    <ol>
      <li>Go to <code class="language-plaintext highlighter-rouge">File &gt; Settings &gt; Tools &gt; Server Certificates</code>.</li>
      <li>Check the box for <strong>“Accept non-trusted certificates automatically”</strong>.</li>
      <li>Click <strong>Apply</strong> and <strong>OK</strong>.</li>
    </ol>
  </li>
  <li><strong>macOS</strong>:
    <ol>
      <li>Go to <code class="language-plaintext highlighter-rouge">IntelliJ IDEA &gt; Preferences &gt; Tools &gt; Server Certificates</code>.</li>
      <li>Check <strong>“Accept non-trusted certificates automatically”</strong>.</li>
      <li>Click <strong>Apply</strong> and <strong>OK</strong>.<a href="https://stackoverflow.com/questions/60092405/untrusted-server-certificate-in-intellij"></a><a href="https://www.javahelps.com/2020/12/things-to-do-after-installing-intellij.html"></a></li>
    </ol>
  </li>
</ul>

<p><strong>Note</strong>: This is not recommended unless you’re in a trusted, isolated network (e.g., air-gapped corporate environment), as it can make your IDE vulnerable to unverified connections.<a href="https://stackoverflow.com/questions/60092405/untrusted-server-certificate-in-intellij"></a></p>

<h3 id="option-2-verify-and-correct-the-keystore-configuration">Option 2: Verify and Correct the Keystore Configuration</h3>
<p>Since you’ve imported the corporate keystore into <code class="language-plaintext highlighter-rouge">/lib/cacerts</code>, ensure IntelliJ is using it correctly. The issue might be that IntelliJ is still referencing its own truststore or the wrong cacerts file.</p>

<ol>
  <li><strong>Check the Keystore Path</strong>:
    <ul>
      <li>IntelliJ often uses its own truststore at <code class="language-plaintext highlighter-rouge">~/.IntelliJIdea&lt;version&gt;/system/tasks/cacerts</code> or the JetBrains Runtime (JBR) truststore at <code class="language-plaintext highlighter-rouge">&lt;IntelliJ Installation&gt;/jbr/lib/security/cacerts</code>.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360004301319-Adding-root-CA-to-intellij-on-Windows-10"></a></li>
      <li>If you modified <code class="language-plaintext highlighter-rouge">/lib/cacerts</code> in the IntelliJ directory, confirm it’s the correct path for your IDE version. For JetBrains Toolbox installations, the path might differ (e.g., <code class="language-plaintext highlighter-rouge">~/AppData/Local/JetBrains/Toolbox/apps/IDEA-U/ch-0/&lt;version&gt;/jbr/lib/security/cacerts</code> on Windows).<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360004301319-Adding-root-CA-to-intellij-on-Windows-10"></a></li>
      <li>Use the <code class="language-plaintext highlighter-rouge">keytool</code> command to verify the certificate is in the cacerts file:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keytool <span class="nt">-list</span> <span class="nt">-keystore</span> &lt;path-to-cacerts&gt; <span class="nt">-storepass</span> changeit
</code></pre></div>        </div>
        <p>Ensure your corporate CA certificate is listed.</p>
      </li>
    </ul>
  </li>
  <li><strong>Point IntelliJ to the Custom Keystore</strong>:
    <ul>
      <li>If the certificate is correctly imported but IntelliJ still prompts, it might not be using the modified cacerts. Add a custom VM option to specify the truststore:
        <ol>
          <li>Go to <code class="language-plaintext highlighter-rouge">Help &gt; Edit Custom VM Options</code>.</li>
          <li>Add:
            <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-Djavax.net.ssl.trustStore=&lt;path-to-cacerts&gt;
-Djavax.net.ssl.trustStorePassword=changeit
</code></pre></div>            </div>
            <p>Replace <code class="language-plaintext highlighter-rouge">&lt;path-to-cacerts&gt;</code> with the full path to your modified <code class="language-plaintext highlighter-rouge">cacerts</code> file.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000080810-Setting-Truststore-"></a></p>
          </li>
          <li>Restart IntelliJ IDEA.</li>
        </ol>
      </li>
    </ul>
  </li>
  <li><strong>Re-import the Certificate</strong>:
    <ul>
      <li>If the certificate import was incomplete or incorrect, re-import it:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keytool <span class="nt">-import</span> <span class="nt">-trustcacerts</span> <span class="nt">-file</span> &lt;certificate-file&gt;.cer <span class="nt">-alias</span> &lt;<span class="nb">alias</span><span class="o">&gt;</span> <span class="nt">-keystore</span> &lt;path-to-cacerts&gt; <span class="nt">-storepass</span> changeit
</code></pre></div>        </div>
        <p>Replace <code class="language-plaintext highlighter-rouge">&lt;certificate-file&gt;.cer</code> with your corporate CA certificate and <code class="language-plaintext highlighter-rouge">&lt;path-to-cacerts&gt;</code> with the correct cacerts file path.<a href="https://www.baeldung.com/jvm-certificate-store-errors"></a></p>
      </li>
    </ul>
  </li>
</ol>

<h3 id="option-3-add-certificates-via-intellijs-server-certificates-settings">Option 3: Add Certificates via IntelliJ’s Server Certificates Settings</h3>
<p>Instead of modifying the cacerts file manually, you can add certificates through IntelliJ’s UI, which stores them in its internal truststore:</p>

<ol>
  <li>Go to <code class="language-plaintext highlighter-rouge">File &gt; Settings &gt; Tools &gt; Server Certificates</code> (or <code class="language-plaintext highlighter-rouge">IntelliJ IDEA &gt; Preferences</code> on macOS).</li>
  <li>Click the <strong>”+”</strong> button to add a new certificate.</li>
  <li>Browse to your corporate CA certificate file (in <code class="language-plaintext highlighter-rouge">.cer</code> or <code class="language-plaintext highlighter-rouge">.pem</code> format) and import it.</li>
  <li>Restart IntelliJ to ensure the certificate is recognized.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360004301319-Adding-root-CA-to-intellij-on-Windows-10"></a></li>
</ol>

<h3 id="option-4-check-for-proxy-or-antivirus-interference">Option 4: Check for Proxy or Antivirus Interference</h3>
<p>Corporate environments often use proxies or antivirus software (e.g., Zscaler, Forcepoint) that perform man-in-the-middle SSL inspection, generating new certificates dynamically. This can cause repeated prompts if the certificates change frequently (e.g., daily, as with McAfee Endpoint Security).<a href="https://stackoverflow.com/questions/60092405/untrusted-server-certificate-in-intellij"></a><a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360004301319-Adding-root-CA-to-intellij-on-Windows-10"></a></p>

<ul>
  <li><strong>Import Proxy/Antivirus CA Certificate</strong>:
    <ul>
      <li>Obtain the root CA certificate from your proxy or antivirus software (ask your IT team).</li>
      <li>Import it into IntelliJ’s truststore via <code class="language-plaintext highlighter-rouge">Settings &gt; Tools &gt; Server Certificates</code> or into the cacerts file using the <code class="language-plaintext highlighter-rouge">keytool</code> command above.</li>
    </ul>
  </li>
  <li><strong>Disable SSL Inspection (if possible)</strong>:
    <ul>
      <li>If your proxy allows, configure it to bypass SSL inspection for IntelliJ-related domains (e.g., <code class="language-plaintext highlighter-rouge">plugins.jetbrains.com</code>, <code class="language-plaintext highlighter-rouge">repo.maven.apache.org</code>).</li>
    </ul>
  </li>
</ul>

<h3 id="option-5-debug-and-identify-problematic-certificates">Option 5: Debug and Identify Problematic Certificates</h3>
<p>If the issue persists, identify which server or certificate is causing the prompt:</p>

<ol>
  <li>Enable verbose SSL logging:
    <ul>
      <li>Go to <code class="language-plaintext highlighter-rouge">Help &gt; Edit Custom VM Options</code> and add:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-Djavax.net.debug=ssl:handshake:verbose
</code></pre></div>        </div>
      </li>
      <li>Restart IntelliJ and check the <code class="language-plaintext highlighter-rouge">idea.log</code> file (located in <code class="language-plaintext highlighter-rouge">~/.IntelliJIdea&lt;version&gt;/system/log/</code>) for SSL errors, such as <code class="language-plaintext highlighter-rouge">PKIX path building failed</code>. This will show the problematic server or certificate.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360010576419-Adding-trusted-certs"></a></li>
    </ul>
  </li>
  <li>Check for specific plugins or integrations:
    <ul>
      <li>Plugins like Maven, Gradle, or version control systems (e.g., Git, SVN) may connect to servers with different certificates. Disable plugins temporarily to isolate the issue.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000131364-Server-s-Certificate-is-not-trusted-pop-up"></a></li>
      <li>For Maven, ensure the JDK configured in <code class="language-plaintext highlighter-rouge">File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Maven &gt; Runner</code> uses the updated cacerts.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360010576419-Adding-trusted-certs"></a></li>
    </ul>
  </li>
</ol>

<h3 id="additional-notes">Additional Notes</h3>
<ul>
  <li><strong>Security Warning</strong>: Accepting non-trusted certificates automatically is convenient but risky in non-isolated networks. Only use this in trusted environments.<a href="https://stackoverflow.com/questions/60092405/untrusted-server-certificate-in-intellij"></a><a href="https://stackoverflow.com/questions/26192713/android-studio-servers-certificate-is-not-trusted"></a></li>
  <li><strong>System Time Sync</strong>: Ensure your system clock is synchronized, as a mismatch can cause certificate validation issues.<a href="https://stackoverflow.com/questions/60092405/untrusted-server-certificate-in-intellij"></a></li>
  <li><strong>JetBrains Runtime (JBR)</strong>: IntelliJ runs on its own JBR, which may not use the system’s Java truststore. Changes to the system’s <code class="language-plaintext highlighter-rouge">$JAVA_HOME/lib/security/cacerts</code> won’t affect IntelliJ unless explicitly configured.<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/360010576419-Adding-trusted-certs"></a></li>
  <li><strong>Persistent Prompts</strong>: If prompts persist after importing the certificate, it could be due to a plugin or service (e.g., JFrog, SonarQube) using a different truststore. Check plugin settings or contact your IT team for the full certificate chain.<a href="https://community.sonarsource.com/t/sonarlint-does-not-respect-the-certificates-added-in-the-intellijs-keystore/22897"></a><a href="https://github.com/jfrog/jfrog-idea-plugin/issues/34"></a></li>
</ul>

<h3 id="recommended-approach">Recommended Approach</h3>
<ol>
  <li>Try <strong>Option 3</strong> (add certificates via IntelliJ’s UI) first, as it’s the safest and most straightforward.</li>
  <li>If that fails, verify the keystore path and configuration with <strong>Option 2</strong>.</li>
  <li>Use <strong>Option 1</strong> (auto-accept) only as a last resort in a trusted environment.</li>
  <li>If the issue involves a proxy or antivirus, work with your IT team to obtain and import the correct CA certificates.</li>
</ol>

<p>If you still face issues, share details about the certificate (e.g., issuer, domain) or any error messages from the <code class="language-plaintext highlighter-rouge">idea.log</code> file, and I can help narrow it down further.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
