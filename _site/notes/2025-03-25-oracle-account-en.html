<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Oracle Database - User Account</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Oracle Database - User Account | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Oracle Database - User Account" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-25-oracle-account-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-25-oracle-account-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Oracle Database - User Account" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Oracle Database - User Account","url":"https://lzwjava.github.io/notes/2025-03-25-oracle-account-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=962b777daf6d8db7fe4da33104f089e34ca85de3">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=962b777daf6d8db7fe4da33104f089e34ca85de3" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Oracle Database - User Account | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-25-oracle-account-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-25-oracle-account-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/oracle-account-en" selected>English</option>
        <option value="/oracle-account-zh" >中文</option>
        <option value="/oracle-account-ja" >日本語</option>
        <option value="/oracle-account-es" >Español</option>
        <option value="/oracle-account-hi" >हिंदी</option>
        <option value="/oracle-account-fr" >Français</option>
        <option value="/oracle-account-de" >Deutsch</option>
        <option value="/oracle-account-ar" >العربية</option>
        <option value="/oracle-account-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>The <code class="language-plaintext highlighter-rouge">ORA-28000: The account is locked</code> error occurs when attempting to connect to an Oracle database (e.g., via a thin JDBC driver) and the user account you’re trying to use has been locked. This typically happens due to too many failed login attempts, manual locking by an administrator, or an account expiration policy. To resolve this, you need to unlock the account, and if necessary, reset the password or check the account status. Below are the steps to fix this issue when connecting to an Oracle database.</p>

<hr />

<h3 id="steps-to-fix-ora-28000">Steps to Fix ORA-28000</h3>

<h4 id="1-verify-the-error">1. <strong>Verify the Error</strong></h4>
<p>When you encounter this error in a JDBC connection, it might look like this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   java.sql.SQLException: ORA-28000: The account is locked
</code></pre></div></div>
<p>This confirms the issue is with the database account, not the JDBC configuration itself (e.g., URL, driver, or WebSphere datasource settings).</p>

<h4 id="2-log-in-as-a-privileged-user">2. <strong>Log in as a Privileged User</strong></h4>
<p>To unlock the account, you need access to a database user with administrative privileges (e.g., <code class="language-plaintext highlighter-rouge">SYS</code>, <code class="language-plaintext highlighter-rouge">SYSTEM</code>, or a user with <code class="language-plaintext highlighter-rouge">DBA</code> role). Connect to the database using a tool like SQL*Plus, SQL Developer, or a JDBC client:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   sqlplus / as sysdba
</code></pre></div></div>
<p>OR</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   sqlplus system/&lt;password&gt;@&lt;service_name&gt;
</code></pre></div></div>
<p>Replace <code class="language-plaintext highlighter-rouge">&lt;password&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;service_name&gt;</code> with your actual credentials and database service name (e.g., <code class="language-plaintext highlighter-rouge">ORCL</code>).</p>

<h4 id="3-check-the-account-status">3. <strong>Check the Account Status</strong></h4>
<p>Run the following SQL query to check the status of the locked account:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">SELECT</span> <span class="n">username</span><span class="p">,</span> <span class="n">account_status</span><span class="p">,</span> <span class="n">lock_date</span> 
   <span class="k">FROM</span> <span class="n">dba_users</span> 
   <span class="k">WHERE</span> <span class="n">username</span> <span class="o">=</span> <span class="s1">'YOUR_USERNAME'</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">YOUR_USERNAME</code> with the username you’re trying to connect with (e.g., <code class="language-plaintext highlighter-rouge">myuser</code>).</li>
  <li>Look at the <code class="language-plaintext highlighter-rouge">ACCOUNT_STATUS</code> column. If it says <code class="language-plaintext highlighter-rouge">LOCKED</code> or <code class="language-plaintext highlighter-rouge">LOCKED(TIMED)</code>, the account is locked.</li>
</ul>

<p>Example output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   USERNAME   ACCOUNT_STATUS   LOCK_DATE
   ---------- ---------------- -------------------
   MYUSER     LOCKED           24-MAR-25 10:00:00
</code></pre></div></div>

<h4 id="4-unlock-the-account">4. <strong>Unlock the Account</strong></h4>
<p>To unlock the account, execute this SQL command as the privileged user:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">ALTER</span> <span class="k">USER</span> <span class="n">your_username</span> <span class="n">ACCOUNT</span> <span class="n">UNLOCK</span><span class="p">;</span>
</code></pre></div></div>
<p>Example:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">ALTER</span> <span class="k">USER</span> <span class="n">myuser</span> <span class="n">ACCOUNT</span> <span class="n">UNLOCK</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="5-optional-reset-the-password">5. <strong>(Optional) Reset the Password</strong></h4>
<p>If the password might have expired or you suspect it’s incorrect, reset it while you’re at it:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">ALTER</span> <span class="k">USER</span> <span class="n">your_username</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">new_password</span><span class="p">;</span>
</code></pre></div></div>
<p>Example:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">ALTER</span> <span class="k">USER</span> <span class="n">myuser</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="n">mynewpass123</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li>After resetting, update the password in your WebSphere <code class="language-plaintext highlighter-rouge">server.xml</code> (or wherever the JDBC datasource is configured) and re-encrypt it if necessary (see your previous question for AES encoding steps).</li>
</ul>

<h4 id="6-commit-changes-if-required">6. <strong>Commit Changes (If Required)</strong></h4>
<p>In most cases, <code class="language-plaintext highlighter-rouge">ALTER USER</code> commands take effect immediately and don’t require a <code class="language-plaintext highlighter-rouge">COMMIT</code>. However, if you’re in a transaction-heavy environment, ensure no rollback occurs by restarting the session or the database if needed.</p>

<h4 id="7-test-the-connection">7. <strong>Test the Connection</strong></h4>
<p>Try connecting again using your JDBC application or a simple test:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
   <span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>

   <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestJDBC</span> <span class="o">{</span>
       <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
           <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"jdbc:oracle:thin:@//localhost:1521/ORCL"</span><span class="o">;</span>
           <span class="nc">String</span> <span class="n">user</span> <span class="o">=</span> <span class="s">"myuser"</span><span class="o">;</span>
           <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"mynewpass123"</span><span class="o">;</span>
           <span class="nc">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">user</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
           <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Connection successful!"</span><span class="o">);</span>
           <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
       <span class="o">}</span>
   <span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>Update the <code class="language-plaintext highlighter-rouge">url</code>, <code class="language-plaintext highlighter-rouge">user</code>, and <code class="language-plaintext highlighter-rouge">password</code> to match your environment.</li>
  <li>If this works, update your WebSphere datasource configuration accordingly.</li>
</ul>

<h4 id="8-check-for-profile-policies-prevent-future-locks">8. <strong>Check for Profile Policies (Prevent Future Locks)</strong></h4>
<p>The account might have locked due to a security policy in the user’s profile (e.g., <code class="language-plaintext highlighter-rouge">FAILED_LOGIN_ATTEMPTS</code> or <code class="language-plaintext highlighter-rouge">PASSWORD_LOCK_TIME</code>). Check the profile assigned to the user:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">SELECT</span> <span class="n">profile</span> 
   <span class="k">FROM</span> <span class="n">dba_users</span> 
   <span class="k">WHERE</span> <span class="n">username</span> <span class="o">=</span> <span class="s1">'YOUR_USERNAME'</span><span class="p">;</span>
</code></pre></div></div>
<p>Then, inspect the profile’s limits:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">SELECT</span> <span class="n">resource_name</span><span class="p">,</span> <span class="k">limit</span> 
   <span class="k">FROM</span> <span class="n">dba_profiles</span> 
   <span class="k">WHERE</span> <span class="n">profile</span> <span class="o">=</span> <span class="s1">'YOUR_PROFILE_NAME'</span><span class="p">;</span>
</code></pre></div></div>
<p>Look for:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">FAILED_LOGIN_ATTEMPTS</code>: Number of failed attempts before locking (e.g., <code class="language-plaintext highlighter-rouge">10</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">PASSWORD_LOCK_TIME</code>: Duration of the lock (e.g., <code class="language-plaintext highlighter-rouge">1</code> day).</li>
</ul>

<p>To relax these settings (if appropriate), modify the profile:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">ALTER</span> <span class="n">PROFILE</span> <span class="n">your_profile_name</span> <span class="k">LIMIT</span> 
       <span class="n">FAILED_LOGIN_ATTEMPTS</span> <span class="n">UNLIMITED</span> 
       <span class="n">PASSWORD_LOCK_TIME</span> <span class="n">UNLIMITED</span><span class="p">;</span>
</code></pre></div></div>
<p>Example:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">ALTER</span> <span class="n">PROFILE</span> <span class="k">DEFAULT</span> <span class="k">LIMIT</span> <span class="n">FAILED_LOGIN_ATTEMPTS</span> <span class="n">UNLIMITED</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="9-restart-websphere-if-needed">9. <strong>Restart WebSphere (If Needed)</strong></h4>
<p>If you’re using WebSphere and updated the datasource password, restart the application server to ensure the changes take effect:</p>
<ul>
  <li>For Liberty: <code class="language-plaintext highlighter-rouge">./bin/server stop</code> and <code class="language-plaintext highlighter-rouge">./bin/server start</code>.</li>
  <li>For traditional WebSphere: Use the Admin Console or <code class="language-plaintext highlighter-rouge">stopServer.sh</code>/<code class="language-plaintext highlighter-rouge">startServer.sh</code>.</li>
</ul>

<hr />

<h3 id="common-causes-of-ora-28000">Common Causes of ORA-28000</h3>
<ul>
  <li><strong>Too Many Failed Login Attempts</strong>: Check application logs or WebSphere logs (e.g., <code class="language-plaintext highlighter-rouge">SystemOut.log</code>) for prior connection errors.</li>
  <li><strong>Manual Lock</strong>: An admin might have locked the account intentionally (<code class="language-plaintext highlighter-rouge">ALTER USER myuser ACCOUNT LOCK</code>).</li>
  <li><strong>Expired Account</strong>: Some environments lock accounts when passwords expire. Check <code class="language-plaintext highlighter-rouge">EXPIRY_DATE</code> in <code class="language-plaintext highlighter-rouge">dba_users</code>.</li>
</ul>

<hr />

<h3 id="troubleshooting-tips">Troubleshooting Tips</h3>
<ul>
  <li>If you don’t have <code class="language-plaintext highlighter-rouge">SYS</code> or <code class="language-plaintext highlighter-rouge">SYSTEM</code> access, contact your database administrator to unlock the account.</li>
  <li>Ensure the JDBC URL, username, and password in <code class="language-plaintext highlighter-rouge">server.xml</code> are correct before retrying.</li>
  <li>If the issue persists, verify the Oracle listener is running:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsnrctl status
</code></pre></div>    </div>
  </li>
</ul>

<p>Let me know if you encounter additional errors or need help with a specific step!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
