<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Upgrade to OpenJDK 21 on macOS</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Upgrade to OpenJDK 21 on macOS | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Upgrade to OpenJDK 21 on macOS" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-07-01-install-openjdk21-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-07-01-install-openjdk21-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Upgrade to OpenJDK 21 on macOS" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Upgrade to OpenJDK 21 on macOS","url":"https://lzwjava.github.io/notes/2025-07-01-install-openjdk21-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=2306ed78be41810c3b5d0cb43e4d2725abd6a67d">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=2306ed78be41810c3b5d0cb43e4d2725abd6a67d" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Upgrade to OpenJDK 21 on macOS | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-07-01-install-openjdk21-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-07-01-install-openjdk21-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/install-openjdk21-en" selected>English</option>
        <option value="/install-openjdk21-zh" >中文</option>
        <option value="/install-openjdk21-ja" >日本語</option>
        <option value="/install-openjdk21-es" >Español</option>
        <option value="/install-openjdk21-hi" >हिंदी</option>
        <option value="/install-openjdk21-fr" >Français</option>
        <option value="/install-openjdk21-de" >Deutsch</option>
        <option value="/install-openjdk21-ar" >العربية</option>
        <option value="/install-openjdk21-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Since you currently have OpenJDK 17 installed via Homebrew on your macOS system, here’s a concise guide to install OpenJDK 21, which is the latest Long Term Support (LTS) release as of your current date, July 1, 2025. You can install OpenJDK 21 alongside OpenJDK 17 and switch between them as needed. The simplest method is using Homebrew, but I’ll also provide a manual installation option.</p>

<h3 id="method-1-install-openjdk-21-using-homebrew-recommended">Method 1: Install OpenJDK 21 Using Homebrew (Recommended)</h3>
<p>Homebrew is already installed on your system, as indicated by your current Java version. This is the easiest and most maintainable approach.</p>

<ol>
  <li><strong>Update Homebrew</strong>:
Ensure Homebrew is up to date to fetch the latest packages:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew update
</code></pre></div>    </div>
  </li>
  <li><strong>Install OpenJDK 21</strong>:
Homebrew provides a specific formula for OpenJDK 21. Run the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>openjdk@21
</code></pre></div>    </div>
    <p>This installs OpenJDK 21 in a keg-only manner, meaning it won’t be symlinked into <code class="language-plaintext highlighter-rouge">/usr/local/bin</code> to avoid conflicts with other Java versions.</p>
  </li>
  <li><strong>Add OpenJDK 21 to Your Path</strong>:
To use OpenJDK 21, you need to add it to your system’s PATH. Homebrew will provide instructions after installation, but typically, you can link it temporarily or permanently:
    <ul>
      <li><strong>Temporary (for the current session)</strong>:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"/opt/homebrew/opt/openjdk@21/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div>        </div>
      </li>
      <li><strong>Permanent (add to shell configuration)</strong>:
Open your shell configuration file (likely <code class="language-plaintext highlighter-rouge">~/.zshrc</code> since macOS uses Zsh by default):
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.zshrc
</code></pre></div>        </div>
        <p>Add the following line:</p>
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"/opt/homebrew/opt/openjdk@21/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>
</code></pre></div>        </div>
        <p>Save and close the file, then apply the changes:</p>
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.zshrc
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Set JAVA_HOME</strong>:
To ensure Java applications can locate OpenJDK 21, set the <code class="language-plaintext highlighter-rouge">JAVA_HOME</code> environment variable:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="si">$(</span>/usr/libexec/java_home <span class="nt">-v</span> 21<span class="si">)</span>
</code></pre></div>    </div>
    <p>Add this to your <code class="language-plaintext highlighter-rouge">~/.zshrc</code> for permanence:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'export JAVA_HOME=$(/usr/libexec/java_home -v 21)'</span> <span class="o">&gt;&gt;</span> ~/.zshrc
<span class="nb">source</span> ~/.zshrc
</code></pre></div>    </div>
  </li>
  <li><strong>Verify Installation</strong>:
Check that OpenJDK 21 is installed and active:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java <span class="nt">-version</span>
</code></pre></div>    </div>
    <p>You should see output similar to:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openjdk 21.0.1 2023-10-17
OpenJDK Runtime Environment (build 21.0.1+12)
OpenJDK 64-Bit Server VM (build 21.0.1+12, mixed mode, sharing)
</code></pre></div>    </div>
  </li>
  <li><strong>Switching Between Java Versions</strong>:
Since you have OpenJDK 17 installed, you can switch between versions using <code class="language-plaintext highlighter-rouge">/usr/libexec/java_home</code>. For example:
    <ul>
      <li>To use OpenJDK 17:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="si">$(</span>/usr/libexec/java_home <span class="nt">-v</span> 17<span class="si">)</span>
</code></pre></div>        </div>
      </li>
      <li>To use OpenJDK 21:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="si">$(</span>/usr/libexec/java_home <span class="nt">-v</span> 21<span class="si">)</span>
</code></pre></div>        </div>
        <p>Alternatively, consider using a version manager like <code class="language-plaintext highlighter-rouge">jenv</code> (install via <code class="language-plaintext highlighter-rouge">brew install jenv</code>) for easier switching:</p>
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jenv add /Library/Java/JavaVirtualMachines/openjdk-21.jdk/Contents/Home
jenv add /Library/Java/JavaVirtualMachines/openjdk-17.jdk/Contents/Home
jenv enable-plugin <span class="nb">export
</span>jenv global 21
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="method-2-manual-installation">Method 2: Manual Installation</h3>
<p>If you prefer not to use Homebrew, you can manually install OpenJDK 21.</p>

<ol>
  <li><strong>Download OpenJDK 21</strong>:
    <ul>
      <li>Visit the official OpenJDK website (jdk.java.net/21) or a trusted provider like Oracle, Azul, or Adoptium.</li>
      <li>For Apple Silicon (M1/M2), download the <code class="language-plaintext highlighter-rouge">macOS/AArch64</code> tar.gz file. For Intel-based Macs, choose <code class="language-plaintext highlighter-rouge">macOS/x64</code>.</li>
      <li>Example: From Oracle’s JDK 21 download page, select the ARM64 or x64 tar.gz file.</li>
    </ul>
  </li>
  <li><strong>Verify the Download</strong>:
Check the integrity of the downloaded file using its SHA256 checksum:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shasum <span class="nt">-a</span> 256 openjdk-21.0.1_macos-aarch64_bin.tar.gz
</code></pre></div>    </div>
    <p>Compare the output with the checksum provided on the download page.</p>
  </li>
  <li><strong>Extract the File</strong>:
Extract the tar.gz file to a desired directory, such as your home directory:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xf</span> openjdk-21.0.1_macos-aarch64_bin.tar.gz <span class="nt">-C</span> ~/OpenJDK
</code></pre></div>    </div>
    <p>The JDK will be extracted to <code class="language-plaintext highlighter-rouge">~/OpenJDK/jdk-21.0.1.jdk/Contents/Home</code>.</p>
  </li>
  <li><strong>Move to System Directory</strong> (Optional):
For consistency, you can move the JDK to the standard macOS Java directory:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mv</span> ~/OpenJDK/jdk-21.0.1.jdk /Library/Java/JavaVirtualMachines/
</code></pre></div>    </div>
  </li>
  <li><strong>Set JAVA_HOME and PATH</strong>:
Update your <code class="language-plaintext highlighter-rouge">~/.zshrc</code> to include:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/Library/Java/JavaVirtualMachines/jdk-21.0.1.jdk/Contents/Home
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$JAVA_HOME</span>/bin:<span class="nv">$PATH</span>
</code></pre></div>    </div>
    <p>Apply the changes:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.zshrc
</code></pre></div>    </div>
  </li>
  <li><strong>Verify Installation</strong>:
Confirm the installation:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java <span class="nt">-version</span>
</code></pre></div>    </div>
    <p>Ensure it shows OpenJDK 21.</p>
  </li>
</ol>

<h3 id="notes">Notes</h3>
<ul>
  <li><strong>Apple Silicon Compatibility</strong>: Ensure you download the AArch64 build for M1/M2 Macs to avoid performance issues. Homebrew automatically selects the correct architecture.</li>
  <li><strong>Multiple JDKs</strong>: macOS supports multiple JDKs in <code class="language-plaintext highlighter-rouge">/Library/Java/JavaVirtualMachines/</code>. Use <code class="language-plaintext highlighter-rouge">/usr/libexec/java_home -v &lt;version&gt;</code> to switch between them.</li>
  <li><strong>Homebrew Advantage</strong>: Homebrew simplifies updates (<code class="language-plaintext highlighter-rouge">brew upgrade openjdk@21</code>) and ensures compatibility with your system.</li>
  <li><strong>Alternative Providers</strong>: You can also use Azul Zulu or Eclipse Temurin builds of OpenJDK 21, available from their respective websites (e.g., azul.com or adoptium.net).</li>
</ul>

<p>If you encounter issues, let me know, and I can help troubleshoot<img src="https://www.geeksforgeeks.org/how-to-install-openjdk-in-macos/" alt="" /><a href="https://formulae.brew.sh/formula/openjdk%4021"></a><a href="https://codetrips.com/2023/10/15/installing-java-jdk-21-macos/"></a></p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
