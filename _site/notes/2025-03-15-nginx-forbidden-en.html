<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Fixing Nginx 403 Forbidden Error</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Fixing Nginx 403 Forbidden Error | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Fixing Nginx 403 Forbidden Error" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-15-nginx-forbidden-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-15-nginx-forbidden-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Fixing Nginx 403 Forbidden Error" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Fixing Nginx 403 Forbidden Error","url":"https://lzwjava.github.io/notes/2025-03-15-nginx-forbidden-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=1344a5f96828f87a167f517becc5fe052a2341e7">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=1344a5f96828f87a167f517becc5fe052a2341e7" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Fixing Nginx 403 Forbidden Error | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-15-nginx-forbidden-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-15-nginx-forbidden-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/nginx-forbidden-en" selected>English</option>
        <option value="/nginx-forbidden-zh" >中文</option>
        <option value="/nginx-forbidden-ja" >日本語</option>
        <option value="/nginx-forbidden-es" >Español</option>
        <option value="/nginx-forbidden-hi" >हिंदी</option>
        <option value="/nginx-forbidden-fr" >Français</option>
        <option value="/nginx-forbidden-de" >Deutsch</option>
        <option value="/nginx-forbidden-ar" >العربية</option>
        <option value="/nginx-forbidden-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>To fix the “403 Forbidden” error you’re encountering with your Nginx configuration, you need to address two primary issues: an incorrect use of the <code class="language-plaintext highlighter-rouge">root</code> directive in your <code class="language-plaintext highlighter-rouge">location</code> block and potential file system permission problems. Below is a step-by-step guide to resolve the issue based on your provided configuration:</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>
    <span class="kn">location</span> <span class="n">/movies</span> <span class="p">{</span>
        <span class="kn">root</span> <span class="n">/path/to/your/movie/folder</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span> <span class="c1"># Enables directory listing</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When you visit <code class="language-plaintext highlighter-rouge">http://localhost/movies</code>, you get a 403 Forbidden error, which typically indicates that Nginx cannot access or serve the intended directory. Here’s how to fix it:</p>

<hr />

<h3 id="1-correct-the-nginx-configuration">1. Correct the Nginx Configuration</h3>
<p>The current <code class="language-plaintext highlighter-rouge">location /movies</code> block uses <code class="language-plaintext highlighter-rouge">root /path/to/your/movie/folder;</code>. In Nginx, the <code class="language-plaintext highlighter-rouge">root</code> directive appends the request URI (e.g., <code class="language-plaintext highlighter-rouge">/movies</code>) to the specified path, meaning Nginx tries to serve files from <code class="language-plaintext highlighter-rouge">/path/to/your/movie/folder/movies</code>. If this directory doesn’t exist, Nginx returns a 403 error.</p>

<p>To fix this, you should use the <code class="language-plaintext highlighter-rouge">alias</code> directive instead of <code class="language-plaintext highlighter-rouge">root</code>. The <code class="language-plaintext highlighter-rouge">alias</code> directive maps the <code class="language-plaintext highlighter-rouge">/movies/</code> URI directly to <code class="language-plaintext highlighter-rouge">/path/to/your/movie/folder/</code> without appending the URI, which is likely your intended behavior.</p>

<p>Update your configuration as follows:</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>
    <span class="kn">location</span> <span class="n">/movies/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/path/to/your/movie/folder/</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span> <span class="c1"># Enables directory listing</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>Key Changes:</strong>
    <ul>
      <li>Changed <code class="language-plaintext highlighter-rouge">root</code> to <code class="language-plaintext highlighter-rouge">alias</code>.</li>
      <li>Added trailing slashes to <code class="language-plaintext highlighter-rouge">location /movies/</code> and <code class="language-plaintext highlighter-rouge">alias /path/to/your/movie/folder/</code> to ensure proper directory handling with <code class="language-plaintext highlighter-rouge">autoindex</code>.</li>
    </ul>
  </li>
  <li><strong>Apply the Changes:</strong>
After updating the configuration file (e.g., <code class="language-plaintext highlighter-rouge">/etc/nginx/nginx.conf</code> or a file in <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-enabled/</code>), restart Nginx to apply the changes:
    <ul>
      <li>On Linux: <code class="language-plaintext highlighter-rouge">sudo systemctl restart nginx</code></li>
      <li>On Windows: Stop and start the Nginx service manually.</li>
    </ul>
  </li>
  <li><strong>Test the URL:</strong>
Visit <code class="language-plaintext highlighter-rouge">http://localhost/movies/</code> (note the trailing slash) to see if the directory listing appears.</li>
</ul>

<hr />

<h3 id="2-check-file-system-permissions">2. Check File System Permissions</h3>
<p>If the configuration change alone doesn’t resolve the 403 error, the issue might be related to file system permissions. Nginx needs read access to <code class="language-plaintext highlighter-rouge">/path/to/your/movie/folder/</code> and its contents, and this access depends on the user under which Nginx is running (commonly <code class="language-plaintext highlighter-rouge">nginx</code> or <code class="language-plaintext highlighter-rouge">www-data</code>).</p>

<ul>
  <li><strong>Identify the Nginx User:</strong>
Check your main Nginx configuration file (e.g., <code class="language-plaintext highlighter-rouge">/etc/nginx/nginx.conf</code>) for the <code class="language-plaintext highlighter-rouge">user</code> directive. It might look like:
    <div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">user</span> <span class="s">nginx</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>If not specified, it could default to <code class="language-plaintext highlighter-rouge">www-data</code> or another user depending on your system.</p>
  </li>
  <li><strong>Verify Permissions:</strong>
Run the following command to inspect the permissions of your movie folder:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span> /path/to/your/movie/folder
</code></pre></div>    </div>
    <p>This will display the owner, group, and permissions (e.g., <code class="language-plaintext highlighter-rouge">drwxr-xr-x</code>).</p>
  </li>
  <li><strong>Adjust Permissions if Needed:</strong>
Ensure the Nginx user has read (and execute for directories) access. Here are two options:
    <ul>
      <li><strong>Option 1: Change Ownership (Recommended):</strong>
Set the folder’s owner to the Nginx user (e.g., <code class="language-plaintext highlighter-rouge">nginx</code>):
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> <span class="nt">-R</span> nginx:nginx /path/to/your/movie/folder
</code></pre></div>        </div>
        <p>Replace <code class="language-plaintext highlighter-rouge">nginx</code> with the actual user if it’s different (e.g., <code class="language-plaintext highlighter-rouge">www-data</code>).</p>
      </li>
      <li><strong>Option 2: Make Readable by All (Less Secure):</strong>
If you don’t want to change ownership, make the folder readable by others:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod</span> <span class="nt">-R</span> o+r /path/to/your/movie/folder
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Ensure Directory Access:</strong>
The directory itself needs execute permissions (<code class="language-plaintext highlighter-rouge">x</code>) for Nginx to access its contents:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod </span>o+x /path/to/your/movie/folder
</code></pre></div>    </div>
  </li>
  <li><strong>Check Parent Directories:</strong>
If <code class="language-plaintext highlighter-rouge">/path/to/your/movie/folder</code> is within a restricted parent directory (e.g., <code class="language-plaintext highlighter-rouge">/home/user/</code>), ensure all parent directories up to the root have execute permissions for the Nginx user:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod </span>o+x /path /path/to /path/to/your /path/to/your/movie
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="3-verify-and-troubleshoot">3. Verify and Troubleshoot</h3>
<p>After making these changes, test again by visiting <code class="language-plaintext highlighter-rouge">http://localhost/movies/</code>. If the 403 error persists:</p>

<ul>
  <li><strong>Check the Nginx Error Log:</strong>
Review the error log for specific details (typically located at <code class="language-plaintext highlighter-rouge">/var/log/nginx/error.log</code>):
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/error.log
</code></pre></div>    </div>
    <p>Look for messages like “permission denied” or “directory index is forbidden” to pinpoint the issue.</p>
  </li>
  <li><strong>Additional Considerations:</strong>
    <ul>
      <li><strong>SELinux (if applicable):</strong> On systems like CentOS with SELinux enabled, it might block access. Temporarily set SELinux to permissive mode to test:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>setenforce 0
</code></pre></div>        </div>
        <p>If this resolves the issue, you’ll need to adjust SELinux policies (e.g., using <code class="language-plaintext highlighter-rouge">chcon</code> or <code class="language-plaintext highlighter-rouge">audit2allow</code>).</p>
      </li>
      <li><strong>Firewall:</strong> Ensure port 80 is open if accessing from another machine (though unlikely if testing locally via <code class="language-plaintext highlighter-rouge">localhost</code>).</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="final-configuration">Final Configuration</h3>
<p>Here’s the corrected and complete configuration:</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>
    <span class="kn">location</span> <span class="n">/movies/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/path/to/your/movie/folder/</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span> <span class="c1"># Enables directory listing</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Replace <code class="language-plaintext highlighter-rouge">/path/to/your/movie/folder/</code> with the actual absolute path to your movie directory.</li>
  <li>Restart Nginx: <code class="language-plaintext highlighter-rouge">sudo systemctl restart nginx</code>.</li>
  <li>Visit <code class="language-plaintext highlighter-rouge">http://localhost/movies/</code> to confirm the directory listing works.</li>
</ul>

<p>By correcting the <code class="language-plaintext highlighter-rouge">alias</code> directive and ensuring proper file permissions, the 403 Forbidden error should be resolved, allowing you to access your movie folder via Nginx successfully.</p>

<hr />

<p>To fix your Nginx 403 Forbidden error and ensure your single <code class="language-plaintext highlighter-rouge">.mkv</code> file is accessible, let’s refine the setup based on your situation. You have one <code class="language-plaintext highlighter-rouge">.mkv</code> file, and you want to know where to save it so the Nginx user can access it. Below, I’ll guide you through the process step-by-step, including choosing an appropriate directory and configuring Nginx.</p>

<h3 id="step-1-choose-a-directory-for-your-mkv-file">Step 1: Choose a Directory for Your <code class="language-plaintext highlighter-rouge">.mkv</code> File</h3>
<p>When deciding where to store your <code class="language-plaintext highlighter-rouge">.mkv</code> file for Nginx to serve it, consider these factors:</p>
<ul>
  <li><strong>Accessibility</strong>: The Nginx user (e.g., <code class="language-plaintext highlighter-rouge">nginx</code> or <code class="language-plaintext highlighter-rouge">www-data</code>) needs read access.</li>
  <li><strong>Conventions</strong>: Web servers typically serve files from standard directories like <code class="language-plaintext highlighter-rouge">/var/www/</code> or <code class="language-plaintext highlighter-rouge">/srv/www/</code>.</li>
  <li><strong>Security</strong>: Avoid placing files in overly permissive or sensitive locations (e.g., <code class="language-plaintext highlighter-rouge">/home/user/</code> unless necessary).</li>
</ul>

<p>For your case, since it’s just one <code class="language-plaintext highlighter-rouge">.mkv</code> file and you’re testing locally (<code class="language-plaintext highlighter-rouge">localhost</code>), I recommend using <code class="language-plaintext highlighter-rouge">/var/www/html/movies/</code> as a simple, standard location. Here’s why:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">/var/www/html/</code> is a common default web root for Nginx and Apache.</li>
  <li>It’s typically owned by the web server user or group, making permissions easier to manage.</li>
  <li>Adding a <code class="language-plaintext highlighter-rouge">/movies/</code> subdirectory keeps things organized.</li>
</ul>

<p>If <code class="language-plaintext highlighter-rouge">/var/www/html/</code> doesn’t exist or isn’t suitable on your system, alternatives include:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">/srv/www/movies/</code> (another standard web directory).</li>
  <li><code class="language-plaintext highlighter-rouge">/usr/share/nginx/html/movies/</code> (sometimes the default Nginx document root).</li>
</ul>

<p>For this example, let’s use <code class="language-plaintext highlighter-rouge">/var/www/html/movies/</code>.</p>

<h3 id="step-2-set-up-the-directory-and-file">Step 2: Set Up the Directory and File</h3>
<p>Assuming you’re on a Linux system, follow these steps:</p>

<ol>
  <li><strong>Create the Directory</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /var/www/html/movies
</code></pre></div>    </div>
  </li>
  <li><strong>Move Your <code class="language-plaintext highlighter-rouge">.mkv</code> File</strong>:
Replace <code class="language-plaintext highlighter-rouge">yourfile.mkv</code> with the actual name of your file and move it to the directory:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mv</span> /path/to/yourfile.mkv /var/www/html/movies/yourfile.mkv
</code></pre></div>    </div>
  </li>
  <li><strong>Set Permissions</strong>:
The Nginx user (commonly <code class="language-plaintext highlighter-rouge">nginx</code> or <code class="language-plaintext highlighter-rouge">www-data</code>) needs read access to the file and execute access to the directory. First, identify the Nginx user by checking <code class="language-plaintext highlighter-rouge">/etc/nginx/nginx.conf</code>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep </span>user /etc/nginx/nginx.conf
</code></pre></div>    </div>
    <p>Look for a line like <code class="language-plaintext highlighter-rouge">user nginx;</code> or <code class="language-plaintext highlighter-rouge">user www-data;</code>. If it’s not specified, it might default to <code class="language-plaintext highlighter-rouge">www-data</code> (Ubuntu/Debian) or <code class="language-plaintext highlighter-rouge">nginx</code> (CentOS/RHEL).</p>

    <p>Then, adjust ownership:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> <span class="nt">-R</span> nginx:nginx /var/www/html/movies
</code></pre></div>    </div>
    <p>Replace <code class="language-plaintext highlighter-rouge">nginx</code> with <code class="language-plaintext highlighter-rouge">www-data</code> or the actual user if different.</p>

    <p>Ensure proper permissions:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod</span> <span class="nt">-R</span> 755 /var/www/html/movies
</code></pre></div>    </div>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">755</code> means the owner (Nginx) has full access, and others (including the web server process) can read and execute (navigate) the directory.</li>
    </ul>
  </li>
</ol>

<h3 id="step-3-configure-nginx">Step 3: Configure Nginx</h3>
<p>Update your Nginx configuration to serve the <code class="language-plaintext highlighter-rouge">.mkv</code> file from <code class="language-plaintext highlighter-rouge">/var/www/html/movies/</code>. Here’s a minimal working config:</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>

    <span class="kn">location</span> <span class="n">/movies/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/var/www/html/movies/</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span> <span class="c1"># Enables directory listing if you want to browse files</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>Notes</strong>:
    <ul>
      <li>Use <code class="language-plaintext highlighter-rouge">alias</code> instead of <code class="language-plaintext highlighter-rouge">root</code> to map <code class="language-plaintext highlighter-rouge">/movies/</code> directly to <code class="language-plaintext highlighter-rouge">/var/www/html/movies/</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">autoindex on;</code> is optional. If you disable it (<code class="language-plaintext highlighter-rouge">autoindex off;</code>), you’ll need to specify the exact file URL (e.g., <code class="language-plaintext highlighter-rouge">http://localhost/movies/yourfile.mkv</code>) to access it.</li>
    </ul>
  </li>
</ul>

<p>Save this config (e.g., in <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-enabled/default</code> or a custom file like <code class="language-plaintext highlighter-rouge">/etc/nginx/conf.d/movies.conf</code>), then test and restart Nginx:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nginx <span class="nt">-t</span>  <span class="c"># Test config for syntax errors</span>
<span class="nb">sudo </span>systemctl restart nginx  <span class="c"># Apply changes</span>
</code></pre></div></div>

<h3 id="step-4-test-access">Step 4: Test Access</h3>
<ul>
  <li>Open your browser and visit:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">http://localhost/movies/</code> (if <code class="language-plaintext highlighter-rouge">autoindex</code> is on, you’ll see a directory listing with <code class="language-plaintext highlighter-rouge">yourfile.mkv</code>).</li>
      <li><code class="language-plaintext highlighter-rouge">http://localhost/movies/yourfile.mkv</code> (to directly access the file).</li>
    </ul>
  </li>
  <li>If it works, the file should either display in the browser (if supported) or prompt a download.</li>
</ul>

<h3 id="step-5-troubleshoot-if-needed">Step 5: Troubleshoot if Needed</h3>
<p>If you still get a 403 error:</p>
<ol>
  <li><strong>Check Permissions</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span> /var/www/html/movies/
</code></pre></div>    </div>
    <p>Ensure <code class="language-plaintext highlighter-rouge">yourfile.mkv</code> is readable (e.g., <code class="language-plaintext highlighter-rouge">-rwxr-xr-x</code> or at least <code class="language-plaintext highlighter-rouge">-rw-r--r--</code>).</p>
  </li>
  <li><strong>Check Nginx Logs</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/nginx/error.log
</code></pre></div>    </div>
    <p>Look for clues like “permission denied.”</p>
  </li>
  <li><strong>SELinux (if applicable)</strong>:
If on a system with SELinux (e.g., CentOS), run:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>setenforce 0  <span class="c"># Temporarily disable</span>
</code></pre></div>    </div>
    <p>Test again. If it works, you’ll need to adjust SELinux contexts:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chcon</span> <span class="nt">-R</span> <span class="nt">-t</span> httpd_sys_content_t /var/www/html/movies/
<span class="nb">sudo </span>setenforce 1  <span class="c"># Re-enable SELinux</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="final-thoughts">Final Thoughts</h3>
<p>By saving your <code class="language-plaintext highlighter-rouge">.mkv</code> file in <code class="language-plaintext highlighter-rouge">/var/www/html/movies/</code>, setting the correct permissions, and using the <code class="language-plaintext highlighter-rouge">alias</code> directive in Nginx, you should resolve the 403 error. This setup is simple and follows web server conventions, making it easy for the Nginx user to access the file. Let me know if you hit any snags!</p>

<hr />

<p>If you get an “invalid user” error with <code class="language-plaintext highlighter-rouge">sudo chown -R nginx:nginx /var/www/movies</code>, it means the <code class="language-plaintext highlighter-rouge">nginx</code> user doesn’t exist on your system. This happens because the Nginx process might run under a different user, like <code class="language-plaintext highlighter-rouge">www-data</code> (common on Debian/Ubuntu) or another default depending on your OS.</p>

<h3 id="fix-identify-and-use-the-correct-user">Fix: Identify and Use the Correct User</h3>
<ol>
  <li><strong>Check the Nginx User</strong>:
Look in your Nginx configuration file (usually <code class="language-plaintext highlighter-rouge">/etc/nginx/nginx.conf</code>):
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep </span>user /etc/nginx/nginx.conf
</code></pre></div>    </div>
    <ul>
      <li>If it says <code class="language-plaintext highlighter-rouge">user www-data;</code>, use <code class="language-plaintext highlighter-rouge">www-data</code>.</li>
      <li>If it says <code class="language-plaintext highlighter-rouge">user nginx;</code>, the <code class="language-plaintext highlighter-rouge">nginx</code> user should exist (might indicate a misconfiguration).</li>
      <li>If no <code class="language-plaintext highlighter-rouge">user</code> directive is found, the default user depends on your system:
        <ul>
          <li>Ubuntu/Debian: <code class="language-plaintext highlighter-rouge">www-data</code></li>
          <li>CentOS/RHEL: <code class="language-plaintext highlighter-rouge">nginx</code></li>
          <li>Other: Could be <code class="language-plaintext highlighter-rouge">http</code>, <code class="language-plaintext highlighter-rouge">apache</code>, or similar.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Alternative: Check Running Process</strong>:
If the config isn’t clear, see what user Nginx is running as:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps aux | <span class="nb">grep </span>nginx
</code></pre></div>    </div>
    <p>Look at the first column (e.g., <code class="language-plaintext highlighter-rouge">www-data</code> or <code class="language-plaintext highlighter-rouge">nginx</code>) for worker processes.</p>
  </li>
  <li><strong>Apply the Correct User</strong>:
Assuming it’s <code class="language-plaintext highlighter-rouge">www-data</code> (common on Ubuntu/Debian), update the command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> <span class="nt">-R</span> www-data:www-data /var/www/movies
</code></pre></div>    </div>
    <p>If it’s a different user (e.g., <code class="language-plaintext highlighter-rouge">http</code>), use:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> <span class="nt">-R</span> http:http /var/www/movies
</code></pre></div>    </div>
  </li>
  <li><strong>Set Permissions</strong>:
After fixing ownership, ensure proper permissions:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod</span> <span class="nt">-R</span> 755 /var/www/movies
</code></pre></div>    </div>
  </li>
  <li><strong>Restart and Test</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart nginx
</code></pre></div>    </div>
    <p>Visit <code class="language-plaintext highlighter-rouge">http://localhost/movies/yourfile.mkv</code>.</p>
  </li>
</ol>

<h3 id="if-still-stuck">If Still Stuck</h3>
<p>If neither <code class="language-plaintext highlighter-rouge">nginx</code> nor <code class="language-plaintext highlighter-rouge">www-data</code> works and the process check doesn’t help, let me know your OS (e.g., Ubuntu, CentOS) or the output of <code class="language-plaintext highlighter-rouge">ps aux | grep nginx</code>, and I’ll pinpoint the exact user for you!</p>

<hr />

<p>If <code class="language-plaintext highlighter-rouge">autoindex on;</code> is set but <code class="language-plaintext highlighter-rouge">http://localhost/movies/</code> still isn’t listing files, let’s troubleshoot and fix it step-by-step. Since you’re not seeing the directory listing, it could be a config issue, permissions problem, or something else blocking it. Here’s how to resolve it:</p>

<h3 id="1-verify-your-config">1. Verify Your Config</h3>
<p>Ensure your Nginx configuration is correct and applied. It should look like this:</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>

    <span class="kn">location</span> <span class="n">/movies/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/var/www/movies/</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>Common Mistakes</strong>:
    <ul>
      <li>Typo in <code class="language-plaintext highlighter-rouge">alias</code> path (e.g., <code class="language-plaintext highlighter-rouge">/var/www/movie/</code> instead of <code class="language-plaintext highlighter-rouge">/var/www/movies/</code>).</li>
      <li><code class="language-plaintext highlighter-rouge">autoindex on;</code> is in the wrong block or commented out.</li>
      <li>Config file isn’t being loaded (e.g., saved in the wrong location).</li>
    </ul>
  </li>
</ul>

<p>Check where your config is:</p>
<ul>
  <li>If it’s in <code class="language-plaintext highlighter-rouge">/etc/nginx/sites-enabled/</code>, ensure it’s linked properly (e.g., <code class="language-plaintext highlighter-rouge">ls -l /etc/nginx/sites-enabled/</code>).</li>
  <li>If it’s in <code class="language-plaintext highlighter-rouge">/etc/nginx/conf.d/</code>, ensure it ends in <code class="language-plaintext highlighter-rouge">.conf</code> (e.g., <code class="language-plaintext highlighter-rouge">movies.conf</code>).</li>
</ul>

<p>Test and reload:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nginx <span class="nt">-t</span>
<span class="nb">sudo </span>systemctl reload nginx  <span class="c"># Reload instead of restart to avoid downtime</span>
</code></pre></div></div>

<h3 id="2-confirm-files-exist">2. Confirm Files Exist</h3>
<p>Check that <code class="language-plaintext highlighter-rouge">/var/www/movies/</code> has your <code class="language-plaintext highlighter-rouge">.mkv</code> file:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span> /var/www/movies/
</code></pre></div></div>
<ul>
  <li>If it’s empty, move your file there:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mv</span> /path/to/yourfile.mkv /var/www/movies/
</code></pre></div>    </div>
  </li>
  <li>If it’s not empty, note the file names for testing.</li>
</ul>

<h3 id="3-check-permissions">3. Check Permissions</h3>
<p>Nginx needs read (<code class="language-plaintext highlighter-rouge">r</code>) and execute (<code class="language-plaintext highlighter-rouge">x</code>) access to the directory and files. Verify:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-ld</span> /var/www/movies/
<span class="nb">ls</span> <span class="nt">-l</span> /var/www/movies/
</code></pre></div></div>
<ul>
  <li>Output should look like:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drwxr-xr-x 2 www-data www-data 4096 Mar 15 14:00 /var/www/movies/
-rw-r--r-- 1 www-data www-data 123456 Mar 15 14:00 yourfile.mkv
</code></pre></div>    </div>
  </li>
  <li>Fix if needed (replace <code class="language-plaintext highlighter-rouge">www-data</code> with your Nginx user):
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown</span> <span class="nt">-R</span> www-data:www-data /var/www/movies/
<span class="nb">sudo chmod</span> <span class="nt">-R</span> 755 /var/www/movies/
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="4-check-logs">4. Check Logs</h3>
<p>Look at the Nginx error log for clues:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo tail</span> <span class="nt">-n</span> 20 /var/log/nginx/error.log
</code></pre></div></div>
<ul>
  <li><strong>“permission denied”</strong>: Indicates a permissions issue—recheck step 3.</li>
  <li><strong>“directory index forbidden”</strong>: Suggests <code class="language-plaintext highlighter-rouge">autoindex</code> isn’t working—double-check the config.</li>
  <li>No relevant errors: Might mean Nginx isn’t hitting the right location block.</li>
</ul>

<h3 id="5-test-direct-access">5. Test Direct Access</h3>
<p>Try accessing a specific file:</p>
<ul>
  <li>Visit <code class="language-plaintext highlighter-rouge">http://localhost/movies/yourfile.mkv</code>.</li>
  <li>If it works but <code class="language-plaintext highlighter-rouge">/movies/</code> doesn’t, <code class="language-plaintext highlighter-rouge">autoindex</code> or the directory setup is the issue.</li>
</ul>

<h3 id="6-common-fixes">6. Common Fixes</h3>
<ul>
  <li><strong>Trailing Slash</strong>: Ensure <code class="language-plaintext highlighter-rouge">alias</code> ends with <code class="language-plaintext highlighter-rouge">/</code> (<code class="language-plaintext highlighter-rouge">/var/www/movies/</code>), and test both <code class="language-plaintext highlighter-rouge">http://localhost/movies</code> and <code class="language-plaintext highlighter-rouge">http://localhost/movies/</code>.</li>
  <li><strong>SELinux (if on CentOS/RHEL)</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>setenforce 0  <span class="c"># Temporarily disable</span>
</code></pre></div>    </div>
    <p>Test again. If it works, apply:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chcon</span> <span class="nt">-R</span> <span class="nt">-t</span> httpd_sys_content_t /var/www/movies/
<span class="nb">sudo </span>setenforce 1
</code></pre></div>    </div>
  </li>
  <li><strong>Conflicting Location Blocks</strong>: If another <code class="language-plaintext highlighter-rouge">location</code> block (e.g., <code class="language-plaintext highlighter-rouge">location /</code>) overrides <code class="language-plaintext highlighter-rouge">/movies/</code>, move this block higher in the config or make it more specific.</li>
</ul>

<h3 id="7-minimal-test-config">7. Minimal Test Config</h3>
<p>If it’s still not working, simplify to isolate the issue. Replace your config with:</p>

<div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>

    <span class="kn">location</span> <span class="n">/movies/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="n">/var/www/movies/</span><span class="p">;</span>
        <span class="kn">autoindex</span> <span class="no">on</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Save, test, and reload:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nginx <span class="nt">-t</span>
<span class="nb">sudo </span>systemctl reload nginx
</code></pre></div></div>

<h3 id="whats-happening">What’s Happening?</h3>
<p>Tell me:</p>
<ul>
  <li>What do you see at <code class="language-plaintext highlighter-rouge">http://localhost/movies/</code> (e.g., 403, 404, blank page)?</li>
  <li>Any errors in <code class="language-plaintext highlighter-rouge">sudo tail -n 20 /var/log/nginx/error.log</code>?</li>
  <li>Output of <code class="language-plaintext highlighter-rouge">ls -l /var/www/movies/</code>?</li>
</ul>

<p>With that, I can pinpoint the exact issue and get your directory listing working!</p>



  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
