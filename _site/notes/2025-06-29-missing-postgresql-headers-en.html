<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Missing libpq-fe.h for psycopg2</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Missing libpq-fe.h for psycopg2 | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Missing libpq-fe.h for psycopg2" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-06-29-missing-postgresql-headers-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-06-29-missing-postgresql-headers-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Missing libpq-fe.h for psycopg2" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Missing libpq-fe.h for psycopg2","url":"https://lzwjava.github.io/notes/2025-06-29-missing-postgresql-headers-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=297466ee6c198c06b400a480a8c7d44ffb6f0441">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=297466ee6c198c06b400a480a8c7d44ffb6f0441" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Missing libpq-fe.h for psycopg2 | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-06-29-missing-postgresql-headers-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-06-29-missing-postgresql-headers-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.09</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/missing-postgresql-headers-en" selected>English</option>
        <option value="/missing-postgresql-headers-zh" >中文</option>
        <option value="/missing-postgresql-headers-ja" >日本語</option>
        <option value="/missing-postgresql-headers-es" >Español</option>
        <option value="/missing-postgresql-headers-hi" >हिंदी</option>
        <option value="/missing-postgresql-headers-fr" >Français</option>
        <option value="/missing-postgresql-headers-de" >Deutsch</option>
        <option value="/missing-postgresql-headers-ar" >العربية</option>
        <option value="/missing-postgresql-headers-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>When trying to install the Python package <code class="language-plaintext highlighter-rouge">psycopg2</code>, you encountered an error indicating that the wheel could not be built successfully. The key part of the error message is:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>In file included from psycopg/adapter_asis.c:28:
./psycopg/psycopg.h:36:10: fatal error: libpq-fe.h: No such file or directory
   36 | #include &lt;libpq-fe.h&gt;
      |          ^~~~~~~~~~~~
compilation terminated.
</code></pre></div></div>

<p>This error occurs because the file <code class="language-plaintext highlighter-rouge">libpq-fe.h</code>, a header file from the PostgreSQL client library, is missing on your system. The <code class="language-plaintext highlighter-rouge">psycopg2</code> package requires this file to build from source, as it provides the interface to connect Python to PostgreSQL databases. Below, I’ll explain why this happens and provide a step-by-step solution to fix it.</p>

<hr />

<h3 id="why-this-error-occurs">Why This Error Occurs</h3>
<p>The <code class="language-plaintext highlighter-rouge">psycopg2</code> package is a PostgreSQL adapter for Python, and when you install it using <code class="language-plaintext highlighter-rouge">pip</code>, it attempts to compile its C extensions. These extensions depend on the PostgreSQL client library, specifically the development headers like <code class="language-plaintext highlighter-rouge">libpq-fe.h</code>. The error message confirms this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>It appears you are missing some prerequisite to build the package from source.
</code></pre></div></div>

<p>Your system, which appears to be a Debian-based Linux distribution (based on the use of <code class="language-plaintext highlighter-rouge">x86_64-linux-gnu-gcc</code>), lacks the necessary PostgreSQL development files. Without these, the compilation fails, preventing the wheel for <code class="language-plaintext highlighter-rouge">psycopg2</code> from being built.</p>

<p>The error also suggests two options:</p>
<ol>
  <li>Install the pre-built binary package <code class="language-plaintext highlighter-rouge">psycopg2-binary</code> via PyPI.</li>
  <li>Install the missing prerequisites and build <code class="language-plaintext highlighter-rouge">psycopg2</code> from source.</li>
</ol>

<p>Since your project specifies <code class="language-plaintext highlighter-rouge">psycopg2</code> (not <code class="language-plaintext highlighter-rouge">psycopg2-binary</code>) in the requirements file, and building from source may be necessary for compatibility or customization, we’ll focus on fixing the build process. However, I’ll also mention the binary option later for completeness.</p>

<hr />

<h3 id="how-to-fix-the-error">How to Fix the Error</h3>
<p>To resolve this, you need to install the PostgreSQL client development package, which provides <code class="language-plaintext highlighter-rouge">libpq-fe.h</code> and other necessary files. Here’s how to do it:</p>

<h4 id="step-1-identify-your-system">Step 1: Identify Your System</h4>
<p>Your build output includes <code class="language-plaintext highlighter-rouge">x86_64-linux-gnu-gcc</code>, indicating you’re likely using a Debian-based system like Ubuntu. The solution will be tailored to this, but I’ll note alternatives for other distributions later.</p>

<h4 id="step-2-install-the-postgresql-development-package">Step 2: Install the PostgreSQL Development Package</h4>
<p>On Debian-based systems (e.g., Ubuntu), the package <code class="language-plaintext highlighter-rouge">libpq-dev</code> contains the PostgreSQL client library headers, including <code class="language-plaintext highlighter-rouge">libpq-fe.h</code>. Install it with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>libpq-dev
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">sudo apt-get update</code></strong>: Ensures your package list is current.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">sudo apt-get install libpq-dev</code></strong>: Installs the development files for the PostgreSQL client library.</li>
</ul>

<p>This package places <code class="language-plaintext highlighter-rouge">libpq-fe.h</code> in a standard location (typically <code class="language-plaintext highlighter-rouge">/usr/include/postgresql</code>), which the build process searches (as seen in your include path: `-I/usr/include/post每月</p>

<h4 id="step-3-retry-the-installation">Step 3: Retry the Installation</h4>
<p>Once <code class="language-plaintext highlighter-rouge">libpq-dev</code> is installed, retry installing your requirements:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-r</span> scripts/requirements/requirements.local.txt
</code></pre></div></div>

<p>This should now succeed, as the missing <code class="language-plaintext highlighter-rouge">libpq-fe.h</code> file will be available, allowing <code class="language-plaintext highlighter-rouge">psycopg2</code> to build its wheel.</p>

<hr />

<h3 id="verifying-the-fix">Verifying the Fix</h3>
<p>If the installation still fails, check that the PostgreSQL headers are correctly installed:</p>
<ul>
  <li>Run <code class="language-plaintext highlighter-rouge">pg_config --includedir</code> to see where the headers are located (e.g., <code class="language-plaintext highlighter-rouge">/usr/include/postgresql</code>).</li>
  <li>Ensure this matches the include path in the build command (<code class="language-plaintext highlighter-rouge">-I/usr/include/postgresql</code>).</li>
</ul>

<p>Your build output shows <code class="language-plaintext highlighter-rouge">-DPG_VERSION_NUM=140018</code>, indicating it’s targeting PostgreSQL 14. The <code class="language-plaintext highlighter-rouge">libpq-dev</code> package is version-agnostic and should work with PostgreSQL 14 headers.</p>

<hr />

<h3 id="alternative-use-the-binary-package">Alternative: Use the Binary Package</h3>
<p>If you don’t need to build <code class="language-plaintext highlighter-rouge">psycopg2</code> from source (e.g., for specific optimizations or compatibility), you can install the pre-built <code class="language-plaintext highlighter-rouge">psycopg2-binary</code> instead:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>psycopg2-binary
</code></pre></div></div>

<p>To use this in your project, update <code class="language-plaintext highlighter-rouge">scripts/requirements/requirements.local.txt</code> to replace <code class="language-plaintext highlighter-rouge">psycopg2</code> with <code class="language-plaintext highlighter-rouge">psycopg2-binary</code>. However, note that <code class="language-plaintext highlighter-rouge">psycopg2-binary</code> may have limitations (e.g., potential compatibility issues with certain PostgreSQL versions), so building from source is preferred if your project requires it.</p>

<hr />

<h3 id="for-other-distributions">For Other Distributions</h3>
<p>If you’re not on a Debian-based system, install the equivalent package:</p>
<ul>
  <li><strong>Red Hat/CentOS/Fedora</strong>: <code class="language-plaintext highlighter-rouge">sudo yum install postgresql-devel</code> or <code class="language-plaintext highlighter-rouge">sudo dnf install postgresql-devel</code></li>
  <li><strong>Arch Linux</strong>: <code class="language-plaintext highlighter-rouge">sudo pacman -S postgresql-libs</code></li>
  <li><strong>macOS (with Homebrew)</strong>: <code class="language-plaintext highlighter-rouge">brew install libpq</code></li>
</ul>

<p>Then, retry the <code class="language-plaintext highlighter-rouge">pip install</code> command.</p>

<hr />

<h3 id="summary">Summary</h3>
<p>The error occurs because <code class="language-plaintext highlighter-rouge">libpq-fe.h</code> is missing, which is part of the PostgreSQL client development files. For your Debian-based system, installing <code class="language-plaintext highlighter-rouge">libpq-dev</code> with <code class="language-plaintext highlighter-rouge">sudo apt-get install libpq-dev</code> should resolve the issue. After that, re-run your <code class="language-plaintext highlighter-rouge">pip install</code> command, and <code class="language-plaintext highlighter-rouge">psycopg2</code> should build successfully. If you prefer a quicker fix and don’t need source compilation, use <code class="language-plaintext highlighter-rouge">psycopg2-binary</code> instead.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
