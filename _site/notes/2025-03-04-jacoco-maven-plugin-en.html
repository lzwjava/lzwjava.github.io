<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>JaCoCo Maven Plugin</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>JaCoCo Maven Plugin | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="JaCoCo Maven Plugin" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-03-04-jacoco-maven-plugin-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-03-04-jacoco-maven-plugin-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="JaCoCo Maven Plugin" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"JaCoCo Maven Plugin","url":"https://lzwjava.github.io/notes/2025-03-04-jacoco-maven-plugin-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=6a0475de5c763d2602122ebf912cb2cfa1720ac8">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=6a0475de5c763d2602122ebf912cb2cfa1720ac8" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       JaCoCo Maven Plugin | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-03-04-jacoco-maven-plugin-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-03-04-jacoco-maven-plugin-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/jacoco-maven-plugin-en" selected>English</option>
        <option value="/jacoco-maven-plugin-zh" >中文</option>
        <option value="/jacoco-maven-plugin-ja" >日本語</option>
        <option value="/jacoco-maven-plugin-es" >Español</option>
        <option value="/jacoco-maven-plugin-hi" >हिंदी</option>
        <option value="/jacoco-maven-plugin-fr" >Français</option>
        <option value="/jacoco-maven-plugin-de" >Deutsch</option>
        <option value="/jacoco-maven-plugin-ar" >العربية</option>
        <option value="/jacoco-maven-plugin-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Here’s a step-by-step guide on <strong>how to use the JaCoCo Maven plugin</strong> to measure code coverage in a Maven-based Java project. JaCoCo (Java Code Coverage) is a tool that integrates with Maven to track how much of your code is exercised by tests, typically unit tests. By adding and configuring the JaCoCo Maven plugin in your project, you can generate detailed coverage reports during the build process.</p>

<hr />

<h3 id="steps-to-use-the-jacoco-maven-plugin"><strong>Steps to Use the JaCoCo Maven Plugin</strong></h3>

<h4 id="1-add-the-jacoco-maven-plugin-to-your-pomxml"><strong>1. Add the JaCoCo Maven Plugin to Your <code class="language-plaintext highlighter-rouge">pom.xml</code></strong></h4>
<p>To use the JaCoCo Maven plugin, you need to include it in the <code class="language-plaintext highlighter-rouge">&lt;build&gt;&lt;plugins&gt;</code> section of your project’s <code class="language-plaintext highlighter-rouge">pom.xml</code> file. Below is a basic configuration that sets up the plugin:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.jacoco<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jacoco-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.8.12<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- Use the latest version available --&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
                <span class="nt">&lt;execution&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                        <span class="nt">&lt;goal&gt;</span>prepare-agent<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                <span class="nt">&lt;/execution&gt;</span>
                <span class="nt">&lt;execution&gt;</span>
                    <span class="nt">&lt;id&gt;</span>report<span class="nt">&lt;/id&gt;</span>
                    <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                        <span class="nt">&lt;goal&gt;</span>report<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">groupId</code>, <code class="language-plaintext highlighter-rouge">artifactId</code>, and <code class="language-plaintext highlighter-rouge">version</code></strong>: These identify the JaCoCo Maven plugin. Replace <code class="language-plaintext highlighter-rouge">0.8.12</code> with the latest version available on <a href="https://mvnrepository.com/artifact/org.jacoco/jacoco-maven-plugin">Maven Central Repository</a>.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">&lt;executions&gt;</code></strong>: This section configures when and how the plugin runs during the Maven build lifecycle:
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">&lt;goal&gt;prepare-agent&lt;/goal&gt;</code></strong>: Prepares the JaCoCo agent to collect coverage data during test execution. By default, it binds to an early phase (like <code class="language-plaintext highlighter-rouge">initialize</code>) and doesn’t require an explicit phase unless customized.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">&lt;goal&gt;report&lt;/goal&gt;</code></strong>: Generates the coverage report after tests have run. It’s bound to the <code class="language-plaintext highlighter-rouge">verify</code> phase here, which occurs after the <code class="language-plaintext highlighter-rouge">test</code> phase, ensuring all test data is available.</li>
    </ul>
  </li>
</ul>

<h4 id="2-ensure-tests-are-configured"><strong>2. Ensure Tests Are Configured</strong></h4>
<p>The JaCoCo plugin works by analyzing test execution, typically unit tests run by the Maven Surefire Plugin. In most Maven projects, Surefire is included by default and runs tests located in <code class="language-plaintext highlighter-rouge">src/test/java</code>. No additional configuration is needed unless your tests are non-standard. Verify that:</p>
<ul>
  <li>You have unit tests written (e.g., using JUnit or TestNG).</li>
  <li>The Surefire plugin is present (it’s inherited from the default Maven parent POM in most cases).</li>
</ul>

<p>If you need to explicitly configure Surefire, it might look like this:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.5.0<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- Use the latest version --&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">prepare-agent</code> goal sets up the JaCoCo agent by modifying the <code class="language-plaintext highlighter-rouge">argLine</code> property, which Surefire uses to run tests with coverage tracking enabled.</p>

<h4 id="3-run-the-maven-build"><strong>3. Run the Maven Build</strong></h4>
<p>To generate the coverage report, execute the following command in your project directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn verify
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">mvn verify</code></strong>: This runs all phases up to <code class="language-plaintext highlighter-rouge">verify</code>, including <code class="language-plaintext highlighter-rouge">compile</code>, <code class="language-plaintext highlighter-rouge">test</code>, and <code class="language-plaintext highlighter-rouge">verify</code>. The JaCoCo plugin will:
    <ol>
      <li>Prepare the agent before tests run.</li>
      <li>Collect coverage data during the <code class="language-plaintext highlighter-rouge">test</code> phase (when Surefire executes tests).</li>
      <li>Generate the report during the <code class="language-plaintext highlighter-rouge">verify</code> phase.</li>
    </ol>
  </li>
</ul>

<p>Alternatively, if you only want to run tests without proceeding to <code class="language-plaintext highlighter-rouge">verify</code>, use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn <span class="nb">test</span>
</code></pre></div></div>

<p>However, since the <code class="language-plaintext highlighter-rouge">report</code> goal is bound to <code class="language-plaintext highlighter-rouge">verify</code> in this configuration, you’ll need to run <code class="language-plaintext highlighter-rouge">mvn verify</code> to see the report. If you prefer the report to generate during <code class="language-plaintext highlighter-rouge">mvn test</code>, you can change the <code class="language-plaintext highlighter-rouge">&lt;phase&gt;</code> for the <code class="language-plaintext highlighter-rouge">report</code> execution to <code class="language-plaintext highlighter-rouge">test</code>, though <code class="language-plaintext highlighter-rouge">verify</code> is a common convention.</p>

<h4 id="4-view-the-coverage-report"><strong>4. View the Coverage Report</strong></h4>
<p>After running <code class="language-plaintext highlighter-rouge">mvn verify</code>, JaCoCo generates an HTML report by default. You can find it at:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>target/site/jacoco/index.html
</code></pre></div></div>

<ul>
  <li>Open this file in a web browser to view a detailed breakdown of code coverage, including percentages for packages, classes, methods, and lines.</li>
  <li>The report also includes XML and CSV formats in the same directory (<code class="language-plaintext highlighter-rouge">jacoco.xml</code> and <code class="language-plaintext highlighter-rouge">jacoco.csv</code>), useful for integration with tools like CI systems.</li>
</ul>

<hr />

<h3 id="optional-customizations"><strong>Optional Customizations</strong></h3>
<p>For more advanced use cases, you can tweak the plugin configuration:</p>

<ul>
  <li>
    <p><strong>Exclude Classes or Packages</strong>:
To exclude certain code from coverage analysis (e.g., generated code), add a <code class="language-plaintext highlighter-rouge">&lt;configuration&gt;</code> section:</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;excludes&gt;</span>
        <span class="nt">&lt;exclude&gt;</span>**/generated/**/*<span class="nt">&lt;/exclude&gt;</span>
    <span class="nt">&lt;/excludes&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>    </div>

    <p>Place this inside the <code class="language-plaintext highlighter-rouge">&lt;plugin&gt;</code> tag, above <code class="language-plaintext highlighter-rouge">&lt;executions&gt;</code>.</p>
  </li>
  <li>
    <p><strong>Enforce Coverage Thresholds</strong>:
To fail the build if coverage falls below a threshold, add the <code class="language-plaintext highlighter-rouge">check</code> goal:</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;execution&gt;</span>
    <span class="nt">&lt;id&gt;</span>check<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
    <span class="nt">&lt;goals&gt;</span>
        <span class="nt">&lt;goal&gt;</span>check<span class="nt">&lt;/goal&gt;</span>
    <span class="nt">&lt;/goals&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;rules&gt;</span>
            <span class="nt">&lt;rule&gt;</span>
                <span class="nt">&lt;element&gt;</span>BUNDLE<span class="nt">&lt;/element&gt;</span>
                <span class="nt">&lt;limits&gt;</span>
                    <span class="nt">&lt;limit&gt;</span>
                        <span class="nt">&lt;counter&gt;</span>LINE<span class="nt">&lt;/counter&gt;</span>
                        <span class="nt">&lt;value&gt;</span>COVEREDRATIO<span class="nt">&lt;/value&gt;</span>
                        <span class="nt">&lt;minimum&gt;</span>0.80<span class="nt">&lt;/minimum&gt;</span> <span class="c">&lt;!-- 80% line coverage --&gt;</span>
                    <span class="nt">&lt;/limit&gt;</span>
                <span class="nt">&lt;/limits&gt;</span>
            <span class="nt">&lt;/rule&gt;</span>
        <span class="nt">&lt;/rules&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/execution&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Change Report Output Directory</strong>:
To customize the report location, add:</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;destFile&gt;</span>${project.build.directory}/custom-jacoco.exec<span class="nt">&lt;/destFile&gt;</span>
    <span class="nt">&lt;dataFile&gt;</span>${project.build.directory}/custom-jacoco.exec<span class="nt">&lt;/dataFile&gt;</span>
    <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/custom-reports<span class="nt">&lt;/outputDirectory&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>    </div>
  </li>
</ul>

<hr />

<h3 id="summary"><strong>Summary</strong></h3>
<p>To use the JaCoCo Maven plugin:</p>
<ol>
  <li>Add the plugin to your <code class="language-plaintext highlighter-rouge">pom.xml</code> with <code class="language-plaintext highlighter-rouge">prepare-agent</code> and <code class="language-plaintext highlighter-rouge">report</code> goals.</li>
  <li>Ensure your project has tests configured (typically via Surefire).</li>
  <li>Run <code class="language-plaintext highlighter-rouge">mvn verify</code> to generate the coverage report.</li>
  <li>Check the report at <code class="language-plaintext highlighter-rouge">target/site/jacoco/index.html</code>.</li>
</ol>

<p>This setup provides a straightforward way to integrate code coverage into your Maven build process, helping you assess the effectiveness of your tests. For the latest plugin version or advanced configurations, refer to the <a href="https://www.jacoco.org/jacoco/trunk/doc/maven.html">official JaCoCo documentation</a>.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
