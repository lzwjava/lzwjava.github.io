<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Understanding Pointcut Expressions</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Understanding Pointcut Expressions | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Understanding Pointcut Expressions" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/notes/2025-06-11-pointcut-en" />
<meta property="og:url" content="https://lzwjava.github.io/notes/2025-06-11-pointcut-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Understanding Pointcut Expressions" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Zhiwei Li"},"description":"李智维","headline":"Understanding Pointcut Expressions","url":"https://lzwjava.github.io/notes/2025-06-11-pointcut-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=c96c645be2c8c2eeccd0cbfd2e1883e382a66dae">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=c96c645be2c8c2eeccd0cbfd2e1883e382a66dae" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Understanding Pointcut Expressions | Generated by AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="notes/2025-06-11-pointcut-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>notes2025-06-11-pointcut-en.md</span> -->
      

      <!-- <span></span> -->

      
        <a href="#" class="button">2025.10</a>
      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/pointcut-en" selected>English</option>
        <option value="/pointcut-zh" >中文</option>
        <option value="/pointcut-ja" >日本語</option>
        <option value="/pointcut-es" >Español</option>
        <option value="/pointcut-hi" >हिंदी</option>
        <option value="/pointcut-fr" >Français</option>
        <option value="/pointcut-de" >Deutsch</option>
        <option value="/pointcut-ar" >العربية</option>
        <option value="/pointcut-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>You’re asking for a comprehensive guide on AspectJ pointcut expressions, specifically focusing on <code class="language-plaintext highlighter-rouge">execution</code> and how to use wildcards, match class names (prefix/suffix), and also about other advice types like <code class="language-plaintext highlighter-rouge">@AfterReturning</code>. Let’s break this down.</p>

<h3 id="understanding-pointcut-expressions-in-spring-aop-aspectj-syntax">Understanding Pointcut Expressions in Spring AOP (AspectJ Syntax)</h3>

<p>Spring AOP uses AspectJ pointcut expressions to determine <em>where</em> an advice (like <code class="language-plaintext highlighter-rouge">@Before</code>, <code class="language-plaintext highlighter-rouge">@AfterReturning</code>, etc.) should be applied. The core of your question revolves around the <code class="language-plaintext highlighter-rouge">execution</code> pointcut designator, which is the most commonly used one.</p>

<h4 id="the-execution-pointcut-designator">The <code class="language-plaintext highlighter-rouge">execution</code> Pointcut Designator</h4>

<p>The <code class="language-plaintext highlighter-rouge">execution</code> pointcut designator matches method executions. Its general syntax is:</p>

<p><code class="language-plaintext highlighter-rouge">execution(modifiers-pattern? ret-type-pattern declaring-type-pattern?name-pattern(param-pattern) throws-pattern?)</code></p>

<p>Let’s break down the components:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">modifiers-pattern?</code></strong>: Optional. Matches method modifiers (e.g., <code class="language-plaintext highlighter-rouge">public</code>, <code class="language-plaintext highlighter-rouge">private</code>, <code class="language-plaintext highlighter-rouge">protected</code>).</li>
  <li><strong><code class="language-plaintext highlighter-rouge">ret-type-pattern</code></strong>: Required. Matches the return type of the method.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">declaring-type-pattern?</code></strong>: Optional. Matches the fully qualified class name where the method is declared.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">name-pattern</code></strong>: Required. Matches the name of the method.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">param-pattern</code></strong>: Required. Matches the parameters of the method.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">throws-pattern?</code></strong>: Optional. Matches the exceptions thrown by the method.</li>
</ul>

<h4 id="your-example-beforeexecution-comexampleservice">Your Example: <code class="language-plaintext highlighter-rouge">@Before("execution(* com.example.service.*.*(..))")</code></h4>

<p>Let’s dissect your given example:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Before</code>: This is an advice annotation, meaning the annotated method will run <em>before</em> the matched join point.</li>
  <li><code class="language-plaintext highlighter-rouge">execution()</code>: The pointcut designator.</li>
  <li><code class="language-plaintext highlighter-rouge">*</code>: Matches any return type.</li>
  <li><code class="language-plaintext highlighter-rouge">com.example.service.*.*</code>:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">com.example.service</code>: Matches the package <code class="language-plaintext highlighter-rouge">com.example.service</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">.*</code>: The first <code class="language-plaintext highlighter-rouge">*</code> after <code class="language-plaintext highlighter-rouge">service</code> matches any class within the <code class="language-plaintext highlighter-rouge">com.example.service</code> package.</li>
      <li><code class="language-plaintext highlighter-rouge">.</code>: Separator between package/class and method.</li>
      <li><code class="language-plaintext highlighter-rouge">*</code>: The second <code class="language-plaintext highlighter-rouge">*</code> matches any method name within those classes.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">(..)</code>: Matches any number of parameters (zero or more, of any type).</li>
</ul>

<p><strong>In plain English:</strong> This pointcut matches the execution of <em>any method</em> in <em>any class</em> within the <code class="language-plaintext highlighter-rouge">com.example.service</code> package (and its direct sub-packages, if any classes are directly in <code class="language-plaintext highlighter-rouge">com.example.service</code>).</p>

<hr />

<h3 id="wildcards-in-pointcut-expressions">Wildcards in Pointcut Expressions</h3>

<p>Wildcards are crucial for creating flexible pointcut expressions.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">*</code> (single asterisk)</strong>:
    <ul>
      <li>Matches any single element in a name pattern (e.g., any return type, any class name, any method name).</li>
      <li>Matches any single segment in a package name (e.g., <code class="language-plaintext highlighter-rouge">com.example.*.service</code> would match <code class="language-plaintext highlighter-rouge">com.example.foo.service</code>).</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">..</code> (double dot)</strong>:
    <ul>
      <li><strong>In package patterns</strong>: Matches zero or more segments in a package name.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">com.example..service</code>: Matches <code class="language-plaintext highlighter-rouge">com.example.service</code>, <code class="language-plaintext highlighter-rouge">com.example.foo.service</code>, <code class="language-plaintext highlighter-rouge">com.example.foo.bar.service</code>, etc.</li>
        </ul>
      </li>
      <li><strong>In parameter patterns</strong>: Matches zero or more arguments of any type.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">(..)</code>: Matches any number of arguments.</li>
          <li><code class="language-plaintext highlighter-rouge">(java.lang.String, ..)</code>: Matches methods with a <code class="language-plaintext highlighter-rouge">String</code> as the first argument, followed by any number of other arguments.</li>
          <li><code class="language-plaintext highlighter-rouge">(.., java.lang.Long)</code>: Matches methods with any number of initial arguments, ending with a <code class="language-plaintext highlighter-rouge">Long</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="matching-class-names">Matching Class Names</h3>

<h4 id="1-matching-suffix-class-name">1. Matching Suffix Class Name</h4>

<p>To match classes ending with a specific suffix, you place the wildcard before the suffix.</p>

<p><strong>Example: Match all classes ending with <code class="language-plaintext highlighter-rouge">ServiceImpl</code></strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.*ServiceImpl.*(..))"</span><span class="o">)</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">*ServiceImpl</code>: Matches any class name that ends with <code class="language-plaintext highlighter-rouge">ServiceImpl</code>.</li>
</ul>

<p><strong>Example: Match all classes ending with <code class="language-plaintext highlighter-rouge">Controller</code> in any sub-package of <code class="language-plaintext highlighter-rouge">com.example.web</code></strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.web..*Controller.*(..))"</span><span class="o">)</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">com.example.web..</code>: Matches <code class="language-plaintext highlighter-rouge">com.example.web</code> and any of its sub-packages.</li>
  <li><code class="language-plaintext highlighter-rouge">*Controller</code>: Matches any class name ending with <code class="language-plaintext highlighter-rouge">Controller</code>.</li>
</ul>

<h4 id="2-matching-prefix-class-name">2. Matching Prefix Class Name</h4>

<p>To match classes starting with a specific prefix, you place the wildcard after the prefix.</p>

<p><strong>Example: Match all classes starting with <code class="language-plaintext highlighter-rouge">User</code></strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.User*.*(..))"</span><span class="o">)</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">User*</code>: Matches any class name that starts with <code class="language-plaintext highlighter-rouge">User</code>.</li>
</ul>

<p><strong>Example: Match all classes starting with <code class="language-plaintext highlighter-rouge">Admin</code> in <code class="language-plaintext highlighter-rouge">com.example.admin</code> package</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.admin.Admin*.*(..))"</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="3-matching-specific-class-names-exact-match">3. Matching Specific Class Names (Exact Match)</h4>

<p>No wildcards needed for exact matches.</p>

<p><strong>Example: Match methods in <code class="language-plaintext highlighter-rouge">com.example.service.UserServiceImpl</code> only</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* com.example.service.UserServiceImpl.*(..))"</span><span class="o">)</span>
</code></pre></div></div>

<hr />

<h3 id="different-kinds-of-pointcut-designators">Different Kinds of Pointcut Designators</h3>

<p>While <code class="language-plaintext highlighter-rouge">execution</code> is the most common, AspectJ provides several other pointcut designators to specify join points. You can combine these using logical operators (<code class="language-plaintext highlighter-rouge">and</code>, <code class="language-plaintext highlighter-rouge">or</code>, <code class="language-plaintext highlighter-rouge">not</code> or <code class="language-plaintext highlighter-rouge">&amp;&amp;</code>, <code class="language-plaintext highlighter-rouge">||</code>, <code class="language-plaintext highlighter-rouge">!</code>).</p>

<p>Here are the most important ones:</p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">execution()</code></strong>: As discussed, matches method executions.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("execution(* com.example.service.UserService.*(..))")</code></li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">within()</code></strong>: Matches join points where the code is within a certain type (class). This is often used to restrict the scope of other pointcuts.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("within(com.example.service.*) &amp;&amp; execution(* *(..))")</code>
        <ul>
          <li>This combines <code class="language-plaintext highlighter-rouge">within</code> and <code class="language-plaintext highlighter-rouge">execution</code>. It means “any method execution within any class in the <code class="language-plaintext highlighter-rouge">com.example.service</code> package.” The <code class="language-plaintext highlighter-rouge">execution</code> part is then just a wildcard for any method, as <code class="language-plaintext highlighter-rouge">within</code> handles the class matching.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">this()</code></strong>: Matches join points where the proxy <em>itself</em> is an instance of the given type. This is less commonly used for simple advice and more for introductions or self-invocation issues.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Around("this(com.example.service.UserService)")</code>
        <ul>
          <li>Matches if the AOP proxy implements <code class="language-plaintext highlighter-rouge">UserService</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">target()</code></strong>: Matches join points where the <em>target object</em> (the actual object being advised, not the proxy) is an instance of the given type. This is often more intuitive than <code class="language-plaintext highlighter-rouge">this()</code> when you care about the underlying implementation.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Around("target(com.example.service.UserServiceImpl)")</code>
        <ul>
          <li>Matches if the target object is an instance of <code class="language-plaintext highlighter-rouge">UserServiceImpl</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">args()</code></strong>: Matches join points where the arguments are of a certain type or match a certain pattern.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("execution(* com.example.service.*.*(String, ..))")</code>
        <ul>
          <li>Matches methods where the first argument is a <code class="language-plaintext highlighter-rouge">String</code>.</li>
        </ul>
      </li>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("args(java.lang.String, int)")</code>
        <ul>
          <li>Matches methods that take exactly a <code class="language-plaintext highlighter-rouge">String</code> followed by an <code class="language-plaintext highlighter-rouge">int</code>.</li>
        </ul>
      </li>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("args(name, age)")</code> where <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">age</code> can then be bound to the advice method parameters.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">bean()</code></strong>: (Spring-specific) Matches methods executed on Spring beans with specific names or name patterns.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("bean(userService) &amp;&amp; execution(* *(..))")</code>
        <ul>
          <li>Matches any method execution on the Spring bean named “userService”.</li>
        </ul>
      </li>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("bean(*Service) &amp;&amp; execution(* *(..))")</code>
        <ul>
          <li>Matches any method execution on Spring beans whose names end with “Service”.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@annotation()</code></strong>: Matches join points where the target method (or class for <code class="language-plaintext highlighter-rouge">within</code>) is annotated with a specific annotation.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("@annotation(com.example.annotation.Loggable)")</code>
        <ul>
          <li>Matches any method that is annotated with <code class="language-plaintext highlighter-rouge">@Loggable</code>.</li>
        </ul>
      </li>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("execution(* *(..)) &amp;&amp; @annotation(org.springframework.transaction.annotation.Transactional)")</code>
        <ul>
          <li>Matches any method execution that is annotated with <code class="language-plaintext highlighter-rouge">@Transactional</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@within()</code></strong>: Matches join points where the declaring type (class) is annotated with a specific annotation.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("@within(org.springframework.stereotype.Service) &amp;&amp; execution(* *(..))")</code>
        <ul>
          <li>Matches any method execution within a class that is annotated with <code class="language-plaintext highlighter-rouge">@Service</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@target()</code></strong>: Matches join points where the class of the target object has the given annotation.
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Around("@target(com.example.annotation.Auditable)")</code></li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@args()</code></strong>: Matches join points where the runtime type of the actual arguments passed to the method has annotations of the given type(s).
    <ul>
      <li>Example: <code class="language-plaintext highlighter-rouge">@Before("@args(com.example.annotation.ValidInput)")</code></li>
    </ul>
  </li>
</ol>

<hr />

<h3 id="advice-types-annotations">Advice Types (Annotations)</h3>

<p>You mentioned <code class="language-plaintext highlighter-rouge">@AfterReturning</code> and “any other we can use in annotations.” Spring AOP provides several advice types, each executing at a different point in the join point’s lifecycle:</p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">@Before</code></strong>:
    <ul>
      <li>Executes <em>before</em> the matched method execution.</li>
      <li>Example: Logging request details before a service method runs.</li>
      <li>Cannot prevent the method from executing or alter its return value.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@AfterReturning</code></strong>:
    <ul>
      <li>Executes <em>after</em> the matched method returns <em>successfully</em> (without throwing an exception).</li>
      <li>Can access the return value of the method.</li>
      <li>Syntax: <code class="language-plaintext highlighter-rouge">@AfterReturning(pointcut="yourPointcut()", returning="result")</code></li>
      <li>Example:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span><span class="o">=</span><span class="s">"execution(* com.example.service.UserService.getUserById(..))"</span><span class="o">,</span> <span class="n">returning</span><span class="o">=</span><span class="s">"user"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logUserRetrieval</span><span class="o">(</span><span class="nc">Object</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"User retrieved: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>
        <p><em>Note: The <code class="language-plaintext highlighter-rouge">returning</code> attribute name (<code class="language-plaintext highlighter-rouge">user</code> in this case) must match the parameter name in the advice method.</em></p>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@AfterThrowing</code></strong>:
    <ul>
      <li>Executes <em>after</em> the matched method throws an exception.</li>
      <li>Can access the thrown exception.</li>
      <li>Syntax: <code class="language-plaintext highlighter-rouge">@AfterThrowing(pointcut="yourPointcut()", throwing="ex")</code></li>
      <li>Example:
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@AfterThrowing</span><span class="o">(</span><span class="n">pointcut</span><span class="o">=</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">,</span> <span class="n">throwing</span><span class="o">=</span><span class="s">"ex"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logException</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Exception occurred: "</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div>        </div>
        <p><em>Note: The <code class="language-plaintext highlighter-rouge">throwing</code> attribute name (<code class="language-plaintext highlighter-rouge">ex</code> in this case) must match the parameter name in the advice method.</em></p>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@After</code> (finally advice)</strong>:
    <ul>
      <li>Executes <em>after</em> the matched method completes, regardless of whether it returned successfully or threw an exception.</li>
      <li>Similar to a <code class="language-plaintext highlighter-rouge">finally</code> block.</li>
      <li>Example: Releasing resources, regardless of method outcome.</li>
      <li>
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@After</span><span class="o">(</span><span class="s">"execution(* com.example.service.OrderService.placeOrder(..))"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cleanupOrderProcess</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Order process completed (cleanup)"</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">@Around</code></strong>:
    <ul>
      <li>The most powerful and flexible advice type.</li>
      <li>Executes <em>around</em> the matched method execution.</li>
      <li>You are responsible for invoking the actual method using <code class="language-plaintext highlighter-rouge">ProceedingJoinPoint.proceed()</code>.</li>
      <li>Can inspect, modify, or even suppress the method’s arguments and return value.</li>
      <li>Can catch and handle exceptions thrown by the advised method.</li>
      <li>Example: Performance monitoring, transaction management, caching.</li>
      <li>
        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">org.aspectj.lang.ProceedingJoinPoint</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Around</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>

  <span class="nd">@Aspect</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">PerformanceMonitorAspect</span> <span class="o">{</span>

      <span class="nd">@Around</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">profile</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
          <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
          <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span> <span class="c1">// Execute the original method</span>
          <span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
          <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" executed in "</span> <span class="o">+</span> <span class="o">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="o">)</span> <span class="o">+</span> <span class="s">"ms"</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="defining-reusable-pointcuts">Defining Reusable Pointcuts</h3>

<p>For better readability and reusability, you can define named pointcuts using <code class="language-plaintext highlighter-rouge">@Pointcut</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Pointcut</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.AfterReturning</span><span class="o">;</span>

<span class="nd">@Aspect</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyServiceAspect</span> <span class="o">{</span>

    <span class="c1">// Define a pointcut for all methods in com.example.service package</span>
    <span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(* com.example.service.*.*(..))"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serviceMethods</span><span class="o">()</span> <span class="o">{}</span>

    <span class="c1">// Define a pointcut for methods that return a User object</span>
    <span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(com.example.model.User com.example.service.*.*(..))"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsUser</span><span class="o">()</span> <span class="o">{}</span>

    <span class="c1">// Using the defined pointcut</span>
    <span class="nd">@Before</span><span class="o">(</span><span class="s">"serviceMethods()"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logBeforeServiceCall</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Before service method execution."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Combining pointcuts with logical AND</span>
    <span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span><span class="o">=</span><span class="s">"serviceMethods() &amp;&amp; returnsUser()"</span><span class="o">,</span> <span class="n">returning</span><span class="o">=</span><span class="s">"user"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logUserReturned</span><span class="o">(</span><span class="nc">Object</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Service method returned user: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// You can also define pointcuts with arguments</span>
    <span class="nd">@Pointcut</span><span class="o">(</span><span class="s">"execution(* com.example.repository.*.save(..)) &amp;&amp; args(entity)"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">repositorySave</span><span class="o">(</span><span class="nc">Object</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{}</span>

    <span class="nd">@Before</span><span class="o">(</span><span class="s">"repositorySave(entity)"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">logEntityBeforeSave</span><span class="o">(</span><span class="nc">Object</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Saving entity: "</span> <span class="o">+</span> <span class="n">entity</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This comprehensive guide covers the essentials of pointcut expressions, wildcard usage, class name matching, and the different advice types in Spring AOP. Mastering these concepts will allow you to precisely control where and when your cross-cutting concerns are applied.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
