<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Redsocks في العمل</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Redsocks في العمل | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Redsocks في العمل" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ar" />
<meta name="description" content="بالطبع! سأرشدك خلال عملية إعداد وكيل Shadowsocks باستخدام جهاز Mac الخاص بك وتهيئة جهاز التوجيه OpenWRT لتوجيه كل حركة المرور للأجهزة المتصلة عبر هذا الوكيل. تتضمن هذه الإعدادات الخطوات الرئيسية التالية:" />
<meta property="og:description" content="بالطبع! سأرشدك خلال عملية إعداد وكيل Shadowsocks باستخدام جهاز Mac الخاص بك وتهيئة جهاز التوجيه OpenWRT لتوجيه كل حركة المرور للأجهزة المتصلة عبر هذا الوكيل. تتضمن هذه الإعدادات الخطوات الرئيسية التالية:" />
<link rel="canonical" href="https://lzwjava.github.io/redsocks-ar" />
<meta property="og:url" content="https://lzwjava.github.io/redsocks-ar" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-12-18T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Redsocks في العمل" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2024-12-18T00:00:00+08:00","datePublished":"2024-12-18T00:00:00+08:00","description":"بالطبع! سأرشدك خلال عملية إعداد وكيل Shadowsocks باستخدام جهاز Mac الخاص بك وتهيئة جهاز التوجيه OpenWRT لتوجيه كل حركة المرور للأجهزة المتصلة عبر هذا الوكيل. تتضمن هذه الإعدادات الخطوات الرئيسية التالية:","headline":"Redsocks في العمل","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/redsocks-ar"},"url":"https://lzwjava.github.io/redsocks-ar"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=be66ac440d1a318d7814aeee6cbf8fb61112171d">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=be66ac440d1a318d7814aeee6cbf8fb61112171d" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Redsocks في العمل | أصلي، ترجم بواسطة AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ar/2024-12-18-redsocks-ar.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsar2024-12-18-redsocks-ar.md</span> -->
      

      <!-- <span>2024-12-18-redsocks-ar.md</span> -->

      
        

        
          
          <a href="#" class="button">2024.12</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/redsocks-en" >English</option>
        <option value="/redsocks-zh" >中文</option>
        <option value="/redsocks-ja" >日本語</option>
        <option value="/redsocks-es" >Español</option>
        <option value="/redsocks-hi" >हिंदी</option>
        <option value="/redsocks-fr" >Français</option>
        <option value="/redsocks-de" >Deutsch</option>
        <option value="/redsocks-ar" selected>العربية</option>
        <option value="/redsocks-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>بالطبع! سأرشدك خلال عملية إعداد وكيل Shadowsocks باستخدام جهاز Mac الخاص بك وتهيئة جهاز التوجيه OpenWRT لتوجيه كل حركة المرور للأجهزة المتصلة عبر هذا الوكيل. تتضمن هذه الإعدادات الخطوات الرئيسية التالية:</p>

<ol>
  <li>إعداد عميل Shadowsocks على macOS (باستخدام Shadowsocks-NG أو Clash)</li>
  <li>تكوين macOS للسماح باتصالات البروكسي الخارجية</li>
  <li>تعيين عنوان IP ثابت لجهاز Mac الخاص بك</li>
  <li>تثبيت وتكوين Redsocks على OpenWRT</li>
  <li>توجيه حركة مرور OpenWRT عبر بروكسي macOS</li>
  <li>اختبار إعداد البروكسي</li>
</ol>

<p>دعونا نتعمق في كل خطوة بالتفصيل.</p>

<hr />

<h2 id="1-إعداد-عميل-shadowsocks-على-نظام-macos">1. إعداد عميل Shadowsocks على نظام macOS</h2>

<p>يمكنك استخدام إما Shadowsocks-NG أو Clash كعميل Shadowsocks الخاص بك. فيما يلي تعليمات لكليهما.</p>

<h3 id="الخيار-أ-استخدام-shadowsocks-ng">الخيار أ: استخدام Shadowsocks-NG</h3>

<p>Shadowsocks-NG هو عميل Shadowsocks شهير وسهل الاستخدام لنظام macOS.</p>

<h4 id="الخطوة-1-تنزيل-وتثبيت-shadowsocks-ng">الخطوة 1: تنزيل وتثبيت Shadowsocks-NG</h4>

<ol>
  <li>قم بزيارة <a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases">صفحة الإصدارات على GitHub</a> لتنزيل أحدث إصدار من Shadowsocks-NG.</li>
  <li>بعد اكتمال التنزيل، افتح ملف <code class="language-plaintext highlighter-rouge">.dmg</code> وانقل تطبيق Shadowsocks-NG إلى مجلد “التطبيقات”.</li>
  <li>
    <p>افتح التطبيق من مجلد “التطبيقات”. قد تحتاج إلى الموافقة على تشغيل التطبيق من خلال النقر على “فتح” في نافذة التحذير التي تظهر.</p>
  </li>
  <li>تنزيل Shadowsocks-NG:
    <ul>
      <li>قم بزيارة <a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases">صفحة إصدارات Shadowsocks-NG على GitHub</a>.</li>
      <li>قم بتنزيل أحدث ملف <code class="language-plaintext highlighter-rouge">.dmg</code>.</li>
    </ul>
  </li>
  <li>تثبيت التطبيق:
    <ul>
      <li>افتح ملف <code class="language-plaintext highlighter-rouge">.dmg</code> الذي تم تنزيله.</li>
      <li>اسحب تطبيق ShadowsocksX-NG إلى مجلد التطبيقات (Applications).</li>
    </ul>
  </li>
  <li>تشغيل Shadowsocks-NG:
    <ul>
      <li>افتح ShadowsocksX-NG من مجلد التطبيقات (Applications).</li>
      <li>قد تحتاج إلى منح التطبيق الأذونات اللازمة في تفضيلات النظام (System Preferences).</li>
    </ul>
  </li>
</ol>

<h4 id="الخطوة-2-تكوين-shadowsocks-ng">الخطوة 2: تكوين Shadowsocks-NG</h4>

<ol>
  <li>
    <p><strong>فتح Shadowsocks-NG</strong>: بعد تثبيت التطبيق، افتحه من قائمة التطبيقات.</p>
  </li>
  <li><strong>إضافة خادم جديد</strong>:
    <ul>
      <li>انقر على أيقونة Shadowsocks-NG في شريط القوائم.</li>
      <li>اختر “Servers” ثم “Server Preferences”.</li>
      <li>انقر على زر “+” لإضافة خادم جديد.</li>
    </ul>
  </li>
  <li><strong>إدخال تفاصيل الخادم</strong>:
    <ul>
      <li><strong>Address</strong>: أدخل عنوان الخادم الذي حصلت عليه من موفر Shadowsocks.</li>
      <li><strong>Port</strong>: أدخل المنفذ المحدد.</li>
      <li><strong>Encryption</strong>: اختر طريقة التشفير (على سبيل المثال، <code class="language-plaintext highlighter-rouge">aes-256-cfb</code>).</li>
      <li><strong>Password</strong>: أدخل كلمة المرور الخاصة بالخادم.</li>
      <li><strong>Remark</strong>: (اختياري) يمكنك إضافة ملاحظة لتحديد هذا الخادم بسهولة.</li>
    </ul>
  </li>
  <li>
    <p><strong>حفظ الإعدادات</strong>: بعد إدخال جميع التفاصيل، انقر على “OK” لحفظ الإعدادات.</p>
  </li>
  <li><strong>تفعيل الخادم</strong>:
    <ul>
      <li>عد إلى القائمة الرئيسية واختر الخادم الذي أضفته حديثًا.</li>
      <li>انقر على “Turn Shadowsocks On” لبدء الاتصال.</li>
    </ul>
  </li>
  <li><strong>التحقق من الاتصال</strong>: تأكد من أن الاتصال يعمل بشكل صحيح عن طريق زيارة موقع ويب محظور أو استخدام أداة مثل <code class="language-plaintext highlighter-rouge">ping</code> للتحقق من الاتصال بالإنترنت.</li>
</ol>

<p>الآن، يجب أن يكون Shadowsocks-NG مُهيأ وجاهزًا للاستخدام!</p>

<ol>
  <li>افتح التفضيلات:
    <ul>
      <li>انقر على أيقونة ShadowsocksX-NG في شريط القوائم.</li>
      <li>اختر “فتح ShadowsocksX-NG” &gt; “التفضيلات”.</li>
    </ul>
  </li>
  <li>إضافة خادم جديد:
    <ul>
      <li>انتقل إلى علامة التبويب “Servers”.</li>
      <li>انقر على الزر “+” لإضافة خادم جديد.</li>
    </ul>
  </li>
  <li>استيراد رابط Shadowsocks:
    <ul>
      <li>انسخ رابط Shadowsocks الخاص بك:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ss://[ENCRYPTED_PASSWORD]@xxx.xxx.xxx.xxx:xxxxx/?outline=1
</code></pre></div>        </div>
      </li>
      <li>طريقة الاستيراد:
        <ul>
          <li>انقر على “استيراد”.</li>
          <li>الصق رابط Shadowsocks الخاص بك.</li>
          <li>يجب أن يقوم Shadowsocks-NG تلقائيًا بتحليل الرابط وملء تفاصيل الخادم.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>إعداد الوكيل المحلي (Proxy):
    <ul>
      <li>تأكد من تفعيل خيار “تمكين SOCKS5 Proxy”.</li>
      <li>لاحظ رقم المنفذ المحلي (عادةً ما يكون الافتراضي هو <code class="language-plaintext highlighter-rouge">1080</code>).</li>
    </ul>
  </li>
  <li>حفظ وتفعيل:
    <ul>
      <li>انقر على “موافق” لحفظ الخادم.</li>
      <li>قم بتبديل مفتاح “تفعيل Shadowsocks” إلى وضع التشغيل (ON).</li>
    </ul>
  </li>
</ol>

<h3 id="الخيار-b-استخدام-clash">الخيار B: استخدام Clash</h3>

<p>Clash هو عميل وكيل متعدد الاستخدامات يدعم العديد من البروتوكولات، بما في ذلك Shadowsocks.</p>

<h4 id="الخطوة-1-تنزيل-وتثبيت-clash">الخطوة 1: تنزيل وتثبيت Clash</h4>

<ol>
  <li>قم بتنزيل Clash لنظام macOS:
    <ul>
      <li>قم بزيارة <a href="https://github.com/Dreamacro/clash/releases">صفحة إصدارات Clash على GitHub</a>.</li>
      <li>قم بتنزيل أحدث نسخة من Clash لنظام macOS.</li>
    </ul>
  </li>
  <li>تثبيت التطبيق:
    <ul>
      <li>انقل تطبيق Clash الذي تم تنزيله إلى مجلد التطبيقات (Applications) لديك.</li>
    </ul>
  </li>
  <li>تشغيل Clash:
    <ul>
      <li>افتح Clash من مجلد التطبيقات (Applications).</li>
      <li>قد تحتاج إلى منح الأذونات اللازمة في تفضيلات النظام (System Preferences).</li>
    </ul>
  </li>
</ol>

<h4 id="الخطوة-2-تكوين-clash">الخطوة 2: تكوين Clash</h4>

<ol>
  <li>الوصول إلى ملف التكوين:
    <ul>
      <li>يستخدم Clash ملف تكوين بتنسيق YAML. يمكنك إنشاؤه أو تعديله باستخدام محرر نصوص مثل TextEdit أو Visual Studio Code.</li>
    </ul>
  </li>
  <li>أضف خادم Shadowsocks الخاص بك:
    <ul>
      <li>أنشئ ملف تكوين (على سبيل المثال، <code class="language-plaintext highlighter-rouge">config.yaml</code>) بالمحتوى التالي:</li>
    </ul>
  </li>
</ol>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">port</span><span class="pi">:</span> <span class="m">7890</span>
<span class="na">socks-port</span><span class="pi">:</span> <span class="m">7891</span>
<span class="na">allow-lan</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">mode</span><span class="pi">:</span> <span class="s">Rule</span>
<span class="na">log-level</span><span class="pi">:</span> <span class="s">info</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">proxies</span><span class="pi">:</span>
   <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">MyShadowsocks"</span>
     <span class="na">type</span><span class="pi">:</span> <span class="s">ss</span>
     <span class="na">server</span><span class="pi">:</span> <span class="s">xxx.xxx.xxx.xxx</span>
     <span class="na">port</span><span class="pi">:</span> <span class="s">xxxxx</span>
     <span class="na">cipher</span><span class="pi">:</span> <span class="s">chacha20-ietf-poly1305</span>
     <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">xxxxxx"</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">proxy-groups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">الافتراضي"</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">select</span>
    <span class="na">proxies</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">MyShadowsocks"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">DIRECT"</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">MATCH,Default</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ملاحظات:
 - `port` و `socks-port` تحدد منافذ HTTP و SOCKS5 التي سيستمع عليها Clash.
 - `allow-lan: true` تسمح لأجهزة الشبكة المحلية (LAN) باستخدام الوكيل.
 - قسم `proxies` يتضمن تفاصيل خادم Shadowsocks الخاص بك.
 - `proxy-groups` و `rules` تحدد كيفية توجيه حركة المرور.
</code></pre></div></div>

<ol>
  <li>بدء تشغيل Clash مع التكوين:
    <ul>
      <li>قم بتشغيل Clash وتأكد من أنه يستخدم ملف <code class="language-plaintext highlighter-rouge">config.yaml</code> الخاص بك.</li>
      <li>قد تحتاج إلى تحديد مسار التكوين عند بدء تشغيل Clash.</li>
    </ul>
  </li>
  <li>التحقق من تشغيل الوكيل:
    <ul>
      <li>تأكد من أن Clash نشط ومتصل بخادم Shadowsocks الخاص بك.</li>
      <li>تحقق من رمز شريط القائمة للحصول على الحالة.</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="2-تهيئة-macos-للسماح-باتصالات-البروكسي-الخارجية">2. تهيئة macOS للسماح باتصالات البروكسي الخارجية</h2>

<p>بشكل افتراضي، تربط عملاء Shadowsocks الوكيل بـ <code class="language-plaintext highlighter-rouge">localhost</code> (<code class="language-plaintext highlighter-rouge">127.0.0.1</code>)، مما يعني أن جهاز Mac فقط هو الذي يمكنه استخدام الوكيل. للسماح لجهاز التوجيه OpenWRT الخاص بك باستخدام هذا الوكيل، تحتاج إلى ربط الوكيل بعنوان IP الخاص بشبكة LAN لجهاز Mac.</p>

<h3 id="لـ-shadowsocks-ng">لـ Shadowsocks-NG:</h3>

<ol>
  <li>افتح التفضيلات:
    <ul>
      <li>انقر على أيقونة ShadowsocksX-NG في شريط القوائم.</li>
      <li>اختر “فتح ShadowsocksX-NG” &gt; “التفضيلات”.</li>
    </ul>
  </li>
  <li>انتقل إلى علامة التبويب “متقدم”:
    <ul>
      <li>انتقل إلى علامة التبويب “متقدم”.</li>
    </ul>
  </li>
  <li>تعيين عنوان الاستماع:
    <ul>
      <li>قم بتغيير “عنوان الاستماع” من <code class="language-plaintext highlighter-rouge">127.0.0.1</code> إلى <code class="language-plaintext highlighter-rouge">0.0.0.0</code> للسماح بالاتصالات من أي واجهة.</li>
      <li>أو قم بتحديد عنوان IP الخاص بالشبكة المحلية (LAN) للماك (على سبيل المثال، <code class="language-plaintext highlighter-rouge">192.168.1.xxx</code>).</li>
    </ul>
  </li>
  <li>حفظ وإعادة تشغيل Shadowsocks-NG:
    <ul>
      <li>انقر على “موافق” لحفظ التغييرات.</li>
      <li>أعد تشغيل عميل Shadowsocks-NG لتطبيق الإعدادات الجديدة.</li>
    </ul>
  </li>
</ol>

<h3 id="لـ-clash">لـ Clash:</h3>

<ol>
  <li>تعديل ملف الإعدادات:
    <ul>
      <li>تأكد من تفعيل الإعداد <code class="language-plaintext highlighter-rouge">allow-lan: true</code> في ملف <code class="language-plaintext highlighter-rouge">config.yaml</code>.</li>
    </ul>
  </li>
  <li>الربط بجميع الواجهات:
    <ul>
      <li>في الإعدادات، تعيين <code class="language-plaintext highlighter-rouge">allow-lan: true</code> عادةً ما يربط الوكيل بجميع الواجهات المتاحة، بما في ذلك الشبكة المحلية (LAN).</li>
    </ul>
  </li>
  <li>إعادة تشغيل Clash:
    <ul>
      <li>أعد تشغيل عميل Clash لتطبيق التغييرات.</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="3-تعيين-عنوان-ip-ثابت-لجهاز-mac-الخاص-بك">3. تعيين عنوان IP ثابت لجهاز Mac الخاص بك</h2>

<p>لضمان اتصال مستمر بين جهاز التوجيه OpenWRT وجهاز Mac، قم بتعيين عنوان IP ثابت لجهاز Mac داخل شبكتك المحلية.</p>

<h3 id="خطوات-تعيين-عنوان-ip-ثابت-على-نظام-macos">خطوات تعيين عنوان IP ثابت على نظام macOS:</h3>

<ol>
  <li><strong>افتح إعدادات الشبكة:</strong>
    <ul>
      <li>انقر على أيقونة Apple في الزاوية العلوية اليسرى من الشاشة.</li>
      <li>اختر “تفضيلات النظام” (System Preferences).</li>
      <li>انقر على “شبكة” (Network).</li>
    </ul>
  </li>
  <li><strong>اختر واجهة الشبكة:</strong>
    <ul>
      <li>من القائمة على اليسار، اختر واجهة الشبكة التي تريد تعيين عنوان IP ثابت لها (مثل Wi-Fi أو Ethernet).</li>
    </ul>
  </li>
  <li><strong>اضبط إعدادات IPv4:</strong>
    <ul>
      <li>انقر على الزر “تكوين IPv4” (Configure IPv4).</li>
      <li>من القائمة المنسدلة، اختر “يدوي” (Manually).</li>
    </ul>
  </li>
  <li><strong>أدخل معلومات IP الثابتة:</strong>
    <ul>
      <li>أدخل عنوان IP الذي تريد استخدامه في حقل “عنوان IP” (IP Address).</li>
      <li>أدخل قناع الشبكة (Subnet Mask) في الحقل المخصص.</li>
      <li>أدخل عنوان الموجه (Router) في الحقل المخصص.</li>
    </ul>
  </li>
  <li><strong>أدخل خادم DNS:</strong>
    <ul>
      <li>انقر على الزر “خوادم DNS” (DNS Servers).</li>
      <li>أدخل عنوان خادم DNS الذي تريد استخدامه.</li>
    </ul>
  </li>
  <li><strong>احفظ التغييرات:</strong>
    <ul>
      <li>انقر على “تطبيق” (Apply) لحفظ التغييرات.</li>
    </ul>
  </li>
  <li><strong>تحقق من الاتصال:</strong>
    <ul>
      <li>افتح Terminal واكتب <code class="language-plaintext highlighter-rouge">ping google.com</code> للتحقق من اتصالك بالإنترنت.</li>
    </ul>
  </li>
</ol>

<p>باتباع هذه الخطوات، يمكنك تعيين عنوان IP ثابت على جهاز macOS الخاص بك.</p>

<ol>
  <li>افتح تفضيلات النظام:
    <ul>
      <li>انقر على قائمة Apple واختر “تفضيلات النظام”.</li>
    </ul>
  </li>
  <li>انتقل إلى إعدادات الشبكة:
    <ul>
      <li>انقر على “الشبكة”.</li>
    </ul>
  </li>
  <li>اختر الاتصال النشط لديك:
    <ul>
      <li>اختر “Wi-Fi” أو “Ethernet” من الشريط الجانبي الأيسر، اعتمادًا على كيفية اتصال جهاز Mac الخاص بك بالموجه.</li>
    </ul>
  </li>
  <li>تكوين إعدادات IPv4:
    <ul>
      <li>انقر على “Advanced…” (متقدم…).</li>
      <li>انتقل إلى علامة التبويب “TCP/IP”.</li>
      <li>قم بتغيير “Configure IPv4” من “Using DHCP” إلى “Manually” (يدويًا).</li>
    </ul>
  </li>
  <li>تعيين عنوان IP ثابت:
    <ul>
      <li>عنوان IP: اختر عنوانًا خارج نطاق DHCP الخاص بالموجه لتجنب التعارضات (مثل <code class="language-plaintext highlighter-rouge">192.168.1.xxx</code>).</li>
      <li>قناع الشبكة الفرعية: عادةً ما يكون <code class="language-plaintext highlighter-rouge">255.255.255.0</code>.</li>
      <li>الموجه: عنوان IP الخاص بالموجه (مثل <code class="language-plaintext highlighter-rouge">192.168.1.1</code>).</li>
      <li>خادم DNS: يمكنك استخدام عنوان IP الموجه أو خدمة DNS أخرى مثل <code class="language-plaintext highlighter-rouge">8.8.8.8</code>.</li>
    </ul>
  </li>
  <li>تطبيق الإعدادات:
    <ul>
      <li>انقر على “موافق” ثم “تطبيق” لحفظ التغييرات.</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="4-تثبيت-وتكوين-redsocks-على-openwrt">4. تثبيت وتكوين Redsocks على OpenWRT</h2>

<p>Redsocks هو موجه SOCKS شفاف يسمح لك بتوجيه حركة المرور على الشبكة عبر وكيل SOCKS5. سنستخدم Redsocks لتوجيه حركة مرور OpenWRT عبر وكيل Shadowsocks الذي يعمل على جهاز Mac الخاص بك.</p>

<h3 id="الخطوة-1-تثبيت-redsocks">الخطوة 1: تثبيت Redsocks</h3>

<p>أولاً، نحتاج إلى تثبيت <code class="language-plaintext highlighter-rouge">redsocks</code> على نظامك. يمكنك القيام بذلك باستخدام مدير الحزم الخاص بتوزيعتك.</p>

<h4 id="على-أنظمة-تعتمد-على-debianubuntu">على أنظمة تعتمد على Debian/Ubuntu:</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>redsocks
</code></pre></div></div>

<h4 id="على-أنظمة-تعتمد-على-rhelcentos">على أنظمة تعتمد على RHEL/CentOS:</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install </span>epel-release
<span class="nb">sudo </span>yum <span class="nb">install </span>redsocks
</code></pre></div></div>

<h4 id="على-أنظمة-تعتمد-على-arch-linux">على أنظمة تعتمد على Arch Linux:</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pacman <span class="nt">-S</span> redsocks
</code></pre></div></div>

<p>بعد الانتهاء من التثبيت، يمكنك الانتقال إلى الخطوة التالية.</p>

<ol>
  <li>تحديث قوائم الحزم:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   ssh root@&lt;router_ip&gt;
   opkg update
</code></pre></div></div>

<p>في هذا الكود، يتم استخدام الأمر <code class="language-plaintext highlighter-rouge">ssh</code> للاتصال بجهاز الراوتر باستخدام عنوان IP الخاص به. بعد الاتصال، يتم تنفيذ الأمر <code class="language-plaintext highlighter-rouge">opkg update</code> لتحديث قائمة الحزم المتاحة على الجهاز.</p>

<ol>
  <li>تثبيت Redsocks:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opkg <span class="nb">install </span>redsocks
</code></pre></div></div>

<p><em>إذا لم يكن Redsocks متاحًا في مستودع OpenWRT الخاص بك، فقد تحتاج إلى تجميعه يدويًا أو استخدام حزمة بديلة.</em></p>

<h3 id="الخطوة-2-تكوين-redsocks">الخطوة 2: تكوين Redsocks</h3>

<p>بعد تثبيت Redsocks، نحتاج إلى تكوينه لتوجيه حركة المرور عبر الـ SOCKS5 proxy. يتم ذلك عن طريق تعديل ملف الإعدادات <code class="language-plaintext highlighter-rouge">redsocks.conf</code>.</p>

<ol>
  <li>
    <p>افتح ملف الإعدادات باستخدام محرر النصوص المفضل لديك:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/redsocks.conf
</code></pre></div>    </div>
  </li>
  <li>
    <p>ابحث عن القسم <code class="language-plaintext highlighter-rouge">redsocks</code> وقم بتعديله ليتناسب مع إعدادات الـ SOCKS5 proxy الخاص بك. على سبيل المثال:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redsocks <span class="o">{</span>
    local_ip <span class="o">=</span> 127.0.0.1<span class="p">;</span>
    local_port <span class="o">=</span> 12345<span class="p">;</span>

    ip <span class="o">=</span> your.proxy.ip.address<span class="p">;</span>
    port <span class="o">=</span> 1080<span class="p">;</span>

    <span class="nb">type</span> <span class="o">=</span> socks5<span class="p">;</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">local_ip</code> و <code class="language-plaintext highlighter-rouge">local_port</code> هما العنوان والمنفذ الذي سوف يستمع عليه Redsocks محليًا.</li>
      <li><code class="language-plaintext highlighter-rouge">ip</code> و <code class="language-plaintext highlighter-rouge">port</code> هما عنوان الـ SOCKS5 proxy والمنفذ الذي يستخدمه.</li>
      <li><code class="language-plaintext highlighter-rouge">type</code> يجب أن يكون <code class="language-plaintext highlighter-rouge">socks5</code> للاتصال عبر SOCKS5 proxy.</li>
    </ul>
  </li>
  <li>
    <p>احفظ التغييرات وأغلق المحرر.</p>
  </li>
  <li>
    <p>أعد تشغيل خدمة Redsocks لتطبيق التغييرات:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart redsocks
</code></pre></div>    </div>
  </li>
</ol>

<p>الآن، تم تكوين Redsocks لتوجيه حركة المرور عبر الـ SOCKS5 proxy. في الخطوة التالية، سنقوم بتكوين iptables لتوجيه حركة المرور عبر Redsocks.</p>

<ol>
  <li>
    <p>إنشاء أو تعديل ملف تكوين Redsocks:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /etc/redsocks.conf
</code></pre></div>    </div>
  </li>
  <li>
    <p>أضف التكوين التالي:</p>
  </li>
</ol>

<div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="n">base</span> {
       <span class="n">log_debug</span> = <span class="n">on</span>;
       <span class="n">log_info</span> = <span class="n">on</span>;
       <span class="n">log</span> = <span class="s2">"file:/var/log/redsocks.log"</span>;
       <span class="n">daemon</span> = <span class="n">on</span>;
       <span class="n">redirector</span> = <span class="n">iptables</span>;
   }
</code></pre></div></div>

<p>```redsocks {
       local_ip = 0.0.0.0;
       local_port = 12345;  # المنفذ المحلي الذي يستمع له Redsocks
       ip = xxx.xxx.xxx.xxx;  # عنوان IP الثابت لجهاز Mac
       port = xxxxx;          # منفذ وكيل SOCKS5 المحلي لـ Shadowsocks-NG
       type = socks5;
       login = “”;           # إذا كان الوكيل يتطلب مصادقة
       password = “”;
   }</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
   ملاحظات:
   - `local_port`: المنفذ الذي يستمع عليه Redsocks للاتصالات الواردة من تحويلات iptables.
   - `ip` و `port`: يشيران إلى وكيل SOCKS5 الخاص بـ Shadowsocks على جهاز Mac (`xxx.xxx.xxx.xxx:xxxxx` بناءً على الخطوات السابقة).
   - `type`: اضبطه على `socks5` حيث يوفر Shadowsocks وكيل SOCKS5.

3. حفظ والخروج:
   - اضغط على `ESC`، اكتب `:wq`، ثم اضغط على `Enter`.

4. إنشاء ملف السجل:

```bash
   touch /var/log/redsocks.log
   chmod 644 /var/log/redsocks.log
</code></pre></div></div>

<p>يُنشئ الأمر <code class="language-plaintext highlighter-rouge">touch</code> ملفًا جديدًا باسم <code class="language-plaintext highlighter-rouge">/var/log/redsocks.log</code> إذا لم يكن موجودًا. بينما يقوم الأمر <code class="language-plaintext highlighter-rouge">chmod 644</code> بتعيين أذونات الملف بحيث يكون المالك قادرًا على القراءة والكتابة، بينما يمكن للمجموعة والمستخدمين الآخرين القراءة فقط.</p>

<h3 id="الخطوة-3-بدء-خدمة-redsocks">الخطوة 3: بدء خدمة Redsocks</h3>

<p>لبدء خدمة Redsocks، قم بتنفيذ الأمر التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start redsocks
</code></pre></div></div>

<p>للتأكد من أن الخدمة تعمل بشكل صحيح، يمكنك التحقق من حالة الخدمة باستخدام الأمر التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status redsocks
</code></pre></div></div>

<p>إذا كنت ترغب في تمكين تشغيل Redsocks تلقائيًا عند بدء التشغيل، استخدم الأمر التالي:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl <span class="nb">enable </span>redsocks
</code></pre></div></div>

<p>بهذا تكون قد نجحت في بدء خدمة Redsocks على نظامك.</p>

<ol>
  <li>تمكين Redsocks للبدء عند التشغيل:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/init.d/redsocks <span class="nb">enable</span>
</code></pre></div></div>

<ol>
  <li>بدء Redsocks:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/init.d/redsocks start
</code></pre></div></div>

<ol>
  <li>التحقق من أن Redsocks يعمل:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps | <span class="nb">grep </span>redsocks
</code></pre></div></div>

<p>يجب أن ترى عملية Redsocks تعمل.</p>

<hr />

<h2 id="5-تحويل-حركة-مرور-openwrt-عبر-الوكيل-على-نظام-macos">5. تحويل حركة مرور OpenWRT عبر الوكيل على نظام macOS</h2>

<p>الآن بعد أن تم إعداد Redsocks على OpenWRT، قم بتكوين iptables لإعادة توجيه كل حركة المرور الصادرة من نوع TCP عبر Redsocks، والذي بدوره يقوم بتوجيهها عبر وكيل Shadowsocks على جهاز Mac الخاص بك.</p>

<h3 id="الخطوة-1-تكوين-قواعد-iptables">الخطوة 1: تكوين قواعد iptables</h3>

<ol>
  <li>إضافة قواعد iptables لإعادة توجيه حركة المرور:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># تحويل كل حركة مرور TCP إلى Redsocks (باستثناء حركة المرور إلى البروكسي نفسه)</span>
   iptables <span class="nt">-t</span> nat <span class="nt">-N</span> REDSOCKS
   iptables <span class="nt">-t</span> nat <span class="nt">-A</span> REDSOCKS <span class="nt">-d</span> xxx.xxx.xxx.xxx <span class="nt">-p</span> tcp <span class="nt">--dport</span> xxxxx <span class="nt">-j</span> RETURN
   iptables <span class="nt">-t</span> nat <span class="nt">-A</span> REDSOCKS <span class="nt">-p</span> tcp <span class="nt">-j</span> REDIRECT <span class="nt">--to-ports</span> 12345
</code></pre></div></div>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   # تطبيق سلسلة REDSOCKS على كل حركة المرور الصادرة
   iptables -t nat -A OUTPUT -p tcp -j REDSOCKS
   iptables -t nat -A PREROUTING -p tcp -j REDSOCKS
</code></pre></div></div>

<p>الشرح:</p>
<ul>
  <li>إنشاء سلسلة جديدة: <code class="language-plaintext highlighter-rouge">REDSOCKS</code></li>
  <li>استبعاد حركة المرور الخاصة بالوكيل: تأكد من أن حركة المرور الموجهة إلى الوكيل نفسه لا يتم إعادة توجيهها.</li>
  <li>إعادة توجيه حركة مرور TCP الأخرى: إعادة توجيه حركة مرور TCP الأخرى إلى المنفذ الذي يستمع له Redsocks (<code class="language-plaintext highlighter-rouge">12345</code>).</li>
</ul>

<ol>
  <li>حفظ قواعد iptables:</li>
</ol>

<p>لجعل هذه القواعد ثابتة عبر عمليات إعادة التشغيل، قم بإضافتها إلى تكوين الجدار الناري.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   vi /etc/firewall.user
</code></pre></div></div>

<p>إضافة قواعد iptables:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># تحويل كل حركة مرور TCP إلى Redsocks (باستثناء البروكسي)</span>
iptables <span class="nt">-t</span> nat <span class="nt">-N</span> REDSOCKS
iptables <span class="nt">-t</span> nat <span class="nt">-A</span> REDSOCKS <span class="nt">-d</span> xxx.xxx.xxx.xxx <span class="nt">-p</span> tcp <span class="nt">--dport</span> xxxxx <span class="nt">-j</span> RETURN
iptables <span class="nt">-t</span> nat <span class="nt">-A</span> REDSOCKS <span class="nt">-p</span> tcp <span class="nt">-j</span> REDIRECT <span class="nt">--to-ports</span> 12345
</code></pre></div></div>

<p># تطبيق سلسلة REDSOCKS
   iptables -t nat -A OUTPUT -p tcp -j REDSOCKS
   iptables -t nat -A PREROUTING -p tcp -j REDSOCKS</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
   حفظ والخروج:
   - اضغط على `ESC`، اكتب `:wq`، ثم اضغط على `Enter`.

3. إعادة تشغيل جدار الحماية لتطبيق التغييرات:

```bash
/etc/init.d/firewall restart
</code></pre></div></div>

<p><strong>ملاحظة:</strong> الكود أعلاه هو أمر لاستعادة إعدادات الجدار الناري (firewall) في نظام Linux. لا يتم ترجمة الأوامر البرمجية أو الأكواد.</p>

<h3 id="الخطوة-2-التحقق-من-إعادة-توجيه-الزيارات">الخطوة 2: التحقق من إعادة توجيه الزيارات</h3>

<ol>
  <li>تحقق من سجلات Redsocks:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> /var/log/redsocks.log
</code></pre></div></div>

<p>يجب أن ترى سجلات تشير إلى أن حركة المرور تتم معالجتها من خلال Redsocks.</p>

<ol>
  <li>الاختبار من جهاز عميل:
    <ul>
      <li>قم بتوصيل جهاز بجهاز التوجيه OpenWRT الخاص بك.</li>
      <li>قم بزيارة موقع ويب أو تنفيذ إجراء يستخدم الإنترنت.</li>
      <li>تحقق من أن حركة المرور يتم توجيهها عبر وكيل Shadowsocks عن طريق التحقق من عنوان IP الخارجي (على سبيل المثال، عبر <a href="https://www.whatismyip.com/">WhatIsMyIP.com</a>) لمعرفة ما إذا كان يعكس عنوان IP الخاص بالوكيل.</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="6-اختبار-إعداد-الوكيل-proxy">6. اختبار إعداد الوكيل (Proxy)</h2>

<p>للتأكد من أن إعداد الوكيل يعمل بشكل صحيح، يمكنك اتباع الخطوات التالية:</p>

<ol>
  <li>
    <p><strong>التحقق من اتصال الشبكة</strong>: تأكد من أن جهازك متصل بالإنترنت بشكل صحيح.</p>
  </li>
  <li><strong>اختبار الوكيل باستخدام <code class="language-plaintext highlighter-rouge">curl</code></strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-x</span> http://your-proxy-server:port http://example.com
</code></pre></div>    </div>
    <p>استبدل <code class="language-plaintext highlighter-rouge">your-proxy-server</code> و<code class="language-plaintext highlighter-rouge">port</code> بعنوان الوكيل والمنفذ الخاص بك. إذا كان الوكيل يعمل بشكل صحيح، يجب أن ترى محتوى صفحة <code class="language-plaintext highlighter-rouge">http://example.com</code>.</p>
  </li>
  <li><strong>اختبار الوكيل باستخدام المتصفح</strong>:
    <ul>
      <li>قم بتعيين إعدادات الوكيل في المتصفح.</li>
      <li>حاول زيارة موقع ويب. إذا كان الوكيل يعمل، يجب أن تتمكن من تصفح الإنترنت بشكل طبيعي.</li>
    </ul>
  </li>
  <li><strong>التحقق من السجلات (Logs)</strong>:
    <ul>
      <li>إذا كان الوكيل يدعم تسجيل الأحداث، تحقق من السجلات للتأكد من أن الطلبات تمر عبر الوكيل بشكل صحيح.</li>
    </ul>
  </li>
  <li><strong>اختبار الأداء</strong>:
    <ul>
      <li>قم بقياس سرعة الاتصال مع الوكيل وبدونه للتأكد من أن الأداء مقبول.</li>
    </ul>
  </li>
</ol>

<p>إذا واجهت أي مشاكل، تأكد من أن إعدادات الوكيل صحيحة وأن الخادم يعمل بشكل صحيح.</p>

<p>تأكد من أن الإعداد بأكمله يعمل كما هو مقصود عن طريق إجراء الاختبارات التالية.</p>

<h3 id="الخطوة-1-التحقق-من-اتصال-shadowsocks-على-جهاز-mac">الخطوة 1: التحقق من اتصال Shadowsocks على جهاز Mac</h3>

<ol>
  <li>التحقق من حالة عميل Shadowsocks:
    <ul>
      <li>تأكد من أن Shadowsocks-NG أو Clash متصل بنشاط بخادم Shadowsocks.</li>
      <li>تحقق من إمكانية الوصول إلى الوكيل المحلي (مثل <code class="language-plaintext highlighter-rouge">xxx.xxx.xxx.xxx:xxxxx</code>).</li>
    </ul>
  </li>
  <li>اختبار الوكيل محليًا:
    <ul>
      <li>على جهاز Mac الخاص بك، افتح متصفحًا وقم بتكوينه لاستخدام <code class="language-plaintext highlighter-rouge">localhost:1080</code> كوكيل SOCKS5.</li>
      <li>قم بزيارة <a href="https://www.whatismyip.com/">WhatIsMyIP.com</a> للتأكد من أن عنوان IP يتطابق مع خادم Shadowsocks.</li>
    </ul>
  </li>
</ol>

<h3 id="الخطوة-2-التحقق-من-توجيه-حركة-مرور-openwrt-عبر-الوكيل">الخطوة 2: التحقق من توجيه حركة مرور OpenWRT عبر الوكيل</h3>

<p>في هذه الخطوة، سنتأكد من أن حركة المرور من جهاز OpenWRT يتم توجيهها بشكل صحيح عبر الوكيل. هذا مهم لضمان أن جميع الطلبات التي تأتي من الشبكة تمر عبر الوكيل المحدد.</p>

<ol>
  <li><strong>الدخول إلى واجهة OpenWRT:</strong>
    <ul>
      <li>افتح متصفحك وادخل إلى واجهة إدارة OpenWRT عادةً عبر عنوان IP مثل <code class="language-plaintext highlighter-rouge">192.168.1.1</code>.</li>
    </ul>
  </li>
  <li><strong>التحقق من إعدادات الشبكة:</strong>
    <ul>
      <li>انتقل إلى <code class="language-plaintext highlighter-rouge">Network</code> &gt; <code class="language-plaintext highlighter-rouge">Interfaces</code>.</li>
      <li>تأكد من أن إعدادات الشبكة الخاصة بك موجهة بشكل صحيح إلى الوكيل.</li>
    </ul>
  </li>
  <li><strong>اختبار الاتصال:</strong>
    <ul>
      <li>استخدم أداة مثل <code class="language-plaintext highlighter-rouge">curl</code> أو <code class="language-plaintext highlighter-rouge">ping</code> من جهاز متصل بالشبكة للتحقق من أن الطلبات تمر عبر الوكيل.</li>
      <li>على سبيل المثال، يمكنك استخدام الأمر التالي في الطرفية:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-x</span> http://your-proxy-ip:port http://example.com
</code></pre></div>        </div>
      </li>
      <li>تأكد من استبدال <code class="language-plaintext highlighter-rouge">your-proxy-ip</code> و<code class="language-plaintext highlighter-rouge">port</code> بعنوان الوكيل والمنفذ الخاص بك.</li>
    </ul>
  </li>
  <li><strong>مراجعة السجلات:</strong>
    <ul>
      <li>تحقق من سجلات الوكيل للتأكد من أن الطلبات تأتي من عنوان IP الخاص بـ OpenWRT.</li>
    </ul>
  </li>
  <li><strong>إصلاح المشاكل:</strong>
    <ul>
      <li>إذا لم تكن حركة المرور تمر عبر الوكيل، راجع إعدادات التوجيه والوكيل في OpenWRT.</li>
    </ul>
  </li>
</ol>

<p>باتباع هذه الخطوات، يمكنك التأكد من أن حركة مرور OpenWRT يتم توجيهها بشكل صحيح عبر الوكيل المحدد.</p>

<ol>
  <li>التحقق من عنوان IP الخارجي لـ OpenWRT:
    <ul>
      <li>من جهاز متصل بـ OpenWRT، قم بزيارة <a href="https://www.whatismyip.com/">WhatIsMyIP.com</a> لمعرفة ما إذا كان عنوان IP يعكس عنوان IP الخاص بخادم Shadowsocks.</li>
    </ul>
  </li>
  <li>مراقبة سجلات Redsocks:
    <ul>
      <li>على OpenWRT، قم بمراقبة سجلات Redsocks للتأكد من إعادة توجيه الحركة.</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tail</span> <span class="nt">-f</span> /var/log/redsocks.log
</code></pre></div>    </div>
  </li>
  <li>استكشاف الأخطاء وإصلاحها إذا لزم الأمر:
    <ul>
      <li>إذا لم يتم توجيه حركة المرور بشكل صحيح:
        <ul>
          <li>تأكد من أن عميل Shadowsocks على جهاز Mac يعمل ويمكن الوصول إليه.</li>
          <li>تحقق من أن قواعد iptables مضبوطة بشكل صحيح.</li>
          <li>تحقق من إعدادات الجدار الناري على كل من جهاز Mac وOpenWRT.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="اعتبارات-إضافية">اعتبارات إضافية</h2>

<h3 id="1-الأمان">1. الأمان</h3>

<ul>
  <li>تأمين البروكسي الخاص بك:
    <ul>
      <li>تأكد من أن الأجهزة الموثوقة فقط هي التي يمكنها الوصول إلى البروكسي. نظرًا لأنك تقوم بإعادة توجيه كل حركة المرور عبر Redsocks، تأكد من أن جدار الحماية الخاص بجهاز Mac يسمح فقط بالاتصالات من جهاز التوجيه OpenWRT الخاص بك.</li>
    </ul>
  </li>
</ul>

<p>على نظام macOS:</p>

<ul>
  <li>انتقل إلى تفضيلات النظام &gt; الأمان والخصوصية &gt; جدار الحماية.</li>
  <li>
    <p>قم بتكوين جدار الحماية للسماح بالاتصالات الواردة على منفذ الوكيل (<code class="language-plaintext highlighter-rouge">xxxxx</code>) فقط من عنوان IP جهاز التوجيه OpenWRT.</p>
  </li>
  <li>المصادقة:
    <ul>
      <li>يوفر Shadowsocks بالفعل مستوى معينًا من الأمان من خلال التشفير. تأكد من استخدام كلمات مرور قوية وطرق تشفير قوية.</li>
    </ul>
  </li>
</ul>

<h3 id="2-الأداء">2. الأداء</h3>

<ul>
  <li>موارد جهاز التوجيه (Router):
    <ul>
      <li>تشغيل خدمات الوكيل مثل Redsocks يمكن أن يستهلك موارد إضافية من وحدة المعالجة المركزية (CPU) والذاكرة على جهاز التوجيه الخاص بك الذي يعمل بنظام OpenWRT. تأكد من أن جهاز التوجيه لديه موارد كافية.</li>
    </ul>
  </li>
  <li>أداء جهاز Mac:
    <ul>
      <li>تأكد من بقاء جهاز Mac الخاص بك قيد التشغيل ومتصلًا بالشبكة للحفاظ على توفر الوكيل.</li>
    </ul>
  </li>
</ul>

<h3 id="3-الصيانة">3. الصيانة</h3>

<ul>
  <li>مراقبة السجلات:
    <ul>
      <li>تحقق بانتظام من سجلات Redsocks وShadowsocks بحثًا عن أي نشاط غير عادي أو أخطاء.</li>
    </ul>
  </li>
  <li>تحديث البرمجيات:
    <ul>
      <li>حافظ على تحديث OpenWRT، Redsocks، وعميل Shadowsocks لديك للاستفادة من تصحيحات الأمان وتحسينات الأداء.</li>
    </ul>
  </li>
</ul>

<h3 id="4-الأساليب-البديلة">4. الأساليب البديلة</h3>

<p>بينما يمكن استخدام جهاز Mac كخادم وكيل وسيط، فكر في البدائل التالية لإعدادات قد تكون أبسط:</p>

<ul>
  <li>تكوين OpenWRT مباشرة كعميل لـ Shadowsocks:
    <ul>
      <li>يدعم OpenWRT Shadowsocks مباشرة من خلال حزم مثل <code class="language-plaintext highlighter-rouge">shadowsocks-libev</code>. هذه الطريقة تلغي الحاجة إلى وسيط مثل جهاز Mac.</li>
    </ul>
  </li>
  <li>استخدام جهاز وكيل/شبكة خاصة مخصصة:
    <ul>
      <li>يمكن للأجهزة مثل Raspberry Pi تشغيل خدمات الوكيل والتصرف كبوابات مخصصة.</li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="الخاتمة">الخاتمة</h2>

<p>باتباع الخطوات الموضحة أعلاه، تكون قد قمت بإعداد جهاز Mac الخاص بك كخادم وكيل Shadowsocks وتهيئة جهاز التوجيه OpenWRT الخاص بك لتوجيه حركة المرور لجميع الأجهزة المتصلة عبر هذا الوكيل. يعزز هذا الإعداد خصوصية شبكتك ويزيد من تحكمك من خلال الاستفادة من بروتوكول Shadowsocks.</p>

<p>نقاط رئيسية ملخصة:</p>

<ol>
  <li>عميل Shadowsocks على نظام Mac:
    <ul>
      <li>تم تثبيت وتكوين Shadowsocks-NG أو Clash باستخدام رابط Shadowsocks الذي قمت بتوفيره.</li>
      <li>تم تكوين العميل للاستماع على عنوان IP الخاص بشبكة LAN في جهاز Mac.</li>
    </ul>
  </li>
  <li>إمكانية الوصول إلى الوكيل:
    <ul>
      <li>تم تعيين عنوان IP ثابت لجهاز Mac لضمان وصول متسق عبر الوكيل.</li>
      <li>تم تكوين جدار حماية macOS للسماح باتصالات الوكيل الواردة.</li>
    </ul>
  </li>
  <li>تكوين OpenWRT:
    <ul>
      <li>تم تثبيت وتكوين Redsocks لإعادة توجيه كل حركة المرور الصادرة عبر بروتوكول TCP من خلال وكيل Shadowsocks.</li>
      <li>تم تطبيق قواعد iptables اللازمة لفرض إعادة توجيه حركة المرور.</li>
    </ul>
  </li>
  <li>الاختبار:
    <ul>
      <li>تم التحقق من أن حركة المرور من الأجهزة المتصلة يتم توجيهها عبر وكيل Shadowsocks عن طريق التحقق من عناوين IP الخارجية.</li>
    </ul>
  </li>
</ol>

<p>التوصيات:</p>

<ul>
  <li><strong>ضمان الاستقرار</strong>: حافظ على تشغيل جهاز Mac الخاص بك وتوصيله بالطاقة لضمان استمرارية توفر الوكيل.</li>
  <li><strong>الأمان أولاً</strong>: قم بتحديث جميع المكونات بانتظام ومراقبة السجلات لحماية النظام من الوصول غير المصرح به.</li>
  <li><strong>فكر في التكوين المباشر للراوتر</strong>: لإعداد أكثر سلاسة، يمكنك استكشاف إعداد Shadowsocks مباشرة على جهاز الراوتر OpenWRT الخاص بك.</li>
</ul>

<p>إذا واجهت أي مشكلات أو كنت بحاجة إلى مزيد من المساعدة بخصوص إعدادات معينة، فلا تتردد في التواصل معنا!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base {
    log_debug = on;
    log_info = on;
    log = "file:/var/log/redsocks.log";
    daemon = on;
    redirector = generic;
}
</code></pre></div></div>

<p>تمت ترجمة الكود إلى:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base {
    log_debug = on;
    log_info = on;
    log = "file:/var/log/redsocks.log";
    daemon = on;
    redirector = generic;
}
</code></pre></div></div>

<p>ملاحظة: الكود لم يتم تغييره لأنه يحتوي على إعدادات وتوجيهات تقنية لا يجب تغييرها عند الترجمة.</p>

<p><code class="language-plaintext highlighter-rouge">redsocks {
    local_ip = 0.0.0.0;
    local_port = 7891;
    ip = xxx.xxx.xxx.xxx;
    port = xxxxx;
    type = http-connect;
    login = "";
    password = "";
}
</code></p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ar" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
