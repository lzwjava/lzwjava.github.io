<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>修復 GitHub Workflow LaTeX 編譯與 ChatGPT o1</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>修復 GitHub Workflow LaTeX 編譯與 ChatGPT o1 | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="修復 GitHub Workflow LaTeX 編譯與 ChatGPT o1" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="hant" />
<meta name="description" content="我最近在 GitHub flow 中遇到了 fontawesome5 套件的問題。4o-mini 提供的解決方案（使用 TeX Live 2021 和 tlmgr install fontawesome5）沒有效果，但 4o 建議了一個更好的方法（使用 TeX Live 2023 並且仍然使用 tlmgr 安裝 fontawesome5），我正在嘗試。這並沒有完全解決問題，但將 TeX Live 版本從 2021 更換為 2023 已經有顯著的改進。" />
<meta property="og:description" content="我最近在 GitHub flow 中遇到了 fontawesome5 套件的問題。4o-mini 提供的解決方案（使用 TeX Live 2021 和 tlmgr install fontawesome5）沒有效果，但 4o 建議了一個更好的方法（使用 TeX Live 2023 並且仍然使用 tlmgr 安裝 fontawesome5），我正在嘗試。這並沒有完全解決問題，但將 TeX Live 版本從 2021 更換為 2023 已經有顯著的改進。" />
<link rel="canonical" href="https://lzwjava.github.io/o1-hant" />
<meta property="og:url" content="https://lzwjava.github.io/o1-hant" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-08T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="修復 GitHub Workflow LaTeX 編譯與 ChatGPT o1" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-01-08T00:00:00+08:00","datePublished":"2025-01-08T00:00:00+08:00","description":"我最近在 GitHub flow 中遇到了 fontawesome5 套件的問題。4o-mini 提供的解決方案（使用 TeX Live 2021 和 tlmgr install fontawesome5）沒有效果，但 4o 建議了一個更好的方法（使用 TeX Live 2023 並且仍然使用 tlmgr 安裝 fontawesome5），我正在嘗試。這並沒有完全解決問題，但將 TeX Live 版本從 2021 更換為 2023 已經有顯著的改進。","headline":"修復 GitHub Workflow LaTeX 編譯與 ChatGPT o1","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/o1-hant"},"url":"https://lzwjava.github.io/o1-hant"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=ebc2149b78746bd8240816600c3276c3cfc36ccd">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=ebc2149b78746bd8240816600c3276c3cfc36ccd" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       修復 GitHub Workflow LaTeX 編譯與 ChatGPT o1 | 原創，AI翻譯
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/hant/2025-01-08-o1-hant.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postshant2025-01-08-o1-hant.md</span> -->
      

      <!-- <span>2025-01-08-o1-hant.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.01</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/o1-en" >English</option>
        <option value="/o1-zh" >中文</option>
        <option value="/o1-ja" >日本語</option>
        <option value="/o1-es" >Español</option>
        <option value="/o1-hi" >हिंदी</option>
        <option value="/o1-fr" >Français</option>
        <option value="/o1-de" >Deutsch</option>
        <option value="/o1-ar" >العربية</option>
        <option value="/o1-hant" selected>繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>我最近在 GitHub flow 中遇到了 <code class="language-plaintext highlighter-rouge">fontawesome5</code> 套件的問題。4o-mini 提供的解決方案（使用 TeX Live 2021 和 <code class="language-plaintext highlighter-rouge">tlmgr install fontawesome5</code>）沒有效果，但 4o 建議了一個更好的方法（使用 TeX Live 2023 並且仍然使用 <code class="language-plaintext highlighter-rouge">tlmgr</code> 安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code>），我正在嘗試。這並沒有完全解決問題，但將 TeX Live 版本從 2021 更換為 2023 已經有顯著的改進。</p>

<hr />

<h2 id="4o-mini-的答案">4o-mini 的答案</h2>

<p>你看到的錯誤與 <code class="language-plaintext highlighter-rouge">tlmgr</code>（TeX Live Manager）在用戶模式下未正確初始化有關。具體來說，訊息 <code class="language-plaintext highlighter-rouge">tlmgr: user mode not initialized, please read the documentation!</code> 表示 <code class="language-plaintext highlighter-rouge">tlmgr</code> 在用戶環境中未正確設置。</p>

<p>以下是如何修復它的詳細步驟：</p>

<h3 id="修復-tlmgr-用戶模式錯誤">修復 <code class="language-plaintext highlighter-rouge">tlmgr</code> 用戶模式錯誤</h3>

<ol>
  <li>
    <p><strong>正確設置 <code class="language-plaintext highlighter-rouge">tlmgr</code> 為用戶模式</strong>：
你需要明確告訴 <code class="language-plaintext highlighter-rouge">tlmgr</code> 在用戶模式下運行，並確保它正確初始化。在你的腳本中，使用以下步驟：</p>

    <ul>
      <li>確保你使用的是用戶模式下的 <code class="language-plaintext highlighter-rouge">tlmgr</code>，方法是設置正確的環境變量。</li>
      <li>你也可以在使用 <code class="language-plaintext highlighter-rouge">tlmgr</code> 之前初始化用戶特定的 TeX Live 目錄。</li>
    </ul>
  </li>
  <li><strong>在用戶模式下初始化 <code class="language-plaintext highlighter-rouge">tlmgr</code></strong>：
在運行 <code class="language-plaintext highlighter-rouge">tlmgr</code> 命令之前，確保使用以下命令初始化 <code class="language-plaintext highlighter-rouge">tlmgr</code>：
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tlmgr init-usertree
</code></pre></div>    </div>

    <p>這將在 <code class="language-plaintext highlighter-rouge">~/texmf</code> 中創建用戶特定的 TeX Live 目錄。初始化後，你可以運行 <code class="language-plaintext highlighter-rouge">tlmgr update</code> 和 <code class="language-plaintext highlighter-rouge">install</code> 命令。</p>
  </li>
  <li>
    <p><strong>修改你的 GitHub Actions 工作流程</strong>：
更新你的 GitHub Actions 工作流程文件以包括初始化步驟。以下是修改工作流程的示例：</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">設置 tlmgr 為用戶模式</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s"># 初始化用戶模式 TeX Live 目錄</span>
    <span class="s">tlmgr init-usertree</span>
    <span class="s">tlmgr update --self</span>
    <span class="s">tlmgr install fontawesome5</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="完整範例">完整範例：</h3>

<p>如果你在更大的 GitHub Actions 工作流程中運行此操作，你可以將這些更改合併到相關的 job 部分：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">安裝 TeX Live (xelatex)</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">sudo apt-get update</span>
          <span class="s">sudo apt-get install -y texlive-xetex</span>
          <span class="s">tlmgr init-usertree  # 初始化 TeX Live 用戶目錄</span>
          <span class="s">tlmgr update --self  # 更新 tlmgr 本身</span>
          <span class="s">tlmgr install fontawesome5  # 安裝所需套件</span>
</code></pre></div></div>

<h3 id="命令說明">命令說明：</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">tlmgr init-usertree</code>：這將初始化用戶特定的 TeX Live 目錄（通常位於 <code class="language-plaintext highlighter-rouge">~/texmf</code>）。</li>
  <li><code class="language-plaintext highlighter-rouge">tlmgr update --self</code>：將 <code class="language-plaintext highlighter-rouge">tlmgr</code> 套件本身更新到最新版本。</li>
  <li><code class="language-plaintext highlighter-rouge">tlmgr install fontawesome5</code>：安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code> 套件。</li>
</ul>

<h3 id="其他注意事項">其他注意事項：</h3>

<ul>
  <li><strong>權限</strong>：確保運行 GitHub Actions 工作流程的用戶有權限在 TeX Live 用戶目錄中安裝和修改文件。</li>
  <li><strong>環境變量</strong>：如果你使用自定義路徑，你可能需要調整 <code class="language-plaintext highlighter-rouge">TEXMFSYSVAR</code> 或 <code class="language-plaintext highlighter-rouge">TEXMFHOME</code> 以指向你的特定目錄。</li>
</ul>

<p>通過確保 <code class="language-plaintext highlighter-rouge">tlmgr</code> 在用戶模式下初始化並在你的 GitHub Actions 工作流程中正確設置，應該可以解決這個錯誤。如果這有效或你遇到其他問題，請告訴我！</p>

<h3 id="o1-的答案">o1 的答案</h3>

<p>我理解你在 GitHub Actions 工作流程中遇到了 <code class="language-plaintext highlighter-rouge">tlmgr</code>（TeX Live Manager）的問題，特別是在嘗試安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code> 套件時。錯誤訊息：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TLPDB: not a directory, not loading: /home/runner/texmf
tlmgr: user mode not initialized, please read the documentation!
Error: Process completed with exit code 2.
</code></pre></div></div>

<p>表示 <code class="language-plaintext highlighter-rouge">tlmgr</code> 無法在「用戶模式」下運行，因為必要的目錄和配置未正確設置。這個問題通常發生在使用如 <code class="language-plaintext highlighter-rouge">apt-get</code> 之類的套件管理器提供的 TeX Live 安裝時，這些安裝可能功能有限，與從 TUG（TeX Users Group）獲得的完整 TeX Live 安裝相比。</p>

<p>為了解決這個問題，我建議在你的 GitHub Actions 工作流程中<strong>手動安裝 TeX Live 2023</strong>。這種方法確保 <code class="language-plaintext highlighter-rouge">tlmgr</code> 具有完整功能，並且可以安裝如 <code class="language-plaintext highlighter-rouge">fontawesome5</code> 之類的附加套件而不會出現問題。</p>

<h3 id="逐步解決方案">逐步解決方案：</h3>

<ol>
  <li><strong>移除系統 TeX Live 安裝</strong>：
    <ul>
      <li>避免使用 <code class="language-plaintext highlighter-rouge">apt-get install texlive-xetex</code>，因為它提供的是部分 TeX Live 安裝，且 <code class="language-plaintext highlighter-rouge">tlmgr</code> 功能受限。</li>
    </ul>
  </li>
  <li><strong>手動安裝 TeX Live 2023</strong>：
    <ul>
      <li>直接從 TUG 下載並安裝 TeX Live。</li>
    </ul>
  </li>
  <li><strong>配置 PATH 環境變量</strong>：
    <ul>
      <li>確保 TeX Live 二進制文件可訪問，方法是更新 PATH。</li>
    </ul>
  </li>
  <li><strong>使用 <code class="language-plaintext highlighter-rouge">tlmgr</code> 安裝所需套件</strong>：
    <ul>
      <li>更新 <code class="language-plaintext highlighter-rouge">tlmgr</code> 並安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code>。</li>
    </ul>
  </li>
  <li><strong>使用緩存優化工作流程（可選）</strong>：
    <ul>
      <li>緩存 TeX Live 安裝以加速未來的工作流程運行。</li>
    </ul>
  </li>
</ol>

<h3 id="更新後的-github-actions-工作流程">更新後的 GitHub Actions 工作流程：</h3>

<p>以下是更新後的 GitHub Actions 工作流程，其中包含手動安裝 TeX Live 2023 並正確設置 <code class="language-plaintext highlighter-rouge">tlmgr</code> 以安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code> 套件。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">使用 GitHub Pages 依賴項預先安裝的 Jekyll 部署</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">master"</span><span class="pi">]</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>

<span class="na">permissions</span><span class="pi">:</span>
  <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
  <span class="na">pages</span><span class="pi">:</span> <span class="s">write</span>
  <span class="na">id-token</span><span class="pi">:</span> <span class="s">write</span>

<span class="na">concurrency</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pages"</span>
  <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="no">false</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">awesome-cv-copy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">檢出存儲庫</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">設置 Make</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">sudo apt-get update &amp;&amp; sudo apt-get install -y make</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">緩存 TeX Live</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/usr/local/texlive/2023</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">$-texlive-2023</span>
          <span class="na">restore-keys</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">$-texlive-</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">安裝 TeX Live </span><span class="m">2023</span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">steps.cache-texlive.outputs.cache-hit != 'true'</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># 安裝 TeX Live 安裝程序的依賴項</span>
          <span class="s">sudo apt-get update</span>
          <span class="s">sudo apt-get install -y perl wget xz-utils</span>

          <span class="s"># 下載 TeX Live 安裝程序</span>
          <span class="s">wget http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz</span>
          <span class="s">tar -xzf install-tl-unx.tar.gz</span>
          <span class="s">cd install-tl-*/</span>

          <span class="s"># 創建一個 texlive.profile 以進行自動化安裝</span>
          <span class="s">cat &lt;&lt;EOF &gt; texlive.profile</span>
          <span class="s">selected_scheme scheme-full</span>
          <span class="s">TEXDIR /usr/local/texlive/2023</span>
          <span class="s">TEXMFCONFIG ~/.texlive2023/texmf-config</span>
          <span class="s">TEXMFHOME ~/texmf</span>
          <span class="s">TEXMFLOCAL /usr/local/texlive/2023/texmf-local</span>
          <span class="s">TEXMFSYSCONFIG /usr/local/texlive/2023/texmf-config</span>
          <span class="s">TEXMFSYSVAR /usr/local/texlive/2023/texmf-var</span>
          <span class="s">binary_x86_64-linux 1</span>
          <span class="s">collection-basic 1</span>
          <span class="s">collection-latex 1</span>
          <span class="s">collection-fontsrecommended 1</span>
          <span class="s">EOF</span>

          <span class="s"># 使用配置文件運行安裝程序</span>
          <span class="s">sudo ./install-tl --profile=texlive.profile</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">將 TeX Live 添加到 PATH</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "/usr/local/texlive/2023/bin/x86_64-linux" &gt;&gt; $GITHUB_PATH</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">更新 tlmgr 並安裝 fontawesome5</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">tlmgr update --self</span>
          <span class="s">tlmgr install fontawesome5</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">運行 make awesome-cv-copy</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">make awesome-cv-copy</span>

  <span class="na">build</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">awesome-cv-copy</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">檢出存儲庫</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">設置 Python </span><span class="m">3</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-python@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">python-version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.x"</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">安裝依賴項</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">python -m pip install --upgrade pip</span>
          <span class="s">pip install python-frontmatter</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">生成筆記鏈接</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">python scripts/generate_notes_link.py</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">設置 Pages</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/configure-pages@v5</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">使用 Jekyll 構建</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/jekyll-build-pages@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">source</span><span class="pi">:</span> <span class="s">./</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">./_site</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">上傳構建產物</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-pages-artifact@v3</span>

  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">github-pages</span>
      <span class="na">url</span><span class="pi">:</span> <span class="s">$</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">build</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">部署到 GitHub Pages</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">deployment</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/deploy-pages@v4</span>
</code></pre></div></div>

<h3 id="詳細說明">詳細說明：</h3>

<ol>
  <li><strong>檢出存儲庫</strong>：
    <ul>
      <li>使用 <code class="language-plaintext highlighter-rouge">actions/checkout@v4</code> 操作來克隆你的存儲庫。</li>
    </ul>
  </li>
  <li><strong>設置 Make</strong>：
    <ul>
      <li>使用 <code class="language-plaintext highlighter-rouge">apt-get</code> 安裝 <code class="language-plaintext highlighter-rouge">make</code>，確保它可用於構建你的簡歷。</li>
    </ul>
  </li>
  <li><strong>緩存 TeX Live</strong>：
    <ul>
      <li>使用 <code class="language-plaintext highlighter-rouge">actions/cache@v3</code> 緩存位於 <code class="language-plaintext highlighter-rouge">/usr/local/texlive/2023</code> 的 TeX Live 安裝。這大大減少了後續工作流程運行的安裝時間。</li>
    </ul>
  </li>
  <li><strong>安裝 TeX Live 2023</strong>：
    <ul>
      <li><strong>條件執行</strong>：<code class="language-plaintext highlighter-rouge">if: steps.cache-texlive.outputs.cache-hit != 'true'</code> 條件確保只有在未緩存時才安裝 TeX Live。</li>
      <li><strong>安裝依賴項</strong>：安裝 Perl、<code class="language-plaintext highlighter-rouge">wget</code> 和 <code class="language-plaintext highlighter-rouge">xz-utils</code> 等必要依賴項。</li>
      <li><strong>下載並解壓安裝程序</strong>：從 CTAN 下載最新的 TeX Live 安裝程序並解壓。</li>
      <li><strong>創建安裝配置文件</strong>：創建一個 <code class="language-plaintext highlighter-rouge">texlive.profile</code> 以自動化安裝過程。該配置文件指定：
        <ul>
          <li><strong><code class="language-plaintext highlighter-rouge">selected_scheme scheme-full</code></strong>：安裝完整 TeX Live 分佈。如果需要，你可以將其調整為最小方案。</li>
          <li><strong>目錄</strong>：指定 TeX Live 及其配置的安裝位置。</li>
          <li><strong>集合</strong>：選擇基本集合如 <code class="language-plaintext highlighter-rouge">basic</code>、<code class="language-plaintext highlighter-rouge">latex</code> 和 <code class="language-plaintext highlighter-rouge">fontsrecommended</code>。</li>
        </ul>
      </li>
      <li><strong>運行安裝程序</strong>：使用指定的配置文件執行安裝程序，將 TeX Live 2023 安裝到 <code class="language-plaintext highlighter-rouge">/usr/local/texlive/2023</code>。</li>
    </ul>
  </li>
  <li><strong>將 TeX Live 添加到 PATH</strong>：
    <ul>
      <li>通過附加 TeX Live 二進制目錄來更新 PATH 環境變量。這確保 <code class="language-plaintext highlighter-rouge">tlmgr</code> 和其他 TeX Live 命令在後續步驟中可訪問。</li>
    </ul>
  </li>
  <li><strong>更新 tlmgr 並安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code></strong>：
    <ul>
      <li><strong>更新 <code class="language-plaintext highlighter-rouge">tlmgr</code></strong>：確保 <code class="language-plaintext highlighter-rouge">tlmgr</code> 本身是最新的。</li>
      <li><strong>安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code></strong>：使用 <code class="language-plaintext highlighter-rouge">tlmgr</code> 安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code> 套件，解決你最初的問題。</li>
    </ul>
  </li>
  <li><strong>運行 make 命令</strong>：
    <ul>
      <li>執行 <code class="language-plaintext highlighter-rouge">make awesome-cv-copy</code> 以使用安裝的 TeX Live 設置構建你的簡歷。</li>
    </ul>
  </li>
  <li><strong>構建和部署作業</strong>：
    <ul>
      <li>這些保持大致不變，但確保 TeX Live 安裝在整個工作流程中可用，因為 PATH 已更新。</li>
    </ul>
  </li>
</ol>

<h3 id="其他建議">其他建議：</h3>

<ul>
  <li><strong>TeX Live 安裝時間</strong>：
    <ul>
      <li><strong>緩存</strong>：包括 <code class="language-plaintext highlighter-rouge">actions/cache@v3</code> 步驟有助於通過緩存 TeX Live 後的第一次運行來緩解時間消耗的安裝。確保緩存鍵（<code class="language-plaintext highlighter-rouge">$-texlive-2023</code>）準確反映 TeX Live 版本，以避免緩存不匹配。</li>
    </ul>
  </li>
  <li><strong>自定義 TeX Live 安裝</strong>：
    <ul>
      <li>如果你不需要完整的 TeX Live 分佈，你可以修改 <code class="language-plaintext highlighter-rouge">texlive.profile</code> 以僅安裝特定集合，從而減少安裝時間和磁盤使用量。例如，用 <code class="language-plaintext highlighter-rouge">scheme-basic</code> 替換 <code class="language-plaintext highlighter-rouge">scheme-full</code> 並指定僅需要的集合。</li>
    </ul>
  </li>
  <li><strong>驗證安裝</strong>：
    <ul>
      <li>要確保 TeX Live 正確安裝，你可以添加一個驗證步驟：
```yaml
        <ul>
          <li>name: 驗證 TeX Live 安裝
run: |
  tex –version
  tlmgr –version
  kpsewhich fontawesome5.sty
```
此步驟可以通過確認 TeX Live 命令可訪問並且 <code class="language-plaintext highlighter-rouge">fontawesome5.sty</code> 已安裝來幫助診斷問題。</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>正確處理 PATH</strong>：
    <ul>
      <li>使用 <code class="language-plaintext highlighter-rouge">echo "/usr/local/texlive/2023/bin/x86_64-linux" &gt;&gt; $GITHUB_PATH</code> 確保 TeX Live 二進制文件被添加到作業中所有後續步驟的 PATH。這對於 <code class="language-plaintext highlighter-rouge">tlmgr</code> 和 LaTeX 命令正確工作至關重要。</li>
    </ul>
  </li>
</ul>

<h3 id="故障排除技巧">故障排除技巧：</h3>

<ol>
  <li><strong>緩存未命中問題</strong>：
    <ul>
      <li>確保緩存鍵準確反映 TeX Live 版本。如果你更新了 TeX Live 或更改了安裝路徑，請相應地更新緩存鍵。</li>
    </ul>
  </li>
  <li><strong>安裝失敗</strong>：
    <ul>
      <li>檢查 GitHub Actions 日誌，查找安裝 TeX Live 時的任何錯誤。常見問題包括下載安裝程序時的網絡問題或權限不足。</li>
    </ul>
  </li>
  <li><strong>套件安裝錯誤</strong>：
    <ul>
      <li>如果 <code class="language-plaintext highlighter-rouge">tlmgr</code> 無法安裝 <code class="language-plaintext highlighter-rouge">fontawesome5</code>，請驗證套件名稱是否正確，並確保該套件在 TeX Live 存儲庫中可用。</li>
    </ul>
  </li>
  <li><strong>PATH 問題</strong>：
    <ul>
      <li>確保 PATH 已正確更新。你可以添加一個步驟來打印 PATH 以進行調試：
```yaml
        <ul>
          <li>name: 打印 PATH
run: echo $PATH
```</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>磁盤空間限制</strong>：
    <ul>
      <li>GitHub Actions 運行器具有有限的磁盤空間。完整的 TeX Live 安裝可能會消耗大量空間。如果你遇到磁盤空間問題，請考慮安裝最小的 TeX Live 設置。</li>
    </ul>
  </li>
</ol>

<h3 id="最終工作流程範例與驗證">最終工作流程範例與驗證：</h3>

<p>以下是更全面的工作流程範例，其中包括驗證步驟，以確保一切設置正確：</p>

<p>```yaml
name: 使用 GitHub Pages 依賴項預先安裝的 Jekyll 部署</p>

<p>on:
  push:
    branches: [“master”]
  workflow_dispatch:</p>

<p>permissions:
  contents: read
  pages: write
  id-token: write</p>

<p>concurrency:
  group: “pages”
  cancel-in-progress: false</p>

<p>jobs:
  awesome-cv-copy:
    runs-on: ubuntu-latest
    steps:
      - name: 檢出存儲庫
        uses: actions/checkout@v4</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: 設置 Make
    run: sudo apt-get update &amp;&amp; sudo apt-get install -y make

  - name: 緩存 TeX Live
    uses: actions/cache@v3
    with:
      path: /usr/local/texlive/2023
      key: $-texlive-2023
      restore-keys: |
        $-texlive-

  - name: 安裝 TeX Live 2023
    if: steps.cache-texlive.outputs.cache-hit != 'true'
    run: |
      # 安裝 TeX Live 安裝程序的依賴項
      sudo apt-get update
      sudo apt-get install -y perl wget xz-utils

      # 下載 TeX Live 安裝程序
      wget http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz
      tar -xzf install-tl-unx.tar.gz
      cd install-tl-*/

      # 創建一個 texlive.profile 以進行自動化安裝
      cat &lt;&lt;EOF &gt; texlive.profile
      selected_scheme scheme-full
      TEXDIR /usr/local/texlive/2023
      TEXMFCONFIG ~/.texlive2023/texmf-config
      TEXMFHOME ~/texmf
      TEXMFLOCAL /usr/local/texlive/2023/texmf-local
      TEXMFSYSCONFIG /usr/local/texlive/2023/texmf-config
      TEXMFSYSVAR /usr/local/texlive/2023/texmf-var
      binary_x86_64-linux 1
      collection-basic 1
      collection-latex 1
      collection-fontsrecommended 1
      EOF

      # 使用配置文件運行安裝程序
      sudo ./install-tl --profile=texlive.profile

  - name: 將 TeX Live 添加到 PATH
    run: echo "/usr/local/texlive/2023/bin/x86_64-linux" &gt;&gt; $GITHUB_PATH

  - name: 驗證 TeX Live 安裝
    run: |
      tex --version
      tlmgr --version
      kpsewhich fontawesome5.sty || echo "fontawesome5.sty not found"

  - name: 更新 tlmgr 並安裝 fontawesome5
    run: |
      tlmgr update --self
      tlmgr install fontawesome5

  - name: 驗證 fontawesome5 安裝
    run: kpsewhich fontawesome5.sty

  - name: 運行 make awesome-cv-copy
    run: make awesome-cv-copy
</code></pre></div></div>

<p>build:
    runs-on: ubuntu-latest
    needs: awesome-cv-copy
    steps:
      - name: 檢出存儲庫
        uses: actions/checkout@v4</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: 設置 Python 3
    uses: actions/setup-python@v4
    with:
      python-version: "3.x"

  - name: 安裝依賴項
    run: |
      python -m pip install --upgrade pip
      pip install python-frontmatter

  - name: 生成筆記鏈接
    run
</code></pre></div></div>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-hant" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
