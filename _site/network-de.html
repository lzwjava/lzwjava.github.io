<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Schwebende IPs und Verwaltung von Netzwerkschnittstellen</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Schwebende IPs und Verwaltung von Netzwerkschnittstellen | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Schwebende IPs und Verwaltung von Netzwerkschnittstellen" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="de" />
<meta name="description" content="Inhaltsverzeichnis" />
<meta property="og:description" content="Inhaltsverzeichnis" />
<link rel="canonical" href="https://lzwjava.github.io/network-de" />
<meta property="og:url" content="https://lzwjava.github.io/network-de" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-02-08T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Schwebende IPs und Verwaltung von Netzwerkschnittstellen" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-02-08T00:00:00+08:00","datePublished":"2025-02-08T00:00:00+08:00","description":"Inhaltsverzeichnis","headline":"Schwebende IPs und Verwaltung von Netzwerkschnittstellen","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/network-de"},"url":"https://lzwjava.github.io/network-de"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=f800d98a4b6848cfc0a7912e1bd24981147031d3">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=f800d98a4b6848cfc0a7912e1bd24981147031d3" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Schwebende IPs und Verwaltung von Netzwerkschnittstellen | Original, von KI übersetzt
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/de/2025-02-08-network-de.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsde2025-02-08-network-de.md</span> -->
      

      <!-- <span>2025-02-08-network-de.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.02</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/network-en" >English</option>
        <option value="/network-zh" >中文</option>
        <option value="/network-ja" >日本語</option>
        <option value="/network-es" >Español</option>
        <option value="/network-hi" >हिंदी</option>
        <option value="/network-fr" >Français</option>
        <option value="/network-de" selected>Deutsch</option>
        <option value="/network-ar" >العربية</option>
        <option value="/network-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="inhaltsverzeichnis">Inhaltsverzeichnis</h3>

<ol>
  <li><a href="#floating-ips-in-hetzner-cloud">Floating IPs in Hetzner Cloud</a>
    <ul>
      <li>IP-Konfigurationsbefehle</li>
      <li>Netplan-Konfiguration einrichten</li>
      <li>Netzwerk-Konfigurationsdateien</li>
    </ul>
  </li>
  <li><a href="#network-interface-management">Netzwerkschnittstellenverwaltung</a>
    <ul>
      <li>Löschen von TUN-Schnittstellen</li>
      <li>Überwachung des Schnittstellenstatus</li>
      <li>Netzwerk-Fehlerbehebung</li>
    </ul>
  </li>
  <li><a href="#lan-ip-scanner">LAN-IP-Scanner</a>
    <ul>
      <li>Python-Netzwerk-Scan-Skript</li>
      <li>Multithread-Host-Erkennung</li>
      <li>Port-Scan-Funktionen</li>
      <li>Geräteidentifikation in lokalen Netzwerken</li>
    </ul>
  </li>
  <li><a href="#bypassing-local-ips">Umgehen lokaler IPs</a>
    <ul>
      <li>Proxy-Konfiguration für lokale Netzwerke</li>
      <li>Subnetzmaske-Berechnungen</li>
      <li>Netzwerkbereichsplanung</li>
    </ul>
  </li>
  <li><a href="#ssh-connection-using-ipv6-address">SSH-Verbindung mit IPv6-Adresse</a>
    <ul>
      <li>IPv6-SSH-Konfiguration</li>
      <li>SSH-Konfigurationsdateiverwaltung</li>
      <li>Proxy-Befehlseinrichtung für verschiedene Adresstypen</li>
      <li>Leistungsoptimierung</li>
    </ul>
  </li>
  <li><a href="#improving-wifi-speed">WLAN-Geschwindigkeit verbessern</a>
    <ul>
      <li>Alte vs. neue Modem-Leistung</li>
      <li>Netzwerkeinrichtungskonfigurationen</li>
      <li>Kabelgebundene vs. drahtlose Bridge-Modi</li>
      <li>Engpassanalyse im Netzwerk</li>
    </ul>
  </li>
  <li><a href="#openwrt-reset">OpenWrt Zurücksetzen</a>
    <ul>
      <li>Zurücksetzen über die Weboberfläche</li>
      <li>Zurücksetzen über die Befehlszeile (SSH)</li>
      <li>Wiederherstellung der Werkseinstellungen</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="floating-ips-in-hetzner-cloud">Floating IPs in Hetzner Cloud</h2>

<h3 id="ip">IP</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ip addr add 78.47.144.0 dev eth0
</code></pre></div></div>

<h3 id="netplan">Netplan</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> /etc/netplan/60-floating-ip.yaml
nano /etc/netplan/60-floating-ip.yaml
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">network</span><span class="pi">:</span>
   <span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
   <span class="na">renderer</span><span class="pi">:</span> <span class="s">networkd</span>
   <span class="na">ethernets</span><span class="pi">:</span>
     <span class="na">eth0</span><span class="pi">:</span>
       <span class="na">addresses</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">78.47.144.0/32</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>netplan apply
</code></pre></div></div>

<hr />

<h2 id="netzwerkschnittstellenverwaltung">Netzwerkschnittstellenverwaltung</h2>

<p>Lösche die <code class="language-plaintext highlighter-rouge">tun</code>-Schnittstelle.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ipconfig

outline-tun0: <span class="nv">flags</span><span class="o">=</span>4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500
        inet 10.0.85.1  netmask 255.255.255.255  destination 10.0.85.1
        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  <span class="o">(</span>UNSPEC<span class="o">)</span>
        RX packets 208  bytes 8712 <span class="o">(</span>8.7 KB<span class="o">)</span>
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 385  bytes 23322 <span class="o">(</span>23.3 KB<span class="o">)</span>
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link </span>delete outline-tun0
</code></pre></div></div>

<hr />

<h2 id="lan-ip-scanner">LAN-IP-Scanner</h2>

<p>Dieses Python-Skript scannt ein lokales Netzwerk nach aktiven IP-Adressen. Es verwendet den <code class="language-plaintext highlighter-rouge">ping</code>-Befehl, um zu prüfen, ob ein Host erreichbar ist, und setzt Multithreading ein, um den Scanvorgang zu beschleunigen. Ein Semaphor begrenzt die Anzahl der gleichzeitigen Threads, um das System nicht zu überlasten. Das Skript nimmt eine Netzwerkadresse (z. B. “192.168.1.0/24”) als Eingabe und gibt aus, ob jede IP-Adresse im Netzwerk aktiv oder inaktiv ist.</p>

<p>Dieses Skript hilft dabei, Geräte im Netzwerk zu identifizieren, wie z. B. einen TP-LINK-Mesh-Router, der im kabelgebundenen Bridge-Modus betrieben wird, indem es nach aktiven IP-Adressen scannt.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">ipaddress</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">MAX_THREADS</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># Maximale Anzahl der zu verwendenden Threads
</span>
<span class="k">def</span> <span class="nf">is_host_up</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    Prüft, ob ein Host erreichbar ist, mithilfe von Ping oder Telnet.
    Wenn ein Port angegeben ist, wird Telnet verwendet, um zu prüfen, ob der Port offen ist.
    Andernfalls wird Ping verwendet.
    Gibt True zurück, wenn der Host erreichbar ist, sonst False.
    """</span>
    <span class="k">if</span> <span class="n">port</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="p">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
            <span class="n">sock</span><span class="p">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">sock</span><span class="p">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="n">socket</span><span class="p">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sock</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># -c 1: Sende nur 1 Paket
</span>            <span class="c1"># -W 1: Warte 1 Sekunde auf eine Antwort
</span>            <span class="n">subprocess</span><span class="p">.</span><span class="n">check_output</span><span class="p">([</span><span class="s">"ping"</span><span class="p">,</span> <span class="s">"-c"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"-W"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="n">host</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">scan_ip</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">up_ips</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    Scannt eine einzelne IP-Adresse und gibt ihren Status aus.
    """</span>
    <span class="k">if</span> <span class="n">is_host_up</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">ip_str</span><span class="si">}</span><span class="s"> ist aktiv"</span><span class="p">)</span>
        <span class="n">up_ips</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip_str</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">ip_str</span><span class="si">}</span><span class="s"> ist inaktiv"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">scan_network</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    Scannt ein Netzwerk nach aktiven Hosts mithilfe von Threads und begrenzt die Anzahl der gleichzeitigen Threads.
    """</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Scanne Netzwerk: </span><span class="si">{</span><span class="n">network</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">semaphore</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="n">MAX_THREADS</span><span class="p">)</span>  <span class="c1"># Begrenzung der Anzahl der gleichzeitigen Threads
</span>    <span class="n">up_ips</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">scan_ip_with_semaphore</span><span class="p">(</span><span class="n">ip_str</span><span class="p">):</span>
        <span class="n">semaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">scan_ip</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">up_ips</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">semaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">ipaddress</span><span class="p">.</span><span class="n">IPv4Network</span><span class="p">(</span><span class="n">network</span><span class="p">):</span>
        <span class="n">ip_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">scan_ip_with_semaphore</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,))</span>
        <span class="n">threads</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">thread</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">up_ips</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">"Scannt ein Netzwerk nach aktiven Hosts."</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"network"</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">'?'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">"192.168.1.0/24"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"Das zu scannende Netzwerk (z. B. 192.168.1.0/24)"</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"-p"</span><span class="p">,</span> <span class="s">"--port"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"Der zu prüfende Port (optional)"</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">network_to_scan</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">network</span>
    <span class="n">port_to_scan</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">port</span>

    <span class="n">up_ips</span> <span class="o">=</span> <span class="n">scan_network</span><span class="p">(</span><span class="n">network_to_scan</span><span class="p">,</span> <span class="n">port_to_scan</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Aktive IPs:"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">up_ips</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="umgehen-lokaler-ips">Umgehen lokaler IPs</h2>

<p>Das Skript identifiziert aktive IP-Adressen. Um eine korrekte Netzwerkkommunikation zu gewährleisten, ist es wichtig, dass die Proxy-Einstellungen so konfiguriert sind, dass sie diese lokalen IPs umgehen.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.1,localhost,<span class="k">*</span>.local,timestamp.apple.com,sequoia.apple.com,seed-sequoia.siri.apple.com, 192.168.1.0/16
</code></pre></div></div>

<hr />

<h2 id="subnetzmasken">Subnetzmasken</h2>

<p>Mein zweiter Rechner befindet sich normalerweise unter 192.168.1.16.</p>

<p>Daher funktioniert es mit dem folgenden Befehl:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python scripts/ip_scan.py 192.168.1.0/27 <span class="nt">-p</span> 22
</code></pre></div></div>

<p>Denn 32 - 27 = 5, 2^5 = 32, also werden die IPs von <code class="language-plaintext highlighter-rouge">192.168.1.0</code> bis <code class="language-plaintext highlighter-rouge">192.168.1.31</code> überprüft.</p>

<p>Es funktioniert jedoch nicht mit <code class="language-plaintext highlighter-rouge">192.168.1.0/28</code>, da 2^4 = 16, also werden nur die IPs von <code class="language-plaintext highlighter-rouge">192.168.1.0</code> bis <code class="language-plaintext highlighter-rouge">192.168.1.15</code> überprüft, was <code class="language-plaintext highlighter-rouge">192.168.1.16</code> nicht abdeckt.</p>

<hr />

<h2 id="ssh-verbindung-mit-ipv6-adresse">SSH-Verbindung mit IPv6-Adresse</h2>

<p>Ich versuche, mich mit einer Maschine in der Hetzner Cloud über IPv6 zu verbinden. <code class="language-plaintext highlighter-rouge">ssh 2a01:4f8:c17:2000::/64</code> funktioniert nicht, aber <code class="language-plaintext highlighter-rouge">ssh root@2a01:4f8:c17:2000::1</code> schon.</p>

<p>Die IPv6-Adresse wurde aus der Hetzner Cloud-Konsole kopiert.</p>

<p>Die Datei <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> kann so konfiguriert werden, dass unterschiedliche Proxy-Regeln für IPv4- und IPv6-Adressen angewendet werden. Diese Einrichtung ermöglicht es, einen Proxy-Befehl für IPv4-Adressen festzulegen, während IPv6-Adressen anders behandelt werden.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
</code></pre></div></div>

<p>Wenn <code class="language-plaintext highlighter-rouge">ssh root@192.168.1.3</code> ausgeführt wird, zeigt die folgende Ausgabe, dass der SSH-Client die Konfigurationsoptionen aus der Datei <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> anwendet:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debug1: Liest Konfigurationsdaten aus /Users/lzwjava/.ssh/config
debug1: /Users/lzwjava/.ssh/config Zeile 1: Wende Optionen für 192.168.1.<span class="k">*</span> an
debug1: /Users/lzwjava/.ssh/config Zeile 5: Wende Optionen für <span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span> an
debug2: add_identity_file: ignoriere doppelten Schlüssel ~/.ssh/id_rsa
debug1: /Users/lzwjava/.ssh/config Zeile 10: Wende Optionen für <span class="k">*</span> an
debug2: add_identity_file: ignoriere doppelten Schlüssel ~/.ssh/id_rsa
debug1: Liest Konfigurationsdaten aus /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config Zeile 21: include /etc/ssh/ssh_config.d/<span class="k">*</span> keine Dateien gefunden
debug1: /etc/ssh/ssh_config Zeile 54: Wende Optionen für <span class="k">*</span> an
debug2: resolve_canonicalize: Hostname 192.168.1.3 ist eine Adresse
debug3: erweiterte Datei UserKnownHostsFile <span class="s1">'~/.ssh/known_hosts'</span> -&gt; <span class="s1">'/Users/lzwjava/.ssh/known_hosts'</span>
debug3: erweiterte Datei UserKnownHostsFile <span class="s1">'~/.ssh/known_hosts2'</span> -&gt; <span class="s1">'/Users/lzwjava/.ssh/known_hosts2'</span>
debug1: Authentifizierungsanbieter <span class="nv">$SSH_SK_PROVIDER</span> konnte nicht aufgelöst werden<span class="p">;</span> deaktiviere
debug3: channel_clear_timeouts: lösche Zeitlimits
debug1: Führe Proxy-Befehl aus: <span class="nb">exec </span>corkscrew localhost 7890 192.168.1.3 22
</code></pre></div></div>

<p>Die SSH-Verbindungsgeschwindigkeit war spürbar langsam, daher kehrte ich zur folgenden einfacheren Konfiguration zurück:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
</code></pre></div></div>

<p>Das Problem tritt auf, wenn IPv6-Adressen mit der Anweisung <code class="language-plaintext highlighter-rouge">ProxyCommand corkscrew localhost 7890 %h %p</code> verwendet werden, da dieser Proxy-Befehl IPv6-Adressen möglicherweise nicht korrekt verarbeitet.</p>

<p>Die obige Konfiguration funktioniert immer noch nicht. Die folgende funktioniert jedoch einwandfrei:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="o">!</span>192.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
</code></pre></div></div>

<hr />

<h2 id="wlan-geschwindigkeit-verbessern">WLAN-Geschwindigkeit verbessern</h2>

<h3 id="probleme-mit-altem-modem">Probleme mit altem Modem</h3>

<p>Bei meinen Eltern zu Hause ist das Modem etwa 10 Jahre alt. Die ursprüngliche Netzwerkeinrichtung war:</p>

<p>Modem -&gt; 3m drahtlos -&gt; TP-Link AX3000 (Wireless-Bridge-Modus) -&gt; 2m, eine Wand, drahtlos -&gt; Laptop</p>

<p>Dies führte zu einer niedrigen Downloadgeschwindigkeit mit einem Speedtest-Ergebnis von nur 10 Mbps.</p>

<p>Eine verbesserte Einrichtung umfasste die Verwendung einer kabelgebundenen Verbindung:</p>

<p>Modem -&gt; 2m Kabel -&gt; TP-Link AX3000 (kabelgebundener Bridge-Modus) -&gt; 4m drahtlos, eine Wand -&gt; Laptop</p>

<p>Damit stieg die Downloadgeschwindigkeit auf bis zu 90 Mbps.</p>

<h3 id="leistung-des-neuen-modems">Leistung des neuen Modems</h3>

<p>In meinem eigenen Haus ist das Modem neu, und der TP-Link-Router funktioniert im Wireless-Bridge-Modus gut. Die Netzwerkeinrichtung ist:</p>

<p>Modem -&gt; 4m drahtlos -&gt; TP-Link AX3000 (Wireless-Bridge-Modus) -&gt; 2m drahtlos -&gt; Laptop</p>

<p>Die Netzwerkqualität ist gut.</p>

<h3 id="tipps-zur-fehlerbehebung">Tipps zur Fehlerbehebung</h3>

<p>Es gibt keine universelle Lösung zur Verbesserung der WLAN-Geschwindigkeit. Ein guter Ansatz ist die Verwendung eines Kabels, um jeden Teil des Netzwerks zu testen und Engpässe zu identifizieren. Vergleichen Sie die Geschwindigkeiten bei kabelgebundener Verbindung und WLAN. Versuchen Sie auch, Geräte direkt per Kabel zu verbinden, um zu sehen, ob sich die Leistung verbessert.</p>

<hr />

<h2 id="openwrt-zurücksetzen">OpenWrt Zurücksetzen</h2>

<h3 id="zurücksetzen-über-die-weboberfläche">Zurücksetzen über die Weboberfläche</h3>

<p>Es wird empfohlen, sich über ein Ethernet-Kabel mit dem Router zu verbinden. Nach einem Reset wird die WLAN-SSID auf die Standardwerte zurückgesetzt, was möglicherweise nicht den Erwartungen entspricht.</p>

<h3 id="zurücksetzen-über-die-befehlszeile-ssh">Zurücksetzen über die Befehlszeile (SSH)</h3>

<p>OpenWrt kann über die Befehlszeilenschnittstelle (SSH) auf die Werkseinstellungen zurückgesetzt werden. So geht’s:</p>

<ol>
  <li>Verbinden Sie sich über SSH mit Ihrem OpenWrt-Router.</li>
  <li>
    <p>Führen Sie den folgenden Befehl aus:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@OpenWrt:~# firstboot
Dies wird alle Einstellungen löschen und installierte Pakete entfernen. Sind Sie sicher? <span class="o">[</span>N/y]
y
/dev/ubi0_1 ist als /overlay eingehängt, nur Dateien werden gelöscht
root@OpenWrt:~# reboot
</code></pre></div>    </div>
  </li>
  <li>Der Router startet mit den Werkseinstellungen neu.</li>
</ol>

<p><strong>Erklärung der Befehle:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">firstboot</code>: Dieser Befehl startet den Resetvorgang und löscht alle Konfigurationen und installierten Pakete.</li>
  <li><code class="language-plaintext highlighter-rouge">reboot</code>: Dieser Befehl startet den Router neu und wendet den Reset an.</li>
</ul>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-de" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
