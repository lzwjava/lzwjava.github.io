<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Conda 的问题</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Conda 的问题 | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Conda 的问题" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="zh" />
<meta name="description" content="问题" />
<meta property="og:description" content="问题" />
<link rel="canonical" href="https://lzwjava.github.io/conda-zh" />
<meta property="og:url" content="https://lzwjava.github.io/conda-zh" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-02-01T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Conda 的问题" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-02-01T00:00:00+08:00","datePublished":"2025-02-01T00:00:00+08:00","description":"问题","headline":"Conda 的问题","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/conda-zh"},"url":"https://lzwjava.github.io/conda-zh"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=f1b6c4b5f186136a03bf90eed67dd70f6320ecee">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=f1b6c4b5f186136a03bf90eed67dd70f6320ecee" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Conda 的问题 | 原创，AI翻译
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/zh/2025-02-01-conda-zh.md">PDF</a> -->

    <!-- Audio Button -->



    <!-- 
    <a href="#" id="playAudioButton" class="button audio-button" data-file-path="_posts/zh/2025-02-01-conda-zh.md">Audio</a>
     -->

        <!-- Date Button -->
    
      
      <!-- <span>_postszh2025-02-01-conda-zh.md</span> -->
      

      <!-- <span>2025-02-01-conda-zh.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.02</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/conda-en" >English</option>
        <option value="/conda-zh" selected>中文</option>
        <option value="/conda-ja" >日本語</option>
        <option value="/conda-es" >Español</option>
        <option value="/conda-hi" >हिंदी</option>
        <option value="/conda-fr" >Français</option>
        <option value="/conda-de" >Deutsch</option>
        <option value="/conda-ar" >العربية</option>
        <option value="/conda-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h2 id="问题">问题</h2>

<p>请参考此链接: <a href="https://www.reddit.com/r/MachineLearning/comments/myl8yn/d_is_anaconda_worth_the_trouble/">https://www.reddit.com/r/MachineLearning/comments/myl8yn/d_is_anaconda_worth_the_trouble/</a>.</p>

<p>我在使用 conda 时遇到一些问题，其他人也讨论过类似的问题。</p>

<p>随着时间的推移，你会忽略不同的环境设置。因此，我不得不删除其他环境。现在，我主要使用 <code class="language-plaintext highlighter-rouge">Python 3.10.9</code>，偶尔使用 <code class="language-plaintext highlighter-rouge">Python 3.11.11</code>。但我甚至很少使用 <code class="language-plaintext highlighter-rouge">Python 3.11.11</code>。个人认为，我不需要太多的环境。我只需要一个或两个环境来运行我正在研究或学习的内容。</p>

<p>我更喜欢一个更简单的解决方案。如果我有两个相互冲突的项目，我宁愿使用一个并放弃运行另一个。</p>

<p>例如，遇到以下问题确实很麻烦。<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda config <span class="nt">--set</span> proxy_servers.http <span class="nv">$HTTP_PROXY</span>
conda config <span class="nt">--set</span> proxy_servers.https <span class="nv">$HTTP_PROXY</span>
</code></pre></div></div>

<p>尽管最初设置 conda 的代理似乎加快了速度，但我最终决定移除它。</p>

<h2 id="移除">移除</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> ~/anaconda3
<span class="nb">rm</span> <span class="nt">-rf</span> ~/.condarc
<span class="nb">rm</span> <span class="nt">-rf</span> ~/Library/Caches/pip
<span class="c"># 更新 ~/.zprofile</span>
<span class="c"># 更新 ~/.bash_profile</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">~/.bash_profile</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/Users/lzwjava/anaconda3/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/Users/lzwjava/anaconda3/etc/profile.d/conda.sh" ]; then
        . "/Users/lzwjava/anaconda3/etc/profile.d/conda.sh"
    else
        export PATH="/Users/lzwjava/anaconda3/bin:$PATH"
    fi
fi
unset __conda_setup
# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;
</code></pre></div></div>

<p>即使这样，仍然显示：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% which conda
conda <span class="o">()</span> <span class="o">{</span>
	<span class="nb">local </span><span class="nv">cmd</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">1</span><span class="p">-__missing__</span><span class="k">}</span><span class="s2">"</span>
	<span class="k">case</span> <span class="s2">"</span><span class="nv">$cmd</span><span class="s2">"</span> <span class="k">in</span>
		<span class="o">(</span>activate <span class="p">|</span> deactivate<span class="p">)</span> __conda_activate <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> <span class="p">;;</span>
		<span class="o">(</span><span class="nb">install</span> <span class="p">|</span> update <span class="p">|</span> upgrade <span class="p">|</span> remove <span class="p">|</span> uninstall<span class="p">)</span> __conda_exe <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> <span class="o">||</span> <span class="k">return
			</span>__conda_reactivate <span class="p">;;</span>
		<span class="o">(</span><span class="k">*</span><span class="p">)</span> __conda_exe <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> <span class="p">;;</span>
	<span class="k">esac</span>
<span class="o">}</span>
</code></pre></div></div>

<p>重启 iTerm2 后，我决定切换到 Homebrew 的 Python 安装。似乎我的电脑上有多个 Python 安装；我已经有六个，如下所示。</p>

<ul>
  <li>~/Library/Python/3.9</li>
  <li>~/Library/Python/3.11</li>
  <li>/opt/homebrew/lib/python3.11</li>
  <li>/opt/homebrew/lib/python3.12</li>
  <li>/opt/homebrew/lib/python3.13</li>
  <li>/opt/homebrew/lib/python3.9</li>
</ul>

<p>使用以下命令删除：<code class="language-plaintext highlighter-rouge">brew uninstall python@3.11</code>。</p>

<p>重要日志。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% brew uninstall python@3.13
Error: Refusing to uninstall /opt/homebrew/Cellar/python@3.13/3.13.1
because it is required by cairo, docutils, ffmpeg, ghostscript, glib, gradle, harfbuzz, imagemagick, libass, libheif, liblqr, maven, openjdk, openjdk@17, pango, poppler, tesseract, wireshark and yt-dlp, which are currently installed.
You can override this and force removal with:
  brew uninstall <span class="nt">--ignore-dependencies</span> python@3.13
</code></pre></div></div>

<p>Pip 日志：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 <span class="nb">install</span> <span class="nt">-r</span> requirements.txt <span class="nt">--break-system-packages</span>
pip3 <span class="nb">install</span> <span class="nt">--upgrade</span> pip <span class="nt">--break-system-packages</span>
</code></pre></div></div>

<h2 id="引用">引用</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - defaults/osx-arm64::markdown<span class="o">==</span>3.4.1<span class="o">=</span>py310hca03da5_0
  - defaults/osx-arm64::numpydoc<span class="o">==</span>1.5.0<span class="o">=</span>py310hca03da5_0
  - defaults/noarch::tldextract<span class="o">==</span>3.2.0<span class="o">=</span>pyhd3eb1b0_0
failed with initial frozen solve. Retrying with flexible solve.
Solving environment: failed with repodata from current_repodata.json, will retry with next repodata source.
Collecting package metadata <span class="o">(</span>repodata.json<span class="o">)</span>: / WARNING conda.models.version:get_matcher<span class="o">(</span>546<span class="o">)</span>: Using .<span class="k">*</span> with relational operator is superfluous and deprecated and will be removed <span class="k">in </span>a future version of conda. Your spec was 1.8.0.<span class="k">*</span>, but conda is ignoring the .<span class="k">*</span> and treating it as 1.8.0
WARNING conda.models.version:get_matcher<span class="o">(</span>546<span class="o">)</span>: Using .<span class="k">*</span> with relational operator is superfluous and deprecated and will be removed <span class="k">in </span>a future version of conda. Your spec was 1.9.0.<span class="k">*</span>, but conda is ignoring the .<span class="k">*</span> and treating it as 1.9.0
<span class="k">done
</span>Solving environment: /
The environment is inconsistent, please check the package plan carefully
The following packages are causing the inconsistency:

  - defaults/osx-arm64::tabulate<span class="o">==</span>0.8.10<span class="o">=</span>py310hca03da5_0
  - defaults/osx-arm64::cymem<span class="o">==</span>2.0.6<span class="o">=</span>py310hc377ac9_0
  - defaults/noarch::conda-pack<span class="o">==</span>0.6.0<span class="o">=</span>pyhd3eb1b0_0
  <span class="c"># ...</span>
  - defaults/noarch::pandocfilters<span class="o">==</span>1.5.0<span class="o">=</span>pyhd3eb1b0_0
  - defaults/osx-arm64::markdown<span class="o">==</span>3.4.1<span class="o">=</span>py310hca03da5_0
  - defaults/osx-arm64::numpydoc<span class="o">==</span>1.5.0<span class="o">=</span>py310hca03da5_0
  - defaults/noarch::tldextract<span class="o">==</span>3.2.0<span class="o">=</span>pyhd3eb1b0_0
-/ ^R
<span class="se">\</span>
<span class="se">\</span>
/
-
/
-
<span class="se">\</span>
<span class="k">done</span>

<span class="o">==&gt;</span> WARNING: A newer version of conda exists. &lt;<span class="o">==</span>
  current version: 23.3.1
  latest version: 25.1.1

Please update conda by running

    <span class="nv">$ </span>conda update <span class="nt">-n</span> base <span class="nt">-c</span> defaults conda

Or to minimize the number of packages updated during conda update use

     conda <span class="nb">install </span><span class="nv">conda</span><span class="o">=</span>25.1.1

<span class="c">## Package Plan ##</span>

  environment location: /Users/lzwjava/anaconda3

  added / updated specs:
    - ipykernel

The following packages will be downloaded:

    package                    |            build
    <span class="nt">---------------------------</span>|-----------------
    attrs-25.1.0               |     pyh71513ae_0          55 KB  conda-forge
    bcrypt-3.2.0               |  py310h80987f9_2          37 KB
    ca-certificates-2025.1.31  |       hf0a4a13_0         155 KB  conda-forge
    certifi-2024.12.14         |     pyhd8ed1ab_0         158 KB  conda-forge
    charset-normalizer-2.1.1   |     pyhd8ed1ab_0          36 KB  conda-forge
    click-8.1.8                |     pyh707e725_0          83 KB  conda-forge
    fsspec-2024.12.0           |     pyhd8ed1ab_0         135 KB  conda-forge
    huggingface_hub-0.27.1     |     pyhd8ed1ab_0         272 KB  conda-forge
    jinja2-3.1.5               |     pyhd8ed1ab_0         110 KB  conda-forge
    jsonpatch-1.33             |     pyhd8ed1ab_1          17 KB  conda-forge
    pandas-2.1.4               |  py310h46d7db6_0        11.8 MB
    pyjwt-2.10.1               |     pyhd8ed1ab_0          25 KB  conda-forge
    pyrsistent-0.20.0          |  py310h80987f9_1         100 KB
    python-tzdata-2025.1       |     pyhd8ed1ab_0         140 KB  conda-forge
    pytz-2025.1                |     pyhd8ed1ab_0         182 KB  conda-forge
    pyyaml-6.0.2               |  py310h80987f9_0         176 KB
    sniffio-1.3.1              |     pyhd8ed1ab_1          15 KB  conda-forge
    tenacity-9.0.0             |     pyhd8ed1ab_1          24 KB  conda-forge
    tokenizers-0.13.2          |  py310h3dd52b7_1         2.9 MB
    tqdm-4.67.1                |     pyhd8ed1ab_1          87 KB  conda-forge
    websocket-client-1.8.0     |     pyhd8ed1ab_1          46 KB  conda-forge
    <span class="nt">------------------------------------------------------------</span>
                                           Total:        16.6 MB

The following NEW packages will be INSTALLED:

  attrs              conda-forge/noarch::attrs-25.1.0-pyh71513ae_0
  bcrypt             pkgs/main/osx-arm64::bcrypt-3.2.0-py310h80987f9_2
  certifi            conda-forge/noarch::certifi-2024.12.14-pyhd8ed1ab_0
  charset-normalizer conda-forge/noarch::charset-normalizer-2.1.1-pyhd8ed1ab_0
  click              conda-forge/noarch::click-8.1.8-pyh707e725_0
  fsspec             conda-forge/noarch::fsspec-2024.12.0-pyhd8ed1ab_0
  huggingface_hub    conda-forge/noarch::huggingface_hub-0.27.1-pyhd8ed1ab_0
  importlib-metadata pkgs/main/osx-arm64::importlib-metadata-4.11.3-py310hca03da5_0
  jinja2             conda-forge/noarch::jinja2-3.1.5-pyhd8ed1ab_0
  jsonpatch          conda-forge/noarch::jsonpatch-1.33-pyhd8ed1ab_1
  pandas             pkgs/main/osx-arm64::pandas-2.1.4-py310h46d7db6_0
  pyjwt              conda-forge/noarch::pyjwt-2.10.1-pyhd8ed1ab_0
  pyrsistent         pkgs/main/osx-arm64::pyrsistent-0.20.0-py310h80987f9_1
  python-tzdata      conda-forge/noarch::python-tzdata-2025.1-pyhd8ed1ab_0
  pytz               conda-forge/noarch::pytz-2025.1-pyhd8ed1ab_0
  pyyaml             pkgs/main/osx-arm64::pyyaml-6.0.2-py310h80987f9_0
  sniffio            conda-forge/noarch::sniffio-1.3.1-pyhd8ed1ab_1
  tenacity           conda-forge/noarch::tenacity-9.0.0-pyhd8ed1ab_1
  tokenizers         pkgs/main/osx-arm64::tokenizers-0.13.2-py310h3dd52b7_1
  tqdm               conda-forge/noarch::tqdm-4.67.1-pyhd8ed1ab_1
  typer              conda-forge/noarch::typer-0.7.0-pyhd8ed1ab_0
  typing_extensions  conda-forge/noarch::typing_extensions-4.7.1-pyha770c72_0
  urllib3            conda-forge/noarch::urllib3-1.26.15-pyhd8ed1ab_0
  websocket-client   conda-forge/noarch::websocket-client-1.8.0-pyhd8ed1ab_1

The following packages will be UPDATED:

  ca-certificates                      2023.7.22-hf0a4a13_0 <span class="nt">--</span><span class="o">&gt;</span> 2025.1.31-hf0a4a13_0
  openssl                                 1.1.1u-h53f4e23_0 <span class="nt">--</span><span class="o">&gt;</span> 1.1.1w-h53f4e23_0

Proceed <span class="o">([</span>y]/n<span class="o">)</span>?

Downloading and Extracting Packages

Preparing transaction: <span class="k">done
</span>Verifying transaction: failed

RemoveError: <span class="s1">'jsonpatch'</span> is a dependency of conda and cannot be removed from
conda<span class="s1">'s operating environment.
RemoveError: '</span>tqdm<span class="s1">' is a dependency of conda and cannot be removed from
conda'</span>s operating environment.
</code></pre></div></div>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>以下是日志。 <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-zh" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
