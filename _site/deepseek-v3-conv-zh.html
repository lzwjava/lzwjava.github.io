<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>一段关于深度求索V3的AI生成对话</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>一段关于深度求索V3的AI生成对话 | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="一段关于深度求索V3的AI生成对话" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="zh" />
<meta name="description" content="本文深入探讨了DeepSeek v3，并参考了视频《Deepseek v3中的多头潜在注意力与多令牌预测》https://youtu.be/jL49fLOJYNg?si=4uE2kfe-BlKC1ngO。视频内容通过Google Cloud语音转文字服务转录，并辅以代码整理文稿。" />
<meta property="og:description" content="本文深入探讨了DeepSeek v3，并参考了视频《Deepseek v3中的多头潜在注意力与多令牌预测》https://youtu.be/jL49fLOJYNg?si=4uE2kfe-BlKC1ngO。视频内容通过Google Cloud语音转文字服务转录，并辅以代码整理文稿。" />
<link rel="canonical" href="https://lzwjava.github.io/deepseek-v3-conv-zh" />
<meta property="og:url" content="https://lzwjava.github.io/deepseek-v3-conv-zh" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-24T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="一段关于深度求索V3的AI生成对话" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-01-24T00:00:00+08:00","datePublished":"2025-01-24T00:00:00+08:00","description":"本文深入探讨了DeepSeek v3，并参考了视频《Deepseek v3中的多头潜在注意力与多令牌预测》https://youtu.be/jL49fLOJYNg?si=4uE2kfe-BlKC1ngO。视频内容通过Google Cloud语音转文字服务转录，并辅以代码整理文稿。","headline":"一段关于深度求索V3的AI生成对话","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/deepseek-v3-conv-zh"},"url":"https://lzwjava.github.io/deepseek-v3-conv-zh"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=3216829caeb81b06d934499b8582ec3800c37fdb">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=3216829caeb81b06d934499b8582ec3800c37fdb" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       一段关于深度求索V3的AI生成对话 | 原创，AI翻译
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/zh/2025-01-24-deepseek-v3-conv-zh.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postszh2025-01-24-deepseek-v3-conv-zh.md</span> -->
      

      <!-- <span>2025-01-24-deepseek-v3-conv-zh.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.01</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/deepseek-v3-conv-en" >English</option>
        <option value="/deepseek-v3-conv-zh" selected>中文</option>
        <option value="/deepseek-v3-conv-ja" >日本語</option>
        <option value="/deepseek-v3-conv-es" >Español</option>
        <option value="/deepseek-v3-conv-hi" >हिंदी</option>
        <option value="/deepseek-v3-conv-fr" >Français</option>
        <option value="/deepseek-v3-conv-de" >Deutsch</option>
        <option value="/deepseek-v3-conv-ar" >العربية</option>
        <option value="/deepseek-v3-conv-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>本文深入探讨了DeepSeek v3，并参考了视频《Deepseek v3中的多头潜在注意力与多令牌预测》<a href="https://youtu.be/jL49fLOJYNg?si=4uE2kfe-BlKC1ngO">https://youtu.be/jL49fLOJYNg?si=4uE2kfe-BlKC1ngO</a>。视频内容通过Google Cloud语音转文字服务转录，并辅以代码整理文稿。</p>

<hr />

<p>A：欢迎回到Deep tag。今天我们将深入探讨大语言模型的世界，具体来说是DeepSeek V3。</p>

<p>B：听起来不错。这是一个拥有6710亿参数的模型，以其独特的效率和性能处理方法引起关注，对吧？</p>

<p>A：你还分享了一篇详细描述其架构的学术论文。</p>

<p>B：是的。</p>

<p>A：作为机器学习专家，你希望了解DeepSeek V3如何同时实现高性能和经济高效的训练。</p>

<p>B：没错。</p>

<p>A：哦，你好，有什么问题吗？</p>

<p>C：MLA的细节，MLA是如何工作的。</p>

<p>A：哦，当然。这是个好主意。我们可以深入探讨多头潜在注意力（MLA）。你对MLA的核心机制感到好奇，那我们来拆解一下。我们提到DeepSeek V3效率的关键之一是其混合专家（MoE）架构，即每个令牌仅激活部分参数。而DeepSeek V3通过MLA和DeepSeek Mo更进一步。</p>

<p>B：对，现在我们重点讨论MLA。</p>

<p>A：好的。在实时应用中，速度至关重要。</p>

<p>B：确实，推理过程中所需的键值缓存可能成为主要瓶颈。</p>

<p>A：正是如此。传统注意力机制需要存储大量关于先前令牌的信息。</p>

<p>B：是的，可以想象对于长文本序列这会成为问题，对吧？</p>

<p>A：但MLA巧妙压缩了这些信息，显著减少了缓存流量，使推理速度大幅提升。就像把一本厚重的百科全书精简为要点。</p>

<p>B：这个比喻很贴切。它保留了关键信息而避免了不必要的负担，这对实时应用非常有用。</p>

<p>A：是的。那么它是如何实现这种压缩的呢？</p>

<p>B：它采用低秩联合压缩技术处理注意力键和值。</p>

<p>A：压缩键和值具体是什么意思呢？技术层面上，MLA机制接收隐藏表示输入，然后投影为查询、键和值向量。有趣的是，MLA将查询解耦为两部分。</p>

<p>B：两部分？</p>

<p>A：是的。一部分用于内容，另一部分通过旋转位置嵌入（Rope）处理位置信息。</p>

<p>B：Rope？听起来很技术。</p>

<p>A：这是旋转位置嵌入的缩写，帮助模型理解序列中令牌的位置。然后键和值被压缩到低维潜在空间，类似于数据缩容以节省内存。</p>

<p>B：精确来说，重要信息得以保留，冗余部分则被舍弃。这种压缩表示使得推理时所需的KV缓存更小，从而加速推理。</p>

<p>A：它同样采用多头处理机制。</p>

<p>B：是的，与传统注意力类似，MLA也使用多头机制。</p>

<p>A：哦，请继续。</p>

<p>C：因此存在两个潜在空间和一个隐藏输入。</p>

<p>A：观察得很准确。确实存在两个潜在空间：内容潜在空间和键值潜在空间。</p>

<p>B：没错。这些潜在空间通过旋转位置嵌入（Rope）进行处理。</p>

<p>A：所以Rope负责获取位置信息。</p>

<p>B：是的，它同时作用于内容和键值潜在空间。处理压缩表示后，所有信息会重新整合。</p>

<p>A：缓存优化进一步减少了序列处理时的开销。这就是MLA加速的奥秘。</p>

<p>B：正是。这是一种在不牺牲性能的前提下实现高效注意力的巧妙方法。</p>

<p>A：这确实是个聪明的手段。不过你知道吗？</p>

<p>B：怎么了？</p>

<p>A：我们来聊聊DeepSeek Mo，它与传统MoE模型有何不同？</p>

<p>B：DeepSeek Mo使用了…哦，回到听众的问题，什么是隐藏空间？</p>

<p>C：关于隐藏空间，能详细说说吗？</p>

<p>A：隐藏空间确实非常有趣。你在询问我们刚才讨论的潜在空间，即那个“洞穴”里发生了什么，对吧？不仅是空间数量，还包括其中的运作机制。</p>

<p>B：这很酷。</p>

<p>A：MLA中确实存在两个独立的潜在空间，分别用于内容和键值。就像有两个独立的信息存储单元。这些潜在空间会经过Rope操作，即旋转位置嵌入，将位置信息整合到注意力机制中。</p>

<p>A：现在让我们更详细地探讨隐藏空间中的操作。MLA如何执行这些潜在空间转换？</p>

<p>B：输入会并行处理内容和键值表示，就像在洞穴中有两条路径。</p>

<p>A：每个潜在空间对应一条路径。信息在这些空间中使用Rope进行处理。</p>

<p>B：这确保模型在处理过程中保留位置信息，从而知晓文本的哪部分对应哪里。</p>

<p>A：正是。这些处理完成后，会进行拼接操作。在隐藏空间的洞穴中，哪些内容被拼接？</p>

<p>B：机制执行两个主要拼接操作：查询表示和键表示的拼接。就像在洞穴中将所有重要部分组合起来。</p>

<p>A：这些拼接帮助将内容与位置信息结合，用于后续注意力计算。由于初始压缩，洞穴中的处理速度大大加快。</p>

<p>B：正确。MLA大幅降低了隐藏洞穴内外的计算成本，优化了大型模型如DeepSeek V3的注意力机制。</p>

<p>A：好问题。走出洞穴后，我们转向DeepSeek Mo。</p>

<p>B：DeepSeek Mo。原来如此。MLA中确实存在两个独立的潜在空间。</p>

<p>A：这种分离正是其运作的关键。信息经过Rope操作，将位置嵌入到注意力机制中。总结来说，查询被拆分，键和值被压缩。</p>

<p>B：它们被分别存入内容和键值潜在空间，这对MLA的效率至关重要。</p>

<p>A：现在详细探讨这些操作。MLA如何执行潜在空间转换？</p>

<p>B：输入并行处理内容和键值表示，形成两条路径。</p>

<p>A：每个潜在空间对应一条路径，信息使用Rope进行处理。</p>

<p>B：这确保模型保留位置信息。为了提高效率，它还使用共享专家，即可以跨任务使用的专家。</p>

<p>A：避免冗余，使系统更高效。</p>

<p>B：就像团队中的成员各有专长但也能处理其他事务。</p>

<p>A：非常巧妙的方法。但如何防止某些专家过载而其他闲置？</p>

<p>B：这就是其创新的无辅助损失负载均衡发挥作用的地方。</p>

<p>A：传统MoE模型在训练中使用辅助损失函数以均衡专家使用，但这可能损害性能。</p>

<p>B：就像强制所有顾客使用同一个收银台，即使有的通道更快。</p>

<p>A：DeepSeek V3通过动态调整每个专家的偏置项来避免此问题。如果某个专家负载过高，系统会降低其吸引力，将流量转向较空闲的专家。</p>

<p>A：现在讨论DeepSeek V3的负载均衡策略。</p>

<p>B：好的，我们刚讨论过MTP，现在来看看负载均衡。</p>

<p>A：MTP通过预测多个未来令牌提供优势。就像规划路线时，前瞻多个转弯能选择最优路径。</p>

<p>B：DeepSeek V3采用创新的无辅助损失负载均衡，不依赖单独的损失函数进行平衡。</p>

<p>A：反之，它动态调整专家偏置项，防止专家过载。</p>

<p>B：就像交通管理系统，实时监控并调整流量。</p>

<p>A：MTP模块在训练中使用的资源可以推断时去除，或用于推测性解码。</p>

<p>B：推测性解码是什么？</p>

<p>A：模型不仅预测下一个令牌，还预测可能的后续选项，从而加速文本生成。</p>

<p>B：这样模型无需暂停重新计算每个令牌。</p>

<p>A：这避免了辅助损失带来的性能损失。他们还包括互补的序列平衡损失，防止极端不平衡。</p>

<p>B：通过限制每个令牌最多使用四个节点，减少网络通信，优化效率。</p>

<p>A：我们来谈谈DeepSeek V3如何管理训练的计算需求。你对其经济高效的优化方法特别感兴趣。</p>

<p>B：是的，这个模型在这方面表现惊人。</p>

<p>A：每个令牌平均选择3.2个专家，很好地平衡了开销。</p>

<p>B：这是非常高效的方法。</p>

<p>A：确实是一种让如此复杂的模型高效运作的聪明方法。</p>

<p>B：通过这种方法实现专家专业化，不同专家在不同领域激活。</p>

<p>A：DeepSeek V3采用FPA混合精度训练框架，对如此规模的模型是重大突破。提醒一下FPA是什么？</p>

<p>B：它是8位浮点表示，比传统格式使用更少的位数，减少内存占用并加速计算。</p>

<p>A：就像压缩大图像文件，保留精髓但占用更少空间。</p>

<p>B：每个专家在特定领域激活，精细调整以准备就绪。</p>

<p>A：这种逐批处理的方法非常聪明。</p>

<p>B：这种动态负载均衡方法引人入胜，关乎效率与平衡。</p>

<p>A：这正是DeepSeek V3对性能和资源利用承诺的体现。</p>

<p>A：使用较少位数是否影响准确性？</p>

<p>B：这是合理的担忧，他们通过精细量化等技术谨慎解决了这个问题。</p>

<p>A：从多头潜在注意到DeepSeek Mo和负载均衡，DeepSeek V3是一个非常复杂的系统，展现了创新如何推动边界。</p>

<p>B：今天的深入探讨很有收获。</p>

<p>A：这为你提供了DeepSeek V3的全面概览。</p>

<p>B：感谢一起探索。</p>

<p>A：今天的深入探讨就到这里，我们下次再见。</p>

<p>B：他们在（效率和性能）之间取得了平衡。</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-zh" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
