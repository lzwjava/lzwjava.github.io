<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Proxy-Einstellungen anzeigen, bevor Befehle ausgeführt werden</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Proxy-Einstellungen anzeigen, bevor Befehle ausgeführt werden | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Proxy-Einstellungen anzeigen, bevor Befehle ausgeführt werden" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="de" />
<meta name="description" content="李智维" />
<meta property="og:description" content="李智维" />
<link rel="canonical" href="https://lzwjava.github.io/preexec-de" />
<meta property="og:url" content="https://lzwjava.github.io/preexec-de" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-12-17T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Proxy-Einstellungen anzeigen, bevor Befehle ausgeführt werden" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2024-12-17T00:00:00+08:00","datePublished":"2024-12-17T00:00:00+08:00","description":"李智维","headline":"Proxy-Einstellungen anzeigen, bevor Befehle ausgeführt werden","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/preexec-de"},"url":"https://lzwjava.github.io/preexec-de"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=d7d49f000e48680096dace9b5d96006f3153f894">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=d7d49f000e48680096dace9b5d96006f3153f894" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Proxy-Einstellungen anzeigen, bevor Befehle ausgeführt werden | Original, von KI übersetzt
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/de/2024-12-17-preexec-de.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsde2024-12-17-preexec-de.md</span> -->
      

      <!-- <span>2024-12-17-preexec-de.md</span> -->

      
        

        
          
          <a href="#" class="button">2024.12</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/preexec-en" >English</option>
        <option value="/preexec-zh" >中文</option>
        <option value="/preexec-ja" >日本語</option>
        <option value="/preexec-es" >Español</option>
        <option value="/preexec-hi" >हिंदी</option>
        <option value="/preexec-fr" >Français</option>
        <option value="/preexec-de" selected>Deutsch</option>
        <option value="/preexec-ar" >العربية</option>
        <option value="/preexec-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <div style="text-align: center;">  
    <img class="responsive" src="/assets/images/preexec/pe1.png" alt="prexec" />  
</div>

<p>Das Leben in China oder die Arbeit in Unternehmen, die VPNs und Proxys verwenden, kann die Softwareentwicklung erschweren. Wenn man vergisst, diese Einstellungen zu konfigurieren, führt dies oft zu Verbindungsproblemen. Um Ihren Arbeitsablauf zu optimieren, habe ich mit Hilfe von ChatGPT ein einfaches Zsh-Skript erstellt, das automatisch Ihre Proxy-Einstellungen anzeigt, wenn Sie bestimmte netzwerkabhängige Befehle ausführen.</p>

<h2 id="warum-proxy-einstellungen-anzeigen">Warum Proxy-Einstellungen anzeigen?</h2>

<p>Proxies und VPNs sind unerlässlich, um sicher auf externe Ressourcen zuzugreifen. Das Anzeigen Ihrer Proxy-Einstellungen vor der Ausführung von netzwerkabhängigen Befehlen hilft Ihnen, schnell Konnektivitätsprobleme zu erkennen und zu beheben.</p>

<h2 id="das-skript">Das Skript</h2>

<p>Dieses Skript nutzt die <code class="language-plaintext highlighter-rouge">preexec</code>-Funktion von Zsh, um zu überprüfen, ob der bevorstehende Befehl netzwerkabhängig ist. Wenn dies der Fall ist und Proxy-Umgebungsvariablen gesetzt sind, werden die aktuellen Proxy-Einstellungen angezeigt.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Funktion zum Überprüfen und Anzeigen der Proxy-Einstellungen vor bestimmten Befehlen</span>
preexec<span class="o">()</span> <span class="o">{</span>
    <span class="c"># Netzwerkabhängige Befehle definieren</span>
    <span class="nb">local </span><span class="nv">network_commands</span><span class="o">=(</span>
        <span class="s2">"gpa"</span>
        <span class="s2">"git"</span>
        <span class="s2">"ssh"</span>
        <span class="s2">"scp"</span>
        <span class="s2">"sftp"</span>
        <span class="s2">"rsync"</span>
        <span class="s2">"curl"</span>
        <span class="s2">"wget"</span>
        <span class="s2">"apt"</span>
        <span class="s2">"yum"</span>
        <span class="s2">"dnf"</span>
        <span class="s2">"npm"</span>
        <span class="s2">"yarn"</span>
        <span class="s2">"pip"</span>
        <span class="s2">"pip3"</span>
        <span class="s2">"gem"</span>
        <span class="s2">"cargo"</span>
        <span class="s2">"docker"</span>
        <span class="s2">"kubectl"</span>
        <span class="s2">"ping"</span>
        <span class="s2">"traceroute"</span>
        <span class="s2">"netstat"</span>
        <span class="s2">"ss"</span>
        <span class="s2">"ip"</span>
        <span class="s2">"ifconfig"</span>
        <span class="s2">"dig"</span>
        <span class="s2">"nslookup"</span>
        <span class="s2">"nmap"</span>
        <span class="s2">"telnet"</span>
        <span class="s2">"ftp"</span>
        <span class="s2">"nc"</span>
        <span class="s2">"tcpdump"</span>
        <span class="s2">"adb"</span>
        <span class="s2">"bundle"</span>
        <span class="s2">"brew"</span>
        <span class="s2">"cpanm"</span>
        <span class="s2">"bundle exec jekyll"</span>
        <span class="s2">"make"</span>
        <span class="c"># Weitere Befehle nach Bedarf hinzufügen</span>
    <span class="o">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Extrahiere das erste Wort (Befehl) aus der Befehlszeile
local cmd
cmd=$(echo "$1" | awk '{print $1}')

# Funktion zur Anzeige von Proxy-Variablen
display_proxy() {
    echo -e "\n🚀 Erkannte Proxy-Einstellungen:"

    [ -n "$HTTP_PROXY" ] &amp;&amp; echo "   - HTTP_PROXY: $HTTP_PROXY"
    [ -n "$http_proxy" ] &amp;&amp; echo "   - http_proxy: $http_proxy"
    [ -n "$HTTPS_PROXY" ] &amp;&amp; echo "   - HTTPS_PROXY: $HTTPS_PROXY"
    [ -n "$https_proxy" ] &amp;&amp; echo "   - https_proxy: $https_proxy"
    [ -n "$ALL_PROXY" ] &amp;&amp; echo "   - ALL_PROXY: $ALL_PROXY"
    [ -n "$all_proxy" ] &amp;&amp; echo "   - all_proxy: $all_proxy"
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">""</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Überprüfen, ob der Befehl netzwerkabhängig ist
for network_cmd in "${network_commands[@]}"; do
    if [[ "$1" == "$network_cmd"* ]]; then
        if [ -n "$HTTP_PROXY" ] || [ -n "$http_proxy" ] || \
           [ -n "$HTTPS_PROXY" ] || [ -n "$https_proxy" ] || \
           [ -n "$ALL_PROXY" ] || [ -n "$all_proxy" ]; then
            
            display_proxy
        fi
        break
    fi
done } ```
</code></pre></div></div>

<h2 id="einrichten-des-skripts-in-zsh">Einrichten des Skripts in Zsh</h2>

<h3 id="1-öffnen-sie-ihre-zshrc-datei">1. Öffnen Sie Ihre <code class="language-plaintext highlighter-rouge">.zshrc</code>-Datei</h3>

<p>Verwenden Sie Ihren bevorzugten Texteditor, um die Konfigurationsdatei <code class="language-plaintext highlighter-rouge">.zshrc</code> zu öffnen. Zum Beispiel:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.zshrc
</code></pre></div></div>

<h3 id="2-fügen-sie-die-preexec-funktion-hinzu">2. Fügen Sie die <code class="language-plaintext highlighter-rouge">preexec</code>-Funktion hinzu</h3>

<p>Fügen Sie das obige Skript am Ende der Datei ein.</p>

<h3 id="3-speichern-und-schließen">3. Speichern und Schließen</h3>

<p>Drücken Sie <code class="language-plaintext highlighter-rouge">STRG + O</code>, um zu speichern, und <code class="language-plaintext highlighter-rouge">STRG + X</code>, um zu beenden.</p>

<h3 id="4-änderungen-anwenden">4. Änderungen anwenden</h3>

<p>Lade deine <code class="language-plaintext highlighter-rouge">.zshrc</code> neu, um die neue Konfiguration sofort zu übernehmen:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.zshrc
</code></pre></div></div>

<h2 id="testen-des-setups">Testen des Setups</h2>

<h3 id="1-mit-aktiviertem-proxy">1. Mit aktiviertem Proxy</h3>

<p>Setze eine Proxy-Variable temporär und führe einen netzwerkabhängigen Befehl mit <code class="language-plaintext highlighter-rouge">pip</code> aus:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">"http://127.0.0.1:7890"</span>
pip <span class="nb">install </span>selenium beautifulsoup4 urllib3
</code></pre></div></div>

<p>Erwartete Ausgabe:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(Die Code-Blöcke werden nicht übersetzt, da sie in der Regel in der Originalsprache belassen werden sollten, um die Integrität des Codes zu bewahren.)

🚀 Proxy-Einstellungen erkannt:
   - HTTP_PROXY: http://127.0.0.1:7890
   - http_proxy: 127.0.0.1:7890
   - HTTPS_PROXY: 127.0.0.1:7890
   - https_proxy: 127.0.0.1:7890
   - ALL_PROXY: 127.0.0.1:7890
   - all_proxy: 127.0.0.1:7890

Sammeln von Selenium
  Herunterladen von selenium-4.x.x-py2.py3-none-any.whl (xxx kB)
Sammeln von BeautifulSoup4
  Herunterladen von beautifulsoup4-4.x.x-py3-none-any.whl (xxx kB)
Sammeln von urllib3
  Herunterladen von urllib3-1.x.x-py2.py3-none-any.whl (xxx kB)
...
</code></pre></div></div>

<h3 id="2-ohne-aktivierten-proxy">2. Ohne aktivierten Proxy</h3>

<p>Heben Sie die Proxy-Variable auf und führen Sie denselben <code class="language-plaintext highlighter-rouge">pip</code>-Befehl aus:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">unset </span>HTTP_PROXY
pip <span class="nb">install </span>selenium beautifulsoup4 urllib3
</code></pre></div></div>

<p><em>Hinweis: Der obige Code bleibt auf Englisch, da es sich um Befehle handelt, die in der Regel nicht übersetzt werden.</em></p>

<p>Erwartete Ausgabe:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Collecting selenium
  Downloading selenium-4.x.x-py2.py3-none-any.whl (xxx kB)
Collecting beautifulsoup4
  Downloading beautifulsoup4-4.x.x-py3-none-any.whl (xxx kB)
Collecting urllib3
  Downloading urllib3-1.x.x-py2.py3-none-any.whl (xxx kB)
...
</code></pre></div></div>

<p><em>(Es sollte keine Proxy-Benachrichtigung erscheinen.)</em></p>

<h3 id="3-nicht-netzwerk-befehl">3. Nicht-Netzwerk-Befehl</h3>

<p>Führe einen lokalen Befehl wie <code class="language-plaintext highlighter-rouge">ls</code> aus:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span>
</code></pre></div></div>

<p>Erwartete Ausgabe:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Liste der Dateien und Verzeichnisse]
</code></pre></div></div>

<p><em>(Es sollte keine Proxy-Benachrichtigung erscheinen.)</em></p>

<h2 id="anpassung">Anpassung</h2>

<ul>
  <li>
    <p>Erweitern Sie <code class="language-plaintext highlighter-rouge">network_commands</code>: Fügen Sie alle zusätzlichen netzwerkabhängigen Befehle zum <code class="language-plaintext highlighter-rouge">network_commands</code>-Array hinzu.</p>
  </li>
  <li>
    <p>Aliase verarbeiten: Stellen Sie sicher, dass alle Aliase für netzwerkabhängige Befehle in der Liste <code class="language-plaintext highlighter-rouge">network_commands</code> enthalten sind.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">gpa</span><span class="o">=</span><span class="s1">'git push all'</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>Fügen Sie <code class="language-plaintext highlighter-rouge">"gpa"</code> zum <code class="language-plaintext highlighter-rouge">network_commands</code>-Array hinzu, um Proxy-Benachrichtigungen auszulösen, wenn Sie diesen Alias verwenden.</p>

<ul>
  <li>Sichtbarkeit mit Farben verbessern:</li>
</ul>

<p>Für eine bessere Sichtbarkeit, insbesondere in überfüllten Terminals, können Sie den Proxy-Benachrichtigungen Farbe hinzufügen:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c"># Füge Farbcodes am Anfang deiner .zshrc hinzu</span>
  <span class="nv">GREEN</span><span class="o">=</span><span class="s1">'\033[0;32m'</span>
  <span class="nv">NC</span><span class="o">=</span><span class="s1">'\033[0m'</span> <span class="c"># Keine Farbe</span>
</code></pre></div></div>

<p>display_proxy() {
      echo -e “\n${GREEN}🚀 Proxy-Einstellungen erkannt:${NC}”</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$HTTP_PROXY</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"   - HTTP_PROXY: </span><span class="nv">$HTTP_PROXY</span><span class="s2">"</span>
      <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$http_proxy</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"   - http_proxy: </span><span class="nv">$http_proxy</span><span class="s2">"</span>
      <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$HTTPS_PROXY</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"   - HTTPS_PROXY: </span><span class="nv">$HTTPS_PROXY</span><span class="s2">"</span>
      <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$https_proxy</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"   - https_proxy: </span><span class="nv">$https_proxy</span><span class="s2">"</span>
      <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$ALL_PROXY</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"   - ALL_PROXY: </span><span class="nv">$ALL_PROXY</span><span class="s2">"</span>
      <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$all_proxy</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"   - all_proxy: </span><span class="nv">$all_proxy</span><span class="s2">"</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  echo ""   }   ```
</code></pre></div></div>

<h2 id="fazit">Fazit</h2>

<p>Die Verwaltung von Proxy-Einstellungen ist entscheidend für einen reibungslosen Softwareentwicklungsprozess in eingeschränkten Netzwerkumgebungen. Dieses Zsh-Skript stellt sicher, dass Sie stets über Ihre Proxy-Konfigurationen informiert sind, wenn Sie Befehle ausführen, die Netzwerkzugriff erfordern. Dies verbessert Ihren Workflow und die Effizienz bei der Fehlerbehebung.</p>

<p>Viel Spaß beim Programmieren! 🚀</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-de" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
