<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Construire des requêtes SQL avec l'IA</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Construire des requêtes SQL avec l’IA | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Construire des requêtes SQL avec l’IA" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="fr" />
<meta name="description" content="Schéma de base de données (PostgreSQL): CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(255) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, first_name VARCHAR(100), last_name VARCHAR(100), date_of_birth DATE, gender VARCHAR(10), phone_number VARCHAR(20), address TEXT, city VARCHAR(100), state VARCHAR(100), country VARCHAR(100), zip_code VARCHAR(20), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE, last_login TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT TRUE, role VARCHAR(50), profile_picture_url VARCHAR(255), bio TEXT, failed_login_attempts INTEGER DEFAULT 0, account_balance NUMERIC(10, 2) DEFAULT 0.00 );" />
<meta property="og:description" content="Schéma de base de données (PostgreSQL): CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(255) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, first_name VARCHAR(100), last_name VARCHAR(100), date_of_birth DATE, gender VARCHAR(10), phone_number VARCHAR(20), address TEXT, city VARCHAR(100), state VARCHAR(100), country VARCHAR(100), zip_code VARCHAR(20), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE, last_login TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT TRUE, role VARCHAR(50), profile_picture_url VARCHAR(255), bio TEXT, failed_login_attempts INTEGER DEFAULT 0, account_balance NUMERIC(10, 2) DEFAULT 0.00 );" />
<link rel="canonical" href="https://lzwjava.github.io/ai-sql-fr" />
<meta property="og:url" content="https://lzwjava.github.io/ai-sql-fr" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-07-14T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Construire des requêtes SQL avec l’IA" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-07-14T00:00:00+08:00","datePublished":"2025-07-14T00:00:00+08:00","description":"Schéma de base de données (PostgreSQL): CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(255) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, first_name VARCHAR(100), last_name VARCHAR(100), date_of_birth DATE, gender VARCHAR(10), phone_number VARCHAR(20), address TEXT, city VARCHAR(100), state VARCHAR(100), country VARCHAR(100), zip_code VARCHAR(20), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE, last_login TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT TRUE, role VARCHAR(50), profile_picture_url VARCHAR(255), bio TEXT, failed_login_attempts INTEGER DEFAULT 0, account_balance NUMERIC(10, 2) DEFAULT 0.00 );","headline":"Construire des requêtes SQL avec l’IA","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/ai-sql-fr"},"url":"https://lzwjava.github.io/ai-sql-fr"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=8e2a3e4cc7e2db978b0a6f64f580accfdf72ff0f">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=8e2a3e4cc7e2db978b0a6f64f580accfdf72ff0f" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Construire des requêtes SQL avec l'IA | Original, traduit par l'IA
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/fr/2025-07-14-ai-sql-fr.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsfr2025-07-14-ai-sql-fr.md</span> -->
      

      <!-- <span>2025-07-14-ai-sql-fr.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.07</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/ai-sql-en" >English</option>
        <option value="/ai-sql-zh" >中文</option>
        <option value="/ai-sql-ja" >日本語</option>
        <option value="/ai-sql-es" >Español</option>
        <option value="/ai-sql-hi" >हिंदी</option>
        <option value="/ai-sql-fr" selected>Français</option>
        <option value="/ai-sql-de" >Deutsch</option>
        <option value="/ai-sql-ar" >العربية</option>
        <option value="/ai-sql-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p><strong>Schéma de base de données (PostgreSQL):</strong></p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">username</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">password_hash</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">first_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">last_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">date_of_birth</span> <span class="nb">DATE</span><span class="p">,</span>
    <span class="n">gender</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">phone_number</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">address</span> <span class="nb">TEXT</span><span class="p">,</span>
    <span class="n">city</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="k">state</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">country</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">zip_code</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">last_login</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">is_active</span> <span class="nb">BOOLEAN</span> <span class="k">DEFAULT</span> <span class="k">TRUE</span><span class="p">,</span>
    <span class="k">role</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
    <span class="n">profile_picture_url</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">bio</span> <span class="nb">TEXT</span><span class="p">,</span>
    <span class="n">failed_login_attempts</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">account_balance</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span>
<span class="p">);</span>
</code></pre></div></div>

<hr />

<p>ci-dessus est la base de données postgre, ci-dessous est la définition de la table. voici les instructions de requête en langage naturel.</p>

<p>je veux obtenir certains utilisateurs dont le prénom est andy, créés_ à peu près le jour du mois dernier, et qui ont 20 ans en 2025, et dont le dernier_connexion ressemble à la semaine dernière, donnez-moi le sql pour interroger de tels utilisateurs</p>

<hr />

<p><strong>Requête SQL générée :</strong></p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">users</span>
<span class="k">WHERE</span> <span class="n">first_name</span> <span class="k">ILIKE</span> <span class="s1">'andy'</span>
  <span class="k">AND</span> <span class="k">CAST</span><span class="p">(</span><span class="n">created_at</span> <span class="k">AS</span> <span class="nb">DATE</span><span class="p">)</span> <span class="k">BETWEEN</span>
      <span class="p">(</span><span class="k">CURRENT_DATE</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'1 MONTH'</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'1 DAY'</span><span class="p">)</span>
      <span class="k">AND</span>
      <span class="p">(</span><span class="k">CURRENT_DATE</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'1 MONTH'</span> <span class="o">+</span> <span class="n">INTERVAL</span> <span class="s1">'1 DAY'</span><span class="p">)</span>
  <span class="k">AND</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="nb">YEAR</span> <span class="k">FROM</span> <span class="n">AGE</span><span class="p">(</span><span class="n">date_of_birth</span><span class="p">))</span> <span class="o">=</span> <span class="mi">20</span>
  <span class="k">AND</span> <span class="n">last_login</span> <span class="o">&gt;=</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'7 DAYS'</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<p>Ci-dessous se trouve une définition de table PostgreSQL pour une table <code class="language-plaintext highlighter-rouge">conversations</code> qui pourrait être utilisée pour stocker les interactions des utilisateurs avec un système d’IA comme Grok. La table est conçue pour suivre les conversations, y compris l’utilisateur impliqué, le contenu de la conversation, les horodatages et les métadonnées pertinentes.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">conversations</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">user_id</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">title</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">conversation_type</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="s1">'chat'</span><span class="p">,</span>
    <span class="n">started_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">ended_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">status</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="s1">'active'</span><span class="p">,</span>
    <span class="n">message_count</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">last_message_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">is_archived</span> <span class="nb">BOOLEAN</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
    <span class="n">ai_model_version</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">total_tokens_used</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">users</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="explication-">Explication :</h3>
<ul>
  <li><strong>id</strong> : Identifiant unique pour chaque conversation.</li>
  <li><strong>user_id</strong> : Référence la table <code class="language-plaintext highlighter-rouge">users</code> pour lier la conversation à un utilisateur spécifique.</li>
  <li><strong>title</strong> : Titre optionnel pour la conversation (par exemple, défini par l’utilisateur ou un résumé généré automatiquement).</li>
  <li><strong>conversation_type</strong> : Indique le type de conversation (par exemple, ‘chat’, ‘query’, ‘voice’).</li>
  <li><strong>started_at</strong> : Horodatage de début de la conversation.</li>
  <li><strong>ended_at</strong> : Horodatage de fin de la conversation (nullable si en cours).</li>
  <li><strong>status</strong> : Suivi de l’état de la conversation (par exemple, ‘active’, ‘completed’, ‘paused’).</li>
  <li><strong>message_count</strong> : Suivi du nombre de messages échangés dans la conversation.</li>
  <li><strong>last_message_at</strong> : Horodatage du dernier message.</li>
  <li><strong>is_archived</strong> : Booléen pour indiquer si la conversation est archivée.</li>
  <li><strong>ai_model_version</strong> : Stocke la version du modèle d’IA utilisé (par exemple, ‘Grok 3’).</li>
  <li><strong>total_tokens_used</strong> : Suivi de l’utilisation des tokens pour la conversation (utile pour la facturation ou l’analyse API).</li>
  <li><strong>created_at</strong> et <strong>updated_at</strong> : Horodatages de création et de dernière mise à jour de l’enregistrement de la conversation.</li>
  <li><strong>FOREIGN KEY</strong> : Assure l’intégrité référentielle avec la table <code class="language-plaintext highlighter-rouge">users</code>, avec <code class="language-plaintext highlighter-rouge">ON DELETE CASCADE</code> pour supprimer les conversations si l’utilisateur associé est supprimé.</li>
</ul>

<p>Cette table est conçue pour être flexible et peut être étendue en fonction des besoins spécifiques, comme le stockage des messages individuels dans une table <code class="language-plaintext highlighter-rouge">messages</code> séparée ou l’ajout de champs pour l’analyse de sentiment ou les balises de conversation. Faites-moi savoir si vous avez besoin d’une table connexe (par exemple, pour les messages) ou d’une requête pour interagir avec cette table !</p>

<hr />

<p>Pour permettre à un frontend où les utilisateurs peuvent interroger leurs propres conversations en langage naturel (par exemple, “donnez-moi mes 5 dernières conversations” ou “conversations dont le titre contient le mot java”), vous devez vous assurer que la requête SQL restreint les résultats aux conversations de l’utilisateur authentifié. Cela implique d’incorporer l’identité de l’utilisateur (par exemple, <code class="language-plaintext highlighter-rouge">user_id</code>) dans la requête et de traduire l’entrée en langage naturel en conditions SQL. Ci-dessous se trouvent des exemples de requêtes et de requêtes SQL correspondantes pour la table <code class="language-plaintext highlighter-rouge">conversations</code>, en veillant à ce que les utilisateurs ne puissent accéder qu’à leurs propres données.</p>

<h3 id="considérations-clés">Considérations clés</h3>
<ul>
  <li><strong>Authentification de l’utilisateur</strong> : Le frontend doit transmettre l’ID de l’utilisateur authentifié (<code class="language-plaintext highlighter-rouge">user_id</code>) au backend pour filtrer les conversations.</li>
  <li><strong>Analyse du langage naturel</strong> : L’entrée en langage naturel est analysée pour identifier les conditions clés (par exemple, “5 dernières” ou “titre contient le mot java”).</li>
  <li><strong>Sécurité</strong> : Toujours filtrer par <code class="language-plaintext highlighter-rouge">user_id</code> pour empêcher les utilisateurs d’accéder aux conversations des autres.</li>
  <li><strong>Référence de table</strong> : Utilisation de la table <code class="language-plaintext highlighter-rouge">conversations</code> définie ci-dessus.</li>
</ul>

<h3 id="exemples-de-requêtes-en-langage-naturel-et-de-requêtes-sql">Exemples de requêtes en langage naturel et de requêtes SQL</h3>

<h4 id="requête-1--donnez-moi-mes-5-dernières-conversations">Requête 1 : “Donnez-moi mes 5 dernières conversations”</h4>
<p><strong>Exigences analysées</strong> :</p>
<ul>
  <li>Filtrer les conversations par l’ID de l’utilisateur authentifié (<code class="language-plaintext highlighter-rouge">user_id</code>).</li>
  <li>Trier par <code class="language-plaintext highlighter-rouge">started_at</code> (ou <code class="language-plaintext highlighter-rouge">last_message_at</code> pour la récence) par ordre décroissant.</li>
  <li>Limiter à 5 résultats.</li>
</ul>

<p><strong>Requête SQL</strong> :</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">authenticated_user_id</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">started_at</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">:authenticated_user_id</code> est un espace réservé pour l’ID de l’utilisateur connecté, transmis de manière sécurisée depuis le frontend/backend.</li>
  <li><code class="language-plaintext highlighter-rouge">started_at DESC</code> garantit que les conversations les plus récentes sont retournées.</li>
  <li><code class="language-plaintext highlighter-rouge">LIMIT 5</code> limite la sortie à 5 conversations.</li>
</ul>

<h4 id="requête-2--conversations-dont-le-titre-contient-le-mot-java">Requête 2 : “Conversations dont le titre contient le mot java”</h4>
<p><strong>Exigences analysées</strong> :</p>
<ul>
  <li>Filtrer les conversations par l’ID de l’utilisateur authentifié (<code class="language-plaintext highlighter-rouge">user_id</code>).</li>
  <li>Rechercher les conversations dont le <code class="language-plaintext highlighter-rouge">title</code> contient “java” (insensible à la casse).</li>
  <li>Utiliser <code class="language-plaintext highlighter-rouge">ILIKE</code> pour une correspondance partielle et insensible à la casse dans PostgreSQL.</li>
</ul>

<p><strong>Requête SQL</strong> :</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">authenticated_user_id</span>
  <span class="k">AND</span> <span class="n">title</span> <span class="k">ILIKE</span> <span class="s1">'%java%'</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">:authenticated_user_id</code> garantit que seules les conversations de l’utilisateur sont interrogées.</li>
  <li><code class="language-plaintext highlighter-rouge">ILIKE '%java%'</code> correspond aux titres contenant “java” (par exemple, “Conseils Java”, “À propos de la programmation Java”).</li>
</ul>

<h3 id="notes-dimplémentation-pour-le-frontend">Notes d’implémentation pour le frontend</h3>
<ol>
  <li><strong>Authentification de l’utilisateur</strong> :
    <ul>
      <li>Le frontend doit envoyer l’ID de l’utilisateur authentifié (par exemple, à partir d’un jeton JWT ou d’une session) à l’API backend.</li>
      <li>Le backend doit valider le <code class="language-plaintext highlighter-rouge">user_id</code> et l’utiliser dans la clause <code class="language-plaintext highlighter-rouge">WHERE</code> pour filtrer les résultats.</li>
    </ul>
  </li>
  <li><strong>Traitement du langage naturel</strong> :
    <ul>
      <li>Utiliser un analyseur basé sur des règles simples ou un modèle d’IA (comme Grok) pour interpréter la requête en langage naturel et extraire :
        <ul>
          <li><strong>Intention</strong> : Lister les conversations.</li>
          <li><strong>Filtres</strong> : Mots-clés (par exemple, “java”), tri (par exemple, “dernières”), ou limites (par exemple, “5”).</li>
        </ul>
      </li>
      <li>Par exemple, mapper “5 dernières” à <code class="language-plaintext highlighter-rouge">ORDER BY started_at DESC LIMIT 5</code> et “titre contient le mot java” à <code class="language-plaintext highlighter-rouge">title ILIKE '%java%'</code>.</li>
    </ul>
  </li>
  <li><strong>Conception de l’API</strong> :
    <ul>
      <li>Créer un point de terminaison (par exemple, <code class="language-plaintext highlighter-rouge">/api/conversations</code>) qui accepte :
        <ul>
          <li><code class="language-plaintext highlighter-rouge">user_id</code> : À partir de la session authentifiée.</li>
          <li><code class="language-plaintext highlighter-rouge">query</code> : L’entrée en langage naturel ou des paramètres structurés (par exemple, <code class="language-plaintext highlighter-rouge">{ filter: "title contains java" }</code>).</li>
        </ul>
      </li>
      <li>Le backend traduit la requête en SQL, en veillant à ce que <code class="language-plaintext highlighter-rouge">user_id</code> soit toujours inclus dans la clause <code class="language-plaintext highlighter-rouge">WHERE</code>.</li>
    </ul>
  </li>
  <li><strong>Sécurité</strong> :
    <ul>
      <li>Ne jamais permettre aux utilisateurs d’entrer directement du SQL ou de modifier le filtre <code class="language-plaintext highlighter-rouge">user_id</code>.</li>
      <li>Utiliser des requêtes paramétrées (par exemple, <code class="language-plaintext highlighter-rouge">:authenticated_user_id</code>) pour éviter les injections SQL.</li>
      <li>Valider les entrées pour éviter les motifs malveillants dans les recherches <code class="language-plaintext highlighter-rouge">ILIKE</code>.</li>
    </ul>
  </li>
  <li><strong>Affichage du frontend</strong> :
    <ul>
      <li>Retourner des champs comme <code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">title</code>, <code class="language-plaintext highlighter-rouge">started_at</code>, <code class="language-plaintext highlighter-rouge">last_message_at</code> et <code class="language-plaintext highlighter-rouge">status</code> pour afficher une liste de conversations.</li>
      <li>Permettre des options de tri ou de filtrage dans l’interface utilisateur (par exemple, des menus déroulants pour “dernières” ou une entrée de texte pour la recherche de titre).</li>
    </ul>
  </li>
</ol>

<h3 id="exemple-de-flux-de-travail">Exemple de flux de travail</h3>
<ol>
  <li>L’utilisateur se connecte, et le frontend récupère son <code class="language-plaintext highlighter-rouge">user_id</code> (par exemple, <code class="language-plaintext highlighter-rouge">123</code>).</li>
  <li>L’utilisateur tape “donnez-moi mes 5 dernières conversations” dans une barre de recherche.</li>
  <li>Le frontend envoie une requête au backend : <code class="language-plaintext highlighter-rouge">/api/conversations?user_id=123&amp;query=5 dernières</code>.</li>
  <li>Le backend analyse la requête, génère le SQL :
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="mi">123</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">started_at</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Le backend retourne les résultats en JSON, et le frontend affiche les conversations.</li>
</ol>

<h3 id="notes-supplémentaires">Notes supplémentaires</h3>
<ul>
  <li>Si <code class="language-plaintext highlighter-rouge">title</code> est nullable, ajoutez <code class="language-plaintext highlighter-rouge">AND title IS NOT NULL</code> à la deuxième requête pour éviter de correspondre aux titres null.</li>
  <li>Pour des requêtes plus complexes (par exemple, “conversations sur java de la semaine dernière”), combinez les conditions :
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">authenticated_user_id</span>
  <span class="k">AND</span> <span class="n">title</span> <span class="k">ILIKE</span> <span class="s1">'%java%'</span>
  <span class="k">AND</span> <span class="n">started_at</span> <span class="o">&gt;=</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'7 DAYS'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Si vous avez besoin d’un analyseur de langage naturel plus avancé, envisagez d’intégrer un modèle d’IA (par exemple, Grok via l’API xAI) pour mapper des requêtes complexes en SQL. Pour les détails de l’API, visitez <a href="https://x.ai/api">xAI API</a>.</li>
</ul>

<p>Faites-moi savoir si vous avez besoin d’aide pour le code frontend, la configuration de l’API backend ou des exemples de requêtes supplémentaires !</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-fr" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
