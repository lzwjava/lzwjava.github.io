<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Optimisation des IP Cloud, des Interfaces Réseau et du WiFi</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Optimisation des IP Cloud, des Interfaces Réseau et du WiFi | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Optimisation des IP Cloud, des Interfaces Réseau et du WiFi" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="fr" />
<meta name="description" content="Table des matières" />
<meta property="og:description" content="Table des matières" />
<link rel="canonical" href="https://lzwjava.github.io/network-fr" />
<meta property="og:url" content="https://lzwjava.github.io/network-fr" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-02-08T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Optimisation des IP Cloud, des Interfaces Réseau et du WiFi" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-02-08T00:00:00+08:00","datePublished":"2025-02-08T00:00:00+08:00","description":"Table des matières","headline":"Optimisation des IP Cloud, des Interfaces Réseau et du WiFi","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/network-fr"},"url":"https://lzwjava.github.io/network-fr"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=a95520d67c5f8ceeaff9e18b8f2af0d3c897a672">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=a95520d67c5f8ceeaff9e18b8f2af0d3c897a672" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Optimisation des IP Cloud, des Interfaces Réseau et du WiFi | Original, traduit par l'IA
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/fr/2025-02-08-network-fr.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsfr2025-02-08-network-fr.md</span> -->
      

      <!-- <span>2025-02-08-network-fr.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.02</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/network-en" >English</option>
        <option value="/network-zh" >中文</option>
        <option value="/network-ja" >日本語</option>
        <option value="/network-es" >Español</option>
        <option value="/network-hi" >हिंदी</option>
        <option value="/network-fr" selected>Français</option>
        <option value="/network-de" >Deutsch</option>
        <option value="/network-ar" >العربية</option>
        <option value="/network-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <h3 id="table-des-matières">Table des matières</h3>

<ol>
  <li><a href="#ip-flottantes-dans-hetzner-cloud">IP flottantes dans Hetzner Cloud</a>
    <ul>
      <li>Commandes de configuration IP</li>
      <li>Configuration Netplan</li>
      <li>Fichiers de configuration réseau</li>
    </ul>
  </li>
  <li><a href="#gestion-des-interfaces-réseau">Gestion des interfaces réseau</a>
    <ul>
      <li>Suppression des interfaces TUN</li>
      <li>Surveillance de l’état des interfaces</li>
      <li>Dépannage réseau</li>
    </ul>
  </li>
  <li><a href="#scanner-dip-lan">Scanner d’IP LAN</a>
    <ul>
      <li>Script Python de balayage réseau</li>
      <li>Découverte d’hôtes multithread</li>
      <li>Capacités de balayage de ports</li>
      <li>Identification des appareils sur les réseaux locaux</li>
    </ul>
  </li>
  <li><a href="#contournement-des-ip-locales">Contournement des IP locales</a>
    <ul>
      <li>Configuration du proxy pour les réseaux locaux</li>
      <li>Calculs de masques de sous-réseau</li>
      <li>Planification des plages réseau</li>
    </ul>
  </li>
  <li><a href="#connexion-ssh-avec-adresse-ipv6">Connexion SSH avec adresse IPv6</a>
    <ul>
      <li>Configuration SSH IPv6</li>
      <li>Gestion du fichier de configuration SSH</li>
      <li>Configuration de la commande Proxy pour différents types d’adresses</li>
      <li>Optimisation des performances</li>
    </ul>
  </li>
  <li><a href="#amélioration-de-la-vitesse-wifi">Amélioration de la vitesse WiFi</a>
    <ul>
      <li>Performances des anciens et nouveaux modems</li>
      <li>Configurations de mise en réseau</li>
      <li>Modes pont filaire et sans fil</li>
      <li>Dépannage des goulots d’étranglement réseau</li>
    </ul>
  </li>
  <li><a href="#réinitialisation-dopenwrt">Réinitialisation d’OpenWrt</a>
    <ul>
      <li>Méthodes de réinitialisation via l’interface web</li>
      <li>Procédures de réinitialisation en ligne de commande</li>
      <li>Restauration des paramètres d’usine</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="ip-flottantes-dans-hetzner-cloud">IP flottantes dans Hetzner Cloud</h2>

<h3 id="ip">IP</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ip addr add 78.47.144.0 dev eth0
</code></pre></div></div>

<h3 id="netplan">Netplan</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch</span> /etc/netplan/60-floating-ip.yaml
nano /etc/netplan/60-floating-ip.yaml
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">network</span><span class="pi">:</span>
   <span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
   <span class="na">renderer</span><span class="pi">:</span> <span class="s">networkd</span>
   <span class="na">ethernets</span><span class="pi">:</span>
     <span class="na">eth0</span><span class="pi">:</span>
       <span class="na">addresses</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">78.47.144.0/32</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>netplan apply
</code></pre></div></div>

<hr />

<h2 id="gestion-des-interfaces-réseau">Gestion des interfaces réseau</h2>

<p>Supprimez l’interface <code class="language-plaintext highlighter-rouge">tun</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ipconfig

outline-tun0: <span class="nv">flags</span><span class="o">=</span>4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500
        inet 10.0.85.1  netmask 255.255.255.255  destination 10.0.85.1
        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  <span class="o">(</span>UNSPEC<span class="o">)</span>
        RX packets 208  bytes 8712 <span class="o">(</span>8.7 KB<span class="o">)</span>
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 385  bytes 23322 <span class="o">(</span>23.3 KB<span class="o">)</span>
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link </span>delete outline-tun0
</code></pre></div></div>

<hr />

<h2 id="scanner-dip-lan">Scanner d’IP LAN</h2>

<p>Ce script Python analyse un réseau local pour détecter les adresses IP actives. Il utilise la commande <code class="language-plaintext highlighter-rouge">ping</code> pour vérifier si un hôte est accessible et emploie le multithreading pour accélérer le processus de balayage. Un sémaphore limite le nombre de threads simultanés pour éviter de surcharger le système. Le script prend une adresse réseau (par exemple, “192.168.1.0/24”) en entrée et affiche si chaque adresse IP du réseau est active ou inactive.</p>

<p>Ce script aide à identifier les appareils sur le réseau, comme un routeur TP-LINK mesh fonctionnant en mode pont filaire, en scannant les adresses IP actives.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">ipaddress</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">MAX_THREADS</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># Nombre maximum de threads à utiliser
</span>
<span class="k">def</span> <span class="nf">is_host_up</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    Vérifie si un hôte est actif en utilisant ping ou telnet.
    Si un port est spécifié, utilise telnet pour vérifier si le port est ouvert.
    Sinon, utilise ping.
    Retourne True si l'hôte est actif, False sinon.
    """</span>
    <span class="k">if</span> <span class="n">port</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="p">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
            <span class="n">sock</span><span class="p">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">sock</span><span class="p">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="n">socket</span><span class="p">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">sock</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># -c 1: Envoyer un seul paquet
</span>            <span class="c1"># -W 1: Attendre 1 seconde pour une réponse
</span>            <span class="n">subprocess</span><span class="p">.</span><span class="n">check_output</span><span class="p">([</span><span class="s">"ping"</span><span class="p">,</span> <span class="s">"-c"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"-W"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="n">host</span><span class="p">],</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">scan_ip</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">up_ips</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    Analyse une seule adresse IP et affiche son statut.
    """</span>
    <span class="k">if</span> <span class="n">is_host_up</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">ip_str</span><span class="si">}</span><span class="s"> est actif"</span><span class="p">)</span>
        <span class="n">up_ips</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip_str</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">ip_str</span><span class="si">}</span><span class="s"> est inactif"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">scan_network</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s">"""
    Analyse un réseau pour détecter les hôtes actifs en utilisant des threads,
    en limitant le nombre de threads simultanés.
    """</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Analyse du réseau : </span><span class="si">{</span><span class="n">network</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">semaphore</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="n">MAX_THREADS</span><span class="p">)</span>  <span class="c1"># Limiter le nombre de threads simultanés
</span>    <span class="n">up_ips</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">scan_ip_with_semaphore</span><span class="p">(</span><span class="n">ip_str</span><span class="p">):</span>
        <span class="n">semaphore</span><span class="p">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">scan_ip</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,</span> <span class="n">up_ips</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">semaphore</span><span class="p">.</span><span class="n">release</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">ipaddress</span><span class="p">.</span><span class="n">IPv4Network</span><span class="p">(</span><span class="n">network</span><span class="p">):</span>
        <span class="n">ip_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">scan_ip_with_semaphore</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ip_str</span><span class="p">,))</span>
        <span class="n">threads</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">thread</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
        <span class="n">thread</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">up_ips</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">"Analyser un réseau pour détecter les hôtes actifs."</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"network"</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s">'?'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">"192.168.1.0/24"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"Le réseau à analyser (par exemple, 192.168.1.0/24)"</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">"-p"</span><span class="p">,</span> <span class="s">"--port"</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"Le port à vérifier (optionnel)"</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">network_to_scan</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">network</span>
    <span class="n">port_to_scan</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">port</span>

    <span class="n">up_ips</span> <span class="o">=</span> <span class="n">scan_network</span><span class="p">(</span><span class="n">network_to_scan</span><span class="p">,</span> <span class="n">port_to_scan</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">IP actives :"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">up_ips</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="contournement-des-ip-locales">Contournement des IP locales</h2>

<p>Le script identifie les adresses IP actives. Pour garantir une communication réseau correcte, vérifiez que les paramètres du proxy sont configurés pour contourner ces IP locales.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.1,localhost,<span class="k">*</span>.local,timestamp.apple.com,sequoia.apple.com,seed-sequoia.siri.apple.com, 192.168.1.0/16
</code></pre></div></div>

<h2 id="masques-de-sous-réseau">Masques de sous-réseau</h2>

<p>Ma deuxième machine est généralement à l’adresse 192.168.1.16.</p>

<p>La commande suivante fonctionne donc :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python scripts/ip_scan.py 192.168.1.0/27 <span class="nt">-p</span> 22
</code></pre></div></div>

<p>car 32 - 27 = 5, 2^5 = 32, donc il essaiera de <code class="language-plaintext highlighter-rouge">192.168.1.0</code> à <code class="language-plaintext highlighter-rouge">192.168.1.31</code>.</p>

<p>En revanche, cela ne fonctionne pas avec <code class="language-plaintext highlighter-rouge">192.168.1.0/28</code>, car 2^4 = 16, donc il essaiera de <code class="language-plaintext highlighter-rouge">192.168.1.0</code> à <code class="language-plaintext highlighter-rouge">192.168.1.15</code>, ce qui ne couvre pas <code class="language-plaintext highlighter-rouge">192.168.1.16</code>.</p>

<hr />

<h2 id="connexion-ssh-avec-adresse-ipv6">Connexion SSH avec adresse IPv6</h2>

<p>J’essaie de me connecter à une machine dans Hetzner Cloud en utilisant IPv6. <code class="language-plaintext highlighter-rouge">ssh 2a01:4f8:c17:2000::/64</code> ne fonctionne pas, mais <code class="language-plaintext highlighter-rouge">ssh root@2a01:4f8:c17:2000::1</code> fonctionne.</p>

<p>L’adresse IPv6 a été copiée depuis la console Hetzner Cloud.</p>

<p>Le fichier <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> peut être configuré pour appliquer différentes règles de proxy aux adresses IPv4 et IPv6. Cette configuration permet de spécifier une commande proxy pour les adresses IPv4 tout en gérant différemment les adresses IPv6.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
</code></pre></div></div>

<p>Lors de l’exécution de <code class="language-plaintext highlighter-rouge">ssh root@192.168.1.3</code>, la sortie suivante montre le client SSH appliquant les options de configuration du fichier <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debug1: Lecture des données de configuration /Users/lzwjava/.ssh/config
debug1: /Users/lzwjava/.ssh/config ligne 1: Application des options pour 192.168.1.<span class="k">*</span>
debug1: /Users/lzwjava/.ssh/config ligne 5: Application des options pour <span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
debug2: add_identity_file: ignore la clé en double ~/.ssh/id_rsa
debug1: /Users/lzwjava/.ssh/config ligne 10: Application des options pour <span class="k">*</span>
debug2: add_identity_file: ignore la clé en double ~/.ssh/id_rsa
debug1: Lecture des données de configuration /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config ligne 21: include /etc/ssh/ssh_config.d/<span class="k">*</span> n<span class="s1">'a trouvé aucun fichier
debug1: /etc/ssh/ssh_config ligne 54: Application des options pour *
debug2: resolve_canonicalize: le nom d'</span>hôte 192.168.1.3 est une adresse
debug3: UserKnownHostsFile <span class="s1">'~/.ssh/known_hosts'</span> étendu à <span class="s1">'/Users/lzwjava/.ssh/known_hosts'</span>
debug3: UserKnownHostsFile <span class="s1">'~/.ssh/known_hosts2'</span> étendu à <span class="s1">'/Users/lzwjava/.ssh/known_hosts2'</span>
debug1: Le fournisseur d<span class="s1">'authentification $SSH_SK_PROVIDER n'</span>a pas pu être résolu <span class="p">;</span> désactivation
debug3: channel_clear_timeouts: effacement
debug1: Exécution de la commande proxy: <span class="nb">exec </span>corkscrew localhost 7890 192.168.1.3 22
</code></pre></div></div>

<p>La vitesse de la connexion SSH était notablement lente, donc je suis revenu à la configuration plus simple suivante :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
</code></pre></div></div>

<p>Le problème survient lors de l’utilisation d’adresses IPv6 avec la directive <code class="language-plaintext highlighter-rouge">ProxyCommand corkscrew localhost 7890 %h %p</code>, car cette commande proxy ne gère peut-être pas correctement les adresses IPv6.</p>

<p>La configuration ci-dessus ne fonctionne toujours pas. Cependant, celle ci-dessous fonctionne bien.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 192.168.1.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
Host <span class="o">!</span>192.<span class="k">*</span>.<span class="k">*</span>.<span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
    ProxyCommand corkscrew localhost 7890 %h %p
Host <span class="k">*</span>
    UseKeychain <span class="nb">yes
    </span>AddKeysToAgent <span class="nb">yes
    </span>IdentityFile ~/.ssh/id_rsa
</code></pre></div></div>

<hr />

<h2 id="amélioration-de-la-vitesse-wifi">Amélioration de la vitesse WiFi</h2>

<h3 id="problèmes-avec-lancien-modem">Problèmes avec l’ancien modem</h3>

<p>Chez mes parents, le modem est assez ancien, probablement âgé d’environ 10 ans. La configuration réseau initiale était :</p>

<p>modem -&gt; 3m sans fil -&gt; TP-Link AX3000 (mode pont sans fil) -&gt; 2m, un mur, sans fil -&gt; Ordinateur portable</p>

<p>Cela a donné une vitesse de téléchargement faible, avec un résultat de test de vitesse de seulement 10 Mbps.</p>

<p>Une configuration améliorée a impliqué l’utilisation d’une connexion filaire :</p>

<p>modem -&gt; 2m câble -&gt; TP-Link AX3000 (mode pont filaire) -&gt; 4m sans fil, un mur -&gt; Ordinateur portable</p>

<p>Cela a amélioré la vitesse de téléchargement jusqu’à 90 Mbps.</p>

<h3 id="performances-du-nouveau-modem">Performances du nouveau modem</h3>

<p>Chez moi, le modem est neuf, et le routeur TP-Link fonctionne bien en mode pont sans fil. La configuration réseau est :</p>

<p>modem -&gt; 4m sans fil -&gt; TP-Link AX3000 (mode pont sans fil) -&gt; 2m sans fil -&gt; Ordinateur portable</p>

<p>La qualité du réseau est bonne.</p>

<h3 id="conseils-de-dépannage">Conseils de dépannage</h3>

<p>Il n’existe pas de solution unique pour améliorer la vitesse Wi-Fi. Une bonne approche consiste à utiliser un câble pour tester chaque partie de votre réseau afin d’identifier les goulots d’étranglement. Comparez les vitesses lors de l’utilisation d’une connexion filaire par rapport au Wi-Fi. Essayez également de connecter les appareils directement avec un câble pour voir si cela améliore les performances.</p>

<hr />

<h2 id="réinitialisation-dopenwrt">Réinitialisation d’OpenWrt</h2>

<h3 id="réinitialisation-via-linterface-web">Réinitialisation via l’interface web</h3>

<p>Il est recommandé de se connecter au routeur via un câble Ethernet. Après une réinitialisation, le SSID Wi-Fi reviendra à ses paramètres par défaut, ce qui peut ne pas être ce que vous attendez.</p>

<h3 id="réinitialisation-via-la-ligne-de-commande-ssh">Réinitialisation via la ligne de commande (SSH)</h3>

<p>Vous pouvez réinitialiser OpenWrt à ses paramètres par défaut en utilisant l’interface de ligne de commande (SSH). Voici comment faire :</p>

<ol>
  <li>Connectez-vous à votre routeur OpenWrt via SSH.</li>
  <li>
    <p>Exécutez la commande suivante :</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> root@OpenWrt:~# firstboot
 Cela effacera tous les paramètres et supprimera tous les paquets installés. Êtes-vous sûr ? <span class="o">[</span>N/y]
 y
 /dev/ubi0_1 est monté en tant que /overlay, seul l<span class="s1">'effacement des fichiers
 root@OpenWrt:~# reboot
</span></code></pre></div>    </div>
  </li>
  <li>Le routeur redémarrera avec les paramètres par défaut.</li>
</ol>

<p><strong>Explication des commandes :</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">firstboot</code> : Cette commande lance le processus de réinitialisation, effaçant toutes les configurations et les paquets installés.</li>
  <li><code class="language-plaintext highlighter-rouge">reboot</code> : Cette commande redémarre le routeur, appliquant la réinitialisation.</li>
</ul>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-fr" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
