<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Deploying with Pivotal Cloud Foundry</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Deploying with Pivotal Cloud Foundry | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Deploying with Pivotal Cloud Foundry" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="en" />
<meta name="description" content="This blog post was written with the assistance of ChatGPT-4o." />
<meta property="og:description" content="This blog post was written with the assistance of ChatGPT-4o." />
<link rel="canonical" href="https://lzwjava.github.io/pcf-en" />
<meta property="og:url" content="https://lzwjava.github.io/pcf-en" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-11-07T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Deploying with Pivotal Cloud Foundry" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2022-11-07T00:00:00+08:00","datePublished":"2022-11-07T00:00:00+08:00","description":"This blog post was written with the assistance of ChatGPT-4o.","headline":"Deploying with Pivotal Cloud Foundry","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/pcf-en"},"url":"https://lzwjava.github.io/pcf-en"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=1533757a50efb4e581bdc0c07116e6f67f984696">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=1533757a50efb4e581bdc0c07116e6f67f984696" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Deploying with Pivotal Cloud Foundry | Original
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/en/2022-11-07-pcf-en.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsen2022-11-07-pcf-en.md</span> -->
      

      <!-- <span>2022-11-07-pcf-en.md</span> -->

      
        

        
          
          <a href="#" class="button">2022.11</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/pcf-en" selected>English</option>
        <option value="/pcf-zh" >中文</option>
        <option value="/pcf-ja" >日本語</option>
        <option value="/pcf-es" >Español</option>
        <option value="/pcf-hi" >हिंदी</option>
        <option value="/pcf-fr" >Français</option>
        <option value="/pcf-de" >Deutsch</option>
        <option value="/pcf-ar" >العربية</option>
        <option value="/pcf-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p><em>This blog post was written with the assistance of ChatGPT-4o.</em></p>

<hr />

<h3 id="table-of-contents">Table of Contents</h3>
<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#getting-started-with-pivotal-cloud-foundry">Getting Started with Pivotal Cloud Foundry</a></li>
  <li><a href="#securing-secrets-with-credhub">Securing Secrets with CredHub</a></li>
  <li><a href="#deploying-an-application-on-pivotal-cloud-foundry">Deploying an Application on Pivotal Cloud Foundry</a></li>
  <li><a href="#monitoring-and-fetching-logs">Monitoring and Fetching Logs</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h3 id="introduction">Introduction</h3>

<p>Pivotal Cloud Foundry is a popular open-source platform as a service (PaaS) that enables developers to deploy, manage, and scale applications quickly and efficiently. Coupled with CredHub, a service for securely storing and accessing credentials, it provides a robust environment for building and running applications. In this blog post, we will walk through setting up Pivotal Cloud Foundry, using CredHub to manage secrets, deploying an application, and monitoring it using <code class="language-plaintext highlighter-rouge">cf logs</code>.</p>

<h3 id="getting-started-with-pivotal-cloud-foundry">Getting Started with Pivotal Cloud Foundry</h3>

<p>Pivotal Cloud Foundry simplifies the deployment and scaling of applications. Here’s how to get started:</p>

<ol>
  <li>Installing Pivotal Cloud Foundry CLI:
    <ul>
      <li>Download and install the Pivotal Cloud Foundry CLI from the <a href="https://docs.cloudfoundry.org/cf-cli/install-go-cli.html">official website</a>.</li>
      <li>Verify the installation:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf <span class="nt">--version</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Logging in to Pivotal Cloud Foundry:
    <ul>
      <li>Target your Pivotal Cloud Foundry API endpoint:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf api https://api.your-cloud-foundry-instance.com
</code></pre></div>        </div>
      </li>
      <li>Log in using your credentials:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf login
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Setting up Spaces and Orgs:
    <ul>
      <li>Create and manage organizations and spaces to logically separate applications and resources.</li>
    </ul>
  </li>
</ol>

<h3 id="securing-secrets-with-credhub">Securing Secrets with CredHub</h3>

<p>CredHub allows you to securely store, generate, and access credentials in your applications. Here’s how to integrate CredHub with Pivotal Cloud Foundry:</p>

<ol>
  <li>Setting up CredHub:
    <ul>
      <li>Ensure CredHub is deployed and configured within your Pivotal Cloud Foundry environment.</li>
      <li>Use the CredHub CLI to interact with CredHub:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>credhub login <span class="nt">-s</span> https://credhub.your-cloud-foundry-instance.com <span class="nt">--ca-cert</span> &lt;path-to-ca-cert&gt;
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Storing Secrets:
    <ul>
      <li>Store a secret in CredHub:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>credhub <span class="nb">set</span> <span class="nt">-n</span> /cflab/db_password <span class="nt">-t</span> password <span class="nt">-w</span> s3cr3t
</code></pre></div>        </div>
      </li>
      <li>Retrieve a secret:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>credhub get <span class="nt">-n</span> /cflab/db_password
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Integrating CredHub with Applications:
    <ul>
      <li>Bind CredHub secrets to your Pivotal Cloud Foundry applications using service bindings or environment variables.</li>
    </ul>
  </li>
</ol>

<h3 id="deploying-an-application-on-pivotal-cloud-foundry">Deploying an Application on Pivotal Cloud Foundry</h3>

<p>Deploying applications on Pivotal Cloud Foundry is straightforward. Here’s a step-by-step guide:</p>

<ol>
  <li>Preparing Your Application:
    <ul>
      <li>Ensure your application has a <code class="language-plaintext highlighter-rouge">manifest.yml</code> file for configuration:
```yaml
applications:
        <ul>
          <li>name: my-app
memory: 512M
instances: 1
path: .
```</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Pushing Your Application:
    <ul>
      <li>Deploy the application using the <code class="language-plaintext highlighter-rouge">cf push</code> command:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf push my-app
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Scaling Your Application:
    <ul>
      <li>Scale the number of instances:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf scale my-app <span class="nt">-i</span> 3
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Managing Environment Variables:
    <ul>
      <li>Set environment variables for your application:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf set-env my-app DB_PASSWORD s3cr3t
</code></pre></div>        </div>
      </li>
      <li>Restage your application to apply the changes:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf restage my-app
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="monitoring-and-fetching-logs">Monitoring and Fetching Logs</h3>

<p>Pivotal Cloud Foundry provides robust logging capabilities to help you monitor your applications:</p>

<ol>
  <li>Viewing Logs:
    <ul>
      <li>Fetch recent logs for your application:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf logs my-app <span class="nt">--recent</span>
</code></pre></div>        </div>
      </li>
      <li>Stream logs in real-time:
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cf logs my-app
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Analyzing Logs:
    <ul>
      <li>Use the logs to troubleshoot issues, monitor performance, and gain insights into application behavior.</li>
    </ul>
  </li>
  <li>Setting Up Log Management:
    <ul>
      <li>Integrate with log management tools like Loggregator or third-party services to aggregate and analyze logs.</li>
    </ul>
  </li>
</ol>

<h3 id="conclusion">Conclusion</h3>

<p>By leveraging Pivotal Cloud Foundry and CredHub, you can securely deploy and manage applications with ease. Pivotal Cloud Foundry’s PaaS capabilities streamline the deployment process, while CredHub ensures that your application’s secrets are stored securely. With robust logging and monitoring tools, you can maintain high visibility into your application’s performance and health. This setup not only enhances security but also improves operational efficiency and scalability.</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-en" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
