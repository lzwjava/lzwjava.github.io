<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>بناء استعلامات SQL باستخدام الذكاء الاصطناعي</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>بناء استعلامات SQL باستخدام الذكاء الاصطناعي | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="بناء استعلامات SQL باستخدام الذكاء الاصطناعي" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ar" />
<meta name="description" content="مخطط قاعدة البيانات (PostgreSQL): CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(255) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, first_name VARCHAR(100), last_name VARCHAR(100), date_of_birth DATE, gender VARCHAR(10), phone_number VARCHAR(20), address TEXT, city VARCHAR(100), state VARCHAR(100), country VARCHAR(100), zip_code VARCHAR(20), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE, last_login TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT TRUE, role VARCHAR(50), profile_picture_url VARCHAR(255), bio TEXT, failed_login_attempts INTEGER DEFAULT 0, account_balance NUMERIC(10, 2) DEFAULT 0.00 );" />
<meta property="og:description" content="مخطط قاعدة البيانات (PostgreSQL): CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(255) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, first_name VARCHAR(100), last_name VARCHAR(100), date_of_birth DATE, gender VARCHAR(10), phone_number VARCHAR(20), address TEXT, city VARCHAR(100), state VARCHAR(100), country VARCHAR(100), zip_code VARCHAR(20), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE, last_login TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT TRUE, role VARCHAR(50), profile_picture_url VARCHAR(255), bio TEXT, failed_login_attempts INTEGER DEFAULT 0, account_balance NUMERIC(10, 2) DEFAULT 0.00 );" />
<link rel="canonical" href="https://lzwjava.github.io/ai-sql-ar" />
<meta property="og:url" content="https://lzwjava.github.io/ai-sql-ar" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-07-14T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="بناء استعلامات SQL باستخدام الذكاء الاصطناعي" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2025-07-14T00:00:00+08:00","datePublished":"2025-07-14T00:00:00+08:00","description":"مخطط قاعدة البيانات (PostgreSQL): CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(255) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, first_name VARCHAR(100), last_name VARCHAR(100), date_of_birth DATE, gender VARCHAR(10), phone_number VARCHAR(20), address TEXT, city VARCHAR(100), state VARCHAR(100), country VARCHAR(100), zip_code VARCHAR(20), created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE, last_login TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT TRUE, role VARCHAR(50), profile_picture_url VARCHAR(255), bio TEXT, failed_login_attempts INTEGER DEFAULT 0, account_balance NUMERIC(10, 2) DEFAULT 0.00 );","headline":"بناء استعلامات SQL باستخدام الذكاء الاصطناعي","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/ai-sql-ar"},"url":"https://lzwjava.github.io/ai-sql-ar"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=79c38a330a3df5b1180ac6ea8da4e97c097ad5dc">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=79c38a330a3df5b1180ac6ea8da4e97c097ad5dc" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       بناء استعلامات SQL باستخدام الذكاء الاصطناعي | أصلي، ترجم بواسطة AI
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ar/2025-07-14-ai-sql-ar.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsar2025-07-14-ai-sql-ar.md</span> -->
      

      <!-- <span>2025-07-14-ai-sql-ar.md</span> -->

      
        

        
          
          <a href="#" class="button">2025.07</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/ai-sql-en" >English</option>
        <option value="/ai-sql-zh" >中文</option>
        <option value="/ai-sql-ja" >日本語</option>
        <option value="/ai-sql-es" >Español</option>
        <option value="/ai-sql-hi" >हिंदी</option>
        <option value="/ai-sql-fr" >Français</option>
        <option value="/ai-sql-de" >Deutsch</option>
        <option value="/ai-sql-ar" selected>العربية</option>
        <option value="/ai-sql-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p><strong>مخطط قاعدة البيانات (PostgreSQL):</strong></p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">username</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">password_hash</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">first_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">last_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">date_of_birth</span> <span class="nb">DATE</span><span class="p">,</span>
    <span class="n">gender</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">phone_number</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">address</span> <span class="nb">TEXT</span><span class="p">,</span>
    <span class="n">city</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="k">state</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">country</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">zip_code</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">last_login</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">is_active</span> <span class="nb">BOOLEAN</span> <span class="k">DEFAULT</span> <span class="k">TRUE</span><span class="p">,</span>
    <span class="k">role</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
    <span class="n">profile_picture_url</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">bio</span> <span class="nb">TEXT</span><span class="p">,</span>
    <span class="n">failed_login_attempts</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">account_balance</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span>
<span class="p">);</span>
</code></pre></div></div>

<hr />

<p>الجدول أعلاه هو قاعدة بيانات PostgreSQL، والجدول أدناه هو تعريف الجدول. إليك تعليمات استعلام اللغة الطبيعية.</p>

<p>أريد الحصول على بعض المستخدمين الذين اسمهم الأول هو “أندي”، تم إنشاؤهم في اليوم الماضي من الشهر الماضي، والذين يبلغون من العمر 20 عامًا في عام 2025، والذين تم تسجيل دخولهم الأخير في الأسبوع الماضي، أعطني الاستعلام SQL للحصول على مثل هذه المستخدمين.</p>

<hr />

<p><strong>استعلام SQL المولد:</strong></p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">users</span>
<span class="k">WHERE</span> <span class="n">first_name</span> <span class="k">ILIKE</span> <span class="s1">'andy'</span>
  <span class="k">AND</span> <span class="k">CAST</span><span class="p">(</span><span class="n">created_at</span> <span class="k">AS</span> <span class="nb">DATE</span><span class="p">)</span> <span class="k">BETWEEN</span>
      <span class="p">(</span><span class="k">CURRENT_DATE</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'1 MONTH'</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'1 DAY'</span><span class="p">)</span>
      <span class="k">AND</span>
      <span class="p">(</span><span class="k">CURRENT_DATE</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'1 MONTH'</span> <span class="o">+</span> <span class="n">INTERVAL</span> <span class="s1">'1 DAY'</span><span class="p">)</span>
  <span class="k">AND</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="nb">YEAR</span> <span class="k">FROM</span> <span class="n">AGE</span><span class="p">(</span><span class="n">date_of_birth</span><span class="p">))</span> <span class="o">=</span> <span class="mi">20</span>
  <span class="k">AND</span> <span class="n">last_login</span> <span class="o">&gt;=</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'7 DAYS'</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<p>أدناه هو تعريف جدول PostgreSQL لجدول <code class="language-plaintext highlighter-rouge">conversations</code> يمكن استخدامه لتتبع تفاعلات المستخدمين مع نظام ذكاء اصطناعي مثل Grok. تم تصميم الجدول لتتبع المحادثات، بما في ذلك المستخدمين المعنيين، محتوى المحادثة، التوقيتات، والمعلومات ذات الصلة.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">conversations</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">user_id</span> <span class="nb">INTEGER</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">title</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
    <span class="n">conversation_type</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="s1">'chat'</span><span class="p">,</span>
    <span class="n">started_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">ended_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">status</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="s1">'active'</span><span class="p">,</span>
    <span class="n">message_count</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">last_message_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="n">is_archived</span> <span class="nb">BOOLEAN</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
    <span class="n">ai_model_version</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
    <span class="n">total_tokens_used</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span> <span class="k">DEFAULT</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
    <span class="n">updated_at</span> <span class="nb">TIMESTAMP</span> <span class="k">WITH</span> <span class="nb">TIME</span> <span class="k">ZONE</span><span class="p">,</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">users</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="الشرح">الشرح:</h3>
<ul>
  <li><strong>id</strong>: معرف فريد لكل محادثة.</li>
  <li><strong>user_id</strong>: يربط الجدول <code class="language-plaintext highlighter-rouge">users</code> للمحادثة بمستخدم معين.</li>
  <li><strong>title</strong>: عنوان اختياري للمحادثة (مثلًا، ملخص محدد من قبل المستخدم أو مولد تلقائيًا).</li>
  <li><strong>conversation_type</strong>: يشير إلى نوع المحادثة (مثلًا، ‘chat’، ‘query’، ‘voice’).</li>
  <li><strong>started_at</strong>: التوقيت الذي بدأت فيه المحادثة.</li>
  <li><strong>ended_at</strong>: التوقيت الذي انتهت فيه المحادثة (قابل للعدم إذا كانت مستمرة).</li>
  <li><strong>status</strong>: تتبع حالة المحادثة (مثلًا، ‘active’، ‘completed’، ‘paused’).</li>
  <li><strong>message_count</strong>: تتبع عدد الرسائل التي تم تبادلها في المحادثة.</li>
  <li><strong>last_message_at</strong>: التوقيت للرسالة الأخيرة.</li>
  <li><strong>is_archived</strong>: مؤشر منطقي يشير إلى ما إذا كانت المحادثة محفوظة.</li>
  <li><strong>ai_model_version</strong>: تخزين نسخة نموذج الذكاء الاصطناعي المستخدمة (مثلًا، ‘Grok 3’).</li>
  <li><strong>total_tokens_used</strong>: تتبع استخدام الرموز للمحادثة (مفيد للتصفية أو التحليل).</li>
  <li><strong>created_at</strong> و <strong>updated_at</strong>: التوقيت الذي تم فيه إنشاء سجل المحادثة وتحديثه.</li>
  <li><strong>FOREIGN KEY</strong>: يضمن سلامة الارتباط مع جدول <code class="language-plaintext highlighter-rouge">users</code>، مع <code class="language-plaintext highlighter-rouge">ON DELETE CASCADE</code> لحذف المحادثات إذا تم حذف المستخدم المرتبط.</li>
</ul>

<p>تم تصميم هذا الجدول ليكون مرنًا ويمكن توسيعه حسب الحاجة، مثل تخزين الرسائل الفردية في جدول منفصل <code class="language-plaintext highlighter-rouge">messages</code> أو إضافة حقول لتحليل المشاعر أو Tags للمحادثة. أخبرني إذا كنت بحاجة إلى جدول مرتبط (مثلًا، للرسائل) أو استعلام للتفاعل مع هذا الجدول!</p>

<hr />

<p>لتمكين واجهة المستخدم التي يمكن للمستخدمين من خلالها استعلام محادثاتهم باستخدام اللغة الطبيعية (مثلًا، “أعطني آخر 5 محادثات” أو “المحادثات التي تحتوي عنوانها على كلمة عن جافا”)، يجب التأكد من أن استعلام SQL يقيد النتائج للمحادثات الخاصة بالمستخدم المصرح له. وهذا يتضمن دمج هوية المستخدم (مثلًا، <code class="language-plaintext highlighter-rouge">user_id</code>) في الاستعلام وتحويل اللغة الطبيعية إلى شروط SQL. أدناه تعليمات واستعلامات SQL المقابلة للجدول <code class="language-plaintext highlighter-rouge">conversations</code>، مع التأكد من أن المستخدمين يمكنهم الوصول فقط إلى بياناتهم الخاصة.</p>

<h3 id="الاعتبارات-الرئيسية">الاعتبارات الرئيسية</h3>
<ul>
  <li><strong>المصادقة</strong>: يجب أن يرسل الواجهة الأمامية معرف المستخدم المصرح له (e.g., <code class="language-plaintext highlighter-rouge">user_id</code>) إلى الخلفية لتصفية المحادثات.</li>
  <li><strong>تحويل اللغة الطبيعية</strong>: يتم تحليل الإدخال الطبيعي لتحديد الشروط الرئيسية (مثلًا، “الأحدث 5” أو “العنوان يحتوي على كلمة جافا”).</li>
  <li><strong>الأمان</strong>: دائمًا تصفية حسب <code class="language-plaintext highlighter-rouge">user_id</code> لمنع المستخدمين من الوصول إلى محادثات الآخرين.</li>
  <li><strong>المرجع الجدول</strong>: باستخدام الجدول <code class="language-plaintext highlighter-rouge">conversations</code> المحدد أعلاه.</li>
</ul>

<h3 id="تعليمات-اللغة-الطبيعية-واستعلامات-sql">تعليمات اللغة الطبيعية واستعلامات SQL</h3>

<h4 id="تعليمات-1-أعطني-آخر-5-محادثات">تعليمات 1: “أعطني آخر 5 محادثات”</h4>
<p><strong>المتطلبات المحللة</strong>:</p>
<ul>
  <li>تصفية المحادثات حسب معرف المستخدم المصرح له <code class="language-plaintext highlighter-rouge">user_id</code>.</li>
  <li>ترتيب حسب <code class="language-plaintext highlighter-rouge">started_at</code> (أو <code class="language-plaintext highlighter-rouge">last_message_at</code> للحداثة) تنازليًا.</li>
  <li>حد النتائج إلى 5 نتائج.</li>
</ul>

<p><strong>استعلام SQL</strong>:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">authenticated_user_id</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">started_at</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">:authenticated_user_id</code> هو محلل لمعرف المستخدم المسجل، المرسل بأمان من الواجهة الأمامية/الخلفية.</li>
  <li><code class="language-plaintext highlighter-rouge">started_at DESC</code> يضمن أن المحادثات الأحدث يتم إرجاعها.</li>
  <li><code class="language-plaintext highlighter-rouge">LIMIT 5</code> يقيد الإخراج إلى 5 محادثات.</li>
</ul>

<h4 id="تعليمات-2-المحادثات-التي-تحتوي-عنوانها-على-كلمة-عن-جافا">تعليمات 2: “المحادثات التي تحتوي عنوانها على كلمة عن جافا”</h4>
<p><strong>المتطلبات المحللة</strong>:</p>
<ul>
  <li>تصفية المحادثات حسب معرف المستخدم المصرح له <code class="language-plaintext highlighter-rouge">user_id</code>.</li>
  <li>البحث عن المحادثات التي تحتوي عنوانها على “جافا” (غير حساس للحروف الكبيرة).</li>
  <li>استخدام <code class="language-plaintext highlighter-rouge">ILIKE</code> للمطابقة الجزئية وغير الحساسة للحروف الكبيرة في PostgreSQL.</li>
</ul>

<p><strong>استعلام SQL</strong>:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">authenticated_user_id</span>
  <span class="k">AND</span> <span class="n">title</span> <span class="k">ILIKE</span> <span class="s1">'%java%'</span><span class="p">;</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">:authenticated_user_id</code> يضمن أن يتم استعلام محادثات المستخدم فقط.</li>
  <li><code class="language-plaintext highlighter-rouge">ILIKE '%java%'</code> تطابق العناوين التي تحتوي على “جافا” (مثلًا، “نصائح جافا”، “حول برمجة جافا”).</li>
</ul>

<h3 id="ملاحظات-التنفيذ-للواجهة-الأمامية">ملاحظات التنفيذ للواجهة الأمامية</h3>
<ol>
  <li><strong>المصادقة</strong>:
    <ul>
      <li>يجب أن يرسل الواجهة الأمامية معرف المستخدم المسجل (مثلًا، من رمز JWT أو جلسة) إلى واجهة برمجة التطبيقات الخلفية.</li>
      <li>يجب أن يتحقق الخلفية من <code class="language-plaintext highlighter-rouge">user_id</code> ويستخدمها في شرط <code class="language-plaintext highlighter-rouge">WHERE</code> لتصفية النتائج.</li>
    </ul>
  </li>
  <li><strong>معالجة اللغة الطبيعية</strong>:
    <ul>
      <li>استخدام محلل بسيط قائم على القواعد أو نموذج ذكاء اصطناعي (مثل Grok) لفهم استعلام اللغة الطبيعية واستخراج:
        <ul>
          <li><strong>النية</strong>: قائمة المحادثات.</li>
          <li><strong>المرشحات</strong>: الكلمات الرئيسية (مثلًا، “جافا”)، الترتيب (مثلًا، “الأحدث”)، أو الحدود (مثلًا، “5”).</li>
        </ul>
      </li>
      <li>على سبيل المثال، تحويل “الأحدث 5” إلى <code class="language-plaintext highlighter-rouge">ORDER BY started_at DESC LIMIT 5</code> و”العنوان يحتوي على كلمة جافا” إلى <code class="language-plaintext highlighter-rouge">title ILIKE '%java%'</code>.</li>
    </ul>
  </li>
  <li><strong>تصميم واجهة برمجة التطبيقات</strong>:
    <ul>
      <li>إنشاء نقطة نهاية (مثلًا، <code class="language-plaintext highlighter-rouge">/api/conversations</code>) التي تقبل:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">user_id</code>: من الجلسة المصادقة.</li>
          <li><code class="language-plaintext highlighter-rouge">query</code>: الإدخال الطبيعي أو المعلمات المهيأة (مثلًا، <code class="language-plaintext highlighter-rouge">{ filter: "title contains java" }</code>).</li>
        </ul>
      </li>
      <li>يتحول الخلفية الاستعلام إلى SQL، مع التأكد من أن <code class="language-plaintext highlighter-rouge">user_id</code> يتم تضمينه دائمًا في شرط <code class="language-plaintext highlighter-rouge">WHERE</code>.</li>
    </ul>
  </li>
  <li><strong>الأمان</strong>:
    <ul>
      <li>لا تتيح أبدًا للمستخدمين إدخال SQL مباشرة أو تعديل مرشح <code class="language-plaintext highlighter-rouge">user_id</code>.</li>
      <li>استخدام استعلامات معلمة (مثلًا، <code class="language-plaintext highlighter-rouge">:authenticated_user_id</code>) لمنع حقن SQL.</li>
      <li>التحقق من المدخلات لتجنب الأنماط الخبيثة في عمليات البحث <code class="language-plaintext highlighter-rouge">ILIKE</code>.</li>
    </ul>
  </li>
  <li><strong>عرض الواجهة الأمامية</strong>:
    <ul>
      <li>إرجاع الحقول مثل <code class="language-plaintext highlighter-rouge">id</code>، <code class="language-plaintext highlighter-rouge">title</code>، <code class="language-plaintext highlighter-rouge">started_at</code>، <code class="language-plaintext highlighter-rouge">last_message_at</code>، و <code class="language-plaintext highlighter-rouge">status</code> لعرض قائمة المحادثات.</li>
      <li>السماح بالخيارات الترتيب أو التصفية في واجهة المستخدم (مثلًا، قوائم منسدلة لـ “الأحدث” أو إدخال نصي للبحث في العنوان).</li>
    </ul>
  </li>
</ol>

<h3 id="مثال-سير-العمل">مثال سير العمل</h3>
<ol>
  <li>يتسجل المستخدم، ويسترجع الواجهة الأمامية معرفه <code class="language-plaintext highlighter-rouge">user_id</code> (مثلًا، <code class="language-plaintext highlighter-rouge">123</code>).</li>
  <li>يكتب المستخدم “أعطني آخر 5 محادثات” في شريط البحث.</li>
  <li>يرسل الواجهة الأمامية طلبًا إلى الخلفية: <code class="language-plaintext highlighter-rouge">/api/conversations?user_id=123&amp;query=latest 5</code>.</li>
  <li>يحلل الخلفية الاستعلام، ويولد SQL:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="mi">123</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">started_at</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>يرسل الخلفية النتائج كJSON، ويظهر الواجهة الأمامية المحادثات.</li>
</ol>

<h3 id="ملاحظات-إضافية">ملاحظات إضافية</h3>
<ul>
  <li>إذا كان <code class="language-plaintext highlighter-rouge">title</code> قابلًا للعدم، أضف <code class="language-plaintext highlighter-rouge">AND title IS NOT NULL</code> إلى الاستعلام الثاني لتجنب مطابقة العناوين القابلة للعدم.</li>
  <li>للمستعلامات الأكثر تعقيدًا (مثلًا، “المحادثات عن جافا من الأسبوع الماضي”)، قم بدمج الشروط:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">conversations</span>
<span class="k">WHERE</span> <span class="n">user_id</span> <span class="o">=</span> <span class="p">:</span><span class="n">authenticated_user_id</span>
  <span class="k">AND</span> <span class="n">title</span> <span class="k">ILIKE</span> <span class="s1">'%java%'</span>
  <span class="k">AND</span> <span class="n">started_at</span> <span class="o">&gt;=</span> <span class="k">CURRENT_TIMESTAMP</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'7 DAYS'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>إذا كنت بحاجة إلى محلل لغة طبيعية أكثر تقدمًا، فكر في دمج نموذج ذكاء اصطناعي (مثل Grok عبر واجهة برمجة التطبيقات لـ xAI) لتحويل الاستعلامات المعقدة إلى SQL. للحصول على تفاصيل واجهة برمجة التطبيقات، زور <a href="https://x.ai/api">xAI API</a>.</li>
</ul>

<p>أخبرني إذا كنت بحاجة إلى مساعدة في كود الواجهة الأمامية، أو إعداد واجهة برمجة التطبيقات الخلفية، أو أمثلة استعلامات إضافية!</p>


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ar" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
