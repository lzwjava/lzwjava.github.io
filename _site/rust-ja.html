<!DOCTYPE html>
<html lang=" en-US">

<head>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Zhiwei Li"
    href="https://lzwjava.github.io/feeds/feed.xml" />

  <title>Rust プログラミングを試す</title>

  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' 
          data-cf-beacon='{"token": "70fc8c466cc1445098b3fc6f209c22c2"}'>
  </script>

  <!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66656236-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-66656236-1');
  </script>
   -->
  <meta charset="UTF-8">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Rust プログラミングを試す | Zhiwei Li</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Rust プログラミングを試す" />
<meta name="author" content="Zhiwei Li" />
<meta property="og:locale" content="ja" />
<meta name="description" content="Rustはここ数年で注目を集めているプログラミング言語です。2006年、Mozillaの従業員が個人プロジェクトとして始め、後に会社の支援を受けて2010年にこのプロジェクトを発表しました。このプロジェクトの名前がRustです。" />
<meta property="og:description" content="Rustはここ数年で注目を集めているプログラミング言語です。2006年、Mozillaの従業員が個人プロジェクトとして始め、後に会社の支援を受けて2010年にこのプロジェクトを発表しました。このプロジェクトの名前がRustです。" />
<link rel="canonical" href="https://lzwjava.github.io/rust-ja" />
<meta property="og:url" content="https://lzwjava.github.io/rust-ja" />
<meta property="og:site_name" content="Zhiwei Li" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-06T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Rust プログラミングを試す" />
<meta name="twitter:site" content="@lzwjava" />
<meta name="twitter:creator" content="@lzwjava" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Zhiwei Li"},"dateModified":"2021-03-06T00:00:00+08:00","datePublished":"2021-03-06T00:00:00+08:00","description":"Rustはここ数年で注目を集めているプログラミング言語です。2006年、Mozillaの従業員が個人プロジェクトとして始め、後に会社の支援を受けて2010年にこのプロジェクトを発表しました。このプロジェクトの名前がRustです。","headline":"Rust プログラミングを試す","mainEntityOfPage":{"@type":"WebPage","@id":"https://lzwjava.github.io/rust-ja"},"url":"https://lzwjava.github.io/rust-ja"}</script>
<!-- End Jekyll SEO tag -->


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Facebook Meta Tags -->
  <!-- <meta property="og:url" content="https://lzwjava.github.io"> -->
  <meta property="og:type" content="website">
  <!-- <meta property="og:title" content="Zhiwei Li's Blog">
  <meta property="og:description" content="A personal blog featuring programming insights and projects."> -->
  
  
  
  
  
  
  
  
  <meta property="og:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@lzwjava">
  <meta property="twitter:domain" content="lzwjava.github.io">
  <!-- <meta property="twitter:url" content="https://lzwjava.github.io"> -->
  <!-- <meta name="twitter:title" content="Zhiwei Li's Blog">
  <meta name="twitter:description" content="A personal blog featuring programming insights and projects."> -->
  <meta name="twitter:image" content="https://lzwjava.github.io/assets/images/og/og4.jpg">


  <link rel="stylesheet" href="/assets/css/style.css?v=b5bf2c268b13a1264729713c6115b94a466b72f5">

  <!-- for mathjax support -->
  <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['\\(','\\)'], ['$', '$']],
            displayMath: [ ['$$','$$'], ['\\[','\\]']],
            processEscapes: false
          },
          "HTML-CSS": { linebreaks: { automatic: true } },
          "CommonHTML": {
            linebreaks: { automatic: true }
          },
          TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
      </script>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- <script src="/assets/js/donatePopup.js?v=b5bf2c268b13a1264729713c6115b94a466b72f5" defer></script> -->
</head>

<body>
  <main id="content" class="main-content post-content" role="main">
  

  

  


  <div class="title-row post-title-row">
    <h2 class="title post-title">
       Rust プログラミングを試す | オリジナル、AI翻訳
    </h2>
  </div>

  <div class="button-container">
    <a href="/" class="button left-button">Home</a>

    <!-- PDF Button -->
     
    <!-- <a href="#" id="downloadPdfButton" class="button pdf-button" data-file-path="_posts/ja/2021-03-06-rust-ja.md">PDF</a> -->

    <!-- Audio Button -->



    <!--  -->

        <!-- Date Button -->
    
      
      <!-- <span>_postsja2021-03-06-rust-ja.md</span> -->
      

      <!-- <span>2021-03-06-rust-ja.md</span> -->

      
        

        
          
          <a href="#" class="button">2021.03</a>
        

      
    

    <button id="themeTogglePost" class="button icon-button" aria-label="Toggle Theme" style="float: right;margin-bottom: 5px;">
      <!-- theme-icons.html -->
<svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

<svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
    <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
</svg>
    </button>    

    <!-- Language Select Section -->
    
    
    
    
    
    
    

    
    <select id="languageSelect" class="button right-button">
        
        <option value="/rust-en" >English</option>
        <option value="/rust-zh" >中文</option>
        <option value="/rust-ja" selected>日本語</option>
        <option value="/rust-es" >Español</option>
        <option value="/rust-hi" >हिंदी</option>
        <option value="/rust-fr" >Français</option>
        <option value="/rust-de" >Deutsch</option>
        <option value="/rust-ar" >العربية</option>
        <option value="/rust-hant" >繁體中文</option>
    </select>
  </div>

  <!-- Audio player for text-to-speech -->
  <div class="audio-container">
    <audio id="audioPlayer" controls loop style="display:none;">
      <source id="audioSource" src="" type="audio/mp3">
      Your browser does not support the audio element.
    </audio>
  </div>

  <hr>

  <p>Rustはここ数年で注目を集めているプログラミング言語です。2006年、Mozillaの従業員が個人プロジェクトとして始め、後に会社の支援を受けて2010年にこのプロジェクトを発表しました。このプロジェクトの名前がRustです。</p>

<p>次に、Rustの最初のプログラムを実行してみましょう。公式サイトを開いて、プログラムを実行する方法を見てみましょう。</p>

<p>公式サイトでは以下のスクリプトを提供しています：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">--proto</span> <span class="s1">'=https'</span> <span class="nt">--tlsv1</span>.2 <span class="nt">-sSf</span> https://sh.rustup.rs | sh
</code></pre></div></div>

<p>このコマンドは、Rustプログラミング言語のインストールスクリプトをダウンロードして実行します。<code class="language-plaintext highlighter-rouge">curl</code>コマンドを使用して、<code class="language-plaintext highlighter-rouge">https://sh.rustup.rs</code>からスクリプトを取得し、<code class="language-plaintext highlighter-rouge">sh</code>コマンドでそのスクリプトを実行します。<code class="language-plaintext highlighter-rouge">--proto '=https'</code>と<code class="language-plaintext highlighter-rouge">--tlsv1.2</code>オプションは、セキュアなHTTPS接続を使用することを保証します。<code class="language-plaintext highlighter-rouge">-sSf</code>オプションは、進捗表示を抑制し、エラーが発生した場合にのみ出力を表示します。</p>

<p>Mac 上でも、Mac システムのパッケージ管理ツールである Homebrew を使用してインストールすることができます。以下のコマンドを実行してください：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>rust
</code></pre></div></div>

<p>ここではHomebrewを使ってrustをインストールします。インストール中に、引き続き公式サイトを見ていきましょう。</p>

<p>次に、公式サイトにCargoというものが登場しました。これはRustのビルドツール兼パッケージ管理ツールです。</p>

<p>公式ウェブサイトには以下のように記載されています：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cargo build</code> でプロジェクトをビルドする</li>
  <li><code class="language-plaintext highlighter-rouge">cargo run</code> でプロジェクトを実行する</li>
  <li><code class="language-plaintext highlighter-rouge">cargo test</code> でプロジェクトをテストする</li>
</ul>

<p>Cargoプログラムの構築、実行、テスト方法を教えてくれます。</p>

<p>実行：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>rust
</code></pre></div></div>

<p>上記のコマンドは、macOS用のパッケージマネージャーであるHomebrewを使用して、Rustプログラミング言語をインストールするためのものです。このコマンドを実行すると、Homebrewが自動的にRustの最新バージョンをダウンロードし、システムにインストールします。</p>

<p>出力：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==&gt;</span> Downloading https://homebrew.bintray.com/bottles/rust-1.49.0_1.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> Downloading from https://d29vzk4ow07wi7.cloudfront.net/5a238d58c3fa775fed4e12ad74109deff54a82a06cb6a3a4f51b5d37587fb319?response-content-disposition<span class="o">=</span>a
<span class="c">######################################################################## 100.0%</span>
<span class="o">==&gt;</span> Pouring rust-1.49.0_1.big_sur.bottle.tar.gz
<span class="o">==&gt;</span> Caveats
Bashの補完機能が以下の場所にインストールされました:
  /usr/local/etc/bash_completion.d
<span class="o">==&gt;</span> Summary
🍺  /usr/local/Cellar/rust/1.49.0_1: 15,736ファイル, 606.2MB
</code></pre></div></div>

<p>これでインストールが成功しました。</p>

<p>端末で<code class="language-plaintext highlighter-rouge">cargo</code>を実行すると、以下のような出力が得られます：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rustのパッケージマネージャー
</code></pre></div></div>

<p>使用方法:
    cargo [オプション] [サブコマンド]</p>

<p>OPTIONS:
    -V, –version           バージョン情報を表示して終了します
        –list              インストールされているコマンドを一覧表示します
        –explain <code>    `rustc --explain CODE` を実行します
    -v, --verbose           詳細な出力を使用します (-vv は非常に詳細/ビルド.rsの出力)
    -q, --quiet             stdoutに出力を表示しません
        --color <WHEN>      カラーリング: auto, always, never
        --frozen            Cargo.lockとキャッシュが最新であることを要求します
        --locked            Cargo.lockが最新であることを要求します
        --offline           ネットワークにアクセスせずに実行します
    -Z <FLAG>...            Cargoの不安定（nightly専用）フラグ、詳細は 'cargo -Z help' を参照
    -h, --help              ヘルプ情報を表示します</FLAG></WHEN></code></p>

<p>一般的なCargoコマンドには以下のものがあります（すべてのコマンドは–listで確認できます）：
    build, b    現在のパッケージをコンパイルする
    check, c    現在のパッケージを分析してエラーを報告するが、オブジェクトファイルはビルドしない
    clean       ターゲットディレクトリを削除する
    doc         このパッケージとその依存関係のドキュメントをビルドする
    new         新しいCargoパッケージを作成する
    init        既存のディレクトリに新しいCargoパッケージを作成する
    run, r      ローカルパッケージのバイナリまたは例を実行する
    test, t     テストを実行する
    bench       ベンチマークを実行する
    update      Cargo.lockにリストされている依存関係を更新する
    search      レジストリでクレートを検索する
    publish     このパッケージをパッケージ化してレジストリにアップロードする
    install     Rustバイナリをインストールする。デフォルトの場所は$HOME/.cargo/bin
    uninstall   Rustバイナリをアンインストールする</p>

<p>特定のコマンドに関する詳細情報は、’cargo help <コマンド>' を参照してください。</コマンド></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
すべてのコマンドを理解する必要はありません。よく使うコマンドを知っていれば十分です。`build` と `run` コマンドは特に重要です。

引き続き公式ドキュメントを見ていきましょう：

```c
新しいRust開発環境で小さなアプリケーションを書いてみましょう。まず、Cargoを使って新しいプロジェクトを作成します。お好みのターミナルで次のコマンドを実行してください：
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cargo new hello-rust
</code></pre></div></div>

<p>これにより、<code class="language-plaintext highlighter-rouge">hello-rust</code> という名前の新しいディレクトリが生成され、以下のファイルが含まれます:</p>

<p>hello-rust
|- Cargo.toml
|- src
  |- main.rs
Cargo.tomlはRustのマニフェストファイルです。プロジェクトのメタデータや依存関係をここに記述します。</p>

<p><code class="language-plaintext highlighter-rouge">src/main.rs</code> は、私たちがアプリケーションのコードを書く場所です。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>これはプロジェクトの作成方法について説明しています。次に、実際に作成します。
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cargo new hello-rust
</code></pre></div></div>

<p>バイナリ（アプリケーション）<code class="language-plaintext highlighter-rouge">hello-rust</code>パッケージを作成しました</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
プロジェクトをVSCodeで開きます。

```rust
main.rs:
</code></pre></div></div>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>このRustのコードは、コンソールに「Hello, world!」と表示するシンプルなプログラムです。Rustの基本的な構文を示しています。</p>

<p>次に、当然の流れとして、プログラムをビルドして実行することを考えます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cargo build
</code></pre></div></div>

<p>エラー: <code class="language-plaintext highlighter-rouge">/Users/lzw/ideas/curious-courses/program/run/rust</code> またはその親ディレクトリ内に <code class="language-plaintext highlighter-rouge">Cargo.toml</code> が見つかりませんでした</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
エラーが発生しました。なぜでしょうか。これは、cargoがプロジェクトのディレクトリ内でのみ実行できることを示しています。次に、サブディレクトリに移動し、`cd hello-rust`を実行しました。

この時、もし直接実行したらどうなるかと考えます。

```shell
$ cargo run
   
   Compiling hello-rust v0.1.0 (/Users/lzw/ideas/curious-courses/program/run/rust/hello-rust)
    Finished dev [unoptimized + debuginfo] target(s) in 4.43s
     Running `target/debug/hello-rust`
Hello, world!
</code></pre></div></div>

<p>このコードは、Rustのプロジェクトをコンパイルして実行するためのコマンドとその結果を示しています。<code class="language-plaintext highlighter-rouge">cargo run</code>コマンドを使用して、Rustのプロジェクトをビルドし、実行しています。ビルドが成功すると、<code class="language-plaintext highlighter-rouge">Hello, world!</code>というメッセージが表示されます。</p>

<p>よし、成功だ。文字列が出力され、プログラムが動き始めた。</p>

<p>プログラムを変更してみます。</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>このRustのコードは、<code class="language-plaintext highlighter-rouge">main</code>関数内で<code class="language-plaintext highlighter-rouge">println!</code>マクロを使用して、<code class="language-plaintext highlighter-rouge">2 + 3</code>の結果を出力しようとしています。しかし、このコードにはいくつかの問題があります。</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">println!</code>マクロはフォーマット文字列を必要とします。単に<code class="language-plaintext highlighter-rouge">2 + 3</code>を渡すと、コンパイルエラーになります。</li>
  <li><code class="language-plaintext highlighter-rouge">2 + 3</code>の結果を出力するためには、フォーマット文字列内でプレースホルダーを使用する必要があります。</li>
</ol>

<p>正しいコードは以下のようになります：</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>このコードでは、<code class="language-plaintext highlighter-rouge">println!</code>マクロにフォーマット文字列<code class="language-plaintext highlighter-rouge">"{}"</code>を渡し、その中に<code class="language-plaintext highlighter-rouge">2 + 3</code>の結果を埋め込んでいます。これにより、<code class="language-plaintext highlighter-rouge">5</code>が出力されます。</p>

<p><code class="language-plaintext highlighter-rouge">cargo run</code>を実行した後、以下のようなエラーが発生しました：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Compiling hello-rust v0.1.0 <span class="o">(</span>/Users/lzw/ideas/curious-courses/program/run/rust/hello-rust<span class="o">)</span>
エラー: フォーマット引数は文字列リテラルでなければなりません
 <span class="nt">--</span><span class="o">&gt;</span> src/main.rs:2:14
  |
2 |     println!<span class="o">(</span>2+3<span class="o">)</span><span class="p">;</span>
  |              ^^^
  |
ヘルプ: フォーマットするための文字列リテラルが不足している可能性があります
  |
2 |     println!<span class="o">(</span><span class="s2">"{}"</span>, 2+3<span class="o">)</span><span class="p">;</span>
  |              ^^^^^
</code></pre></div></div>

<p>エラー: 以前のエラーのため中断しています</p>

<p>エラー: <code class="language-plaintext highlighter-rouge">hello-rust</code> をコンパイルできませんでした</p>

<p>詳細を確認するには、<code class="language-plaintext highlighter-rouge">--verbose</code> オプションを付けて再度コマンドを実行してください。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
まだRustの文法を学んでいません。私たちの直感に従ってコードを変更したところ、エラーが発生しました。このエラーメッセージはとても親切で、どう修正すべきかを教えてくれています。

```rust
fn main() {
    println!("{}", 2+3);
}
</code></pre></div></div>

<p>このRustのコードは、<code class="language-plaintext highlighter-rouge">main</code>関数内で<code class="language-plaintext highlighter-rouge">println!</code>マクロを使用して、<code class="language-plaintext highlighter-rouge">2 + 3</code>の結果を出力します。具体的には、<code class="language-plaintext highlighter-rouge">2 + 3</code>の計算結果である<code class="language-plaintext highlighter-rouge">5</code>が出力されます。</p>

<p>今度は正しく修正され、確かに5が出力されました。</p>

<p>そうだ、buildはどうなるんだろう。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cargo build
    Finished dev <span class="o">[</span>unoptimized + debuginfo] target<span class="o">(</span>s<span class="o">)</span> <span class="k">in </span>0.00s
</code></pre></div></div>

<p>（注：このコードブロックはコマンドの実行結果を示しており、翻訳の必要はありません。）</p>

<p>なぜbuildが必要なのでしょうか。それは、単に実行可能なプログラムを生成したいだけで、実際に実行したくない場合があるからです。特に大規模なプログラムの場合、実行には時間がかかることがあります。また、ローカルで生成した後、リモートサーバーに転送して実行したい場合もあるでしょう。</p>

<p>私たちはすでにRustプログラムを実行することができました。次に、Rust言語のより多くの構文に慣れ親しむことで、「コンピュータサイエンスの謎解き」で説明した変数、関数、関数呼び出し、式などの概念に対応するRustのシンボル表現を見つけ出します。</p>

<hr />

<h5 id="小练习">小练习</h5>

<ul>
  <li>上記のように、学生が自分のコンピュータでRustプログラミングを試してみる。</li>
  <li>練習が終わったら、100字以内の要約またはこの記事への補足を提出することができる。</li>
</ul>

<hr />


  <hr>

  <div class="button-container">
    <a href="/" class="button left-button">Back</a>


    

    
    
    <a href="/donate-ja" class="button right-button">Donate</a>
  </div>
</main>

<script src="/assets/js/dark-mode.js"></script>
<script src="/assets/js/audio.js" defer></script>
<script src="/assets/js/pdf.js" defer></script>
<script>
    document.getElementById('languageSelect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue) {
            window.location.href = selectedValue;
        }
    });
</script>

</body>

</html>
